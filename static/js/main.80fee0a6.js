/*! For license information please see main.80fee0a6.js.LICENSE.txt */
!function(){"use strict";var e={463:function(e,t,n){var r=n(791),i=n(296);function a(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=new Set,u={};function s(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(u[e]=t,e=0;e<t.length;e++)o.add(t[e])}var l=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),f=Object.prototype.hasOwnProperty,h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,d={},p={};function v(e,t,n,r,i,a,o){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=a,this.removeEmptyString=o}var y={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){y[e]=new v(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];y[t]=new v(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){y[e]=new v(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){y[e]=new v(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){y[e]=new v(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){y[e]=new v(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){y[e]=new v(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){y[e]=new v(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){y[e]=new v(e,5,!1,e.toLowerCase(),null,!1,!1)}));var m=/[\-:]([a-z])/g;function g(e){return e[1].toUpperCase()}function k(e,t,n,r){var i=y.hasOwnProperty(t)?y[t]:null;(null!==i?0!==i.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!f.call(p,e)||!f.call(d,e)&&(h.test(e)?p[e]=!0:(d[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(m,g);y[t]=new v(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(m,g);y[t]=new v(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(m,g);y[t]=new v(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){y[e]=new v(e,1,!1,e.toLowerCase(),null,!1,!1)})),y.xlinkHref=new v("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){y[e]=new v(e,1,!1,e.toLowerCase(),null,!0,!0)}));var b=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,w=Symbol.for("react.element"),x=Symbol.for("react.portal"),_=Symbol.for("react.fragment"),I=Symbol.for("react.strict_mode"),S=Symbol.for("react.profiler"),E=Symbol.for("react.provider"),T=Symbol.for("react.context"),C=Symbol.for("react.forward_ref"),N=Symbol.for("react.suspense"),A=Symbol.for("react.suspense_list"),D=Symbol.for("react.memo"),R=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var P=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var O=Symbol.iterator;function L(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=O&&e[O]||e["@@iterator"])?e:null}var M,F=Object.assign;function U(e){if(void 0===M)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);M=t&&t[1]||""}return"\n"+M+e}var V=!1;function j(e,t){if(!e||V)return"";V=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var r=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){r=c}e.call(t.prototype)}else{try{throw Error()}catch(c){r=c}e()}}catch(c){if(c&&r&&"string"===typeof c.stack){for(var i=c.stack.split("\n"),a=r.stack.split("\n"),o=i.length-1,u=a.length-1;1<=o&&0<=u&&i[o]!==a[u];)u--;for(;1<=o&&0<=u;o--,u--)if(i[o]!==a[u]){if(1!==o||1!==u)do{if(o--,0>--u||i[o]!==a[u]){var s="\n"+i[o].replace(" at new "," at ");return e.displayName&&s.includes("<anonymous>")&&(s=s.replace("<anonymous>",e.displayName)),s}}while(1<=o&&0<=u);break}}}finally{V=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?U(e):""}function B(e){switch(e.tag){case 5:return U(e.type);case 16:return U("Lazy");case 13:return U("Suspense");case 19:return U("SuspenseList");case 0:case 2:case 15:return e=j(e.type,!1);case 11:return e=j(e.type.render,!1);case 1:return e=j(e.type,!0);default:return""}}function q(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case _:return"Fragment";case x:return"Portal";case S:return"Profiler";case I:return"StrictMode";case N:return"Suspense";case A:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case T:return(e.displayName||"Context")+".Consumer";case E:return(e._context.displayName||"Context")+".Provider";case C:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case D:return null!==(t=e.displayName||null)?t:q(e.type)||"Memo";case R:t=e._payload,e=e._init;try{return q(e(t))}catch(n){}}return null}function z(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return q(t);case 8:return t===I?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function K(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function G(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function W(e){e._valueTracker||(e._valueTracker=function(e){var t=G(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,a=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,a.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function H(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=G(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function Q(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function Y(e,t){var n=t.checked;return F({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function $(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=K(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function X(e,t){null!=(t=t.checked)&&k(e,"checked",t,!1)}function J(e,t){X(e,t);var n=K(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,K(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Z(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&Q(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+K(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(a(91));return F({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ie(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(a(92));if(te(n)){if(1<n.length)throw Error(a(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:K(n)}}function ae(e,t){var n=K(t.value),r=K(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function oe(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function ue(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function se(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?ue(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ce,le,fe=(le=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ce=ce||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ce.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return le(e,t)}))}:le);function he(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var de={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pe=["Webkit","ms","Moz","O"];function ve(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||de.hasOwnProperty(e)&&de[e]?(""+t).trim():t+"px"}function ye(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=ve(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(de).forEach((function(e){pe.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),de[t]=de[e]}))}));var me=F({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ge(e,t){if(t){if(me[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(a(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(a(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(a(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(a(62))}}function ke(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var be=null;function we(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var xe=null,_e=null,Ie=null;function Se(e){if(e=ki(e)){if("function"!==typeof xe)throw Error(a(280));var t=e.stateNode;t&&(t=wi(t),xe(e.stateNode,e.type,t))}}function Ee(e){_e?Ie?Ie.push(e):Ie=[e]:_e=e}function Te(){if(_e){var e=_e,t=Ie;if(Ie=_e=null,Se(e),t)for(e=0;e<t.length;e++)Se(t[e])}}function Ce(e,t){return e(t)}function Ne(){}var Ae=!1;function De(e,t,n){if(Ae)return e(t,n);Ae=!0;try{return Ce(e,t,n)}finally{Ae=!1,(null!==_e||null!==Ie)&&(Ne(),Te())}}function Re(e,t){var n=e.stateNode;if(null===n)return null;var r=wi(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(a(231,t,typeof n));return n}var Pe=!1;if(l)try{var Oe={};Object.defineProperty(Oe,"passive",{get:function(){Pe=!0}}),window.addEventListener("test",Oe,Oe),window.removeEventListener("test",Oe,Oe)}catch(le){Pe=!1}function Le(e,t,n,r,i,a,o,u,s){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(l){this.onError(l)}}var Me=!1,Fe=null,Ue=!1,Ve=null,je={onError:function(e){Me=!0,Fe=e}};function Be(e,t,n,r,i,a,o,u,s){Me=!1,Fe=null,Le.apply(je,arguments)}function qe(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function ze(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function Ke(e){if(qe(e)!==e)throw Error(a(188))}function Ge(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=qe(e)))throw Error(a(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var o=i.alternate;if(null===o){if(null!==(r=i.return)){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return Ke(i),e;if(o===r)return Ke(i),t;o=o.sibling}throw Error(a(188))}if(n.return!==r.return)n=i,r=o;else{for(var u=!1,s=i.child;s;){if(s===n){u=!0,n=i,r=o;break}if(s===r){u=!0,r=i,n=o;break}s=s.sibling}if(!u){for(s=o.child;s;){if(s===n){u=!0,n=o,r=i;break}if(s===r){u=!0,r=o,n=i;break}s=s.sibling}if(!u)throw Error(a(189))}}if(n.alternate!==r)throw Error(a(190))}if(3!==n.tag)throw Error(a(188));return n.stateNode.current===n?e:t}(e))?We(e):null}function We(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=We(e);if(null!==t)return t;e=e.sibling}return null}var He=i.unstable_scheduleCallback,Qe=i.unstable_cancelCallback,Ye=i.unstable_shouldYield,$e=i.unstable_requestPaint,Xe=i.unstable_now,Je=i.unstable_getCurrentPriorityLevel,Ze=i.unstable_ImmediatePriority,et=i.unstable_UserBlockingPriority,tt=i.unstable_NormalPriority,nt=i.unstable_LowPriority,rt=i.unstable_IdlePriority,it=null,at=null;var ot=Math.clz32?Math.clz32:function(e){return 0===(e>>>=0)?32:31-(ut(e)/st|0)|0},ut=Math.log,st=Math.LN2;var ct=64,lt=4194304;function ft(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ht(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,i=e.suspendedLanes,a=e.pingedLanes,o=268435455&n;if(0!==o){var u=o&~i;0!==u?r=ft(u):0!==(a&=o)&&(r=ft(a))}else 0!==(o=n&~i)?r=ft(o):0!==a&&(r=ft(a));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&i)&&((i=r&-r)>=(a=t&-t)||16===i&&0!==(4194240&a)))return t;if(0!==(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-ot(t)),r|=e[n],t&=~i;return r}function dt(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function pt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function vt(){var e=ct;return 0===(4194240&(ct<<=1))&&(ct=64),e}function yt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function mt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-ot(t)]=n}function gt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-ot(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var kt=0;function bt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var wt,xt,_t,It,St,Et=!1,Tt=[],Ct=null,Nt=null,At=null,Dt=new Map,Rt=new Map,Pt=[],Ot="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Lt(e,t){switch(e){case"focusin":case"focusout":Ct=null;break;case"dragenter":case"dragleave":Nt=null;break;case"mouseover":case"mouseout":At=null;break;case"pointerover":case"pointerout":Dt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Rt.delete(t.pointerId)}}function Mt(e,t,n,r,i,a){return null===e||e.nativeEvent!==a?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:a,targetContainers:[i]},null!==t&&(null!==(t=ki(t))&&xt(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function Ft(e){var t=gi(e.target);if(null!==t){var n=qe(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=ze(n)))return e.blockedOn=t,void St(e.priority,(function(){_t(n)}))}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Ut(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Yt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=ki(n))&&xt(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);be=r,n.target.dispatchEvent(r),be=null,t.shift()}return!0}function Vt(e,t,n){Ut(e)&&n.delete(t)}function jt(){Et=!1,null!==Ct&&Ut(Ct)&&(Ct=null),null!==Nt&&Ut(Nt)&&(Nt=null),null!==At&&Ut(At)&&(At=null),Dt.forEach(Vt),Rt.forEach(Vt)}function Bt(e,t){e.blockedOn===t&&(e.blockedOn=null,Et||(Et=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,jt)))}function qt(e){function t(t){return Bt(t,e)}if(0<Tt.length){Bt(Tt[0],e);for(var n=1;n<Tt.length;n++){var r=Tt[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==Ct&&Bt(Ct,e),null!==Nt&&Bt(Nt,e),null!==At&&Bt(At,e),Dt.forEach(t),Rt.forEach(t),n=0;n<Pt.length;n++)(r=Pt[n]).blockedOn===e&&(r.blockedOn=null);for(;0<Pt.length&&null===(n=Pt[0]).blockedOn;)Ft(n),null===n.blockedOn&&Pt.shift()}var zt=b.ReactCurrentBatchConfig,Kt=!0;function Gt(e,t,n,r){var i=kt,a=zt.transition;zt.transition=null;try{kt=1,Ht(e,t,n,r)}finally{kt=i,zt.transition=a}}function Wt(e,t,n,r){var i=kt,a=zt.transition;zt.transition=null;try{kt=4,Ht(e,t,n,r)}finally{kt=i,zt.transition=a}}function Ht(e,t,n,r){if(Kt){var i=Yt(e,t,n,r);if(null===i)Kr(e,t,r,Qt,n),Lt(e,r);else if(function(e,t,n,r,i){switch(t){case"focusin":return Ct=Mt(Ct,e,t,n,r,i),!0;case"dragenter":return Nt=Mt(Nt,e,t,n,r,i),!0;case"mouseover":return At=Mt(At,e,t,n,r,i),!0;case"pointerover":var a=i.pointerId;return Dt.set(a,Mt(Dt.get(a)||null,e,t,n,r,i)),!0;case"gotpointercapture":return a=i.pointerId,Rt.set(a,Mt(Rt.get(a)||null,e,t,n,r,i)),!0}return!1}(i,e,t,n,r))r.stopPropagation();else if(Lt(e,r),4&t&&-1<Ot.indexOf(e)){for(;null!==i;){var a=ki(i);if(null!==a&&wt(a),null===(a=Yt(e,t,n,r))&&Kr(e,t,r,Qt,n),a===i)break;i=a}null!==i&&r.stopPropagation()}else Kr(e,t,r,null,n)}}var Qt=null;function Yt(e,t,n,r){if(Qt=null,null!==(e=gi(e=we(r))))if(null===(t=qe(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=ze(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Qt=e,null}function $t(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Je()){case Ze:return 1;case et:return 4;case tt:case nt:return 16;case rt:return 536870912;default:return 16}default:return 16}}var Xt=null,Jt=null,Zt=null;function en(){if(Zt)return Zt;var e,t,n=Jt,r=n.length,i="value"in Xt?Xt.value:Xt.textContent,a=i.length;for(e=0;e<r&&n[e]===i[e];e++);var o=r-e;for(t=1;t<=o&&n[r-t]===i[a-t];t++);return Zt=i.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function rn(){return!1}function an(e){function t(t,n,r,i,a){for(var o in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=a,this.currentTarget=null,e)e.hasOwnProperty(o)&&(t=e[o],this[o]=t?t(i):i[o]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return F(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var on,un,sn,cn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ln=an(cn),fn=F({},cn,{view:0,detail:0}),hn=an(fn),dn=F({},fn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Sn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==sn&&(sn&&"mousemove"===e.type?(on=e.screenX-sn.screenX,un=e.screenY-sn.screenY):un=on=0,sn=e),on)},movementY:function(e){return"movementY"in e?e.movementY:un}}),pn=an(dn),vn=an(F({},dn,{dataTransfer:0})),yn=an(F({},fn,{relatedTarget:0})),mn=an(F({},cn,{animationName:0,elapsedTime:0,pseudoElement:0})),gn=F({},cn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),kn=an(gn),bn=an(F({},cn,{data:0})),wn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},xn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},_n={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function In(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=_n[e])&&!!t[e]}function Sn(){return In}var En=F({},fn,{key:function(e){if(e.key){var t=wn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?xn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Sn,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Tn=an(En),Cn=an(F({},dn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Nn=an(F({},fn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Sn})),An=an(F({},cn,{propertyName:0,elapsedTime:0,pseudoElement:0})),Dn=F({},dn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Rn=an(Dn),Pn=[9,13,27,32],On=l&&"CompositionEvent"in window,Ln=null;l&&"documentMode"in document&&(Ln=document.documentMode);var Mn=l&&"TextEvent"in window&&!Ln,Fn=l&&(!On||Ln&&8<Ln&&11>=Ln),Un=String.fromCharCode(32),Vn=!1;function jn(e,t){switch(e){case"keyup":return-1!==Pn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Bn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var qn=!1;var zn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Kn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!zn[e.type]:"textarea"===t}function Gn(e,t,n,r){Ee(r),0<(t=Wr(t,"onChange")).length&&(n=new ln("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Wn=null,Hn=null;function Qn(e){Ur(e,0)}function Yn(e){if(H(bi(e)))return e}function $n(e,t){if("change"===e)return t}var Xn=!1;if(l){var Jn;if(l){var Zn="oninput"in document;if(!Zn){var er=document.createElement("div");er.setAttribute("oninput","return;"),Zn="function"===typeof er.oninput}Jn=Zn}else Jn=!1;Xn=Jn&&(!document.documentMode||9<document.documentMode)}function tr(){Wn&&(Wn.detachEvent("onpropertychange",nr),Hn=Wn=null)}function nr(e){if("value"===e.propertyName&&Yn(Hn)){var t=[];Gn(t,Hn,e,we(e)),De(Qn,t)}}function rr(e,t,n){"focusin"===e?(tr(),Hn=n,(Wn=t).attachEvent("onpropertychange",nr)):"focusout"===e&&tr()}function ir(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Yn(Hn)}function ar(e,t){if("click"===e)return Yn(t)}function or(e,t){if("input"===e||"change"===e)return Yn(t)}var ur="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function sr(e,t){if(ur(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!f.call(t,i)||!ur(e[i],t[i]))return!1}return!0}function cr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function lr(e,t){var n,r=cr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=cr(r)}}function fr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?fr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function hr(){for(var e=window,t=Q();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=Q((e=t.contentWindow).document)}return t}function dr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function pr(e){var t=hr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&fr(n.ownerDocument.documentElement,n)){if(null!==r&&dr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var i=n.textContent.length,a=Math.min(r.start,i);r=void 0===r.end?a:Math.min(r.end,i),!e.extend&&a>r&&(i=r,r=a,a=i),i=lr(n,a);var o=lr(n,r);i&&o&&(1!==e.rangeCount||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&((t=t.createRange()).setStart(i.node,i.offset),e.removeAllRanges(),a>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var vr=l&&"documentMode"in document&&11>=document.documentMode,yr=null,mr=null,gr=null,kr=!1;function br(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;kr||null==yr||yr!==Q(r)||("selectionStart"in(r=yr)&&dr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},gr&&sr(gr,r)||(gr=r,0<(r=Wr(mr,"onSelect")).length&&(t=new ln("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=yr)))}function wr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var xr={animationend:wr("Animation","AnimationEnd"),animationiteration:wr("Animation","AnimationIteration"),animationstart:wr("Animation","AnimationStart"),transitionend:wr("Transition","TransitionEnd")},_r={},Ir={};function Sr(e){if(_r[e])return _r[e];if(!xr[e])return e;var t,n=xr[e];for(t in n)if(n.hasOwnProperty(t)&&t in Ir)return _r[e]=n[t];return e}l&&(Ir=document.createElement("div").style,"AnimationEvent"in window||(delete xr.animationend.animation,delete xr.animationiteration.animation,delete xr.animationstart.animation),"TransitionEvent"in window||delete xr.transitionend.transition);var Er=Sr("animationend"),Tr=Sr("animationiteration"),Cr=Sr("animationstart"),Nr=Sr("transitionend"),Ar=new Map,Dr="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Rr(e,t){Ar.set(e,t),s(t,[e])}for(var Pr=0;Pr<Dr.length;Pr++){var Or=Dr[Pr];Rr(Or.toLowerCase(),"on"+(Or[0].toUpperCase()+Or.slice(1)))}Rr(Er,"onAnimationEnd"),Rr(Tr,"onAnimationIteration"),Rr(Cr,"onAnimationStart"),Rr("dblclick","onDoubleClick"),Rr("focusin","onFocus"),Rr("focusout","onBlur"),Rr(Nr,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),s("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),s("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),s("onBeforeInput",["compositionend","keypress","textInput","paste"]),s("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Lr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Mr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Lr));function Fr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,i,o,u,s,c){if(Be.apply(this,arguments),Me){if(!Me)throw Error(a(198));var l=Fe;Me=!1,Fe=null,Ue||(Ue=!0,Ve=l)}}(r,t,void 0,e),e.currentTarget=null}function Ur(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var a=void 0;if(t)for(var o=r.length-1;0<=o;o--){var u=r[o],s=u.instance,c=u.currentTarget;if(u=u.listener,s!==a&&i.isPropagationStopped())break e;Fr(i,u,c),a=s}else for(o=0;o<r.length;o++){if(s=(u=r[o]).instance,c=u.currentTarget,u=u.listener,s!==a&&i.isPropagationStopped())break e;Fr(i,u,c),a=s}}}if(Ue)throw e=Ve,Ue=!1,Ve=null,e}function Vr(e,t){var n=t[vi];void 0===n&&(n=t[vi]=new Set);var r=e+"__bubble";n.has(r)||(zr(t,e,2,!1),n.add(r))}function jr(e,t,n){var r=0;t&&(r|=4),zr(n,e,r,t)}var Br="_reactListening"+Math.random().toString(36).slice(2);function qr(e){if(!e[Br]){e[Br]=!0,o.forEach((function(t){"selectionchange"!==t&&(Mr.has(t)||jr(t,!1,e),jr(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Br]||(t[Br]=!0,jr("selectionchange",!1,t))}}function zr(e,t,n,r){switch($t(t)){case 1:var i=Gt;break;case 4:i=Wt;break;default:i=Ht}n=i.bind(null,t,n,e),i=void 0,!Pe||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Kr(e,t,n,r,i){var a=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var o=r.tag;if(3===o||4===o){var u=r.stateNode.containerInfo;if(u===i||8===u.nodeType&&u.parentNode===i)break;if(4===o)for(o=r.return;null!==o;){var s=o.tag;if((3===s||4===s)&&((s=o.stateNode.containerInfo)===i||8===s.nodeType&&s.parentNode===i))return;o=o.return}for(;null!==u;){if(null===(o=gi(u)))return;if(5===(s=o.tag)||6===s){r=a=o;continue e}u=u.parentNode}}r=r.return}De((function(){var r=a,i=we(n),o=[];e:{var u=Ar.get(e);if(void 0!==u){var s=ln,c=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":s=Tn;break;case"focusin":c="focus",s=yn;break;case"focusout":c="blur",s=yn;break;case"beforeblur":case"afterblur":s=yn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":s=pn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":s=vn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":s=Nn;break;case Er:case Tr:case Cr:s=mn;break;case Nr:s=An;break;case"scroll":s=hn;break;case"wheel":s=Rn;break;case"copy":case"cut":case"paste":s=kn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":s=Cn}var l=0!==(4&t),f=!l&&"scroll"===e,h=l?null!==u?u+"Capture":null:u;l=[];for(var d,p=r;null!==p;){var v=(d=p).stateNode;if(5===d.tag&&null!==v&&(d=v,null!==h&&(null!=(v=Re(p,h))&&l.push(Gr(p,v,d)))),f)break;p=p.return}0<l.length&&(u=new s(u,c,null,n,i),o.push({event:u,listeners:l}))}}if(0===(7&t)){if(s="mouseout"===e||"pointerout"===e,(!(u="mouseover"===e||"pointerover"===e)||n===be||!(c=n.relatedTarget||n.fromElement)||!gi(c)&&!c[pi])&&(s||u)&&(u=i.window===i?i:(u=i.ownerDocument)?u.defaultView||u.parentWindow:window,s?(s=r,null!==(c=(c=n.relatedTarget||n.toElement)?gi(c):null)&&(c!==(f=qe(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(s=null,c=r),s!==c)){if(l=pn,v="onMouseLeave",h="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(l=Cn,v="onPointerLeave",h="onPointerEnter",p="pointer"),f=null==s?u:bi(s),d=null==c?u:bi(c),(u=new l(v,p+"leave",s,n,i)).target=f,u.relatedTarget=d,v=null,gi(i)===r&&((l=new l(h,p+"enter",c,n,i)).target=d,l.relatedTarget=f,v=l),f=v,s&&c)e:{for(h=c,p=0,d=l=s;d;d=Hr(d))p++;for(d=0,v=h;v;v=Hr(v))d++;for(;0<p-d;)l=Hr(l),p--;for(;0<d-p;)h=Hr(h),d--;for(;p--;){if(l===h||null!==h&&l===h.alternate)break e;l=Hr(l),h=Hr(h)}l=null}else l=null;null!==s&&Qr(o,u,s,l,!1),null!==c&&null!==f&&Qr(o,f,c,l,!0)}if("select"===(s=(u=r?bi(r):window).nodeName&&u.nodeName.toLowerCase())||"input"===s&&"file"===u.type)var y=$n;else if(Kn(u))if(Xn)y=or;else{y=ir;var m=rr}else(s=u.nodeName)&&"input"===s.toLowerCase()&&("checkbox"===u.type||"radio"===u.type)&&(y=ar);switch(y&&(y=y(e,r))?Gn(o,y,n,i):(m&&m(e,u,r),"focusout"===e&&(m=u._wrapperState)&&m.controlled&&"number"===u.type&&ee(u,"number",u.value)),m=r?bi(r):window,e){case"focusin":(Kn(m)||"true"===m.contentEditable)&&(yr=m,mr=r,gr=null);break;case"focusout":gr=mr=yr=null;break;case"mousedown":kr=!0;break;case"contextmenu":case"mouseup":case"dragend":kr=!1,br(o,n,i);break;case"selectionchange":if(vr)break;case"keydown":case"keyup":br(o,n,i)}var g;if(On)e:{switch(e){case"compositionstart":var k="onCompositionStart";break e;case"compositionend":k="onCompositionEnd";break e;case"compositionupdate":k="onCompositionUpdate";break e}k=void 0}else qn?jn(e,n)&&(k="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(k="onCompositionStart");k&&(Fn&&"ko"!==n.locale&&(qn||"onCompositionStart"!==k?"onCompositionEnd"===k&&qn&&(g=en()):(Jt="value"in(Xt=i)?Xt.value:Xt.textContent,qn=!0)),0<(m=Wr(r,k)).length&&(k=new bn(k,e,null,n,i),o.push({event:k,listeners:m}),g?k.data=g:null!==(g=Bn(n))&&(k.data=g))),(g=Mn?function(e,t){switch(e){case"compositionend":return Bn(t);case"keypress":return 32!==t.which?null:(Vn=!0,Un);case"textInput":return(e=t.data)===Un&&Vn?null:e;default:return null}}(e,n):function(e,t){if(qn)return"compositionend"===e||!On&&jn(e,t)?(e=en(),Zt=Jt=Xt=null,qn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Fn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Wr(r,"onBeforeInput")).length&&(i=new bn("onBeforeInput","beforeinput",null,n,i),o.push({event:i,listeners:r}),i.data=g))}Ur(o,t)}))}function Gr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Wr(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,a=i.stateNode;5===i.tag&&null!==a&&(i=a,null!=(a=Re(e,n))&&r.unshift(Gr(e,a,i)),null!=(a=Re(e,t))&&r.push(Gr(e,a,i))),e=e.return}return r}function Hr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Qr(e,t,n,r,i){for(var a=t._reactName,o=[];null!==n&&n!==r;){var u=n,s=u.alternate,c=u.stateNode;if(null!==s&&s===r)break;5===u.tag&&null!==c&&(u=c,i?null!=(s=Re(n,a))&&o.unshift(Gr(n,s,u)):i||null!=(s=Re(n,a))&&o.push(Gr(n,s,u))),n=n.return}0!==o.length&&e.push({event:t,listeners:o})}var Yr=/\r\n?/g,$r=/\u0000|\uFFFD/g;function Xr(e){return("string"===typeof e?e:""+e).replace(Yr,"\n").replace($r,"")}function Jr(e,t,n){if(t=Xr(t),Xr(e)!==t&&n)throw Error(a(425))}function Zr(){}var ei=null,ti=null;function ni(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ri="function"===typeof setTimeout?setTimeout:void 0,ii="function"===typeof clearTimeout?clearTimeout:void 0,ai="function"===typeof Promise?Promise:void 0,oi="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof ai?function(e){return ai.resolve(null).then(e).catch(ui)}:ri;function ui(e){setTimeout((function(){throw e}))}function si(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&8===i.nodeType)if("/$"===(n=i.data)){if(0===r)return e.removeChild(i),void qt(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=i}while(n);qt(t)}function ci(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function li(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var fi=Math.random().toString(36).slice(2),hi="__reactFiber$"+fi,di="__reactProps$"+fi,pi="__reactContainer$"+fi,vi="__reactEvents$"+fi,yi="__reactListeners$"+fi,mi="__reactHandles$"+fi;function gi(e){var t=e[hi];if(t)return t;for(var n=e.parentNode;n;){if(t=n[pi]||n[hi]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=li(e);null!==e;){if(n=e[hi])return n;e=li(e)}return t}n=(e=n).parentNode}return null}function ki(e){return!(e=e[hi]||e[pi])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function bi(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(a(33))}function wi(e){return e[di]||null}var xi=[],_i=-1;function Ii(e){return{current:e}}function Si(e){0>_i||(e.current=xi[_i],xi[_i]=null,_i--)}function Ei(e,t){_i++,xi[_i]=e.current,e.current=t}var Ti={},Ci=Ii(Ti),Ni=Ii(!1),Ai=Ti;function Di(e,t){var n=e.type.contextTypes;if(!n)return Ti;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,a={};for(i in n)a[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function Ri(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Pi(){Si(Ni),Si(Ci)}function Oi(e,t,n){if(Ci.current!==Ti)throw Error(a(168));Ei(Ci,t),Ei(Ni,n)}function Li(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var i in r=r.getChildContext())if(!(i in t))throw Error(a(108,z(e)||"Unknown",i));return F({},n,r)}function Mi(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ti,Ai=Ci.current,Ei(Ci,e),Ei(Ni,Ni.current),!0}function Fi(e,t,n){var r=e.stateNode;if(!r)throw Error(a(169));n?(e=Li(e,t,Ai),r.__reactInternalMemoizedMergedChildContext=e,Si(Ni),Si(Ci),Ei(Ci,e)):Si(Ni),Ei(Ni,n)}var Ui=null,Vi=!1,ji=!1;function Bi(e){null===Ui?Ui=[e]:Ui.push(e)}function qi(){if(!ji&&null!==Ui){ji=!0;var e=0,t=kt;try{var n=Ui;for(kt=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}Ui=null,Vi=!1}catch(i){throw null!==Ui&&(Ui=Ui.slice(e+1)),He(Ze,qi),i}finally{kt=t,ji=!1}}return null}var zi=[],Ki=0,Gi=null,Wi=0,Hi=[],Qi=0,Yi=null,$i=1,Xi="";function Ji(e,t){zi[Ki++]=Wi,zi[Ki++]=Gi,Gi=e,Wi=t}function Zi(e,t,n){Hi[Qi++]=$i,Hi[Qi++]=Xi,Hi[Qi++]=Yi,Yi=e;var r=$i;e=Xi;var i=32-ot(r)-1;r&=~(1<<i),n+=1;var a=32-ot(t)+i;if(30<a){var o=i-i%5;a=(r&(1<<o)-1).toString(32),r>>=o,i-=o,$i=1<<32-ot(t)+i|n<<i|r,Xi=a+e}else $i=1<<a|n<<i|r,Xi=e}function ea(e){null!==e.return&&(Ji(e,1),Zi(e,1,0))}function ta(e){for(;e===Gi;)Gi=zi[--Ki],zi[Ki]=null,Wi=zi[--Ki],zi[Ki]=null;for(;e===Yi;)Yi=Hi[--Qi],Hi[Qi]=null,Xi=Hi[--Qi],Hi[Qi]=null,$i=Hi[--Qi],Hi[Qi]=null}var na=null,ra=null,ia=!1,aa=null;function oa(e,t){var n=Dc(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function ua(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,na=e,ra=ci(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,na=e,ra=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==Yi?{id:$i,overflow:Xi}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Dc(18,null,null,0)).stateNode=t,n.return=e,e.child=n,na=e,ra=null,!0);default:return!1}}function sa(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function ca(e){if(ia){var t=ra;if(t){var n=t;if(!ua(e,t)){if(sa(e))throw Error(a(418));t=ci(n.nextSibling);var r=na;t&&ua(e,t)?oa(r,n):(e.flags=-4097&e.flags|2,ia=!1,na=e)}}else{if(sa(e))throw Error(a(418));e.flags=-4097&e.flags|2,ia=!1,na=e}}}function la(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;na=e}function fa(e){if(e!==na)return!1;if(!ia)return la(e),ia=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!ni(e.type,e.memoizedProps)),t&&(t=ra)){if(sa(e))throw ha(),Error(a(418));for(;t;)oa(e,t),t=ci(t.nextSibling)}if(la(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(a(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){ra=ci(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}ra=null}}else ra=na?ci(e.stateNode.nextSibling):null;return!0}function ha(){for(var e=ra;e;)e=ci(e.nextSibling)}function da(){ra=na=null,ia=!1}function pa(e){null===aa?aa=[e]:aa.push(e)}var va=b.ReactCurrentBatchConfig;function ya(e,t){if(e&&e.defaultProps){for(var n in t=F({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}var ma=Ii(null),ga=null,ka=null,ba=null;function wa(){ba=ka=ga=null}function xa(e){var t=ma.current;Si(ma),e._currentValue=t}function _a(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Ia(e,t){ga=e,ba=ka=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(bu=!0),e.firstContext=null)}function Sa(e){var t=e._currentValue;if(ba!==e)if(e={context:e,memoizedValue:t,next:null},null===ka){if(null===ga)throw Error(a(308));ka=e,ga.dependencies={lanes:0,firstContext:e}}else ka=ka.next=e;return t}var Ea=null;function Ta(e){null===Ea?Ea=[e]:Ea.push(e)}function Ca(e,t,n,r){var i=t.interleaved;return null===i?(n.next=n,Ta(t)):(n.next=i.next,i.next=n),t.interleaved=n,Na(e,r)}function Na(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var Aa=!1;function Da(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Ra(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Pa(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Oa(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&Cs)){var i=r.pending;return null===i?t.next=t:(t.next=i.next,i.next=t),r.pending=t,Na(e,n)}return null===(i=r.interleaved)?(t.next=t,Ta(r)):(t.next=i.next,i.next=t),r.interleaved=t,Na(e,n)}function La(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,gt(e,n)}}function Ma(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,a=null;if(null!==(n=n.firstBaseUpdate)){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===a?i=a=o:a=a.next=o,n=n.next}while(null!==n);null===a?i=a=t:a=a.next=t}else i=a=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:a,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Fa(e,t,n,r){var i=e.updateQueue;Aa=!1;var a=i.firstBaseUpdate,o=i.lastBaseUpdate,u=i.shared.pending;if(null!==u){i.shared.pending=null;var s=u,c=s.next;s.next=null,null===o?a=c:o.next=c,o=s;var l=e.alternate;null!==l&&((u=(l=l.updateQueue).lastBaseUpdate)!==o&&(null===u?l.firstBaseUpdate=c:u.next=c,l.lastBaseUpdate=s))}if(null!==a){var f=i.baseState;for(o=0,l=c=s=null,u=a;;){var h=u.lane,d=u.eventTime;if((r&h)===h){null!==l&&(l=l.next={eventTime:d,lane:0,tag:u.tag,payload:u.payload,callback:u.callback,next:null});e:{var p=e,v=u;switch(h=t,d=n,v.tag){case 1:if("function"===typeof(p=v.payload)){f=p.call(d,f,h);break e}f=p;break e;case 3:p.flags=-65537&p.flags|128;case 0:if(null===(h="function"===typeof(p=v.payload)?p.call(d,f,h):p)||void 0===h)break e;f=F({},f,h);break e;case 2:Aa=!0}}null!==u.callback&&0!==u.lane&&(e.flags|=64,null===(h=i.effects)?i.effects=[u]:h.push(u))}else d={eventTime:d,lane:h,tag:u.tag,payload:u.payload,callback:u.callback,next:null},null===l?(c=l=d,s=f):l=l.next=d,o|=h;if(null===(u=u.next)){if(null===(u=i.shared.pending))break;u=(h=u).next,h.next=null,i.lastBaseUpdate=h,i.shared.pending=null}}if(null===l&&(s=f),i.baseState=s,i.firstBaseUpdate=c,i.lastBaseUpdate=l,null!==(t=i.shared.interleaved)){i=t;do{o|=i.lane,i=i.next}while(i!==t)}else null===a&&(i.shared.lanes=0);Ms|=o,e.lanes=o,e.memoizedState=f}}function Ua(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!==typeof i)throw Error(a(191,i));i.call(r)}}}var Va=(new r.Component).refs;function ja(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:F({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var Ba={isMounted:function(e){return!!(e=e._reactInternals)&&qe(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=ec(),i=tc(e),a=Pa(r,i);a.payload=t,void 0!==n&&null!==n&&(a.callback=n),null!==(t=Oa(e,a,i))&&(nc(t,e,i,r),La(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=ec(),i=tc(e),a=Pa(r,i);a.tag=1,a.payload=t,void 0!==n&&null!==n&&(a.callback=n),null!==(t=Oa(e,a,i))&&(nc(t,e,i,r),La(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=ec(),r=tc(e),i=Pa(n,r);i.tag=2,void 0!==t&&null!==t&&(i.callback=t),null!==(t=Oa(e,i,r))&&(nc(t,e,r,n),La(t,e,r))}};function qa(e,t,n,r,i,a,o){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,a,o):!t.prototype||!t.prototype.isPureReactComponent||(!sr(n,r)||!sr(i,a))}function za(e,t,n){var r=!1,i=Ti,a=t.contextType;return"object"===typeof a&&null!==a?a=Sa(a):(i=Ri(t)?Ai:Ci.current,a=(r=null!==(r=t.contextTypes)&&void 0!==r)?Di(e,i):Ti),t=new t(n,a),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=Ba,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=a),t}function Ka(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&Ba.enqueueReplaceState(t,t.state,null)}function Ga(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs=Va,Da(e);var a=t.contextType;"object"===typeof a&&null!==a?i.context=Sa(a):(a=Ri(t)?Ai:Ci.current,i.context=Di(e,a)),i.state=e.memoizedState,"function"===typeof(a=t.getDerivedStateFromProps)&&(ja(e,t,a,n),i.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(t=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&Ba.enqueueReplaceState(i,i.state,null),Fa(e,n,i,r),i.state=e.memoizedState),"function"===typeof i.componentDidMount&&(e.flags|=4194308)}function Wa(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(a(309));var r=n.stateNode}if(!r)throw Error(a(147,e));var i=r,o=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===o?t.ref:(t=function(e){var t=i.refs;t===Va&&(t=i.refs={}),null===e?delete t[o]:t[o]=e},t._stringRef=o,t)}if("string"!==typeof e)throw Error(a(284));if(!n._owner)throw Error(a(290,e))}return e}function Ha(e,t){throw e=Object.prototype.toString.call(t),Error(a(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Qa(e){return(0,e._init)(e._payload)}function Ya(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=Pc(e,t)).index=0,e.sibling=null,e}function o(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function u(t){return e&&null===t.alternate&&(t.flags|=2),t}function s(e,t,n,r){return null===t||6!==t.tag?((t=Fc(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function c(e,t,n,r){var a=n.type;return a===_?f(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===a||"object"===typeof a&&null!==a&&a.$$typeof===R&&Qa(a)===t.type)?((r=i(t,n.props)).ref=Wa(e,t,n),r.return=e,r):((r=Oc(n.type,n.key,n.props,null,e.mode,r)).ref=Wa(e,t,n),r.return=e,r)}function l(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Uc(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function f(e,t,n,r,a){return null===t||7!==t.tag?((t=Lc(n,e.mode,r,a)).return=e,t):((t=i(t,n)).return=e,t)}function h(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Fc(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case w:return(n=Oc(t.type,t.key,t.props,null,e.mode,n)).ref=Wa(e,null,t),n.return=e,n;case x:return(t=Uc(t,e.mode,n)).return=e,t;case R:return h(e,(0,t._init)(t._payload),n)}if(te(t)||L(t))return(t=Lc(t,e.mode,n,null)).return=e,t;Ha(e,t)}return null}function d(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==i?null:s(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case w:return n.key===i?c(e,t,n,r):null;case x:return n.key===i?l(e,t,n,r):null;case R:return d(e,t,(i=n._init)(n._payload),r)}if(te(n)||L(n))return null!==i?null:f(e,t,n,r,null);Ha(e,n)}return null}function p(e,t,n,r,i){if("string"===typeof r&&""!==r||"number"===typeof r)return s(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case w:return c(t,e=e.get(null===r.key?n:r.key)||null,r,i);case x:return l(t,e=e.get(null===r.key?n:r.key)||null,r,i);case R:return p(e,t,n,(0,r._init)(r._payload),i)}if(te(r)||L(r))return f(t,e=e.get(n)||null,r,i,null);Ha(t,r)}return null}function v(i,a,u,s){for(var c=null,l=null,f=a,v=a=0,y=null;null!==f&&v<u.length;v++){f.index>v?(y=f,f=null):y=f.sibling;var m=d(i,f,u[v],s);if(null===m){null===f&&(f=y);break}e&&f&&null===m.alternate&&t(i,f),a=o(m,a,v),null===l?c=m:l.sibling=m,l=m,f=y}if(v===u.length)return n(i,f),ia&&Ji(i,v),c;if(null===f){for(;v<u.length;v++)null!==(f=h(i,u[v],s))&&(a=o(f,a,v),null===l?c=f:l.sibling=f,l=f);return ia&&Ji(i,v),c}for(f=r(i,f);v<u.length;v++)null!==(y=p(f,i,v,u[v],s))&&(e&&null!==y.alternate&&f.delete(null===y.key?v:y.key),a=o(y,a,v),null===l?c=y:l.sibling=y,l=y);return e&&f.forEach((function(e){return t(i,e)})),ia&&Ji(i,v),c}function y(i,u,s,c){var l=L(s);if("function"!==typeof l)throw Error(a(150));if(null==(s=l.call(s)))throw Error(a(151));for(var f=l=null,v=u,y=u=0,m=null,g=s.next();null!==v&&!g.done;y++,g=s.next()){v.index>y?(m=v,v=null):m=v.sibling;var k=d(i,v,g.value,c);if(null===k){null===v&&(v=m);break}e&&v&&null===k.alternate&&t(i,v),u=o(k,u,y),null===f?l=k:f.sibling=k,f=k,v=m}if(g.done)return n(i,v),ia&&Ji(i,y),l;if(null===v){for(;!g.done;y++,g=s.next())null!==(g=h(i,g.value,c))&&(u=o(g,u,y),null===f?l=g:f.sibling=g,f=g);return ia&&Ji(i,y),l}for(v=r(i,v);!g.done;y++,g=s.next())null!==(g=p(v,i,y,g.value,c))&&(e&&null!==g.alternate&&v.delete(null===g.key?y:g.key),u=o(g,u,y),null===f?l=g:f.sibling=g,f=g);return e&&v.forEach((function(e){return t(i,e)})),ia&&Ji(i,y),l}return function e(r,a,o,s){if("object"===typeof o&&null!==o&&o.type===_&&null===o.key&&(o=o.props.children),"object"===typeof o&&null!==o){switch(o.$$typeof){case w:e:{for(var c=o.key,l=a;null!==l;){if(l.key===c){if((c=o.type)===_){if(7===l.tag){n(r,l.sibling),(a=i(l,o.props.children)).return=r,r=a;break e}}else if(l.elementType===c||"object"===typeof c&&null!==c&&c.$$typeof===R&&Qa(c)===l.type){n(r,l.sibling),(a=i(l,o.props)).ref=Wa(r,l,o),a.return=r,r=a;break e}n(r,l);break}t(r,l),l=l.sibling}o.type===_?((a=Lc(o.props.children,r.mode,s,o.key)).return=r,r=a):((s=Oc(o.type,o.key,o.props,null,r.mode,s)).ref=Wa(r,a,o),s.return=r,r=s)}return u(r);case x:e:{for(l=o.key;null!==a;){if(a.key===l){if(4===a.tag&&a.stateNode.containerInfo===o.containerInfo&&a.stateNode.implementation===o.implementation){n(r,a.sibling),(a=i(a,o.children||[])).return=r,r=a;break e}n(r,a);break}t(r,a),a=a.sibling}(a=Uc(o,r.mode,s)).return=r,r=a}return u(r);case R:return e(r,a,(l=o._init)(o._payload),s)}if(te(o))return v(r,a,o,s);if(L(o))return y(r,a,o,s);Ha(r,o)}return"string"===typeof o&&""!==o||"number"===typeof o?(o=""+o,null!==a&&6===a.tag?(n(r,a.sibling),(a=i(a,o)).return=r,r=a):(n(r,a),(a=Fc(o,r.mode,s)).return=r,r=a),u(r)):n(r,a)}}var $a=Ya(!0),Xa=Ya(!1),Ja={},Za=Ii(Ja),eo=Ii(Ja),to=Ii(Ja);function no(e){if(e===Ja)throw Error(a(174));return e}function ro(e,t){switch(Ei(to,t),Ei(eo,e),Ei(Za,Ja),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:se(null,"");break;default:t=se(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Si(Za),Ei(Za,t)}function io(){Si(Za),Si(eo),Si(to)}function ao(e){no(to.current);var t=no(Za.current),n=se(t,e.type);t!==n&&(Ei(eo,e),Ei(Za,n))}function oo(e){eo.current===e&&(Si(Za),Si(eo))}var uo=Ii(0);function so(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var co=[];function lo(){for(var e=0;e<co.length;e++)co[e]._workInProgressVersionPrimary=null;co.length=0}var fo=b.ReactCurrentDispatcher,ho=b.ReactCurrentBatchConfig,po=0,vo=null,yo=null,mo=null,go=!1,ko=!1,bo=0,wo=0;function xo(){throw Error(a(321))}function _o(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!ur(e[n],t[n]))return!1;return!0}function Io(e,t,n,r,i,o){if(po=o,vo=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,fo.current=null===e||null===e.memoizedState?uu:su,e=n(r,i),ko){o=0;do{if(ko=!1,bo=0,25<=o)throw Error(a(301));o+=1,mo=yo=null,t.updateQueue=null,fo.current=cu,e=n(r,i)}while(ko)}if(fo.current=ou,t=null!==yo&&null!==yo.next,po=0,mo=yo=vo=null,go=!1,t)throw Error(a(300));return e}function So(){var e=0!==bo;return bo=0,e}function Eo(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===mo?vo.memoizedState=mo=e:mo=mo.next=e,mo}function To(){if(null===yo){var e=vo.alternate;e=null!==e?e.memoizedState:null}else e=yo.next;var t=null===mo?vo.memoizedState:mo.next;if(null!==t)mo=t,yo=e;else{if(null===e)throw Error(a(310));e={memoizedState:(yo=e).memoizedState,baseState:yo.baseState,baseQueue:yo.baseQueue,queue:yo.queue,next:null},null===mo?vo.memoizedState=mo=e:mo=mo.next=e}return mo}function Co(e,t){return"function"===typeof t?t(e):t}function No(e){var t=To(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=yo,i=r.baseQueue,o=n.pending;if(null!==o){if(null!==i){var u=i.next;i.next=o.next,o.next=u}r.baseQueue=i=o,n.pending=null}if(null!==i){o=i.next,r=r.baseState;var s=u=null,c=null,l=o;do{var f=l.lane;if((po&f)===f)null!==c&&(c=c.next={lane:0,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null}),r=l.hasEagerState?l.eagerState:e(r,l.action);else{var h={lane:f,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null};null===c?(s=c=h,u=r):c=c.next=h,vo.lanes|=f,Ms|=f}l=l.next}while(null!==l&&l!==o);null===c?u=r:c.next=s,ur(r,t.memoizedState)||(bu=!0),t.memoizedState=r,t.baseState=u,t.baseQueue=c,n.lastRenderedState=r}if(null!==(e=n.interleaved)){i=e;do{o=i.lane,vo.lanes|=o,Ms|=o,i=i.next}while(i!==e)}else null===i&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Ao(e){var t=To(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,o=t.memoizedState;if(null!==i){n.pending=null;var u=i=i.next;do{o=e(o,u.action),u=u.next}while(u!==i);ur(o,t.memoizedState)||(bu=!0),t.memoizedState=o,null===t.baseQueue&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function Do(){}function Ro(e,t){var n=vo,r=To(),i=t(),o=!ur(r.memoizedState,i);if(o&&(r.memoizedState=i,bu=!0),r=r.queue,Ko(Lo.bind(null,n,r,e),[e]),r.getSnapshot!==t||o||null!==mo&&1&mo.memoizedState.tag){if(n.flags|=2048,Vo(9,Oo.bind(null,n,r,i,t),void 0,null),null===Ns)throw Error(a(349));0!==(30&po)||Po(n,t,i)}return i}function Po(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=vo.updateQueue)?(t={lastEffect:null,stores:null},vo.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Oo(e,t,n,r){t.value=n,t.getSnapshot=r,Mo(t)&&Fo(e)}function Lo(e,t,n){return n((function(){Mo(t)&&Fo(e)}))}function Mo(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!ur(e,n)}catch(r){return!0}}function Fo(e){var t=Na(e,1);null!==t&&nc(t,e,1,-1)}function Uo(e){var t=Eo();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Co,lastRenderedState:e},t.queue=e,e=e.dispatch=nu.bind(null,vo,e),[t.memoizedState,e]}function Vo(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=vo.updateQueue)?(t={lastEffect:null,stores:null},vo.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function jo(){return To().memoizedState}function Bo(e,t,n,r){var i=Eo();vo.flags|=e,i.memoizedState=Vo(1|t,n,void 0,void 0===r?null:r)}function qo(e,t,n,r){var i=To();r=void 0===r?null:r;var a=void 0;if(null!==yo){var o=yo.memoizedState;if(a=o.destroy,null!==r&&_o(r,o.deps))return void(i.memoizedState=Vo(t,n,a,r))}vo.flags|=e,i.memoizedState=Vo(1|t,n,a,r)}function zo(e,t){return Bo(8390656,8,e,t)}function Ko(e,t){return qo(2048,8,e,t)}function Go(e,t){return qo(4,2,e,t)}function Wo(e,t){return qo(4,4,e,t)}function Ho(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Qo(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,qo(4,4,Ho.bind(null,t,e),n)}function Yo(){}function $o(e,t){var n=To();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&_o(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Xo(e,t){var n=To();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&_o(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Jo(e,t,n){return 0===(21&po)?(e.baseState&&(e.baseState=!1,bu=!0),e.memoizedState=n):(ur(n,t)||(n=vt(),vo.lanes|=n,Ms|=n,e.baseState=!0),t)}function Zo(e,t){var n=kt;kt=0!==n&&4>n?n:4,e(!0);var r=ho.transition;ho.transition={};try{e(!1),t()}finally{kt=n,ho.transition=r}}function eu(){return To().memoizedState}function tu(e,t,n){var r=tc(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},ru(e))iu(t,n);else if(null!==(n=Ca(e,t,n,r))){nc(n,e,r,ec()),au(n,t,r)}}function nu(e,t,n){var r=tc(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(ru(e))iu(t,i);else{var a=e.alternate;if(0===e.lanes&&(null===a||0===a.lanes)&&null!==(a=t.lastRenderedReducer))try{var o=t.lastRenderedState,u=a(o,n);if(i.hasEagerState=!0,i.eagerState=u,ur(u,o)){var s=t.interleaved;return null===s?(i.next=i,Ta(t)):(i.next=s.next,s.next=i),void(t.interleaved=i)}}catch(c){}null!==(n=Ca(e,t,i,r))&&(nc(n,e,r,i=ec()),au(n,t,r))}}function ru(e){var t=e.alternate;return e===vo||null!==t&&t===vo}function iu(e,t){ko=go=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function au(e,t,n){if(0!==(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,gt(e,n)}}var ou={readContext:Sa,useCallback:xo,useContext:xo,useEffect:xo,useImperativeHandle:xo,useInsertionEffect:xo,useLayoutEffect:xo,useMemo:xo,useReducer:xo,useRef:xo,useState:xo,useDebugValue:xo,useDeferredValue:xo,useTransition:xo,useMutableSource:xo,useSyncExternalStore:xo,useId:xo,unstable_isNewReconciler:!1},uu={readContext:Sa,useCallback:function(e,t){return Eo().memoizedState=[e,void 0===t?null:t],e},useContext:Sa,useEffect:zo,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Bo(4194308,4,Ho.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Bo(4194308,4,e,t)},useInsertionEffect:function(e,t){return Bo(4,2,e,t)},useMemo:function(e,t){var n=Eo();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=Eo();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=tu.bind(null,vo,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},Eo().memoizedState=e},useState:Uo,useDebugValue:Yo,useDeferredValue:function(e){return Eo().memoizedState=e},useTransition:function(){var e=Uo(!1),t=e[0];return e=Zo.bind(null,e[1]),Eo().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=vo,i=Eo();if(ia){if(void 0===n)throw Error(a(407));n=n()}else{if(n=t(),null===Ns)throw Error(a(349));0!==(30&po)||Po(r,t,n)}i.memoizedState=n;var o={value:n,getSnapshot:t};return i.queue=o,zo(Lo.bind(null,r,o,e),[e]),r.flags|=2048,Vo(9,Oo.bind(null,r,o,n,t),void 0,null),n},useId:function(){var e=Eo(),t=Ns.identifierPrefix;if(ia){var n=Xi;t=":"+t+"R"+(n=($i&~(1<<32-ot($i)-1)).toString(32)+n),0<(n=bo++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=wo++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},su={readContext:Sa,useCallback:$o,useContext:Sa,useEffect:Ko,useImperativeHandle:Qo,useInsertionEffect:Go,useLayoutEffect:Wo,useMemo:Xo,useReducer:No,useRef:jo,useState:function(){return No(Co)},useDebugValue:Yo,useDeferredValue:function(e){return Jo(To(),yo.memoizedState,e)},useTransition:function(){return[No(Co)[0],To().memoizedState]},useMutableSource:Do,useSyncExternalStore:Ro,useId:eu,unstable_isNewReconciler:!1},cu={readContext:Sa,useCallback:$o,useContext:Sa,useEffect:Ko,useImperativeHandle:Qo,useInsertionEffect:Go,useLayoutEffect:Wo,useMemo:Xo,useReducer:Ao,useRef:jo,useState:function(){return Ao(Co)},useDebugValue:Yo,useDeferredValue:function(e){var t=To();return null===yo?t.memoizedState=e:Jo(t,yo.memoizedState,e)},useTransition:function(){return[Ao(Co)[0],To().memoizedState]},useMutableSource:Do,useSyncExternalStore:Ro,useId:eu,unstable_isNewReconciler:!1};function lu(e,t){try{var n="",r=t;do{n+=B(r),r=r.return}while(r);var i=n}catch(a){i="\nError generating stack: "+a.message+"\n"+a.stack}return{value:e,source:t,stack:i,digest:null}}function fu(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function hu(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}var du="function"===typeof WeakMap?WeakMap:Map;function pu(e,t,n){(n=Pa(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Ks||(Ks=!0,Gs=r),hu(0,t)},n}function vu(e,t,n){(n=Pa(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){hu(0,t)}}var a=e.stateNode;return null!==a&&"function"===typeof a.componentDidCatch&&(n.callback=function(){hu(0,t),"function"!==typeof r&&(null===Ws?Ws=new Set([this]):Ws.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function yu(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new du;var i=new Set;r.set(t,i)}else void 0===(i=r.get(t))&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=Sc.bind(null,e,t,n),t.then(e,e))}function mu(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function gu(e,t,n,r,i){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=Pa(-1,1)).tag=2,Oa(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=i,e)}var ku=b.ReactCurrentOwner,bu=!1;function wu(e,t,n,r){t.child=null===e?Xa(t,null,n,r):$a(t,e.child,n,r)}function xu(e,t,n,r,i){n=n.render;var a=t.ref;return Ia(t,i),r=Io(e,t,n,r,a,i),n=So(),null===e||bu?(ia&&n&&ea(t),t.flags|=1,wu(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Ku(e,t,i))}function _u(e,t,n,r,i){if(null===e){var a=n.type;return"function"!==typeof a||Rc(a)||void 0!==a.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Oc(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=a,Iu(e,t,a,r,i))}if(a=e.child,0===(e.lanes&i)){var o=a.memoizedProps;if((n=null!==(n=n.compare)?n:sr)(o,r)&&e.ref===t.ref)return Ku(e,t,i)}return t.flags|=1,(e=Pc(a,r)).ref=t.ref,e.return=t,t.child=e}function Iu(e,t,n,r,i){if(null!==e){var a=e.memoizedProps;if(sr(a,r)&&e.ref===t.ref){if(bu=!1,t.pendingProps=r=a,0===(e.lanes&i))return t.lanes=e.lanes,Ku(e,t,i);0!==(131072&e.flags)&&(bu=!0)}}return Tu(e,t,n,r,i)}function Su(e,t,n){var r=t.pendingProps,i=r.children,a=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ei(Ps,Rs),Rs|=n;else{if(0===(1073741824&n))return e=null!==a?a.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Ei(Ps,Rs),Rs|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==a?a.baseLanes:n,Ei(Ps,Rs),Rs|=r}else null!==a?(r=a.baseLanes|n,t.memoizedState=null):r=n,Ei(Ps,Rs),Rs|=r;return wu(e,t,i,n),t.child}function Eu(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Tu(e,t,n,r,i){var a=Ri(n)?Ai:Ci.current;return a=Di(t,a),Ia(t,i),n=Io(e,t,n,r,a,i),r=So(),null===e||bu?(ia&&r&&ea(t),t.flags|=1,wu(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Ku(e,t,i))}function Cu(e,t,n,r,i){if(Ri(n)){var a=!0;Mi(t)}else a=!1;if(Ia(t,i),null===t.stateNode)zu(e,t),za(t,n,r),Ga(t,n,r,i),r=!0;else if(null===e){var o=t.stateNode,u=t.memoizedProps;o.props=u;var s=o.context,c=n.contextType;"object"===typeof c&&null!==c?c=Sa(c):c=Di(t,c=Ri(n)?Ai:Ci.current);var l=n.getDerivedStateFromProps,f="function"===typeof l||"function"===typeof o.getSnapshotBeforeUpdate;f||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(u!==r||s!==c)&&Ka(t,o,r,c),Aa=!1;var h=t.memoizedState;o.state=h,Fa(t,r,o,i),s=t.memoizedState,u!==r||h!==s||Ni.current||Aa?("function"===typeof l&&(ja(t,n,l,r),s=t.memoizedState),(u=Aa||qa(t,n,u,r,h,s,c))?(f||"function"!==typeof o.UNSAFE_componentWillMount&&"function"!==typeof o.componentWillMount||("function"===typeof o.componentWillMount&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"===typeof o.componentDidMount&&(t.flags|=4194308)):("function"===typeof o.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=s),o.props=r,o.state=s,o.context=c,r=u):("function"===typeof o.componentDidMount&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,Ra(e,t),u=t.memoizedProps,c=t.type===t.elementType?u:ya(t.type,u),o.props=c,f=t.pendingProps,h=o.context,"object"===typeof(s=n.contextType)&&null!==s?s=Sa(s):s=Di(t,s=Ri(n)?Ai:Ci.current);var d=n.getDerivedStateFromProps;(l="function"===typeof d||"function"===typeof o.getSnapshotBeforeUpdate)||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(u!==f||h!==s)&&Ka(t,o,r,s),Aa=!1,h=t.memoizedState,o.state=h,Fa(t,r,o,i);var p=t.memoizedState;u!==f||h!==p||Ni.current||Aa?("function"===typeof d&&(ja(t,n,d,r),p=t.memoizedState),(c=Aa||qa(t,n,c,r,h,p,s)||!1)?(l||"function"!==typeof o.UNSAFE_componentWillUpdate&&"function"!==typeof o.componentWillUpdate||("function"===typeof o.componentWillUpdate&&o.componentWillUpdate(r,p,s),"function"===typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(r,p,s)),"function"===typeof o.componentDidUpdate&&(t.flags|=4),"function"===typeof o.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof o.componentDidUpdate||u===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||u===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),o.props=r,o.state=p,o.context=s,r=c):("function"!==typeof o.componentDidUpdate||u===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||u===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),r=!1)}return Nu(e,t,n,r,a,i)}function Nu(e,t,n,r,i,a){Eu(e,t);var o=0!==(128&t.flags);if(!r&&!o)return i&&Fi(t,n,!1),Ku(e,t,a);r=t.stateNode,ku.current=t;var u=o&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&o?(t.child=$a(t,e.child,null,a),t.child=$a(t,null,u,a)):wu(e,t,u,a),t.memoizedState=r.state,i&&Fi(t,n,!0),t.child}function Au(e){var t=e.stateNode;t.pendingContext?Oi(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Oi(0,t.context,!1),ro(e,t.containerInfo)}function Du(e,t,n,r,i){return da(),pa(i),t.flags|=256,wu(e,t,n,r),t.child}var Ru,Pu,Ou,Lu={dehydrated:null,treeContext:null,retryLane:0};function Mu(e){return{baseLanes:e,cachePool:null,transitions:null}}function Fu(e,t,n){var r,i=t.pendingProps,o=uo.current,u=!1,s=0!==(128&t.flags);if((r=s)||(r=(null===e||null!==e.memoizedState)&&0!==(2&o)),r?(u=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(o|=1),Ei(uo,1&o),null===e)return ca(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(s=i.children,e=i.fallback,u?(i=t.mode,u=t.child,s={mode:"hidden",children:s},0===(1&i)&&null!==u?(u.childLanes=0,u.pendingProps=s):u=Mc(s,i,0,null),e=Lc(e,i,n,null),u.return=t,e.return=t,u.sibling=e,t.child=u,t.child.memoizedState=Mu(n),t.memoizedState=Lu,e):Uu(t,s));if(null!==(o=e.memoizedState)&&null!==(r=o.dehydrated))return function(e,t,n,r,i,o,u){if(n)return 256&t.flags?(t.flags&=-257,Vu(e,t,u,r=fu(Error(a(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(o=r.fallback,i=t.mode,r=Mc({mode:"visible",children:r.children},i,0,null),(o=Lc(o,i,u,null)).flags|=2,r.return=t,o.return=t,r.sibling=o,t.child=r,0!==(1&t.mode)&&$a(t,e.child,null,u),t.child.memoizedState=Mu(u),t.memoizedState=Lu,o);if(0===(1&t.mode))return Vu(e,t,u,null);if("$!"===i.data){if(r=i.nextSibling&&i.nextSibling.dataset)var s=r.dgst;return r=s,Vu(e,t,u,r=fu(o=Error(a(419)),r,void 0))}if(s=0!==(u&e.childLanes),bu||s){if(null!==(r=Ns)){switch(u&-u){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}0!==(i=0!==(i&(r.suspendedLanes|u))?0:i)&&i!==o.retryLane&&(o.retryLane=i,Na(e,i),nc(r,e,i,-1))}return vc(),Vu(e,t,u,r=fu(Error(a(421))))}return"$?"===i.data?(t.flags|=128,t.child=e.child,t=Tc.bind(null,e),i._reactRetry=t,null):(e=o.treeContext,ra=ci(i.nextSibling),na=t,ia=!0,aa=null,null!==e&&(Hi[Qi++]=$i,Hi[Qi++]=Xi,Hi[Qi++]=Yi,$i=e.id,Xi=e.overflow,Yi=t),(t=Uu(t,r.children)).flags|=4096,t)}(e,t,s,i,r,o,n);if(u){u=i.fallback,s=t.mode,r=(o=e.child).sibling;var c={mode:"hidden",children:i.children};return 0===(1&s)&&t.child!==o?((i=t.child).childLanes=0,i.pendingProps=c,t.deletions=null):(i=Pc(o,c)).subtreeFlags=14680064&o.subtreeFlags,null!==r?u=Pc(r,u):(u=Lc(u,s,n,null)).flags|=2,u.return=t,i.return=t,i.sibling=u,t.child=i,i=u,u=t.child,s=null===(s=e.child.memoizedState)?Mu(n):{baseLanes:s.baseLanes|n,cachePool:null,transitions:s.transitions},u.memoizedState=s,u.childLanes=e.childLanes&~n,t.memoizedState=Lu,i}return e=(u=e.child).sibling,i=Pc(u,{mode:"visible",children:i.children}),0===(1&t.mode)&&(i.lanes=n),i.return=t,i.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=i,t.memoizedState=null,i}function Uu(e,t){return(t=Mc({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Vu(e,t,n,r){return null!==r&&pa(r),$a(t,e.child,null,n),(e=Uu(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function ju(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),_a(e.return,t,n)}function Bu(e,t,n,r,i){var a=e.memoizedState;null===a?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=r,a.tail=n,a.tailMode=i)}function qu(e,t,n){var r=t.pendingProps,i=r.revealOrder,a=r.tail;if(wu(e,t,r.children,n),0!==(2&(r=uo.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&ju(e,n,t);else if(19===e.tag)ju(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Ei(uo,r),0===(1&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===so(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),Bu(t,!1,i,n,a);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===so(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}Bu(t,!0,n,null,a);break;case"together":Bu(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function zu(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Ku(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Ms|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(a(153));if(null!==t.child){for(n=Pc(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Pc(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Gu(e,t){if(!ia)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Wu(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=14680064&i.subtreeFlags,r|=14680064&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Hu(e,t,n){var r=t.pendingProps;switch(ta(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Wu(t),null;case 1:case 17:return Ri(t.type)&&Pi(),Wu(t),null;case 3:return r=t.stateNode,io(),Si(Ni),Si(Ci),lo(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(fa(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==aa&&(oc(aa),aa=null))),Wu(t),null;case 5:oo(t);var i=no(to.current);if(n=t.type,null!==e&&null!=t.stateNode)Pu(e,t,n,r),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(a(166));return Wu(t),null}if(e=no(Za.current),fa(t)){r=t.stateNode,n=t.type;var o=t.memoizedProps;switch(r[hi]=t,r[di]=o,e=0!==(1&t.mode),n){case"dialog":Vr("cancel",r),Vr("close",r);break;case"iframe":case"object":case"embed":Vr("load",r);break;case"video":case"audio":for(i=0;i<Lr.length;i++)Vr(Lr[i],r);break;case"source":Vr("error",r);break;case"img":case"image":case"link":Vr("error",r),Vr("load",r);break;case"details":Vr("toggle",r);break;case"input":$(r,o),Vr("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},Vr("invalid",r);break;case"textarea":ie(r,o),Vr("invalid",r)}for(var s in ge(n,o),i=null,o)if(o.hasOwnProperty(s)){var c=o[s];"children"===s?"string"===typeof c?r.textContent!==c&&(!0!==o.suppressHydrationWarning&&Jr(r.textContent,c,e),i=["children",c]):"number"===typeof c&&r.textContent!==""+c&&(!0!==o.suppressHydrationWarning&&Jr(r.textContent,c,e),i=["children",""+c]):u.hasOwnProperty(s)&&null!=c&&"onScroll"===s&&Vr("scroll",r)}switch(n){case"input":W(r),Z(r,o,!0);break;case"textarea":W(r),oe(r);break;case"select":case"option":break;default:"function"===typeof o.onClick&&(r.onclick=Zr)}r=i,t.updateQueue=r,null!==r&&(t.flags|=4)}else{s=9===i.nodeType?i:i.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=ue(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=s.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=s.createElement(n,{is:r.is}):(e=s.createElement(n),"select"===n&&(s=e,r.multiple?s.multiple=!0:r.size&&(s.size=r.size))):e=s.createElementNS(e,n),e[hi]=t,e[di]=r,Ru(e,t),t.stateNode=e;e:{switch(s=ke(n,r),n){case"dialog":Vr("cancel",e),Vr("close",e),i=r;break;case"iframe":case"object":case"embed":Vr("load",e),i=r;break;case"video":case"audio":for(i=0;i<Lr.length;i++)Vr(Lr[i],e);i=r;break;case"source":Vr("error",e),i=r;break;case"img":case"image":case"link":Vr("error",e),Vr("load",e),i=r;break;case"details":Vr("toggle",e),i=r;break;case"input":$(e,r),i=Y(e,r),Vr("invalid",e);break;case"option":default:i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=F({},r,{value:void 0}),Vr("invalid",e);break;case"textarea":ie(e,r),i=re(e,r),Vr("invalid",e)}for(o in ge(n,i),c=i)if(c.hasOwnProperty(o)){var l=c[o];"style"===o?ye(e,l):"dangerouslySetInnerHTML"===o?null!=(l=l?l.__html:void 0)&&fe(e,l):"children"===o?"string"===typeof l?("textarea"!==n||""!==l)&&he(e,l):"number"===typeof l&&he(e,""+l):"suppressContentEditableWarning"!==o&&"suppressHydrationWarning"!==o&&"autoFocus"!==o&&(u.hasOwnProperty(o)?null!=l&&"onScroll"===o&&Vr("scroll",e):null!=l&&k(e,o,l,s))}switch(n){case"input":W(e),Z(e,r,!1);break;case"textarea":W(e),oe(e);break;case"option":null!=r.value&&e.setAttribute("value",""+K(r.value));break;case"select":e.multiple=!!r.multiple,null!=(o=r.value)?ne(e,!!r.multiple,o,!1):null!=r.defaultValue&&ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof i.onClick&&(e.onclick=Zr)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Wu(t),null;case 6:if(e&&null!=t.stateNode)Ou(0,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(a(166));if(n=no(to.current),no(Za.current),fa(t)){if(r=t.stateNode,n=t.memoizedProps,r[hi]=t,(o=r.nodeValue!==n)&&null!==(e=na))switch(e.tag){case 3:Jr(r.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Jr(r.nodeValue,n,0!==(1&e.mode))}o&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[hi]=t,t.stateNode=r}return Wu(t),null;case 13:if(Si(uo),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(ia&&null!==ra&&0!==(1&t.mode)&&0===(128&t.flags))ha(),da(),t.flags|=98560,o=!1;else if(o=fa(t),null!==r&&null!==r.dehydrated){if(null===e){if(!o)throw Error(a(318));if(!(o=null!==(o=t.memoizedState)?o.dehydrated:null))throw Error(a(317));o[hi]=t}else da(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Wu(t),o=!1}else null!==aa&&(oc(aa),aa=null),o=!0;if(!o)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((r=null!==r)!==(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&uo.current)?0===Os&&(Os=3):vc())),null!==t.updateQueue&&(t.flags|=4),Wu(t),null);case 4:return io(),null===e&&qr(t.stateNode.containerInfo),Wu(t),null;case 10:return xa(t.type._context),Wu(t),null;case 19:if(Si(uo),null===(o=t.memoizedState))return Wu(t),null;if(r=0!==(128&t.flags),null===(s=o.rendering))if(r)Gu(o,!1);else{if(0!==Os||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(s=so(e))){for(t.flags|=128,Gu(o,!1),null!==(r=s.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(o=n).flags&=14680066,null===(s=o.alternate)?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=s.childLanes,o.lanes=s.lanes,o.child=s.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=s.memoizedProps,o.memoizedState=s.memoizedState,o.updateQueue=s.updateQueue,o.type=s.type,e=s.dependencies,o.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Ei(uo,1&uo.current|2),t.child}e=e.sibling}null!==o.tail&&Xe()>qs&&(t.flags|=128,r=!0,Gu(o,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=so(s))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),Gu(o,!0),null===o.tail&&"hidden"===o.tailMode&&!s.alternate&&!ia)return Wu(t),null}else 2*Xe()-o.renderingStartTime>qs&&1073741824!==n&&(t.flags|=128,r=!0,Gu(o,!1),t.lanes=4194304);o.isBackwards?(s.sibling=t.child,t.child=s):(null!==(n=o.last)?n.sibling=s:t.child=s,o.last=s)}return null!==o.tail?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=Xe(),t.sibling=null,n=uo.current,Ei(uo,r?1&n|2:1&n),t):(Wu(t),null);case 22:case 23:return fc(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!==(1&t.mode)?0!==(1073741824&Rs)&&(Wu(t),6&t.subtreeFlags&&(t.flags|=8192)):Wu(t),null;case 24:case 25:return null}throw Error(a(156,t.tag))}function Qu(e,t){switch(ta(t),t.tag){case 1:return Ri(t.type)&&Pi(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return io(),Si(Ni),Si(Ci),lo(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return oo(t),null;case 13:if(Si(uo),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(a(340));da()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Si(uo),null;case 4:return io(),null;case 10:return xa(t.type._context),null;case 22:case 23:return fc(),null;default:return null}}Ru=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Pu=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,no(Za.current);var a,o=null;switch(n){case"input":i=Y(e,i),r=Y(e,r),o=[];break;case"select":i=F({},i,{value:void 0}),r=F({},r,{value:void 0}),o=[];break;case"textarea":i=re(e,i),r=re(e,r),o=[];break;default:"function"!==typeof i.onClick&&"function"===typeof r.onClick&&(e.onclick=Zr)}for(l in ge(n,r),n=null,i)if(!r.hasOwnProperty(l)&&i.hasOwnProperty(l)&&null!=i[l])if("style"===l){var s=i[l];for(a in s)s.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else"dangerouslySetInnerHTML"!==l&&"children"!==l&&"suppressContentEditableWarning"!==l&&"suppressHydrationWarning"!==l&&"autoFocus"!==l&&(u.hasOwnProperty(l)?o||(o=[]):(o=o||[]).push(l,null));for(l in r){var c=r[l];if(s=null!=i?i[l]:void 0,r.hasOwnProperty(l)&&c!==s&&(null!=c||null!=s))if("style"===l)if(s){for(a in s)!s.hasOwnProperty(a)||c&&c.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in c)c.hasOwnProperty(a)&&s[a]!==c[a]&&(n||(n={}),n[a]=c[a])}else n||(o||(o=[]),o.push(l,n)),n=c;else"dangerouslySetInnerHTML"===l?(c=c?c.__html:void 0,s=s?s.__html:void 0,null!=c&&s!==c&&(o=o||[]).push(l,c)):"children"===l?"string"!==typeof c&&"number"!==typeof c||(o=o||[]).push(l,""+c):"suppressContentEditableWarning"!==l&&"suppressHydrationWarning"!==l&&(u.hasOwnProperty(l)?(null!=c&&"onScroll"===l&&Vr("scroll",e),o||s===c||(o=[])):(o=o||[]).push(l,c))}n&&(o=o||[]).push("style",n);var l=o;(t.updateQueue=l)&&(t.flags|=4)}},Ou=function(e,t,n,r){n!==r&&(t.flags|=4)};var Yu=!1,$u=!1,Xu="function"===typeof WeakSet?WeakSet:Set,Ju=null;function Zu(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(r){Ic(e,t,r)}else n.current=null}function es(e,t,n){try{n()}catch(r){Ic(e,t,r)}}var ts=!1;function ns(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var i=r=r.next;do{if((i.tag&e)===e){var a=i.destroy;i.destroy=void 0,void 0!==a&&es(t,n,a)}i=i.next}while(i!==r)}}function rs(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function is(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function as(e){var t=e.alternate;null!==t&&(e.alternate=null,as(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[hi],delete t[di],delete t[vi],delete t[yi],delete t[mi])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function os(e){return 5===e.tag||3===e.tag||4===e.tag}function us(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||os(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function ss(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Zr));else if(4!==r&&null!==(e=e.child))for(ss(e,t,n),e=e.sibling;null!==e;)ss(e,t,n),e=e.sibling}function cs(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(cs(e,t,n),e=e.sibling;null!==e;)cs(e,t,n),e=e.sibling}var ls=null,fs=!1;function hs(e,t,n){for(n=n.child;null!==n;)ds(e,t,n),n=n.sibling}function ds(e,t,n){if(at&&"function"===typeof at.onCommitFiberUnmount)try{at.onCommitFiberUnmount(it,n)}catch(u){}switch(n.tag){case 5:$u||Zu(n,t);case 6:var r=ls,i=fs;ls=null,hs(e,t,n),fs=i,null!==(ls=r)&&(fs?(e=ls,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):ls.removeChild(n.stateNode));break;case 18:null!==ls&&(fs?(e=ls,n=n.stateNode,8===e.nodeType?si(e.parentNode,n):1===e.nodeType&&si(e,n),qt(e)):si(ls,n.stateNode));break;case 4:r=ls,i=fs,ls=n.stateNode.containerInfo,fs=!0,hs(e,t,n),ls=r,fs=i;break;case 0:case 11:case 14:case 15:if(!$u&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){i=r=r.next;do{var a=i,o=a.destroy;a=a.tag,void 0!==o&&(0!==(2&a)||0!==(4&a))&&es(n,t,o),i=i.next}while(i!==r)}hs(e,t,n);break;case 1:if(!$u&&(Zu(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(u){Ic(n,t,u)}hs(e,t,n);break;case 21:hs(e,t,n);break;case 22:1&n.mode?($u=(r=$u)||null!==n.memoizedState,hs(e,t,n),$u=r):hs(e,t,n);break;default:hs(e,t,n)}}function ps(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Xu),t.forEach((function(t){var r=Cc.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function vs(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var i=n[r];try{var o=e,u=t,s=u;e:for(;null!==s;){switch(s.tag){case 5:ls=s.stateNode,fs=!1;break e;case 3:case 4:ls=s.stateNode.containerInfo,fs=!0;break e}s=s.return}if(null===ls)throw Error(a(160));ds(o,u,i),ls=null,fs=!1;var c=i.alternate;null!==c&&(c.return=null),i.return=null}catch(l){Ic(i,t,l)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)ys(t,e),t=t.sibling}function ys(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(vs(t,e),ms(e),4&r){try{ns(3,e,e.return),rs(3,e)}catch(y){Ic(e,e.return,y)}try{ns(5,e,e.return)}catch(y){Ic(e,e.return,y)}}break;case 1:vs(t,e),ms(e),512&r&&null!==n&&Zu(n,n.return);break;case 5:if(vs(t,e),ms(e),512&r&&null!==n&&Zu(n,n.return),32&e.flags){var i=e.stateNode;try{he(i,"")}catch(y){Ic(e,e.return,y)}}if(4&r&&null!=(i=e.stateNode)){var o=e.memoizedProps,u=null!==n?n.memoizedProps:o,s=e.type,c=e.updateQueue;if(e.updateQueue=null,null!==c)try{"input"===s&&"radio"===o.type&&null!=o.name&&X(i,o),ke(s,u);var l=ke(s,o);for(u=0;u<c.length;u+=2){var f=c[u],h=c[u+1];"style"===f?ye(i,h):"dangerouslySetInnerHTML"===f?fe(i,h):"children"===f?he(i,h):k(i,f,h,l)}switch(s){case"input":J(i,o);break;case"textarea":ae(i,o);break;case"select":var d=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var p=o.value;null!=p?ne(i,!!o.multiple,p,!1):d!==!!o.multiple&&(null!=o.defaultValue?ne(i,!!o.multiple,o.defaultValue,!0):ne(i,!!o.multiple,o.multiple?[]:"",!1))}i[di]=o}catch(y){Ic(e,e.return,y)}}break;case 6:if(vs(t,e),ms(e),4&r){if(null===e.stateNode)throw Error(a(162));i=e.stateNode,o=e.memoizedProps;try{i.nodeValue=o}catch(y){Ic(e,e.return,y)}}break;case 3:if(vs(t,e),ms(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{qt(t.containerInfo)}catch(y){Ic(e,e.return,y)}break;case 4:default:vs(t,e),ms(e);break;case 13:vs(t,e),ms(e),8192&(i=e.child).flags&&(o=null!==i.memoizedState,i.stateNode.isHidden=o,!o||null!==i.alternate&&null!==i.alternate.memoizedState||(Bs=Xe())),4&r&&ps(e);break;case 22:if(f=null!==n&&null!==n.memoizedState,1&e.mode?($u=(l=$u)||f,vs(t,e),$u=l):vs(t,e),ms(e),8192&r){if(l=null!==e.memoizedState,(e.stateNode.isHidden=l)&&!f&&0!==(1&e.mode))for(Ju=e,f=e.child;null!==f;){for(h=Ju=f;null!==Ju;){switch(p=(d=Ju).child,d.tag){case 0:case 11:case 14:case 15:ns(4,d,d.return);break;case 1:Zu(d,d.return);var v=d.stateNode;if("function"===typeof v.componentWillUnmount){r=d,n=d.return;try{t=r,v.props=t.memoizedProps,v.state=t.memoizedState,v.componentWillUnmount()}catch(y){Ic(r,n,y)}}break;case 5:Zu(d,d.return);break;case 22:if(null!==d.memoizedState){ws(h);continue}}null!==p?(p.return=d,Ju=p):ws(h)}f=f.sibling}e:for(f=null,h=e;;){if(5===h.tag){if(null===f){f=h;try{i=h.stateNode,l?"function"===typeof(o=i.style).setProperty?o.setProperty("display","none","important"):o.display="none":(s=h.stateNode,u=void 0!==(c=h.memoizedProps.style)&&null!==c&&c.hasOwnProperty("display")?c.display:null,s.style.display=ve("display",u))}catch(y){Ic(e,e.return,y)}}}else if(6===h.tag){if(null===f)try{h.stateNode.nodeValue=l?"":h.memoizedProps}catch(y){Ic(e,e.return,y)}}else if((22!==h.tag&&23!==h.tag||null===h.memoizedState||h===e)&&null!==h.child){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;null===h.sibling;){if(null===h.return||h.return===e)break e;f===h&&(f=null),h=h.return}f===h&&(f=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:vs(t,e),ms(e),4&r&&ps(e);case 21:}}function ms(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(os(n)){var r=n;break e}n=n.return}throw Error(a(160))}switch(r.tag){case 5:var i=r.stateNode;32&r.flags&&(he(i,""),r.flags&=-33),cs(e,us(e),i);break;case 3:case 4:var o=r.stateNode.containerInfo;ss(e,us(e),o);break;default:throw Error(a(161))}}catch(u){Ic(e,e.return,u)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function gs(e,t,n){Ju=e,ks(e,t,n)}function ks(e,t,n){for(var r=0!==(1&e.mode);null!==Ju;){var i=Ju,a=i.child;if(22===i.tag&&r){var o=null!==i.memoizedState||Yu;if(!o){var u=i.alternate,s=null!==u&&null!==u.memoizedState||$u;u=Yu;var c=$u;if(Yu=o,($u=s)&&!c)for(Ju=i;null!==Ju;)s=(o=Ju).child,22===o.tag&&null!==o.memoizedState?xs(i):null!==s?(s.return=o,Ju=s):xs(i);for(;null!==a;)Ju=a,ks(a,t,n),a=a.sibling;Ju=i,Yu=u,$u=c}bs(e)}else 0!==(8772&i.subtreeFlags)&&null!==a?(a.return=i,Ju=a):bs(e)}}function bs(e){for(;null!==Ju;){var t=Ju;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:$u||rs(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!$u)if(null===n)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:ya(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;null!==o&&Ua(t,o,r);break;case 3:var u=t.updateQueue;if(null!==u){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}Ua(t,u,n)}break;case 5:var s=t.stateNode;if(null===n&&4&t.flags){n=s;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var l=t.alternate;if(null!==l){var f=l.memoizedState;if(null!==f){var h=f.dehydrated;null!==h&&qt(h)}}}break;default:throw Error(a(163))}$u||512&t.flags&&is(t)}catch(d){Ic(t,t.return,d)}}if(t===e){Ju=null;break}if(null!==(n=t.sibling)){n.return=t.return,Ju=n;break}Ju=t.return}}function ws(e){for(;null!==Ju;){var t=Ju;if(t===e){Ju=null;break}var n=t.sibling;if(null!==n){n.return=t.return,Ju=n;break}Ju=t.return}}function xs(e){for(;null!==Ju;){var t=Ju;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{rs(4,t)}catch(s){Ic(t,n,s)}break;case 1:var r=t.stateNode;if("function"===typeof r.componentDidMount){var i=t.return;try{r.componentDidMount()}catch(s){Ic(t,i,s)}}var a=t.return;try{is(t)}catch(s){Ic(t,a,s)}break;case 5:var o=t.return;try{is(t)}catch(s){Ic(t,o,s)}}}catch(s){Ic(t,t.return,s)}if(t===e){Ju=null;break}var u=t.sibling;if(null!==u){u.return=t.return,Ju=u;break}Ju=t.return}}var _s,Is=Math.ceil,Ss=b.ReactCurrentDispatcher,Es=b.ReactCurrentOwner,Ts=b.ReactCurrentBatchConfig,Cs=0,Ns=null,As=null,Ds=0,Rs=0,Ps=Ii(0),Os=0,Ls=null,Ms=0,Fs=0,Us=0,Vs=null,js=null,Bs=0,qs=1/0,zs=null,Ks=!1,Gs=null,Ws=null,Hs=!1,Qs=null,Ys=0,$s=0,Xs=null,Js=-1,Zs=0;function ec(){return 0!==(6&Cs)?Xe():-1!==Js?Js:Js=Xe()}function tc(e){return 0===(1&e.mode)?1:0!==(2&Cs)&&0!==Ds?Ds&-Ds:null!==va.transition?(0===Zs&&(Zs=vt()),Zs):0!==(e=kt)?e:e=void 0===(e=window.event)?16:$t(e.type)}function nc(e,t,n,r){if(50<$s)throw $s=0,Xs=null,Error(a(185));mt(e,n,r),0!==(2&Cs)&&e===Ns||(e===Ns&&(0===(2&Cs)&&(Fs|=n),4===Os&&uc(e,Ds)),rc(e,r),1===n&&0===Cs&&0===(1&t.mode)&&(qs=Xe()+500,Vi&&qi()))}function rc(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,a=e.pendingLanes;0<a;){var o=31-ot(a),u=1<<o,s=i[o];-1===s?0!==(u&n)&&0===(u&r)||(i[o]=dt(u,t)):s<=t&&(e.expiredLanes|=u),a&=~u}}(e,t);var r=ht(e,e===Ns?Ds:0);if(0===r)null!==n&&Qe(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&Qe(n),1===t)0===e.tag?function(e){Vi=!0,Bi(e)}(sc.bind(null,e)):Bi(sc.bind(null,e)),oi((function(){0===(6&Cs)&&qi()})),n=null;else{switch(bt(r)){case 1:n=Ze;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=rt}n=Nc(n,ic.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function ic(e,t){if(Js=-1,Zs=0,0!==(6&Cs))throw Error(a(327));var n=e.callbackNode;if(xc()&&e.callbackNode!==n)return null;var r=ht(e,e===Ns?Ds:0);if(0===r)return null;if(0!==(30&r)||0!==(r&e.expiredLanes)||t)t=yc(e,r);else{t=r;var i=Cs;Cs|=2;var o=pc();for(Ns===e&&Ds===t||(zs=null,qs=Xe()+500,hc(e,t));;)try{gc();break}catch(s){dc(e,s)}wa(),Ss.current=o,Cs=i,null!==As?t=0:(Ns=null,Ds=0,t=Os)}if(0!==t){if(2===t&&(0!==(i=pt(e))&&(r=i,t=ac(e,i))),1===t)throw n=Ls,hc(e,0),uc(e,r),rc(e,Xe()),n;if(6===t)uc(e,r);else{if(i=e.current.alternate,0===(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var i=n[r],a=i.getSnapshot;i=i.value;try{if(!ur(a(),i))return!1}catch(u){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(i)&&(2===(t=yc(e,r))&&(0!==(o=pt(e))&&(r=o,t=ac(e,o))),1===t))throw n=Ls,hc(e,0),uc(e,r),rc(e,Xe()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(a(345));case 2:case 5:wc(e,js,zs);break;case 3:if(uc(e,r),(130023424&r)===r&&10<(t=Bs+500-Xe())){if(0!==ht(e,0))break;if(((i=e.suspendedLanes)&r)!==r){ec(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=ri(wc.bind(null,e,js,zs),t);break}wc(e,js,zs);break;case 4:if(uc(e,r),(4194240&r)===r)break;for(t=e.eventTimes,i=-1;0<r;){var u=31-ot(r);o=1<<u,(u=t[u])>i&&(i=u),r&=~o}if(r=i,10<(r=(120>(r=Xe()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Is(r/1960))-r)){e.timeoutHandle=ri(wc.bind(null,e,js,zs),r);break}wc(e,js,zs);break;default:throw Error(a(329))}}}return rc(e,Xe()),e.callbackNode===n?ic.bind(null,e):null}function ac(e,t){var n=Vs;return e.current.memoizedState.isDehydrated&&(hc(e,t).flags|=256),2!==(e=yc(e,t))&&(t=js,js=n,null!==t&&oc(t)),e}function oc(e){null===js?js=e:js.push.apply(js,e)}function uc(e,t){for(t&=~Us,t&=~Fs,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-ot(t),r=1<<n;e[n]=-1,t&=~r}}function sc(e){if(0!==(6&Cs))throw Error(a(327));xc();var t=ht(e,0);if(0===(1&t))return rc(e,Xe()),null;var n=yc(e,t);if(0!==e.tag&&2===n){var r=pt(e);0!==r&&(t=r,n=ac(e,r))}if(1===n)throw n=Ls,hc(e,0),uc(e,t),rc(e,Xe()),n;if(6===n)throw Error(a(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,wc(e,js,zs),rc(e,Xe()),null}function cc(e,t){var n=Cs;Cs|=1;try{return e(t)}finally{0===(Cs=n)&&(qs=Xe()+500,Vi&&qi())}}function lc(e){null!==Qs&&0===Qs.tag&&0===(6&Cs)&&xc();var t=Cs;Cs|=1;var n=Ts.transition,r=kt;try{if(Ts.transition=null,kt=1,e)return e()}finally{kt=r,Ts.transition=n,0===(6&(Cs=t))&&qi()}}function fc(){Rs=Ps.current,Si(Ps)}function hc(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,ii(n)),null!==As)for(n=As.return;null!==n;){var r=n;switch(ta(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&Pi();break;case 3:io(),Si(Ni),Si(Ci),lo();break;case 5:oo(r);break;case 4:io();break;case 13:case 19:Si(uo);break;case 10:xa(r.type._context);break;case 22:case 23:fc()}n=n.return}if(Ns=e,As=e=Pc(e.current,null),Ds=Rs=t,Os=0,Ls=null,Us=Fs=Ms=0,js=Vs=null,null!==Ea){for(t=0;t<Ea.length;t++)if(null!==(r=(n=Ea[t]).interleaved)){n.interleaved=null;var i=r.next,a=n.pending;if(null!==a){var o=a.next;a.next=i,r.next=o}n.pending=r}Ea=null}return e}function dc(e,t){for(;;){var n=As;try{if(wa(),fo.current=ou,go){for(var r=vo.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}go=!1}if(po=0,mo=yo=vo=null,ko=!1,bo=0,Es.current=null,null===n||null===n.return){Os=1,Ls=t,As=null;break}e:{var o=e,u=n.return,s=n,c=t;if(t=Ds,s.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var l=c,f=s,h=f.tag;if(0===(1&f.mode)&&(0===h||11===h||15===h)){var d=f.alternate;d?(f.updateQueue=d.updateQueue,f.memoizedState=d.memoizedState,f.lanes=d.lanes):(f.updateQueue=null,f.memoizedState=null)}var p=mu(u);if(null!==p){p.flags&=-257,gu(p,u,s,0,t),1&p.mode&&yu(o,l,t),c=l;var v=(t=p).updateQueue;if(null===v){var y=new Set;y.add(c),t.updateQueue=y}else v.add(c);break e}if(0===(1&t)){yu(o,l,t),vc();break e}c=Error(a(426))}else if(ia&&1&s.mode){var m=mu(u);if(null!==m){0===(65536&m.flags)&&(m.flags|=256),gu(m,u,s,0,t),pa(lu(c,s));break e}}o=c=lu(c,s),4!==Os&&(Os=2),null===Vs?Vs=[o]:Vs.push(o),o=u;do{switch(o.tag){case 3:o.flags|=65536,t&=-t,o.lanes|=t,Ma(o,pu(0,c,t));break e;case 1:s=c;var g=o.type,k=o.stateNode;if(0===(128&o.flags)&&("function"===typeof g.getDerivedStateFromError||null!==k&&"function"===typeof k.componentDidCatch&&(null===Ws||!Ws.has(k)))){o.flags|=65536,t&=-t,o.lanes|=t,Ma(o,vu(o,s,t));break e}}o=o.return}while(null!==o)}bc(n)}catch(b){t=b,As===n&&null!==n&&(As=n=n.return);continue}break}}function pc(){var e=Ss.current;return Ss.current=ou,null===e?ou:e}function vc(){0!==Os&&3!==Os&&2!==Os||(Os=4),null===Ns||0===(268435455&Ms)&&0===(268435455&Fs)||uc(Ns,Ds)}function yc(e,t){var n=Cs;Cs|=2;var r=pc();for(Ns===e&&Ds===t||(zs=null,hc(e,t));;)try{mc();break}catch(i){dc(e,i)}if(wa(),Cs=n,Ss.current=r,null!==As)throw Error(a(261));return Ns=null,Ds=0,Os}function mc(){for(;null!==As;)kc(As)}function gc(){for(;null!==As&&!Ye();)kc(As)}function kc(e){var t=_s(e.alternate,e,Rs);e.memoizedProps=e.pendingProps,null===t?bc(e):As=t,Es.current=null}function bc(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=Hu(n,t,Rs)))return void(As=n)}else{if(null!==(n=Qu(n,t)))return n.flags&=32767,void(As=n);if(null===e)return Os=6,void(As=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(As=t);As=t=e}while(null!==t);0===Os&&(Os=5)}function wc(e,t,n){var r=kt,i=Ts.transition;try{Ts.transition=null,kt=1,function(e,t,n,r){do{xc()}while(null!==Qs);if(0!==(6&Cs))throw Error(a(327));n=e.finishedWork;var i=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(a(177));e.callbackNode=null,e.callbackPriority=0;var o=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-ot(n),a=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~a}}(e,o),e===Ns&&(As=Ns=null,Ds=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Hs||(Hs=!0,Nc(tt,(function(){return xc(),null}))),o=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||o){o=Ts.transition,Ts.transition=null;var u=kt;kt=1;var s=Cs;Cs|=4,Es.current=null,function(e,t){if(ei=Kt,dr(e=hr())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var i=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch(w){n=null;break e}var u=0,s=-1,c=-1,l=0,f=0,h=e,d=null;t:for(;;){for(var p;h!==n||0!==i&&3!==h.nodeType||(s=u+i),h!==o||0!==r&&3!==h.nodeType||(c=u+r),3===h.nodeType&&(u+=h.nodeValue.length),null!==(p=h.firstChild);)d=h,h=p;for(;;){if(h===e)break t;if(d===n&&++l===i&&(s=u),d===o&&++f===r&&(c=u),null!==(p=h.nextSibling))break;d=(h=d).parentNode}h=p}n=-1===s||-1===c?null:{start:s,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(ti={focusedElem:e,selectionRange:n},Kt=!1,Ju=t;null!==Ju;)if(e=(t=Ju).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Ju=e;else for(;null!==Ju;){t=Ju;try{var v=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==v){var y=v.memoizedProps,m=v.memoizedState,g=t.stateNode,k=g.getSnapshotBeforeUpdate(t.elementType===t.type?y:ya(t.type,y),m);g.__reactInternalSnapshotBeforeUpdate=k}break;case 3:var b=t.stateNode.containerInfo;1===b.nodeType?b.textContent="":9===b.nodeType&&b.documentElement&&b.removeChild(b.documentElement);break;default:throw Error(a(163))}}catch(w){Ic(t,t.return,w)}if(null!==(e=t.sibling)){e.return=t.return,Ju=e;break}Ju=t.return}v=ts,ts=!1}(e,n),ys(n,e),pr(ti),Kt=!!ei,ti=ei=null,e.current=n,gs(n,e,i),$e(),Cs=s,kt=u,Ts.transition=o}else e.current=n;if(Hs&&(Hs=!1,Qs=e,Ys=i),0===(o=e.pendingLanes)&&(Ws=null),function(e){if(at&&"function"===typeof at.onCommitFiberRoot)try{at.onCommitFiberRoot(it,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),rc(e,Xe()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)r((i=t[n]).value,{componentStack:i.stack,digest:i.digest});if(Ks)throw Ks=!1,e=Gs,Gs=null,e;0!==(1&Ys)&&0!==e.tag&&xc(),0!==(1&(o=e.pendingLanes))?e===Xs?$s++:($s=0,Xs=e):$s=0,qi()}(e,t,n,r)}finally{Ts.transition=i,kt=r}return null}function xc(){if(null!==Qs){var e=bt(Ys),t=Ts.transition,n=kt;try{if(Ts.transition=null,kt=16>e?16:e,null===Qs)var r=!1;else{if(e=Qs,Qs=null,Ys=0,0!==(6&Cs))throw Error(a(331));var i=Cs;for(Cs|=4,Ju=e.current;null!==Ju;){var o=Ju,u=o.child;if(0!==(16&Ju.flags)){var s=o.deletions;if(null!==s){for(var c=0;c<s.length;c++){var l=s[c];for(Ju=l;null!==Ju;){var f=Ju;switch(f.tag){case 0:case 11:case 15:ns(8,f,o)}var h=f.child;if(null!==h)h.return=f,Ju=h;else for(;null!==Ju;){var d=(f=Ju).sibling,p=f.return;if(as(f),f===l){Ju=null;break}if(null!==d){d.return=p,Ju=d;break}Ju=p}}}var v=o.alternate;if(null!==v){var y=v.child;if(null!==y){v.child=null;do{var m=y.sibling;y.sibling=null,y=m}while(null!==y)}}Ju=o}}if(0!==(2064&o.subtreeFlags)&&null!==u)u.return=o,Ju=u;else e:for(;null!==Ju;){if(0!==(2048&(o=Ju).flags))switch(o.tag){case 0:case 11:case 15:ns(9,o,o.return)}var g=o.sibling;if(null!==g){g.return=o.return,Ju=g;break e}Ju=o.return}}var k=e.current;for(Ju=k;null!==Ju;){var b=(u=Ju).child;if(0!==(2064&u.subtreeFlags)&&null!==b)b.return=u,Ju=b;else e:for(u=k;null!==Ju;){if(0!==(2048&(s=Ju).flags))try{switch(s.tag){case 0:case 11:case 15:rs(9,s)}}catch(x){Ic(s,s.return,x)}if(s===u){Ju=null;break e}var w=s.sibling;if(null!==w){w.return=s.return,Ju=w;break e}Ju=s.return}}if(Cs=i,qi(),at&&"function"===typeof at.onPostCommitFiberRoot)try{at.onPostCommitFiberRoot(it,e)}catch(x){}r=!0}return r}finally{kt=n,Ts.transition=t}}return!1}function _c(e,t,n){e=Oa(e,t=pu(0,t=lu(n,t),1),1),t=ec(),null!==e&&(mt(e,1,t),rc(e,t))}function Ic(e,t,n){if(3===e.tag)_c(e,e,n);else for(;null!==t;){if(3===t.tag){_c(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Ws||!Ws.has(r))){t=Oa(t,e=vu(t,e=lu(n,e),1),1),e=ec(),null!==t&&(mt(t,1,e),rc(t,e));break}}t=t.return}}function Sc(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=ec(),e.pingedLanes|=e.suspendedLanes&n,Ns===e&&(Ds&n)===n&&(4===Os||3===Os&&(130023424&Ds)===Ds&&500>Xe()-Bs?hc(e,0):Us|=n),rc(e,t)}function Ec(e,t){0===t&&(0===(1&e.mode)?t=1:(t=lt,0===(130023424&(lt<<=1))&&(lt=4194304)));var n=ec();null!==(e=Na(e,t))&&(mt(e,t,n),rc(e,n))}function Tc(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Ec(e,n)}function Cc(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;null!==i&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(a(314))}null!==r&&r.delete(t),Ec(e,n)}function Nc(e,t){return He(e,t)}function Ac(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Dc(e,t,n,r){return new Ac(e,t,n,r)}function Rc(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Pc(e,t){var n=e.alternate;return null===n?((n=Dc(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Oc(e,t,n,r,i,o){var u=2;if(r=e,"function"===typeof e)Rc(e)&&(u=1);else if("string"===typeof e)u=5;else e:switch(e){case _:return Lc(n.children,i,o,t);case I:u=8,i|=8;break;case S:return(e=Dc(12,n,t,2|i)).elementType=S,e.lanes=o,e;case N:return(e=Dc(13,n,t,i)).elementType=N,e.lanes=o,e;case A:return(e=Dc(19,n,t,i)).elementType=A,e.lanes=o,e;case P:return Mc(n,i,o,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case E:u=10;break e;case T:u=9;break e;case C:u=11;break e;case D:u=14;break e;case R:u=16,r=null;break e}throw Error(a(130,null==e?e:typeof e,""))}return(t=Dc(u,n,t,i)).elementType=e,t.type=r,t.lanes=o,t}function Lc(e,t,n,r){return(e=Dc(7,e,r,t)).lanes=n,e}function Mc(e,t,n,r){return(e=Dc(22,e,r,t)).elementType=P,e.lanes=n,e.stateNode={isHidden:!1},e}function Fc(e,t,n){return(e=Dc(6,e,null,t)).lanes=n,e}function Uc(e,t,n){return(t=Dc(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Vc(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=yt(0),this.expirationTimes=yt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=yt(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function jc(e,t,n,r,i,a,o,u,s){return e=new Vc(e,t,n,u,s),1===t?(t=1,!0===a&&(t|=8)):t=0,a=Dc(3,null,null,t),e.current=a,a.stateNode=e,a.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Da(a),e}function Bc(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:x,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}function qc(e){if(!e)return Ti;e:{if(qe(e=e._reactInternals)!==e||1!==e.tag)throw Error(a(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Ri(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(a(171))}if(1===e.tag){var n=e.type;if(Ri(n))return Li(e,n,t)}return t}function zc(e,t,n,r,i,a,o,u,s){return(e=jc(n,r,!0,e,0,a,0,u,s)).context=qc(null),n=e.current,(a=Pa(r=ec(),i=tc(n))).callback=void 0!==t&&null!==t?t:null,Oa(n,a,i),e.current.lanes=i,mt(e,i,r),rc(e,r),e}function Kc(e,t,n,r){var i=t.current,a=ec(),o=tc(i);return n=qc(n),null===t.context?t.context=n:t.pendingContext=n,(t=Pa(a,o)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=Oa(i,t,o))&&(nc(e,i,o,a),La(e,i,o)),o}function Gc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Wc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Hc(e,t){Wc(e,t),(e=e.alternate)&&Wc(e,t)}_s=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Ni.current)bu=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return bu=!1,function(e,t,n){switch(t.tag){case 3:Au(t),da();break;case 5:ao(t);break;case 1:Ri(t.type)&&Mi(t);break;case 4:ro(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;Ei(ma,r._currentValue),r._currentValue=i;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(Ei(uo,1&uo.current),t.flags|=128,null):0!==(n&t.child.childLanes)?Fu(e,t,n):(Ei(uo,1&uo.current),null!==(e=Ku(e,t,n))?e.sibling:null);Ei(uo,1&uo.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(128&e.flags)){if(r)return qu(e,t,n);t.flags|=128}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),Ei(uo,uo.current),r)break;return null;case 22:case 23:return t.lanes=0,Su(e,t,n)}return Ku(e,t,n)}(e,t,n);bu=0!==(131072&e.flags)}else bu=!1,ia&&0!==(1048576&t.flags)&&Zi(t,Wi,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;zu(e,t),e=t.pendingProps;var i=Di(t,Ci.current);Ia(t,n),i=Io(null,t,r,e,i,n);var o=So();return t.flags|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Ri(r)?(o=!0,Mi(t)):o=!1,t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,Da(t),i.updater=Ba,t.stateNode=i,i._reactInternals=t,Ga(t,r,e,n),t=Nu(null,t,r,!0,o,n)):(t.tag=0,ia&&o&&ea(t),wu(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(zu(e,t),e=t.pendingProps,r=(i=r._init)(r._payload),t.type=r,i=t.tag=function(e){if("function"===typeof e)return Rc(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===C)return 11;if(e===D)return 14}return 2}(r),e=ya(r,e),i){case 0:t=Tu(null,t,r,e,n);break e;case 1:t=Cu(null,t,r,e,n);break e;case 11:t=xu(null,t,r,e,n);break e;case 14:t=_u(null,t,r,ya(r.type,e),n);break e}throw Error(a(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,Tu(e,t,r,i=t.elementType===r?i:ya(r,i),n);case 1:return r=t.type,i=t.pendingProps,Cu(e,t,r,i=t.elementType===r?i:ya(r,i),n);case 3:e:{if(Au(t),null===e)throw Error(a(387));r=t.pendingProps,i=(o=t.memoizedState).element,Ra(e,t),Fa(t,r,null,n);var u=t.memoizedState;if(r=u.element,o.isDehydrated){if(o={element:r,isDehydrated:!1,cache:u.cache,pendingSuspenseBoundaries:u.pendingSuspenseBoundaries,transitions:u.transitions},t.updateQueue.baseState=o,t.memoizedState=o,256&t.flags){t=Du(e,t,r,n,i=lu(Error(a(423)),t));break e}if(r!==i){t=Du(e,t,r,n,i=lu(Error(a(424)),t));break e}for(ra=ci(t.stateNode.containerInfo.firstChild),na=t,ia=!0,aa=null,n=Xa(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(da(),r===i){t=Ku(e,t,n);break e}wu(e,t,r,n)}t=t.child}return t;case 5:return ao(t),null===e&&ca(t),r=t.type,i=t.pendingProps,o=null!==e?e.memoizedProps:null,u=i.children,ni(r,i)?u=null:null!==o&&ni(r,o)&&(t.flags|=32),Eu(e,t),wu(e,t,u,n),t.child;case 6:return null===e&&ca(t),null;case 13:return Fu(e,t,n);case 4:return ro(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=$a(t,null,r,n):wu(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,xu(e,t,r,i=t.elementType===r?i:ya(r,i),n);case 7:return wu(e,t,t.pendingProps,n),t.child;case 8:case 12:return wu(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,o=t.memoizedProps,u=i.value,Ei(ma,r._currentValue),r._currentValue=u,null!==o)if(ur(o.value,u)){if(o.children===i.children&&!Ni.current){t=Ku(e,t,n);break e}}else for(null!==(o=t.child)&&(o.return=t);null!==o;){var s=o.dependencies;if(null!==s){u=o.child;for(var c=s.firstContext;null!==c;){if(c.context===r){if(1===o.tag){(c=Pa(-1,n&-n)).tag=2;var l=o.updateQueue;if(null!==l){var f=(l=l.shared).pending;null===f?c.next=c:(c.next=f.next,f.next=c),l.pending=c}}o.lanes|=n,null!==(c=o.alternate)&&(c.lanes|=n),_a(o.return,n,t),s.lanes|=n;break}c=c.next}}else if(10===o.tag)u=o.type===t.type?null:o.child;else if(18===o.tag){if(null===(u=o.return))throw Error(a(341));u.lanes|=n,null!==(s=u.alternate)&&(s.lanes|=n),_a(u,n,t),u=o.sibling}else u=o.child;if(null!==u)u.return=o;else for(u=o;null!==u;){if(u===t){u=null;break}if(null!==(o=u.sibling)){o.return=u.return,u=o;break}u=u.return}o=u}wu(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,Ia(t,n),r=r(i=Sa(i)),t.flags|=1,wu(e,t,r,n),t.child;case 14:return i=ya(r=t.type,t.pendingProps),_u(e,t,r,i=ya(r.type,i),n);case 15:return Iu(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:ya(r,i),zu(e,t),t.tag=1,Ri(r)?(e=!0,Mi(t)):e=!1,Ia(t,n),za(t,r,i),Ga(t,r,i,n),Nu(null,t,r,!0,e,n);case 19:return qu(e,t,n);case 22:return Su(e,t,n)}throw Error(a(156,t.tag))};var Qc="function"===typeof reportError?reportError:function(e){console.error(e)};function Yc(e){this._internalRoot=e}function $c(e){this._internalRoot=e}function Xc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Jc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Zc(){}function el(e,t,n,r,i){var a=n._reactRootContainer;if(a){var o=a;if("function"===typeof i){var u=i;i=function(){var e=Gc(o);u.call(e)}}Kc(t,o,e,i)}else o=function(e,t,n,r,i){if(i){if("function"===typeof r){var a=r;r=function(){var e=Gc(o);a.call(e)}}var o=zc(t,r,e,0,null,!1,0,"",Zc);return e._reactRootContainer=o,e[pi]=o.current,qr(8===e.nodeType?e.parentNode:e),lc(),o}for(;i=e.lastChild;)e.removeChild(i);if("function"===typeof r){var u=r;r=function(){var e=Gc(s);u.call(e)}}var s=jc(e,0,!1,null,0,!1,0,"",Zc);return e._reactRootContainer=s,e[pi]=s.current,qr(8===e.nodeType?e.parentNode:e),lc((function(){Kc(t,s,n,r)})),s}(n,t,e,i,r);return Gc(o)}$c.prototype.render=Yc.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(a(409));Kc(e,t,null,null)},$c.prototype.unmount=Yc.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;lc((function(){Kc(null,e,null,null)})),t[pi]=null}},$c.prototype.unstable_scheduleHydration=function(e){if(e){var t=It();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Pt.length&&0!==t&&t<Pt[n].priority;n++);Pt.splice(n,0,e),0===n&&Ft(e)}},wt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=ft(t.pendingLanes);0!==n&&(gt(t,1|n),rc(t,Xe()),0===(6&Cs)&&(qs=Xe()+500,qi()))}break;case 13:lc((function(){var t=Na(e,1);if(null!==t){var n=ec();nc(t,e,1,n)}})),Hc(e,1)}},xt=function(e){if(13===e.tag){var t=Na(e,134217728);if(null!==t)nc(t,e,134217728,ec());Hc(e,134217728)}},_t=function(e){if(13===e.tag){var t=tc(e),n=Na(e,t);if(null!==n)nc(n,e,t,ec());Hc(e,t)}},It=function(){return kt},St=function(e,t){var n=kt;try{return kt=e,t()}finally{kt=n}},xe=function(e,t,n){switch(t){case"input":if(J(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=wi(r);if(!i)throw Error(a(90));H(r),J(r,i)}}}break;case"textarea":ae(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},Ce=cc,Ne=lc;var tl={usingClientEntryPoint:!1,Events:[ki,bi,wi,Ee,Te,cc]},nl={findFiberByHostInstance:gi,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},rl={bundleType:nl.bundleType,version:nl.version,rendererPackageName:nl.rendererPackageName,rendererConfig:nl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:b.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=Ge(e))?null:e.stateNode},findFiberByHostInstance:nl.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var il=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!il.isDisabled&&il.supportsFiber)try{it=il.inject(rl),at=il}catch(le){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tl,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Xc(t))throw Error(a(200));return Bc(e,t,null,n)},t.createRoot=function(e,t){if(!Xc(e))throw Error(a(299));var n=!1,r="",i=Qc;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(i=t.onRecoverableError)),t=jc(e,1,!1,null,0,n,0,r,i),e[pi]=t.current,qr(8===e.nodeType?e.parentNode:e),new Yc(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(a(188));throw e=Object.keys(e).join(","),Error(a(268,e))}return e=null===(e=Ge(t))?null:e.stateNode},t.flushSync=function(e){return lc(e)},t.hydrate=function(e,t,n){if(!Jc(t))throw Error(a(200));return el(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!Xc(e))throw Error(a(405));var r=null!=n&&n.hydratedSources||null,i=!1,o="",u=Qc;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(i=!0),void 0!==n.identifierPrefix&&(o=n.identifierPrefix),void 0!==n.onRecoverableError&&(u=n.onRecoverableError)),t=zc(t,null,e,1,null!=n?n:null,i,0,o,u),e[pi]=t.current,qr(e),r)for(e=0;e<r.length;e++)i=(i=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new $c(t)},t.render=function(e,t,n){if(!Jc(t))throw Error(a(200));return el(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!Jc(e))throw Error(a(40));return!!e._reactRootContainer&&(lc((function(){el(null,null,e,!1,(function(){e._reactRootContainer=null,e[pi]=null}))})),!0)},t.unstable_batchedUpdates=cc,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Jc(n))throw Error(a(200));if(null==e||void 0===e._reactInternals)throw Error(a(38));return el(e,t,n,!1,r)},t.version="18.2.0-next-9e3b772b8-20220608"},250:function(e,t,n){var r=n(164);t.createRoot=r.createRoot,t.hydrateRoot=r.hydrateRoot},164:function(e,t,n){!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(463)},374:function(e,t,n){var r=n(791),i=Symbol.for("react.element"),a=Symbol.for("react.fragment"),o=Object.prototype.hasOwnProperty,u=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var r,a={},c=null,l=null;for(r in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(l=t.ref),t)o.call(t,r)&&!s.hasOwnProperty(r)&&(a[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===a[r]&&(a[r]=t[r]);return{$$typeof:i,type:e,key:c,ref:l,props:a,_owner:u.current}}t.jsx=c,t.jsxs=c},117:function(e,t){var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),u=Symbol.for("react.provider"),s=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),l=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),d=Symbol.iterator;var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},v=Object.assign,y={};function m(e,t,n){this.props=e,this.context=t,this.refs=y,this.updater=n||p}function g(){}function k(e,t,n){this.props=e,this.context=t,this.refs=y,this.updater=n||p}m.prototype.isReactComponent={},m.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},m.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},g.prototype=m.prototype;var b=k.prototype=new g;b.constructor=k,v(b,m.prototype),b.isPureReactComponent=!0;var w=Array.isArray,x=Object.prototype.hasOwnProperty,_={current:null},I={key:!0,ref:!0,__self:!0,__source:!0};function S(e,t,r){var i,a={},o=null,u=null;if(null!=t)for(i in void 0!==t.ref&&(u=t.ref),void 0!==t.key&&(o=""+t.key),t)x.call(t,i)&&!I.hasOwnProperty(i)&&(a[i]=t[i]);var s=arguments.length-2;if(1===s)a.children=r;else if(1<s){for(var c=Array(s),l=0;l<s;l++)c[l]=arguments[l+2];a.children=c}if(e&&e.defaultProps)for(i in s=e.defaultProps)void 0===a[i]&&(a[i]=s[i]);return{$$typeof:n,type:e,key:o,ref:u,props:a,_owner:_.current}}function E(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var T=/\/+/g;function C(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function N(e,t,i,a,o){var u=typeof e;"undefined"!==u&&"boolean"!==u||(e=null);var s=!1;if(null===e)s=!0;else switch(u){case"string":case"number":s=!0;break;case"object":switch(e.$$typeof){case n:case r:s=!0}}if(s)return o=o(s=e),e=""===a?"."+C(s,0):a,w(o)?(i="",null!=e&&(i=e.replace(T,"$&/")+"/"),N(o,t,i,"",(function(e){return e}))):null!=o&&(E(o)&&(o=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(o,i+(!o.key||s&&s.key===o.key?"":(""+o.key).replace(T,"$&/")+"/")+e)),t.push(o)),1;if(s=0,a=""===a?".":a+":",w(e))for(var c=0;c<e.length;c++){var l=a+C(u=e[c],c);s+=N(u,t,i,l,o)}else if(l=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=d&&e[d]||e["@@iterator"])?e:null}(e),"function"===typeof l)for(e=l.call(e),c=0;!(u=e.next()).done;)s+=N(u=u.value,t,i,l=a+C(u,c++),o);else if("object"===u)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return s}function A(e,t,n){if(null==e)return e;var r=[],i=0;return N(e,r,"","",(function(e){return t.call(n,e,i++)})),r}function D(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var R={current:null},P={transition:null},O={ReactCurrentDispatcher:R,ReactCurrentBatchConfig:P,ReactCurrentOwner:_};t.Children={map:A,forEach:function(e,t,n){A(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return A(e,(function(){t++})),t},toArray:function(e){return A(e,(function(e){return e}))||[]},only:function(e){if(!E(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=m,t.Fragment=i,t.Profiler=o,t.PureComponent=k,t.StrictMode=a,t.Suspense=l,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=O,t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=v({},e.props),a=e.key,o=e.ref,u=e._owner;if(null!=t){if(void 0!==t.ref&&(o=t.ref,u=_.current),void 0!==t.key&&(a=""+t.key),e.type&&e.type.defaultProps)var s=e.type.defaultProps;for(c in t)x.call(t,c)&&!I.hasOwnProperty(c)&&(i[c]=void 0===t[c]&&void 0!==s?s[c]:t[c])}var c=arguments.length-2;if(1===c)i.children=r;else if(1<c){s=Array(c);for(var l=0;l<c;l++)s[l]=arguments[l+2];i.children=s}return{$$typeof:n,type:e.type,key:a,ref:o,props:i,_owner:u}},t.createContext=function(e){return(e={$$typeof:s,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:u,_context:e},e.Consumer=e},t.createElement=S,t.createFactory=function(e){var t=S.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=E,t.lazy=function(e){return{$$typeof:h,_payload:{_status:-1,_result:e},_init:D}},t.memo=function(e,t){return{$$typeof:f,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=P.transition;P.transition={};try{e()}finally{P.transition=t}},t.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")},t.useCallback=function(e,t){return R.current.useCallback(e,t)},t.useContext=function(e){return R.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return R.current.useDeferredValue(e)},t.useEffect=function(e,t){return R.current.useEffect(e,t)},t.useId=function(){return R.current.useId()},t.useImperativeHandle=function(e,t,n){return R.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return R.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return R.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return R.current.useMemo(e,t)},t.useReducer=function(e,t,n){return R.current.useReducer(e,t,n)},t.useRef=function(e){return R.current.useRef(e)},t.useState=function(e){return R.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return R.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return R.current.useTransition()},t.version="18.2.0"},791:function(e,t,n){e.exports=n(117)},184:function(e,t,n){e.exports=n(374)},813:function(e,t){function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,i=e[r];if(!(0<a(i,t)))break e;e[r]=t,e[n]=i,n=r}}function r(e){return 0===e.length?null:e[0]}function i(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length,o=i>>>1;r<o;){var u=2*(r+1)-1,s=e[u],c=u+1,l=e[c];if(0>a(s,n))c<i&&0>a(l,s)?(e[r]=l,e[c]=n,r=c):(e[r]=s,e[u]=n,r=u);else{if(!(c<i&&0>a(l,n)))break e;e[r]=l,e[c]=n,r=c}}}return t}function a(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var o=performance;t.unstable_now=function(){return o.now()}}else{var u=Date,s=u.now();t.unstable_now=function(){return u.now()-s}}var c=[],l=[],f=1,h=null,d=3,p=!1,v=!1,y=!1,m="function"===typeof setTimeout?setTimeout:null,g="function"===typeof clearTimeout?clearTimeout:null,k="undefined"!==typeof setImmediate?setImmediate:null;function b(e){for(var t=r(l);null!==t;){if(null===t.callback)i(l);else{if(!(t.startTime<=e))break;i(l),t.sortIndex=t.expirationTime,n(c,t)}t=r(l)}}function w(e){if(y=!1,b(e),!v)if(null!==r(c))v=!0,P(x);else{var t=r(l);null!==t&&O(w,t.startTime-e)}}function x(e,n){v=!1,y&&(y=!1,g(E),E=-1),p=!0;var a=d;try{for(b(n),h=r(c);null!==h&&(!(h.expirationTime>n)||e&&!N());){var o=h.callback;if("function"===typeof o){h.callback=null,d=h.priorityLevel;var u=o(h.expirationTime<=n);n=t.unstable_now(),"function"===typeof u?h.callback=u:h===r(c)&&i(c),b(n)}else i(c);h=r(c)}if(null!==h)var s=!0;else{var f=r(l);null!==f&&O(w,f.startTime-n),s=!1}return s}finally{h=null,d=a,p=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var _,I=!1,S=null,E=-1,T=5,C=-1;function N(){return!(t.unstable_now()-C<T)}function A(){if(null!==S){var e=t.unstable_now();C=e;var n=!0;try{n=S(!0,e)}finally{n?_():(I=!1,S=null)}}else I=!1}if("function"===typeof k)_=function(){k(A)};else if("undefined"!==typeof MessageChannel){var D=new MessageChannel,R=D.port2;D.port1.onmessage=A,_=function(){R.postMessage(null)}}else _=function(){m(A,0)};function P(e){S=e,I||(I=!0,_())}function O(e,n){E=m((function(){e(t.unstable_now())}),n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){v||p||(v=!0,P(x))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return d},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(e){switch(d){case 1:case 2:case 3:var t=3;break;default:t=d}var n=d;d=t;try{return e()}finally{d=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=d;d=e;try{return t()}finally{d=n}},t.unstable_scheduleCallback=function(e,i,a){var o=t.unstable_now();switch("object"===typeof a&&null!==a?a="number"===typeof(a=a.delay)&&0<a?o+a:o:a=o,e){case 1:var u=-1;break;case 2:u=250;break;case 5:u=1073741823;break;case 4:u=1e4;break;default:u=5e3}return e={id:f++,callback:i,priorityLevel:e,startTime:a,expirationTime:u=a+u,sortIndex:-1},a>o?(e.sortIndex=a,n(l,e),null===r(c)&&e===r(l)&&(y?(g(E),E=-1):y=!0,O(w,a-o))):(e.sortIndex=u,n(c,e),v||p||(v=!0,P(x))),e},t.unstable_shouldYield=N,t.unstable_wrapCallback=function(e){var t=d;return function(){var n=d;d=t;try{return e.apply(this,arguments)}finally{d=n}}}},296:function(e,t,n){e.exports=n(813)}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var a=t[r]={exports:{}};return e[r](a,a.exports,n),a.exports}n.d=function(e,t){for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},function(){var e={};n.r(e),n.d(e,{FirebaseError:function(){return W},SDK_VERSION:function(){return it},_DEFAULT_ENTRY_NAME:function(){return Ge},_addComponent:function(){return Ye},_addOrOverwriteComponent:function(){return $e},_apps:function(){return He},_clearComponents:function(){return et},_components:function(){return Qe},_getProvider:function(){return Je},_registerComponent:function(){return Xe},_removeServiceInstance:function(){return Ze},deleteApp:function(){return st},getApp:function(){return ot},getApps:function(){return ut},initializeApp:function(){return at},onLog:function(){return ft},registerVersion:function(){return lt},setLogLevel:function(){return ht}});var t=n(791),r=n(250);function i(e){if(Array.isArray(e))return e}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function o(e,t){if(e){if("string"===typeof e)return a(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?a(e,t):void 0}}function u(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function s(e,t){return i(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,a=[],o=!0,u=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(s){u=!0,i=s}finally{try{o||null==n.return||n.return()}finally{if(u)throw i}}return a}}(e,t)||o(e,t)||u()}var c=n(184),l=(0,t.createContext)(null);function f(e){var n=e.children,r=s((0,t.useState)(JSON.parse(localStorage.getItem("toDos"))||[]),2),i=r[0],a=r[1];return(0,c.jsx)(l.Provider,{value:{toDos:i,setToDos:a},children:n})}var h=function(){var e=(0,t.useContext)(l),n=e.toDos,r=e.setToDos,i=!0,a=!0,o=!0,u=function(){return(0,c.jsx)("div",{className:"listContainer",children:(0,c.jsx)("div",{className:"activityContainer",children:(0,c.jsx)("div",{className:"nothing",children:(0,c.jsx)("h5",{className:"text",children:"Nothing to show here"})})})})};function s(e){if(window.confirm("Do You want to Permanantly delete ?")){var t=n.filter((function(t){return t.id===e.id?null:t}));r(t),localStorage.setItem("toDos",JSON.stringify(t))}}return(0,c.jsx)("div",{className:"app",children:(0,c.jsxs)("div",{className:"status",children:[(0,c.jsx)("div",{children:(0,c.jsxs)("div",{className:"completed lists",children:[" ",(0,c.jsx)("h3",{className:"heading",children:"Completed"}),n.map((function(e){return e.status?(i=!1,(0,c.jsxs)("div",{className:"listContainer",children:[(0,c.jsxs)("div",{className:"activityContainer",children:[(0,c.jsx)("h4",{className:"text",children:e.text}),(0,c.jsx)("i",{className:"fa-solid fa-trash-can last",onClick:function(){return s(e)}})]}),(0,c.jsx)("div",{className:"timeContainer",children:(0,c.jsx)("p",{className:"time",children:e.time})})]})):null})),i&&u()]})}),(0,c.jsx)("div",{children:(0,c.jsxs)("div",{className:"active lists",children:[(0,c.jsx)("h3",{className:"heading",children:"Active Task"}),n.map((function(e){return!1===e.status?(a=!1,(0,c.jsxs)("div",{className:"listContainer",children:[(0,c.jsxs)("div",{className:"activityContainer",children:[(0,c.jsx)("i",{className:"fa-solid fa-check",onClick:function(){var t=n.filter((function(t){return t.id===e.id&&(t.status=!e.status),t}));r(t),localStorage.setItem("toDos",JSON.stringify(t))}}),(0,c.jsx)("h4",{className:"text",children:e.text}),(0,c.jsx)("i",{className:"fa-solid fa-xmark last",onClick:function(){var t=n.filter((function(t){return t.id===e.id&&(t.status=void 0),t}));r(t),localStorage.setItem("toDos",JSON.stringify(t))}})]}),(0,c.jsx)("div",{className:"timeContainer",children:(0,c.jsx)("p",{className:"time",children:e.time})})]})):null})),a&&u()]})}),(0,c.jsx)("div",{children:(0,c.jsxs)("div",{className:"removed lists",children:[(0,c.jsx)("h3",{className:"heading",children:"Cancelled"}),n.map((function(e){return void 0===e.status?(o=!1,(0,c.jsxs)("div",{className:"listContainer",children:[(0,c.jsxs)("div",{className:"activityContainer",children:[(0,c.jsx)("h4",{className:"text",children:e.text}),(0,c.jsx)("i",{className:"fa-solid fa-rotate-left last",onClick:function(){var t=n.filter((function(t){return t.id===e.id&&(t.status=!1),t}));r(t),localStorage.setItem("toDos",JSON.stringify(t))}}),(0,c.jsx)("i",{className:"fa-solid fa-trash-can last",onClick:function(){return s(e)}})]}),(0,c.jsx)("div",{className:"timeContainer",children:(0,c.jsx)("p",{className:"time",children:e.time})})]})):null})),o&&u()]})})]})})};function d(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function p(e){return function(e){if(Array.isArray(e))return a(e)}(e)||d(e)||o(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function v(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function y(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function m(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function g(e,t,n){return t&&m(e.prototype,t),n&&m(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function k(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=o(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,u=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return u=e.done,e},e:function(e){s=!0,a=e},f:function(){try{u||null==n.return||n.return()}finally{if(s)throw a}}}}function b(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function w(e,t){return w=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},w(e,t)}function x(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&w(e,t)}function _(e){return _=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},_(e)}function I(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function S(e){return S="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},S(e)}function E(e,t){if(t&&("object"===S(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return b(e)}function T(e){var t=I();return function(){var n,r=_(e);if(t){var i=_(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return E(this,n)}}function C(e,t,n){return C=I()?Reflect.construct.bind():function(e,t,n){var r=[null];r.push.apply(r,t);var i=new(Function.bind.apply(e,r));return n&&w(i,n.prototype),i},C.apply(null,arguments)}function N(e){var t="function"===typeof Map?new Map:void 0;return N=function(e){if(null===e||!function(e){return-1!==Function.toString.call(e).indexOf("[native code]")}(e))return e;if("function"!==typeof e)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return C(e,arguments,_(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),w(n,e)},N(e)}var A=function(e){for(var t=[],n=0,r=0;r<e.length;r++){var i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296===(64512&i)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},D={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray:function(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<e.length;i+=3){var a=e[i],o=i+1<e.length,u=o?e[i+1]:0,s=i+2<e.length,c=s?e[i+2]:0,l=a>>2,f=(3&a)<<4|u>>4,h=(15&u)<<2|c>>6,d=63&c;s||(d=64,o||(h=64)),r.push(n[l],n[f],n[h],n[d])}return r.join("")},encodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(A(e),t)},decodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){for(var t=[],n=0,r=0;n<e.length;){var i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){var a=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&a)}else if(i>239&&i<365){var o=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(o>>10)),t[r++]=String.fromCharCode(56320+(1023&o))}else{var u=e[n++],s=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&u)<<6|63&s)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray:function(e,t){this.init_();for(var n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<e.length;){var a=n[e.charAt(i++)],o=i<e.length?n[e.charAt(i)]:0,u=++i<e.length?n[e.charAt(i)]:64,s=++i<e.length?n[e.charAt(i)]:64;if(++i,null==a||null==o||null==u||null==s)throw Error();var c=a<<2|o>>4;if(r.push(c),64!==u){var l=o<<4&240|u>>2;if(r.push(l),64!==s){var f=u<<6&192|s;r.push(f)}}}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}},R=function(e){return function(e){var t=A(e);return D.encodeByteArray(t,!0)}(e).replace(/\./g,"")},P=function(e){try{return D.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};function O(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:return new Date(t.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(var n in t)t.hasOwnProperty(n)&&"__proto__"!==n&&(e[n]=O(e[n],t[n]));return e}var L=function(){return function(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n.g)return n.g;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__},M=function(){try{return L()||function(){if("undefined"!==typeof process){var e={NODE_ENV:"production",PUBLIC_URL:"/toDoApp",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0}}()||function(){if("undefined"!==typeof document){var e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(n){return}var t=e&&P(e[1]);return t&&JSON.parse(t)}}()}catch(e){return void console.info("Unable to get __FIREBASE_DEFAULTS__ due to: ".concat(e))}},F=function(){var e;return null===(e=M())||void 0===e?void 0:e.config},U=function(){function e(){var t=this;y(this,e),this.reject=function(){},this.resolve=function(){},this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))}return g(e,[{key:"wrapCallback",value:function(e){var t=this;return function(n,r){n?t.reject(n):t.resolve(r),"function"===typeof e&&(t.promise.catch((function(){})),1===e.length?e(n):e(n,r))}}}]),e}();function V(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');var n=t||"demo-project",r=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");var a=Object.assign({iss:"https://securetoken.google.com/".concat(n),aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[R(JSON.stringify({alg:"none",type:"JWT"})),R(JSON.stringify(a)),""].join(".")}function j(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function B(){var e,t=null===(e=M())||void 0===e?void 0:e.forceEnvironment;if("node"===t)return!0;if("browser"===t)return!1;try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(r){return!1}}function q(){var e="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof e&&void 0!==e.id}function z(){return"object"===typeof navigator&&"ReactNative"===navigator.product}function K(){var e=j();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function G(){try{return"object"===typeof indexedDB}catch(e){return!1}}var W=function(e){x(n,e);var t=T(n);function n(e,r,i){var a;return y(this,n),(a=t.call(this,r)).code=e,a.customData=i,a.name="FirebaseError",Object.setPrototypeOf(b(a),n.prototype),Error.captureStackTrace&&Error.captureStackTrace(b(a),H.prototype.create),a}return g(n)}(N(Error)),H=function(){function e(t,n,r){y(this,e),this.service=t,this.serviceName=n,this.errors=r}return g(e,[{key:"create",value:function(e){var t=(arguments.length<=1?void 0:arguments[1])||{},n="".concat(this.service,"/").concat(e),r=this.errors[e],i=r?Q(r,t):"Error",a="".concat(this.serviceName,": ").concat(i," (").concat(n,")."),o=new W(n,a,t);return o}}]),e}();function Q(e,t){return e.replace(Y,(function(e,n){var r=t[n];return null!=r?String(r):"<".concat(n,"?>")}))}var Y=/\{\$([^}]+)}/g;function $(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function X(e,t){if(e===t)return!0;for(var n=Object.keys(e),r=Object.keys(t),i=0,a=n;i<a.length;i++){var o=a[i];if(!r.includes(o))return!1;var u=e[o],s=t[o];if(J(u)&&J(s)){if(!X(u,s))return!1}else if(u!==s)return!1}for(var c=0,l=r;c<l.length;c++){var f=l[c];if(!n.includes(f))return!1}return!0}function J(e){return null!==e&&"object"===typeof e}function Z(e){for(var t=[],n=function(){var e=s(i[r],2),n=e[0],a=e[1];Array.isArray(a)?a.forEach((function(e){t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))})):t.push(encodeURIComponent(n)+"="+encodeURIComponent(a))},r=0,i=Object.entries(e);r<i.length;r++)n();return t.length?"&"+t.join("&"):""}function ee(e){var t={};return e.replace(/^\?/,"").split("&").forEach((function(e){if(e){var n=s(e.split("="),2),r=n[0],i=n[1];t[decodeURIComponent(r)]=decodeURIComponent(i)}})),t}function te(e){var t=e.indexOf("?");if(!t)return"";var n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}function ne(e,t){var n=new re(e,t);return n.subscribe.bind(n)}var re=function(){function e(t,n){var r=this;y(this,e),this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then((function(){t(r)})).catch((function(e){r.error(e)}))}return g(e,[{key:"next",value:function(e){this.forEachObserver((function(t){t.next(e)}))}},{key:"error",value:function(e){this.forEachObserver((function(t){t.error(e)})),this.close(e)}},{key:"complete",value:function(){this.forEachObserver((function(e){e.complete()})),this.close()}},{key:"subscribe",value:function(e,t,n){var r,i=this;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(e,t){if("object"!==typeof e||null===e)return!1;var n,r=k(t);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(i in e&&"function"===typeof e[i])return!0}}catch(a){r.e(a)}finally{r.f()}return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n}).next&&(r.next=ie),void 0===r.error&&(r.error=ie),void 0===r.complete&&(r.complete=ie);var a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(e){}})),this.observers.push(r),a}},{key:"unsubscribeOne",value:function(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}},{key:"forEachObserver",value:function(e){if(!this.finalized)for(var t=0;t<this.observers.length;t++)this.sendOne(t,e)}},{key:"sendOne",value:function(e,t){var n=this;this.task.then((function(){if(void 0!==n.observers&&void 0!==n.observers[e])try{t(n.observers[e])}catch(r){"undefined"!==typeof console&&console.error&&console.error(r)}}))}},{key:"close",value:function(e){var t=this;this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then((function(){t.observers=void 0,t.onNoObservers=void 0})))}}]),e}();function ie(){}function ae(e){return e&&e._delegate?e._delegate:e}function oe(){oe=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},i=r.iterator||"@@iterator",a=r.asyncIterator||"@@asyncIterator",o=r.toStringTag||"@@toStringTag";function u(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(T){u=function(e,t,n){return e[t]=n}}function s(e,t,n,r){var i=t&&t.prototype instanceof f?t:f,a=Object.create(i.prototype),o=new _(r||[]);return a._invoke=function(e,t,n){var r="suspendedStart";return function(i,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===i)throw a;return E()}for(n.method=i,n.arg=a;;){var o=n.delegate;if(o){var u=b(o,n);if(u){if(u===l)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var s=c(e,t,n);if("normal"===s.type){if(r=n.done?"completed":"suspendedYield",s.arg===l)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(r="completed",n.method="throw",n.arg=s.arg)}}}(e,n,o),a}function c(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(T){return{type:"throw",arg:T}}}e.wrap=s;var l={};function f(){}function h(){}function d(){}var p={};u(p,i,(function(){return this}));var v=Object.getPrototypeOf,y=v&&v(v(I([])));y&&y!==t&&n.call(y,i)&&(p=y);var m=d.prototype=f.prototype=Object.create(p);function g(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function k(e,t){function r(i,a,o,u){var s=c(e[i],e,a);if("throw"!==s.type){var l=s.arg,f=l.value;return f&&"object"==S(f)&&n.call(f,"__await")?t.resolve(f.__await).then((function(e){r("next",e,o,u)}),(function(e){r("throw",e,o,u)})):t.resolve(f).then((function(e){l.value=e,o(l)}),(function(e){return r("throw",e,o,u)}))}u(s.arg)}var i;this._invoke=function(e,n){function a(){return new t((function(t,i){r(e,n,t,i)}))}return i=i?i.then(a,a):a()}}function b(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,b(e,t),"throw"===t.method))return l;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var r=c(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,l;var i=r.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,l):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,l)}function w(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function x(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function _(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(w,this),this.reset(!0)}function I(e){if(e){var t=e[i];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,a=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return a.next=a}}return{next:E}}function E(){return{value:void 0,done:!0}}return h.prototype=d,u(m,"constructor",d),u(d,"constructor",h),h.displayName=u(d,o,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===h||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,d):(e.__proto__=d,u(e,o,"GeneratorFunction")),e.prototype=Object.create(m),e},e.awrap=function(e){return{__await:e}},g(k.prototype),u(k.prototype,a,(function(){return this})),e.AsyncIterator=k,e.async=function(t,n,r,i,a){void 0===a&&(a=Promise);var o=new k(s(t,n,r,i),a);return e.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},g(m),u(m,o,"Generator"),u(m,i,(function(){return this})),u(m,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=I,_.prototype={constructor:_,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return o.type="throw",o.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],o=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),s=n.call(a,"finallyLoc");if(u&&s){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=e,o.arg=t,a?(this.method="next",this.next=a.finallyLoc,l):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),l},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),x(n),l}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;x(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:I(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),l}},e}function ue(e,t,n,r,i,a,o){try{var u=e[a](o),s=u.value}catch(c){return void n(c)}u.done?t(s):Promise.resolve(s).then(r,i)}function se(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var a=e.apply(t,n);function o(e){ue(a,r,i,o,u,"next",e)}function u(e){ue(a,r,i,o,u,"throw",e)}o(void 0)}))}}var ce=function(){function e(t,n,r){y(this,e),this.name=t,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}return g(e,[{key:"setInstantiationMode",value:function(e){return this.instantiationMode=e,this}},{key:"setMultipleInstances",value:function(e){return this.multipleInstances=e,this}},{key:"setServiceProps",value:function(e){return this.serviceProps=e,this}},{key:"setInstanceCreatedCallback",value:function(e){return this.onInstanceCreated=e,this}}]),e}(),le="[DEFAULT]",fe=function(){function e(t,n){y(this,e),this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}return g(e,[{key:"get",value:function(e){var t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){var n=new U;if(this.instancesDeferred.set(t,n),this.isInitialized(t)||this.shouldAutoInitialize())try{var r=this.getOrInitializeService({instanceIdentifier:t});r&&n.resolve(r)}catch(i){}}return this.instancesDeferred.get(t).promise}},{key:"getImmediate",value:function(e){var t,n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),r=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service ".concat(this.name," is not available"))}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}}},{key:"getComponent",value:function(){return this.component}},{key:"setComponent",value:function(e){if(e.name!==this.name)throw Error("Mismatching Component ".concat(e.name," for Provider ").concat(this.name,"."));if(this.component)throw Error("Component for ".concat(this.name," has already been provided"));if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:le})}catch(c){}var t,n=k(this.instancesDeferred.entries());try{for(n.s();!(t=n.n()).done;){var r=s(t.value,2),i=r[0],a=r[1],o=this.normalizeInstanceIdentifier(i);try{var u=this.getOrInitializeService({instanceIdentifier:o});a.resolve(u)}catch(c){}}}catch(l){n.e(l)}finally{n.f()}}}},{key:"clearInstance",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:le;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}},{key:"delete",value:function(){var e=se(oe().mark((function e(){var t;return oe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Array.from(this.instances.values()),e.next=3,Promise.all([].concat(p(t.filter((function(e){return"INTERNAL"in e})).map((function(e){return e.INTERNAL.delete()}))),p(t.filter((function(e){return"_delete"in e})).map((function(e){return e._delete()})))));case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"isComponentSet",value:function(){return null!=this.component}},{key:"isInitialized",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:le;return this.instances.has(e)}},{key:"getOptions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:le;return this.instancesOptions.get(e)||{}}},{key:"initialize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.options,n=void 0===t?{}:t,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error("".concat(this.name,"(").concat(r,") has already been initialized"));if(!this.isComponentSet())throw Error("Component ".concat(this.name," has not been registered yet"));var i,a=this.getOrInitializeService({instanceIdentifier:r,options:n}),o=k(this.instancesDeferred.entries());try{for(o.s();!(i=o.n()).done;){var u=s(i.value,2),c=u[0],l=u[1],f=this.normalizeInstanceIdentifier(c);r===f&&l.resolve(a)}}catch(h){o.e(h)}finally{o.f()}return a}},{key:"onInit",value:function(e,t){var n,r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);var a=this.instances.get(r);return a&&e(a,r),function(){i.delete(e)}}},{key:"invokeOnInitCallbacks",value:function(e,t){var n=this.onInitCallbacks.get(t);if(n){var r,i=k(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;try{a(e,t)}catch(iy){}}}catch(o){i.e(o)}finally{i.f()}}}},{key:"getOrInitializeService",value:function(e){var t,n=e.instanceIdentifier,r=e.options,i=void 0===r?{}:r,a=this.instances.get(n);if(!a&&this.component&&(a=this.component.instanceFactory(this.container,{instanceIdentifier:(t=n,t===le?void 0:t),options:i}),this.instances.set(n,a),this.instancesOptions.set(n,i),this.invokeOnInitCallbacks(a,n),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,n,a)}catch(iy){}return a||null}},{key:"normalizeInstanceIdentifier",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:le;return this.component?this.component.multipleInstances?e:le:e}},{key:"shouldAutoInitialize",value:function(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}]),e}();var he,de,pe=function(){function e(t){y(this,e),this.name=t,this.providers=new Map}return g(e,[{key:"addComponent",value:function(e){var t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component ".concat(e.name," has already been registered with ").concat(this.name));t.setComponent(e)}},{key:"addOrOverwriteComponent",value:function(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}},{key:"getProvider",value:function(e){if(this.providers.has(e))return this.providers.get(e);var t=new fe(e,this);return this.providers.set(e,t),t}},{key:"getProviders",value:function(){return Array.from(this.providers.values())}}]),e}(),ve=[];!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(de||(de={}));var ye={debug:de.DEBUG,verbose:de.VERBOSE,info:de.INFO,warn:de.WARN,error:de.ERROR,silent:de.SILENT},me=de.INFO,ge=(v(he={},de.DEBUG,"log"),v(he,de.VERBOSE,"log"),v(he,de.INFO,"info"),v(he,de.WARN,"warn"),v(he,de.ERROR,"error"),he),ke=function(e,t){if(!(t<e.logLevel)){var n=(new Date).toISOString(),r=ge[t];if(!r)throw new Error("Attempted to log a message with an invalid logType (value: ".concat(t,")"));for(var i,a=arguments.length,o=new Array(a>2?a-2:0),u=2;u<a;u++)o[u-2]=arguments[u];(i=console)[r].apply(i,["[".concat(n,"]  ").concat(e.name,":")].concat(o))}},be=function(){function e(t){y(this,e),this.name=t,this._logLevel=me,this._logHandler=ke,this._userLogHandler=null,ve.push(this)}return g(e,[{key:"logLevel",get:function(){return this._logLevel},set:function(e){if(!(e in de))throw new TypeError('Invalid value "'.concat(e,'" assigned to `logLevel`'));this._logLevel=e}},{key:"setLogLevel",value:function(e){this._logLevel="string"===typeof e?ye[e]:e}},{key:"logHandler",get:function(){return this._logHandler},set:function(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}},{key:"userLogHandler",get:function(){return this._userLogHandler},set:function(e){this._userLogHandler=e}},{key:"debug",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,de.DEBUG].concat(t)),this._logHandler.apply(this,[this,de.DEBUG].concat(t))}},{key:"log",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,de.VERBOSE].concat(t)),this._logHandler.apply(this,[this,de.VERBOSE].concat(t))}},{key:"info",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,de.INFO].concat(t)),this._logHandler.apply(this,[this,de.INFO].concat(t))}},{key:"warn",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,de.WARN].concat(t)),this._logHandler.apply(this,[this,de.WARN].concat(t))}},{key:"error",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,de.ERROR].concat(t)),this._logHandler.apply(this,[this,de.ERROR].concat(t))}}]),e}();function we(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function xe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?we(Object(n),!0).forEach((function(t){v(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):we(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var _e,Ie;var Se=new WeakMap,Ee=new WeakMap,Te=new WeakMap,Ce=new WeakMap,Ne=new WeakMap;var Ae={get:function(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return Ee.get(e);if("objectStoreNames"===t)return e.objectStoreNames||Te.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Pe(e[t])},set:function(e,t,n){return e[t]=n,!0},has:function(e,t){return e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e}};function De(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(Ie||(Ie=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(Oe(this),n),Pe(Se.get(this))}:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return Pe(e.apply(Oe(this),n))}:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];var a=e.call.apply(e,[Oe(this),t].concat(r));return Te.set(a,t.sort?t.sort():[t]),Pe(a)}}function Re(e){return"function"===typeof e?De(e):(e instanceof IDBTransaction&&function(e){if(!Ee.has(e)){var t=new Promise((function(t,n){var r=function(){e.removeEventListener("complete",i),e.removeEventListener("error",a),e.removeEventListener("abort",a)},i=function(){t(),r()},a=function(){n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",i),e.addEventListener("error",a),e.addEventListener("abort",a)}));Ee.set(e,t)}}(e),t=e,(_e||(_e=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some((function(e){return t instanceof e}))?new Proxy(e,Ae):e);var t}function Pe(e){if(e instanceof IDBRequest)return function(e){var t=new Promise((function(t,n){var r=function(){e.removeEventListener("success",i),e.removeEventListener("error",a)},i=function(){t(Pe(e.result)),r()},a=function(){n(e.error),r()};e.addEventListener("success",i),e.addEventListener("error",a)}));return t.then((function(t){t instanceof IDBCursor&&Se.set(t,e)})).catch((function(){})),Ne.set(t,e),t}(e);if(Ce.has(e))return Ce.get(e);var t=Re(e);return t!==e&&(Ce.set(e,t),Ne.set(t,e)),t}var Oe=function(e){return Ne.get(e)};var Le,Me,Fe=["get","getKey","getAll","getAllKeys","count"],Ue=["put","add","delete","clear"],Ve=new Map;function je(e,t){if(e instanceof IDBDatabase&&!(t in e)&&"string"===typeof t){if(Ve.get(t))return Ve.get(t);var n=t.replace(/FromIndex$/,""),r=t!==n,i=Ue.includes(n);if(n in(r?IDBIndex:IDBObjectStore).prototype&&(i||Fe.includes(n))){var a=function(){var e=se(oe().mark((function e(t){var a,o,u,s,c,l,f=arguments;return oe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(o=this.transaction(t,i?"readwrite":"readonly"),u=o.store,s=f.length,c=new Array(s>1?s-1:0),l=1;l<s;l++)c[l-1]=f[l];return r&&(u=u.index(c.shift())),e.next=6,Promise.all([(a=u)[n].apply(a,c),i&&o.done]);case 6:return e.abrupt("return",e.sent[0]);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}();return Ve.set(t,a),a}}}Ae=function(e){return xe(xe({},e),{},{get:function(t,n,r){return je(t,n)||e.get(t,n,r)},has:function(t,n){return!!je(t,n)||e.has(t,n)}})}(Ae);var Be=function(){function e(t){y(this,e),this.container=t}return g(e,[{key:"getPlatformInfoString",value:function(){return this.container.getProviders().map((function(e){if(function(e){var t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){var t=e.getImmediate();return"".concat(t.library,"/").concat(t.version)}return null})).filter((function(e){return e})).join(" ")}}]),e}();var qe="@firebase/app",ze="0.9.3",Ke=new be("@firebase/app"),Ge="[DEFAULT]",We=(v(Le={},qe,"fire-core"),v(Le,"@firebase/app-compat","fire-core-compat"),v(Le,"@firebase/analytics","fire-analytics"),v(Le,"@firebase/analytics-compat","fire-analytics-compat"),v(Le,"@firebase/app-check","fire-app-check"),v(Le,"@firebase/app-check-compat","fire-app-check-compat"),v(Le,"@firebase/auth","fire-auth"),v(Le,"@firebase/auth-compat","fire-auth-compat"),v(Le,"@firebase/database","fire-rtdb"),v(Le,"@firebase/database-compat","fire-rtdb-compat"),v(Le,"@firebase/functions","fire-fn"),v(Le,"@firebase/functions-compat","fire-fn-compat"),v(Le,"@firebase/installations","fire-iid"),v(Le,"@firebase/installations-compat","fire-iid-compat"),v(Le,"@firebase/messaging","fire-fcm"),v(Le,"@firebase/messaging-compat","fire-fcm-compat"),v(Le,"@firebase/performance","fire-perf"),v(Le,"@firebase/performance-compat","fire-perf-compat"),v(Le,"@firebase/remote-config","fire-rc"),v(Le,"@firebase/remote-config-compat","fire-rc-compat"),v(Le,"@firebase/storage","fire-gcs"),v(Le,"@firebase/storage-compat","fire-gcs-compat"),v(Le,"@firebase/firestore","fire-fst"),v(Le,"@firebase/firestore-compat","fire-fst-compat"),v(Le,"fire-js","fire-js"),v(Le,"firebase","fire-js-all"),Le),He=new Map,Qe=new Map;function Ye(e,t){try{e.container.addComponent(t)}catch(n){Ke.debug("Component ".concat(t.name," failed to register with FirebaseApp ").concat(e.name),n)}}function $e(e,t){e.container.addOrOverwriteComponent(t)}function Xe(e){var t=e.name;if(Qe.has(t))return Ke.debug("There were multiple attempts to register component ".concat(t,".")),!1;Qe.set(t,e);var n,r=k(He.values());try{for(r.s();!(n=r.n()).done;){Ye(n.value,e)}}catch(i){r.e(i)}finally{r.f()}return!0}function Je(e,t){var n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function Ze(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Ge;Je(e,t).clearInstance(n)}function et(){Qe.clear()}var tt=(v(Me={},"no-app","No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()"),v(Me,"bad-app-name","Illegal App name: '{$appName}"),v(Me,"duplicate-app","Firebase App named '{$appName}' already exists with different options or config"),v(Me,"app-deleted","Firebase App named '{$appName}' already deleted"),v(Me,"no-options","Need to provide options, when not being deployed to hosting via source."),v(Me,"invalid-app-argument","firebase.{$appName}() takes either no argument or a Firebase App instance."),v(Me,"invalid-log-argument","First argument to `onLog` must be null or a function."),v(Me,"idb-open","Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}."),v(Me,"idb-get","Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}."),v(Me,"idb-set","Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}."),v(Me,"idb-delete","Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."),Me),nt=new H("app","Firebase",tt),rt=function(){function e(t,n,r){var i=this;y(this,e),this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new ce("app",(function(){return i}),"PUBLIC"))}return g(e,[{key:"automaticDataCollectionEnabled",get:function(){return this.checkDestroyed(),this._automaticDataCollectionEnabled},set:function(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}},{key:"name",get:function(){return this.checkDestroyed(),this._name}},{key:"options",get:function(){return this.checkDestroyed(),this._options}},{key:"config",get:function(){return this.checkDestroyed(),this._config}},{key:"container",get:function(){return this._container}},{key:"isDeleted",get:function(){return this._isDeleted},set:function(e){this._isDeleted=e}},{key:"checkDestroyed",value:function(){if(this.isDeleted)throw nt.create("app-deleted",{appName:this._name})}}]),e}(),it="9.17.1";function at(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e;if("object"!==typeof t){var r=t;t={name:r}}var i=Object.assign({name:Ge,automaticDataCollectionEnabled:!1},t),a=i.name;if("string"!==typeof a||!a)throw nt.create("bad-app-name",{appName:String(a)});if(n||(n=F()),!n)throw nt.create("no-options");var o=He.get(a);if(o){if(X(n,o.options)&&X(i,o.config))return o;throw nt.create("duplicate-app",{appName:a})}var u,s=new pe(a),c=k(Qe.values());try{for(c.s();!(u=c.n()).done;){var l=u.value;s.addComponent(l)}}catch(h){c.e(h)}finally{c.f()}var f=new rt(n,i,s);return He.set(a,f),f}function ot(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ge,t=He.get(e);if(!t&&e===Ge)return at();if(!t)throw nt.create("no-app",{appName:e});return t}function ut(){return Array.from(He.values())}function st(e){return ct.apply(this,arguments)}function ct(){return(ct=se(oe().mark((function e(t){var n;return oe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.name,!He.has(n)){e.next=6;break}return He.delete(n),e.next=5,Promise.all(t.container.getProviders().map((function(e){return e.delete()})));case 5:t.isDeleted=!0;case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function lt(e,t,n){var r,i=null!==(r=We[e])&&void 0!==r?r:e;n&&(i+="-".concat(n));var a=i.match(/\s|\//),o=t.match(/\s|\//);if(a||o){var u=['Unable to register library "'.concat(i,'" with version "').concat(t,'":')];return a&&u.push('library name "'.concat(i,'" contains illegal characters (whitespace or "/")')),a&&o&&u.push("and"),o&&u.push('version name "'.concat(t,'" contains illegal characters (whitespace or "/")')),void Ke.warn(u.join(" "))}Xe(new ce("".concat(i,"-version"),(function(){return{library:i,version:t}}),"VERSION"))}function ft(e,t){if(null!==e&&"function"!==typeof e)throw nt.create("invalid-log-argument");!function(e,t){var n,r=k(ve);try{var i=function(){var r=n.value,i=null;t&&t.level&&(i=ye[t.level]),r.userLogHandler=null===e?null:function(t,n){for(var r=arguments.length,a=new Array(r>2?r-2:0),o=2;o<r;o++)a[o-2]=arguments[o];var u=a.map((function(e){if(null==e)return null;if("string"===typeof e)return e;if("number"===typeof e||"boolean"===typeof e)return e.toString();if(e instanceof Error)return e.message;try{return JSON.stringify(e)}catch(t){return null}})).filter((function(e){return e})).join(" ");n>=(null!==i&&void 0!==i?i:t.logLevel)&&e({level:de[n].toLowerCase(),message:u,args:a,type:t.name})}};for(r.s();!(n=r.n()).done;)i()}catch(a){r.e(a)}finally{r.f()}}(e,t)}function ht(e){var t;t=e,ve.forEach((function(e){e.setLogLevel(t)}))}var dt="firebase-heartbeat-store",pt=null;function vt(){return pt||(pt=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.blocked,i=n.upgrade,a=n.blocking,o=n.terminated,u=indexedDB.open(e,t),s=Pe(u);return i&&u.addEventListener("upgradeneeded",(function(e){i(Pe(u.result),e.oldVersion,e.newVersion,Pe(u.transaction))})),r&&u.addEventListener("blocked",(function(){return r()})),s.then((function(e){o&&e.addEventListener("close",(function(){return o()})),a&&e.addEventListener("versionchange",(function(){return a()}))})).catch((function(){})),s}("firebase-heartbeat-database",1,{upgrade:function(e,t){if(0===t)e.createObjectStore(dt)}}).catch((function(e){throw nt.create("idb-open",{originalErrorMessage:e.message})}))),pt}function yt(e){return mt.apply(this,arguments)}function mt(){return mt=se(oe().mark((function e(t){var n,r;return oe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,vt();case 3:return n=e.sent,e.abrupt("return",n.transaction(dt).objectStore(dt).get(bt(t)));case 7:e.prev=7,e.t0=e.catch(0),e.t0 instanceof W?Ke.warn(e.t0.message):(r=nt.create("idb-get",{originalErrorMessage:null===e.t0||void 0===e.t0?void 0:e.t0.message}),Ke.warn(r.message));case 10:case"end":return e.stop()}}),e,null,[[0,7]])}))),mt.apply(this,arguments)}function gt(e,t){return kt.apply(this,arguments)}function kt(){return kt=se(oe().mark((function e(t,n){var r,i,a,o;return oe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,vt();case 3:return r=e.sent,i=r.transaction(dt,"readwrite"),a=i.objectStore(dt),e.next=8,a.put(n,bt(t));case 8:return e.abrupt("return",i.done);case 11:e.prev=11,e.t0=e.catch(0),e.t0 instanceof W?Ke.warn(e.t0.message):(o=nt.create("idb-set",{originalErrorMessage:null===e.t0||void 0===e.t0?void 0:e.t0.message}),Ke.warn(o.message));case 14:case"end":return e.stop()}}),e,null,[[0,11]])}))),kt.apply(this,arguments)}function bt(e){return"".concat(e.name,"!").concat(e.options.appId)}var wt=function(){function e(t){var n=this;y(this,e),this.container=t,this._heartbeatsCache=null;var r=this.container.getProvider("app").getImmediate();this._storage=new Et(r),this._heartbeatsCachePromise=this._storage.read().then((function(e){return n._heartbeatsCache=e,e}))}return g(e,[{key:"triggerHeartbeat",value:function(){var e=se(oe().mark((function e(){var t,n,r;return oe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.container.getProvider("platform-logger").getImmediate(),n=t.getPlatformInfoString(),r=xt(),null!==this._heartbeatsCache){e.next=7;break}return e.next=6,this._heartbeatsCachePromise;case 6:this._heartbeatsCache=e.sent;case 7:if(this._heartbeatsCache.lastSentHeartbeatDate!==r&&!this._heartbeatsCache.heartbeats.some((function(e){return e.date===r}))){e.next=11;break}return e.abrupt("return");case 11:this._heartbeatsCache.heartbeats.push({date:r,agent:n});case 12:return this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter((function(e){var t=new Date(e.date).valueOf();return Date.now()-t<=2592e6})),e.abrupt("return",this._storage.overwrite(this._heartbeatsCache));case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getHeartbeatsHeader",value:function(){var e=se(oe().mark((function e(){var t,n,r,i,a;return oe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==this._heartbeatsCache){e.next=3;break}return e.next=3,this._heartbeatsCachePromise;case 3:if(null!==this._heartbeatsCache&&0!==this._heartbeatsCache.heartbeats.length){e.next=5;break}return e.abrupt("return","");case 5:if(t=xt(),n=_t(this._heartbeatsCache.heartbeats),r=n.heartbeatsToSend,i=n.unsentEntries,a=R(JSON.stringify({version:2,heartbeats:r})),this._heartbeatsCache.lastSentHeartbeatDate=t,!(i.length>0)){e.next=15;break}return this._heartbeatsCache.heartbeats=i,e.next=13,this._storage.overwrite(this._heartbeatsCache);case 13:e.next=17;break;case 15:this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache);case 17:return e.abrupt("return",a);case 18:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function xt(){return(new Date).toISOString().substring(0,10)}function _t(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024,r=[],i=e.slice(),a=k(e);try{var o=function(){var e=t.value,a=r.find((function(t){return t.agent===e.agent}));if(a){if(a.dates.push(e.date),Tt(r)>n)return a.dates.pop(),"break"}else if(r.push({agent:e.agent,dates:[e.date]}),Tt(r)>n)return r.pop(),"break";i=i.slice(1)};for(a.s();!(t=a.n()).done;){var u=o();if("break"===u)break}}catch(s){a.e(s)}finally{a.f()}return{heartbeatsToSend:r,unsentEntries:i}}var It,St,Et=function(){function e(t){y(this,e),this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}return g(e,[{key:"runIndexedDBEnvironmentCheck",value:function(){var e=se(oe().mark((function e(){return oe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(G()){e.next=4;break}return e.abrupt("return",!1);case 4:return e.abrupt("return",new Promise((function(e,t){try{var n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=function(){i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=function(){n=!1},i.onerror=function(){var e;t((null===(e=i.error)||void 0===e?void 0:e.message)||"")}}catch(a){t(a)}})).then((function(){return!0})).catch((function(){return!1})));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"read",value:function(){var e=se(oe().mark((function e(){var t;return oe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return",{heartbeats:[]});case 7:return e.next=9,yt(this.app);case 9:return t=e.sent,e.abrupt("return",t||{heartbeats:[]});case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"overwrite",value:function(){var e=se(oe().mark((function e(t){var n,r;return oe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,this.read();case 9:return r=e.sent,e.abrupt("return",gt(this.app,{lastSentHeartbeatDate:null!==(n=t.lastSentHeartbeatDate)&&void 0!==n?n:r.lastSentHeartbeatDate,heartbeats:t.heartbeats}));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"add",value:function(){var e=se(oe().mark((function e(t){var n,r;return oe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,this.read();case 9:return r=e.sent,e.abrupt("return",gt(this.app,{lastSentHeartbeatDate:null!==(n=t.lastSentHeartbeatDate)&&void 0!==n?n:r.lastSentHeartbeatDate,heartbeats:[].concat(p(r.heartbeats),p(t.heartbeats))}));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}();function Tt(e){return R(JSON.stringify({version:2,heartbeats:e})).length}It="",Xe(new ce("platform-logger",(function(e){return new Be(e)}),"PRIVATE")),Xe(new ce("heartbeat",(function(e){return new wt(e)}),"PRIVATE")),lt(qe,ze,It),lt(qe,ze,"esm2017"),lt("fire-js","");var Ct=function(){function e(t,n){var r=this;y(this,e),this._delegate=t,this.firebase=n,Ye(t,new ce("app-compat",(function(){return r}),"PUBLIC")),this.container=t.container}return g(e,[{key:"automaticDataCollectionEnabled",get:function(){return this._delegate.automaticDataCollectionEnabled},set:function(e){this._delegate.automaticDataCollectionEnabled=e}},{key:"name",get:function(){return this._delegate.name}},{key:"options",get:function(){return this._delegate.options}},{key:"delete",value:function(){var e=this;return new Promise((function(t){e._delegate.checkDestroyed(),t()})).then((function(){return e.firebase.INTERNAL.removeApp(e.name),st(e._delegate)}))}},{key:"_getService",value:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ge;this._delegate.checkDestroyed();var r=this._delegate.container.getProvider(e);return r.isInitialized()||"EXPLICIT"!==(null===(t=r.getComponent())||void 0===t?void 0:t.instantiationMode)||r.initialize(),r.getImmediate({identifier:n})}},{key:"_removeServiceInstance",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ge;this._delegate.container.getProvider(e).clearInstance(t)}},{key:"_addComponent",value:function(e){Ye(this._delegate,e)}},{key:"_addOrOverwriteComponent",value:function(e){$e(this._delegate,e)}},{key:"toJSON",value:function(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}]),e}(),Nt=(v(St={},"no-app","No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()"),v(St,"invalid-app-argument","firebase.{$appName}() takes either no argument or a Firebase App instance."),St),At=new H("app-compat","Firebase",Nt);var Dt=function t(){var n=function(t){var n={},r={__esModule:!0,initializeApp:function(e){var i=at(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{});if($(n,i.name))return n[i.name];var a=new t(i,r);return n[i.name]=a,a},app:i,registerVersion:lt,setLogLevel:ht,onLog:ft,apps:null,SDK_VERSION:it,INTERNAL:{registerComponent:function(e){var n=e.name,a=n.replace("-compat","");if(Xe(e)&&"PUBLIC"===e.type){var o=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i();if("function"!==typeof e[a])throw At.create("invalid-app-argument",{appName:n});return e[a]()};void 0!==e.serviceProps&&O(o,e.serviceProps),r[a]=o,t.prototype[a]=function(){for(var t=this._getService.bind(this,n),r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return t.apply(this,e.multipleInstances?i:[])}}return"PUBLIC"===e.type?r[a]:null},removeApp:function(e){delete n[e]},useAsService:function(e,t){return"serverAuth"===t?null:t},modularAPIs:e}};function i(e){if(!$(n,e=e||Ge))throw At.create("no-app",{appName:e});return n[e]}return r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(n).map((function(e){return n[e]}))}}),i.App=t,r}(Ct);return n.INTERNAL=Object.assign(Object.assign({},n.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(e){O(n,e)},createSubscribe:ne,ErrorFactory:H,deepExtend:O}),n}(),Rt=new be("@firebase/app-compat");if("object"===typeof self&&self.self===self&&void 0!==self.firebase){Rt.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var Pt=self.firebase.SDK_VERSION;Pt&&Pt.indexOf("LITE")>=0&&Rt.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var Ot=Dt;!function(e){lt("@firebase/app-compat","0.2.3",e)}();Ot.registerVersion("firebase","9.17.1","app-compat");var Lt=Ot.initializeApp({apiKey:"AIzaSyC1r4vVMugt5k38tZh_jz5ZB0nEQUZFKQo",authDomain:"todoapp-4cb10.firebaseapp.com",projectId:"todoapp-4cb10",storageBucket:"todoapp-4cb10.appspot.com",messagingSenderId:"613023724005",appId:"1:613023724005:web:dd72cee118cbfb54a37f0c",measurementId:"G-T7RWR4GQ1E"});function Mt(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=_(e)););return e}function Ft(){return Ft="undefined"!==typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=Mt(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},Ft.apply(this,arguments)}var Ut,Vt="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof n.g?n.g:"undefined"!==typeof self?self:{},jt={},Bt=Bt||{},qt=Vt||self;function zt(){}function Kt(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function Gt(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}var Wt="closure_uid_"+(1e9*Math.random()>>>0),Ht=0;function Qt(e,t,n){return e.call.apply(e.bind,arguments)}function Yt(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function $t(e,t,n){return($t=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Qt:Yt).apply(null,arguments)}function Xt(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function Jt(e,t){function n(){}n.prototype=t.prototype,e.X=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.Wb=function(e,n,r){for(var i=Array(arguments.length-2),a=2;a<arguments.length;a++)i[a-2]=arguments[a];return t.prototype[n].apply(e,i)}}function Zt(){this.s=this.s,this.o=this.o}Zt.prototype.s=!1,Zt.prototype.na=function(){var e;!this.s&&(this.s=!0,this.M(),0)&&(e=this,Object.prototype.hasOwnProperty.call(e,Wt)&&e[Wt]||(e[Wt]=++Ht))},Zt.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};var en=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if("string"===typeof e)return"string"!==typeof t||1!=t.length?-1:e.indexOf(t,0);for(var n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1};function tn(e){var t=e.length;if(0<t){for(var n=Array(t),r=0;r<t;r++)n[r]=e[r];return n}return[]}function nn(e,t){for(var n=1;n<arguments.length;n++){var r=arguments[n];if(Kt(r)){var i=e.length||0,a=r.length||0;e.length=i+a;for(var o=0;o<a;o++)e[i+o]=r[o]}else e.push(r)}}function rn(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}rn.prototype.h=function(){this.defaultPrevented=!0};var an=function(){if(!qt.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{qt.addEventListener("test",zt,t),qt.removeEventListener("test",zt,t)}catch(n){}return e}();function on(e){return/^[\s\xa0]*$/.test(e)}var un=String.prototype.trim?function(e){return e.trim()}:function(e){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(e)[1]};function sn(e,t){return e<t?-1:e>t?1:0}function cn(){var e=qt.navigator;return e&&(e=e.userAgent)?e:""}function ln(e){return-1!=cn().indexOf(e)}function fn(e){return fn[" "](e),e}fn[" "]=zt;var hn,dn=ln("Opera"),pn=ln("Trident")||ln("MSIE"),vn=ln("Edge"),yn=vn||pn,mn=ln("Gecko")&&!(-1!=cn().toLowerCase().indexOf("webkit")&&!ln("Edge"))&&!(ln("Trident")||ln("MSIE"))&&!ln("Edge"),gn=-1!=cn().toLowerCase().indexOf("webkit")&&!ln("Edge");function kn(){var e=qt.document;return e?e.documentMode:void 0}e:{var bn="",wn=function(){var e=cn();return mn?/rv:([^\);]+)(\)|;)/.exec(e):vn?/Edge\/([\d\.]+)/.exec(e):pn?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(e):gn?/WebKit\/(\S+)/.exec(e):dn?/(?:Version)[ \/]?(\S+)/.exec(e):void 0}();if(wn&&(bn=wn?wn[1]:""),pn){var xn=kn();if(null!=xn&&xn>parseFloat(bn)){hn=String(xn);break e}}hn=bn}var _n,In={};function Sn(){return function(e){var t=In;return Object.prototype.hasOwnProperty.call(t,9)?t[9]:t[9]=e(9)}((function(){for(var e=0,t=un(String(hn)).split("."),n=un("9").split("."),r=Math.max(t.length,n.length),i=0;0==e&&i<r;i++){var a=t[i]||"",o=n[i]||"";do{if(a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],0==a[0].length&&0==o[0].length)break;e=sn(0==a[1].length?0:parseInt(a[1],10),0==o[1].length?0:parseInt(o[1],10))||sn(0==a[2].length,0==o[2].length)||sn(a[2],o[2]),a=a[3],o=o[3]}while(0==e)}return 0<=e}))}if(qt.document&&pn){var En=kn();_n=En||(parseInt(hn,10)||void 0)}else _n=void 0;var Tn=_n;function Cn(e,t){if(rn.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(mn){e:{try{fn(t.nodeName);var i=!0;break e}catch(a){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"===typeof e.pointerType?e.pointerType:Nn[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&Cn.X.h.call(this)}}Jt(Cn,rn);var Nn={2:"touch",3:"pen",4:"mouse"};Cn.prototype.h=function(){Cn.X.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var An="closure_listenable_"+(1e6*Math.random()|0),Dn=0;function Rn(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.ha=i,this.key=++Dn,this.ba=this.ea=!1}function Pn(e){e.ba=!0,e.listener=null,e.proxy=null,e.src=null,e.ha=null}function On(e,t,n){for(var r in e)t.call(n,e[r],r,e)}function Ln(e){var t={};for(var n in e)t[n]=e[n];return t}var Mn="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Fn(e,t){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])e[n]=r[n];for(var a=0;a<Mn.length;a++)n=Mn[a],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function Un(e){this.src=e,this.g={},this.h=0}function Vn(e,t){var n=t.type;if(n in e.g){var r,i=e.g[n],a=en(i,t);(r=0<=a)&&Array.prototype.splice.call(i,a,1),r&&(Pn(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function jn(e,t,n,r){for(var i=0;i<e.length;++i){var a=e[i];if(!a.ba&&a.listener==t&&a.capture==!!n&&a.ha==r)return i}return-1}Un.prototype.add=function(e,t,n,r,i){var a=e.toString();(e=this.g[a])||(e=this.g[a]=[],this.h++);var o=jn(e,t,r,i);return-1<o?(t=e[o],n||(t.ea=!1)):((t=new Rn(t,this.src,a,!!r,i)).ea=n,e.push(t)),t};var Bn="closure_lm_"+(1e6*Math.random()|0),qn={};function zn(e,t,n,r,i){if(r&&r.once)return Gn(e,t,n,r,i);if(Array.isArray(t)){for(var a=0;a<t.length;a++)zn(e,t[a],n,r,i);return null}return n=Jn(n),e&&e[An]?e.N(t,n,Gt(r)?!!r.capture:!!r,i):Kn(e,t,n,!1,r,i)}function Kn(e,t,n,r,i,a){if(!t)throw Error("Invalid event type");var o=Gt(i)?!!i.capture:!!i,u=$n(e);if(u||(e[Bn]=u=new Un(e)),(n=u.add(t,n,r,o,a)).proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}var t=Yn;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)an||(i=o),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(Qn(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function Gn(e,t,n,r,i){if(Array.isArray(t)){for(var a=0;a<t.length;a++)Gn(e,t[a],n,r,i);return null}return n=Jn(n),e&&e[An]?e.O(t,n,Gt(r)?!!r.capture:!!r,i):Kn(e,t,n,!0,r,i)}function Wn(e,t,n,r,i){if(Array.isArray(t))for(var a=0;a<t.length;a++)Wn(e,t[a],n,r,i);else r=Gt(r)?!!r.capture:!!r,n=Jn(n),e&&e[An]?(e=e.i,(t=String(t).toString())in e.g&&(-1<(n=jn(a=e.g[t],n,r,i))&&(Pn(a[n]),Array.prototype.splice.call(a,n,1),0==a.length&&(delete e.g[t],e.h--)))):e&&(e=$n(e))&&(t=e.g[t.toString()],e=-1,t&&(e=jn(t,n,r,i)),(n=-1<e?t[e]:null)&&Hn(n))}function Hn(e){if("number"!==typeof e&&e&&!e.ba){var t=e.src;if(t&&t[An])Vn(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(Qn(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=$n(t))?(Vn(n,e),0==n.h&&(n.src=null,t[Bn]=null)):Pn(e)}}}function Qn(e){return e in qn?qn[e]:qn[e]="on"+e}function Yn(e,t){if(e.ba)e=!0;else{t=new Cn(t,this);var n=e.listener,r=e.ha||e.src;e.ea&&Hn(e),e=n.call(r,t)}return e}function $n(e){return(e=e[Bn])instanceof Un?e:null}var Xn="__closure_events_fn_"+(1e9*Math.random()>>>0);function Jn(e){return"function"===typeof e?e:(e[Xn]||(e[Xn]=function(t){return e.handleEvent(t)}),e[Xn])}function Zn(){Zt.call(this),this.i=new Un(this),this.P=this,this.I=null}function er(e,t){var n,r=e.I;if(r)for(n=[];r;r=r.I)n.push(r);if(e=e.P,r=t.type||t,"string"===typeof t)t=new rn(t,e);else if(t instanceof rn)t.target=t.target||e;else{var i=t;Fn(t=new rn(r,e),i)}if(i=!0,n)for(var a=n.length-1;0<=a;a--){var o=t.g=n[a];i=tr(o,r,!0,t)&&i}if(i=tr(o=t.g=e,r,!0,t)&&i,i=tr(o,r,!1,t)&&i,n)for(a=0;a<n.length;a++)i=tr(o=t.g=n[a],r,!1,t)&&i}function tr(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var i=!0,a=0;a<t.length;++a){var o=t[a];if(o&&!o.ba&&o.capture==n){var u=o.listener,s=o.ha||o.src;o.ea&&Vn(e.i,o),i=!1!==u.call(s,r)&&i}}return i&&!r.defaultPrevented}Jt(Zn,Zt),Zn.prototype[An]=!0,Zn.prototype.removeEventListener=function(e,t,n,r){Wn(this,e,t,n,r)},Zn.prototype.M=function(){if(Zn.X.M.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)Pn(n[r]);delete t.g[e],t.h--}}this.I=null},Zn.prototype.N=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},Zn.prototype.O=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};var nr=qt.JSON.stringify;function rr(){var e=fr,t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var ir,ar=function(){function e(){y(this,e),this.h=this.g=null}return g(e,[{key:"add",value:function(e,t){var n=or.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}}]),e}(),or=new(function(){function e(t,n){y(this,e),this.i=t,this.j=n,this.h=0,this.g=null}return g(e,[{key:"get",value:function(){var e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}]),e}())((function(){return new ur}),(function(e){return e.reset()})),ur=function(){function e(){y(this,e),this.next=this.g=this.h=null}return g(e,[{key:"set",value:function(e,t){this.h=e,this.g=t,this.next=null}},{key:"reset",value:function(){this.next=this.g=this.h=null}}]),e}();function sr(e){qt.setTimeout((function(){throw e}),0)}function cr(e,t){ir||function(){var e=qt.Promise.resolve(void 0);ir=function(){e.then(hr)}}(),lr||(ir(),lr=!0),fr.add(e,t)}var lr=!1,fr=new ar;function hr(){for(var e;e=rr();){try{e.h.call(e.g)}catch(n){sr(n)}var t=or;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}lr=!1}function dr(e,t){Zn.call(this),this.h=e||1,this.g=t||qt,this.j=$t(this.lb,this),this.l=Date.now()}function pr(e){e.ca=!1,e.R&&(e.g.clearTimeout(e.R),e.R=null)}function vr(e,t,n){if("function"===typeof e)n&&(e=$t(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=$t(e.handleEvent,e)}return 2147483647<Number(t)?-1:qt.setTimeout(e,t||0)}function yr(e){e.g=vr((function(){e.g=null,e.i&&(e.i=!1,yr(e))}),e.j);var t=e.h;e.h=null,e.m.apply(null,t)}Jt(dr,Zn),(Ut=dr.prototype).ca=!1,Ut.R=null,Ut.lb=function(){if(this.ca){var e=Date.now()-this.l;0<e&&e<.8*this.h?this.R=this.g.setTimeout(this.j,this.h-e):(this.R&&(this.g.clearTimeout(this.R),this.R=null),er(this,"tick"),this.ca&&(pr(this),this.start()))}},Ut.start=function(){this.ca=!0,this.R||(this.R=this.g.setTimeout(this.j,this.h),this.l=Date.now())},Ut.M=function(){dr.X.M.call(this),pr(this),delete this.g};var mr=function(e){x(n,e);var t=T(n);function n(e,r){var i;return y(this,n),(i=t.call(this)).m=e,i.j=r,i.h=null,i.i=!1,i.g=null,i}return g(n,[{key:"l",value:function(e){this.h=arguments,this.g?this.i=!0:yr(this)}},{key:"M",value:function(){Ft(_(n.prototype),"M",this).call(this),this.g&&(qt.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}]),n}(Zt);function gr(e){Zt.call(this),this.h=e,this.g={}}Jt(gr,Zt);var kr=[];function br(e,t,n,r){Array.isArray(n)||(n&&(kr[0]=n.toString()),n=kr);for(var i=0;i<n.length;i++){var a=zn(t,n[i],r||e.handleEvent,!1,e.h||e);if(!a)break;e.g[a.key]=a}}function wr(e){On(e.g,(function(e,t){this.g.hasOwnProperty(t)&&Hn(e)}),e),e.g={}}function xr(){this.g=!0}function _r(e,t,n,r){e.info((function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var a=i[0];if("noop"!=a&&"stop"!=a&&"close"!=a)for(var o=1;o<i.length;o++)i[o]=""}}}return nr(n)}catch(u){return t}}(e,n)+(r?" "+r:"")}))}gr.prototype.M=function(){gr.X.M.call(this),wr(this)},gr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},xr.prototype.Aa=function(){this.g=!1},xr.prototype.info=function(){};var Ir={},Sr=null;function Er(){return Sr=Sr||new Zn}function Tr(e){rn.call(this,Ir.Pa,e)}function Cr(e){var t=Er();er(t,new Tr(t))}function Nr(e,t){rn.call(this,Ir.STAT_EVENT,e),this.stat=t}function Ar(e){var t=Er();er(t,new Nr(t,e))}function Dr(e,t){rn.call(this,Ir.Qa,e),this.size=t}function Rr(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return qt.setTimeout((function(){e()}),t)}Ir.Pa="serverreachability",Jt(Tr,rn),Ir.STAT_EVENT="statevent",Jt(Nr,rn),Ir.Qa="timingevent",Jt(Dr,rn);var Pr={NO_ERROR:0,mb:1,zb:2,yb:3,tb:4,xb:5,Ab:6,Ma:7,TIMEOUT:8,Db:9},Or={rb:"complete",Nb:"success",Na:"error",Ma:"abort",Fb:"ready",Gb:"readystatechange",TIMEOUT:"timeout",Bb:"incrementaldata",Eb:"progress",ub:"downloadprogress",Vb:"uploadprogress"};function Lr(){}function Mr(e){return e.h||(e.h=e.i())}function Fr(){}Lr.prototype.h=null;var Ur,Vr={OPEN:"a",qb:"b",Na:"c",Cb:"d"};function jr(){rn.call(this,"d")}function Br(){rn.call(this,"c")}function qr(){}function zr(e,t,n,r){this.l=e,this.j=t,this.m=n,this.U=r||1,this.S=new gr(this),this.O=Gr,e=yn?125:void 0,this.T=new dr(e),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.V=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.Y=-1,this.I=!1,this.N=0,this.L=null,this.$=this.J=this.Z=this.P=!1,this.h=new Kr}function Kr(){this.i=null,this.g="",this.h=!1}Jt(jr,rn),Jt(Br,rn),Jt(qr,Lr),qr.prototype.g=function(){return new XMLHttpRequest},qr.prototype.i=function(){return{}},Ur=new qr;var Gr=45e3,Wr={},Hr={};function Qr(e,t,n){e.K=1,e.v=di(si(t)),e.s=n,e.P=!0,Yr(e,null)}function Yr(e,t){e.F=Date.now(),Zr(e),e.A=si(e.v);var n=e.A,r=e.U;Array.isArray(r)||(r=[String(r)]),Ei(n.i,"t",r),e.C=0,n=e.l.H,e.h=new Kr,e.g=Ta(e.l,n?t:null,!e.s),0<e.N&&(e.L=new mr($t(e.La,e,e.g),e.N)),br(e.S,e.g,"readystatechange",e.ib),t=e.H?Ln(e.H):{},e.s?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.da(e.A,e.u,e.s,t)):(e.u="GET",e.g.da(e.A,e.u,null,t)),Cr(),function(e,t,n,r,i,a){e.info((function(){if(e.g)if(a)for(var o="",u=a.split("&"),s=0;s<u.length;s++){var c=u[s].split("=");if(1<c.length){var l=c[0];c=c[1];var f=l.split("_");o=2<=f.length&&"type"==f[1]?o+(l+"=")+c+"&":o+(l+"=redacted&")}}else o=null;else o=a;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+o}))}(e.j,e.u,e.A,e.m,e.U,e.s)}function $r(e){return!!e.g&&("GET"==e.u&&2!=e.K&&e.l.Da)}function Xr(e,t,n){for(var r,i=!0;!e.I&&e.C<n.length;){if((r=Jr(e,n))==Hr){4==t&&(e.o=4,Ar(14),i=!1),_r(e.j,e.m,null,"[Incomplete Response]");break}if(r==Wr){e.o=4,Ar(15),_r(e.j,e.m,n,"[Invalid Chunk]"),i=!1;break}_r(e.j,e.m,r,null),ii(e,r)}$r(e)&&r!=Hr&&r!=Wr&&(e.h.g="",e.C=0),4!=t||0!=n.length||e.h.h||(e.o=1,Ar(16),i=!1),e.i=e.i&&i,i?0<n.length&&!e.$&&(e.$=!0,(t=e.l).g==e&&t.$&&!t.K&&(t.j.info("Great, no buffering proxy detected. Bytes received: "+n.length),ka(t),t.K=!0,Ar(11))):(_r(e.j,e.m,n,"[Invalid Chunked Response]"),ri(e),ni(e))}function Jr(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?Hr:(n=Number(t.substring(n,r)),isNaN(n)?Wr:(r+=1)+n>t.length?Hr:(t=t.substr(r,n),e.C=r+n,t))}function Zr(e){e.V=Date.now()+e.O,ei(e,e.O)}function ei(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=Rr($t(e.gb,e),t)}function ti(e){e.B&&(qt.clearTimeout(e.B),e.B=null)}function ni(e){0==e.l.G||e.I||xa(e.l,e)}function ri(e){ti(e);var t=e.L;t&&"function"==typeof t.na&&t.na(),e.L=null,pr(e.T),wr(e.S),e.g&&(t=e.g,e.g=null,t.abort(),t.na())}function ii(e,t){try{var n=e.l;if(0!=n.G&&(n.g==e||Oi(n.h,e)))if(!e.J&&Oi(n.h,e)&&3==n.G){try{var r=n.Fa.g.parse(t)}catch(a){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.u){if(n.g){if(!(n.g.F+3e3<e.F))break e;wa(n),fa(n)}ga(n),Ar(18)}}else n.Ba=i[1],0<n.Ba-n.T&&37500>i[2]&&n.L&&0==n.A&&!n.v&&(n.v=Rr($t(n.cb,n),6e3));if(1>=Pi(n.h)&&n.ja){try{n.ja()}catch(a){}n.ja=void 0}}else Ia(n,11)}else if((e.J||n.g==e)&&wa(n),!on(t))for(i=n.Fa.g.parse(t),t=0;t<i.length;t++){var a=i[t];if(n.T=a[0],a=a[1],2==n.G)if("c"==a[0]){n.I=a[1],n.ka=a[2];var o=a[3];null!=o&&(n.ma=o,n.j.info("VER="+n.ma));var u=a[4];null!=u&&(n.Ca=u,n.j.info("SVER="+n.Ca));var s=a[5];null!=s&&"number"===typeof s&&0<s&&(r=1.5*s,n.J=r,n.j.info("backChannelRequestTimeoutMs_="+r)),r=n;var c=e.g;if(c){var l=c.g?c.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(l){var f=r.h;f.g||-1==l.indexOf("spdy")&&-1==l.indexOf("quic")&&-1==l.indexOf("h2")||(f.j=f.l,f.g=new Set,f.h&&(Li(f,f.h),f.h=null))}if(r.D){var h=c.g?c.g.getResponseHeader("X-HTTP-Session-Id"):null;h&&(r.za=h,hi(r.F,r.D,h))}}n.G=3,n.l&&n.l.xa(),n.$&&(n.P=Date.now()-e.F,n.j.info("Handshake RTT: "+n.P+"ms"));var d=e;if((r=n).sa=Ea(r,r.H?r.ka:null,r.V),d.J){Mi(r.h,d);var p=d,v=r.J;v&&p.setTimeout(v),p.B&&(ti(p),Zr(p)),r.g=d}else ma(r);0<n.i.length&&da(n)}else"stop"!=a[0]&&"close"!=a[0]||Ia(n,7);else 3==n.G&&("stop"==a[0]||"close"==a[0]?"stop"==a[0]?Ia(n,7):la(n):"noop"!=a[0]&&n.l&&n.l.wa(a),n.A=0)}Cr()}catch(a){}}function ai(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(Kt(e)||"string"===typeof e)Array.prototype.forEach.call(e,t,void 0);else for(var n=function(e){if(e.oa&&"function"==typeof e.oa)return e.oa();if(!e.W||"function"!=typeof e.W){if("undefined"!==typeof Map&&e instanceof Map)return Array.from(e.keys());if(!("undefined"!==typeof Set&&e instanceof Set)){if(Kt(e)||"string"===typeof e){var t=[];e=e.length;for(var n=0;n<e;n++)t.push(n);return t}for(var r in t=[],n=0,e)t[n++]=r;return t}}}(e),r=function(e){if(e.W&&"function"==typeof e.W)return e.W();if("undefined"!==typeof Map&&e instanceof Map||"undefined"!==typeof Set&&e instanceof Set)return Array.from(e.values());if("string"===typeof e)return e.split("");if(Kt(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e),i=r.length,a=0;a<i;a++)t.call(void 0,r[a],n&&n[a],e)}(Ut=zr.prototype).setTimeout=function(e){this.O=e},Ut.ib=function(e){e=e.target;var t=this.L;t&&3==ia(e)?t.l():this.La(e)},Ut.La=function(e){try{if(e==this.g)e:{var t=ia(this.g),n=this.g.Ea();this.g.aa();if(!(3>t)&&(3!=t||yn||this.g&&(this.h.h||this.g.fa()||aa(this.g)))){this.I||4!=t||7==n||Cr(),ti(this);var r=this.g.aa();this.Y=r;t:if($r(this)){var i=aa(this.g);e="";var a=i.length,o=4==ia(this.g);if(!this.h.i){if("undefined"===typeof TextDecoder){ri(this),ni(this);var u="";break t}this.h.i=new qt.TextDecoder}for(n=0;n<a;n++)this.h.h=!0,e+=this.h.i.decode(i[n],{stream:o&&n==a-1});i.splice(0,a),this.h.g+=e,this.C=0,u=this.h.g}else u=this.g.fa();if(this.i=200==r,function(e,t,n,r,i,a,o){e.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+a+" "+o}))}(this.j,this.u,this.A,this.m,this.U,t,r),this.i){if(this.Z&&!this.J){t:{if(this.g){var s,c=this.g;if((s=c.g?c.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!on(s)){var l=s;break t}}l=null}if(!(r=l)){this.i=!1,this.o=3,Ar(12),ri(this),ni(this);break e}_r(this.j,this.m,r,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,ii(this,r)}this.P?(Xr(this,t,u),yn&&this.i&&3==t&&(br(this.S,this.T,"tick",this.hb),this.T.start())):(_r(this.j,this.m,u,null),ii(this,u)),4==t&&ri(this),this.i&&!this.I&&(4==t?xa(this.l,this):(this.i=!1,Zr(this)))}else 400==r&&0<u.indexOf("Unknown SID")?(this.o=3,Ar(12)):(this.o=0,Ar(13)),ri(this),ni(this)}}}catch(t){}},Ut.hb=function(){if(this.g){var e=ia(this.g),t=this.g.fa();this.C<t.length&&(ti(this),Xr(this,e,t),this.i&&4!=e&&Zr(this))}},Ut.cancel=function(){this.I=!0,ri(this)},Ut.gb=function(){this.B=null;var e=Date.now();0<=e-this.V?(function(e,t){e.info((function(){return"TIMEOUT: "+t}))}(this.j,this.A),2!=this.K&&(Cr(),Ar(17)),ri(this),this.o=2,ni(this)):ei(this,this.V-e)};var oi=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function ui(e,t){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,e instanceof ui){this.h=void 0!==t?t:e.h,ci(this,e.j),this.s=e.s,this.g=e.g,li(this,e.m),this.l=e.l,t=e.i;var n=new xi;n.i=t.i,t.g&&(n.g=new Map(t.g),n.h=t.h),fi(this,n),this.o=e.o}else e&&(n=String(e).match(oi))?(this.h=!!t,ci(this,n[1]||"",!0),this.s=pi(n[2]||""),this.g=pi(n[3]||"",!0),li(this,n[4]),this.l=pi(n[5]||"",!0),fi(this,n[6]||"",!0),this.o=pi(n[7]||"")):(this.h=!!t,this.i=new xi(null,this.h))}function si(e){return new ui(e)}function ci(e,t,n){e.j=n?pi(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function li(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.m=t}else e.m=null}function fi(e,t,n){t instanceof xi?(e.i=t,function(e,t){t&&!e.j&&(_i(e),e.i=null,e.g.forEach((function(e,t){var n=t.toLowerCase();t!=n&&(Ii(this,t),Ei(this,n,e))}),e)),e.j=t}(e.i,e.h)):(n||(t=vi(t,bi)),e.i=new xi(t,e.h))}function hi(e,t,n){e.i.set(t,n)}function di(e){return hi(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function pi(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function vi(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,yi),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function yi(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}ui.prototype.toString=function(){var e=[],t=this.j;t&&e.push(vi(t,mi,!0),":");var n=this.g;return(n||"file"==t)&&(e.push("//"),(t=this.s)&&e.push(vi(t,mi,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&e.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&e.push("/"),e.push(vi(n,"/"==n.charAt(0)?ki:gi,!0))),(n=this.i.toString())&&e.push("?",n),(n=this.o)&&e.push("#",vi(n,wi)),e.join("")};var mi=/[#\/\?@]/g,gi=/[#\?:]/g,ki=/[#\?]/g,bi=/[#\?@]/g,wi=/#/g;function xi(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function _i(e){e.g||(e.g=new Map,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var a=e[n].substring(0,r);i=e[n].substring(r+1)}else a=e[n];t(a,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.i,(function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)})))}function Ii(e,t){_i(e),t=Ti(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function Si(e,t){return _i(e),t=Ti(e,t),e.g.has(t)}function Ei(e,t,n){Ii(e,t),0<n.length&&(e.i=null,e.g.set(Ti(e,t),tn(n)),e.h+=n.length)}function Ti(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}(Ut=xi.prototype).add=function(e,t){_i(this),this.i=null,e=Ti(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},Ut.forEach=function(e,t){_i(this),this.g.forEach((function(n,r){n.forEach((function(n){e.call(t,n,r,this)}),this)}),this)},Ut.oa=function(){_i(this);for(var e=Array.from(this.g.values()),t=Array.from(this.g.keys()),n=[],r=0;r<t.length;r++)for(var i=e[r],a=0;a<i.length;a++)n.push(t[r]);return n},Ut.W=function(e){_i(this);var t=[];if("string"===typeof e)Si(this,e)&&(t=t.concat(this.g.get(Ti(this,e))));else{e=Array.from(this.g.values());for(var n=0;n<e.length;n++)t=t.concat(e[n])}return t},Ut.set=function(e,t){return _i(this),this.i=null,Si(this,e=Ti(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},Ut.get=function(e,t){return e&&0<(e=this.W(e)).length?String(e[0]):t},Ut.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var e=[],t=Array.from(this.g.keys()),n=0;n<t.length;n++){var r=t[n],i=encodeURIComponent(String(r)),a=this.W(r);for(r=0;r<a.length;r++){var o=i;""!==a[r]&&(o+="="+encodeURIComponent(String(a[r]))),e.push(o)}}return this.i=e.join("&")};var Ci=g((function e(t,n){y(this,e),this.h=t,this.g=n}));function Ni(e){this.l=e||Di,qt.PerformanceNavigationTiming?e=0<(e=qt.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(qt.g&&qt.g.Ga&&qt.g.Ga()&&qt.g.Ga().$b),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var Ai,Di=10;function Ri(e){return!!e.h||!!e.g&&e.g.size>=e.j}function Pi(e){return e.h?1:e.g?e.g.size:0}function Oi(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function Li(e,t){e.g?e.g.add(t):e.h=t}function Mi(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function Fi(e){if(null!=e.h)return e.i.concat(e.h.D);if(null!=e.g&&0!==e.g.size){var t,n=e.i,r=k(e.g.values());try{for(r.s();!(t=r.n()).done;){var i=t.value;n=n.concat(i.D)}}catch(a){r.e(a)}finally{r.f()}return n}return tn(e.i)}function Ui(){}function Vi(){this.g=new Ui}function ji(e,t,n){var r=n||"";try{ai(e,(function(e,n){var i=e;Gt(e)&&(i=nr(e)),t.push(r+n+"="+encodeURIComponent(i))}))}catch(i){throw t.push(r+"type="+encodeURIComponent("_badmap")),i}}function Bi(e,t,n,r,i){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,i(r)}catch(a){}}function qi(e){this.l=e.ac||null,this.j=e.jb||!1}function zi(e,t){Zn.call(this),this.D=e,this.u=t,this.m=void 0,this.readyState=Ki,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Ni.prototype.cancel=function(){if(this.i=Fi(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){var e,t=k(this.g.values());try{for(t.s();!(e=t.n()).done;){e.value.cancel()}}catch(n){t.e(n)}finally{t.f()}this.g.clear()}},Ui.prototype.stringify=function(e){return qt.JSON.stringify(e,void 0)},Ui.prototype.parse=function(e){return qt.JSON.parse(e,void 0)},Jt(qi,Lr),qi.prototype.g=function(){return new zi(this.l,this.j)},qi.prototype.i=(Ai={},function(){return Ai}),Jt(zi,Zn);var Ki=0;function Gi(e){e.j.read().then(e.Ta.bind(e)).catch(e.ga.bind(e))}function Wi(e){e.readyState=4,e.l=null,e.j=null,e.A=null,Hi(e)}function Hi(e){e.onreadystatechange&&e.onreadystatechange.call(e)}(Ut=zi.prototype).open=function(e,t){if(this.readyState!=Ki)throw this.abort(),Error("Error reopening a connection");this.C=e,this.B=t,this.readyState=1,Hi(this)},Ut.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;var t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};e&&(t.body=e),(this.D||qt).fetch(new Request(this.B,t)).then(this.Wa.bind(this),this.ga.bind(this))},Ut.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch((function(){})),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Wi(this)),this.readyState=Ki},Ut.Wa=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,Hi(this)),this.g&&(this.readyState=3,Hi(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Ua.bind(this),this.ga.bind(this));else if("undefined"!==typeof qt.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Gi(this)}else e.text().then(this.Va.bind(this),this.ga.bind(this))},Ut.Ta=function(e){if(this.g){if(this.u&&e.value)this.response.push(e.value);else if(!this.u){var t=e.value?e.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?Wi(this):Hi(this),3==this.readyState&&Gi(this)}},Ut.Va=function(e){this.g&&(this.response=this.responseText=e,Wi(this))},Ut.Ua=function(e){this.g&&(this.response=e,Wi(this))},Ut.ga=function(){this.g&&Wi(this)},Ut.setRequestHeader=function(e,t){this.v.append(e,t)},Ut.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},Ut.getAllResponseHeaders=function(){if(!this.h)return"";for(var e=[],t=this.h.entries(),n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(zi.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}});var Qi=qt.JSON.parse;function Yi(e){Zn.call(this),this.headers=new Map,this.u=e||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=$i,this.K=this.L=!1}Jt(Yi,Zn);var $i="",Xi=/^https?$/i,Ji=["POST","PUT"];function Zi(e,t){e.h=!1,e.g&&(e.l=!0,e.g.abort(),e.l=!1),e.j=t,e.m=5,ea(e),na(e)}function ea(e){e.D||(e.D=!0,er(e,"complete"),er(e,"error"))}function ta(e){if(e.h&&"undefined"!=typeof Bt&&(!e.C[1]||4!=ia(e)||2!=e.aa()))if(e.v&&4==ia(e))vr(e.Ha,0,e);else if(er(e,"readystatechange"),4==ia(e)){e.h=!1;try{var t,n=e.aa();e:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break e;default:r=!1}if(!(t=r)){var i;if(i=0===n){var a=String(e.H).match(oi)[1]||null;if(!a&&qt.self&&qt.self.location){var o=qt.self.location.protocol;a=o.substr(0,o.length-1)}i=!Xi.test(a?a.toLowerCase():"")}t=i}if(t)er(e,"complete"),er(e,"success");else{e.m=6;try{var u=2<ia(e)?e.g.statusText:""}catch(s){u=""}e.j=u+" ["+e.aa()+"]",ea(e)}}finally{na(e)}}}function na(e,t){if(e.g){ra(e);var n=e.g,r=e.C[0]?zt:null;e.g=null,e.C=null,t||er(e,"ready");try{n.onreadystatechange=r}catch(i){}}}function ra(e){e.g&&e.K&&(e.g.ontimeout=null),e.A&&(qt.clearTimeout(e.A),e.A=null)}function ia(e){return e.g?e.g.readyState:0}function aa(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.J){case $i:case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(za){return null}}function oa(e){var t="";return On(e,(function(e,n){t+=n,t+=":",t+=e,t+="\r\n"})),t}function ua(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=oa(n),"string"===typeof e?null!=n&&encodeURIComponent(String(n)):hi(e,t,n))}function sa(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function ca(e){this.Ca=0,this.i=[],this.j=new xr,this.ka=this.sa=this.F=this.V=this.g=this.za=this.D=this.ia=this.o=this.S=this.s=null,this.ab=this.U=0,this.Za=sa("failFast",!1,e),this.L=this.v=this.u=this.m=this.l=null,this.Y=!0,this.pa=this.Ba=this.T=-1,this.Z=this.A=this.C=0,this.Xa=sa("baseRetryDelayMs",5e3,e),this.bb=sa("retryDelaySeedMs",1e4,e),this.$a=sa("forwardChannelMaxRetries",2,e),this.ta=sa("forwardChannelRequestTimeoutMs",2e4,e),this.ra=e&&e.xmlHttpFactory||void 0,this.Da=e&&e.Zb||!1,this.J=void 0,this.H=e&&e.supportsCrossDomainXhr||!1,this.I="",this.h=new Ni(e&&e.concurrentRequestLimit),this.Fa=new Vi,this.O=e&&e.fastHandshake||!1,this.N=e&&e.encodeInitMessageHeaders||!1,this.O&&this.N&&(this.N=!1),this.Ya=e&&e.Xb||!1,e&&e.Aa&&this.j.Aa(),e&&e.forceLongPolling&&(this.Y=!1),this.$=!this.O&&this.Y&&e&&e.detectBufferingProxy||!1,this.ja=void 0,this.P=0,this.K=!1,this.la=this.B=null}function la(e){if(ha(e),3==e.G){var t=e.U++,n=si(e.F);hi(n,"SID",e.I),hi(n,"RID",t),hi(n,"TYPE","terminate"),va(e,n),(t=new zr(e,e.j,t,void 0)).K=2,t.v=di(si(n)),n=!1,qt.navigator&&qt.navigator.sendBeacon&&(n=qt.navigator.sendBeacon(t.v.toString(),"")),!n&&qt.Image&&((new Image).src=t.v,n=!0),n||(t.g=Ta(t.l,null),t.g.da(t.v)),t.F=Date.now(),Zr(t)}Sa(e)}function fa(e){e.g&&(ka(e),e.g.cancel(),e.g=null)}function ha(e){fa(e),e.u&&(qt.clearTimeout(e.u),e.u=null),wa(e),e.h.cancel(),e.m&&("number"===typeof e.m&&qt.clearTimeout(e.m),e.m=null)}function da(e){Ri(e.h)||e.m||(e.m=!0,cr(e.Ja,e),e.C=0)}function pa(e,t){var n;n=t?t.m:e.U++;var r=si(e.F);hi(r,"SID",e.I),hi(r,"RID",n),hi(r,"AID",e.T),va(e,r),e.o&&e.s&&ua(r,e.o,e.s),n=new zr(e,e.j,n,e.C+1),null===e.o&&(n.H=e.s),t&&(e.i=t.D.concat(e.i)),t=ya(e,n,1e3),n.setTimeout(Math.round(.5*e.ta)+Math.round(.5*e.ta*Math.random())),Li(e.h,n),Qr(n,r,t)}function va(e,t){e.ia&&On(e.ia,(function(e,n){hi(t,n,e)})),e.l&&ai({},(function(e,n){hi(t,n,e)}))}function ya(e,t,n){n=Math.min(e.i.length,n);var r=e.l?$t(e.l.Ra,e.l,e):null;e:for(var i=e.i,a=-1;;){var o=["count="+n];-1==a?0<n?(a=i[0].h,o.push("ofs="+a)):a=0:o.push("ofs="+a);for(var u=!0,s=0;s<n;s++){var c=i[s].h,l=i[s].g;if(0>(c-=a))a=Math.max(0,i[s].h-100),u=!1;else try{ji(l,o,"req"+c+"_")}catch(f){r&&r(l)}}if(u){r=o.join("&");break e}}return e=e.i.splice(0,n),t.D=e,r}function ma(e){e.g||e.u||(e.Z=1,cr(e.Ia,e),e.A=0)}function ga(e){return!(e.g||e.u||3<=e.A)&&(e.Z++,e.u=Rr($t(e.Ia,e),_a(e,e.A)),e.A++,!0)}function ka(e){null!=e.B&&(qt.clearTimeout(e.B),e.B=null)}function ba(e){e.g=new zr(e,e.j,"rpc",e.Z),null===e.o&&(e.g.H=e.s),e.g.N=0;var t=si(e.sa);hi(t,"RID","rpc"),hi(t,"SID",e.I),hi(t,"CI",e.L?"0":"1"),hi(t,"AID",e.T),hi(t,"TYPE","xmlhttp"),va(e,t),e.o&&e.s&&ua(t,e.o,e.s),e.J&&e.g.setTimeout(e.J);var n=e.g;e=e.ka,n.K=1,n.v=di(si(t)),n.s=null,n.P=!0,Yr(n,e)}function wa(e){null!=e.v&&(qt.clearTimeout(e.v),e.v=null)}function xa(e,t){var n=null;if(e.g==t){wa(e),ka(e),e.g=null;var r=2}else{if(!Oi(e.h,t))return;n=t.D,Mi(e.h,t),r=1}if(0!=e.G)if(e.pa=t.Y,t.i)if(1==r){n=t.s?t.s.length:0,t=Date.now()-t.F;var i=e.C;er(r=Er(),new Dr(r,n)),da(e)}else ma(e);else if(3==(i=t.o)||0==i&&0<e.pa||!(1==r&&function(e,t){return!(Pi(e.h)>=e.h.j-(e.m?1:0))&&(e.m?(e.i=t.D.concat(e.i),!0):!(1==e.G||2==e.G||e.C>=(e.Za?0:e.$a))&&(e.m=Rr($t(e.Ja,e,t),_a(e,e.C)),e.C++,!0))}(e,t)||2==r&&ga(e)))switch(n&&0<n.length&&(t=e.h,t.i=t.i.concat(n)),i){case 1:Ia(e,5);break;case 4:Ia(e,10);break;case 3:Ia(e,6);break;default:Ia(e,2)}}function _a(e,t){var n=e.Xa+Math.floor(Math.random()*e.bb);return e.l||(n*=2),n*t}function Ia(e,t){if(e.j.info("Error code "+t),2==t){var n=null;e.l&&(n=null);var r=$t(e.kb,e);n||(n=new ui("//www.google.com/images/cleardot.gif"),qt.location&&"http"==qt.location.protocol||ci(n,"https"),di(n)),function(e,t){var n=new xr;if(qt.Image){var r=new Image;r.onload=Xt(Bi,n,r,"TestLoadImage: loaded",!0,t),r.onerror=Xt(Bi,n,r,"TestLoadImage: error",!1,t),r.onabort=Xt(Bi,n,r,"TestLoadImage: abort",!1,t),r.ontimeout=Xt(Bi,n,r,"TestLoadImage: timeout",!1,t),qt.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=e}else t(!1)}(n.toString(),r)}else Ar(2);e.G=0,e.l&&e.l.va(t),Sa(e),ha(e)}function Sa(e){if(e.G=0,e.la=[],e.l){var t=Fi(e.h);0==t.length&&0==e.i.length||(nn(e.la,t),nn(e.la,e.i),e.h.i.length=0,tn(e.i),e.i.length=0),e.l.ua()}}function Ea(e,t,n){var r=n instanceof ui?si(n):new ui(n,void 0);if(""!=r.g)t&&(r.g=t+"."+r.g),li(r,r.m);else{var i=qt.location;r=i.protocol,t=t?t+"."+i.hostname:i.hostname,i=+i.port;var a=new ui(null,void 0);r&&ci(a,r),t&&(a.g=t),i&&li(a,i),n&&(a.l=n),r=a}return n=e.D,t=e.za,n&&t&&hi(r,n,t),hi(r,"VER",e.ma),va(e,r),r}function Ta(e,t,n){if(t&&!e.H)throw Error("Can't create secondary domain capable XhrIo object.");return(t=n&&e.Da&&!e.ra?new Yi(new qi({jb:!0})):new Yi(e.ra)).Ka(e.H),t}function Ca(){}function Na(){if(pn&&!(10<=Number(Tn)))throw Error("Environmental error: no available transport.")}function Aa(e,t){Zn.call(this),this.g=new ca(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.s=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.ya&&(e?e["X-WebChannel-Client-Profile"]=t.ya:e={"X-WebChannel-Client-Profile":t.ya}),this.g.S=e,(e=t&&t.Yb)&&!on(e)&&(this.g.o=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!on(t)&&(this.g.D=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new Pa(this)}function Da(e){jr.call(this);var t=e.__sm__;if(t){e:{for(var n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function Ra(){Br.call(this),this.status=1}function Pa(e){this.g=e}(Ut=Yi.prototype).Ka=function(e){this.L=e},Ut.da=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+e);t=t?t.toUpperCase():"GET",this.H=e,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():Ur.g(),this.C=this.u?Mr(this.u):Mr(Ur),this.g.onreadystatechange=$t(this.Ha,this);try{this.F=!0,this.g.open(t,String(e),!0),this.F=!1}catch(u){return void Zi(this,u)}if(e=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)n.set(i,r[i]);else{if("function"!==typeof r.keys||"function"!==typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));var a,o=k(r.keys());try{for(o.s();!(a=o.n()).done;){var u=a.value;n.set(u,r.get(u))}}catch(p){o.e(p)}finally{o.f()}}r=Array.from(n.keys()).find((function(e){return"content-type"==e.toLowerCase()})),i=qt.FormData&&e instanceof qt.FormData,!(0<=en(Ji,t))||r||i||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");var c,l=k(n);try{for(l.s();!(c=l.n()).done;){var f=s(c.value,2),h=f[0],d=f[1];this.g.setRequestHeader(h,d)}}catch(p){l.e(p)}finally{l.f()}this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{ra(this),0<this.B&&((this.K=function(e){return pn&&Sn()&&"number"===typeof e.timeout&&void 0!==e.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=$t(this.qa,this)):this.A=vr(this.qa,this.B,this)),this.v=!0,this.g.send(e),this.v=!1}catch(u){Zi(this,u)}},Ut.qa=function(){"undefined"!=typeof Bt&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,er(this,"timeout"),this.abort(8))},Ut.abort=function(e){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=e||7,er(this,"complete"),er(this,"abort"),na(this))},Ut.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),na(this,!0)),Yi.X.M.call(this)},Ut.Ha=function(){this.s||(this.F||this.v||this.l?ta(this):this.fb())},Ut.fb=function(){ta(this)},Ut.aa=function(){try{return 2<ia(this)?this.g.status:-1}catch(Ai){return-1}},Ut.fa=function(){try{return this.g?this.g.responseText:""}catch(Ai){return""}},Ut.Sa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),Qi(t)}},Ut.Ea=function(){return this.m},Ut.Oa=function(){return"string"===typeof this.j?this.j:String(this.j)},(Ut=ca.prototype).ma=8,Ut.G=1,Ut.Ja=function(e){if(this.m)if(this.m=null,1==this.G){if(!e){this.U=Math.floor(1e5*Math.random()),e=this.U++;var t=new zr(this,this.j,e,void 0),n=this.s;if(this.S&&(n?Fn(n=Ln(n),this.S):n=this.S),null!==this.o||this.N||(t.H=n,n=null),this.O)e:{for(var r=0,i=0;i<this.i.length;i++){var a=this.i[i];if(void 0===(a="__data__"in a.g&&"string"===typeof(a=a.g.__data__)?a.length:void 0))break;if(4096<(r+=a)){r=i;break e}if(4096===r||i===this.i.length-1){r=i+1;break e}}r=1e3}else r=1e3;r=ya(this,t,r),hi(i=si(this.F),"RID",e),hi(i,"CVER",22),this.D&&hi(i,"X-HTTP-Session-Id",this.D),va(this,i),n&&(this.N?r="headers="+encodeURIComponent(String(oa(n)))+"&"+r:this.o&&ua(i,this.o,n)),Li(this.h,t),this.Ya&&hi(i,"TYPE","init"),this.O?(hi(i,"$req",r),hi(i,"SID","null"),t.Z=!0,Qr(t,i,null)):Qr(t,i,r),this.G=2}}else 3==this.G&&(e?pa(this,e):0==this.i.length||Ri(this.h)||pa(this))},Ut.Ia=function(){if(this.u=null,ba(this),this.$&&!(this.K||null==this.g||0>=this.P)){var e=2*this.P;this.j.info("BP detection timer enabled: "+e),this.B=Rr($t(this.eb,this),e)}},Ut.eb=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.L=!1,this.K=!0,Ar(10),fa(this),ba(this))},Ut.cb=function(){null!=this.v&&(this.v=null,fa(this),ga(this),Ar(19))},Ut.kb=function(e){e?(this.j.info("Successfully pinged google.com"),Ar(2)):(this.j.info("Failed to ping google.com"),Ar(1))},(Ut=Ca.prototype).xa=function(){},Ut.wa=function(){},Ut.va=function(){},Ut.ua=function(){},Ut.Ra=function(){},Na.prototype.g=function(e,t){return new Aa(e,t)},Jt(Aa,Zn),Aa.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.H=!0);var e=this.g,t=this.l,n=this.h||void 0;Ar(0),e.V=t,e.ia=n||{},e.L=e.Y,e.F=Ea(e,null,e.V),da(e)},Aa.prototype.close=function(){la(this.g)},Aa.prototype.u=function(e){var t=this.g;if("string"===typeof e){var n={};n.__data__=e,e=n}else this.v&&((n={}).__data__=nr(e),e=n);t.i.push(new Ci(t.ab++,e)),3==t.G&&da(t)},Aa.prototype.M=function(){this.g.l=null,delete this.j,la(this.g),delete this.g,Aa.X.M.call(this)},Jt(Da,jr),Jt(Ra,Br),Jt(Pa,Ca),Pa.prototype.xa=function(){er(this.g,"a")},Pa.prototype.wa=function(e){er(this.g,new Da(e))},Pa.prototype.va=function(e){er(this.g,new Ra)},Pa.prototype.ua=function(){er(this.g,"b")},Na.prototype.createWebChannel=Na.prototype.g,Aa.prototype.send=Aa.prototype.u,Aa.prototype.open=Aa.prototype.m,Aa.prototype.close=Aa.prototype.close,Pr.NO_ERROR=0,Pr.TIMEOUT=8,Pr.HTTP_ERROR=6,Or.COMPLETE="complete",Fr.EventType=Vr,Vr.OPEN="a",Vr.CLOSE="b",Vr.ERROR="c",Vr.MESSAGE="d",Zn.prototype.listen=Zn.prototype.N,Yi.prototype.listenOnce=Yi.prototype.O,Yi.prototype.getLastError=Yi.prototype.Oa,Yi.prototype.getLastErrorCode=Yi.prototype.Ea,Yi.prototype.getStatus=Yi.prototype.aa,Yi.prototype.getResponseJson=Yi.prototype.Sa,Yi.prototype.getResponseText=Yi.prototype.fa,Yi.prototype.send=Yi.prototype.da,Yi.prototype.setWithCredentials=Yi.prototype.Ka;var Oa=jt.createWebChannelTransport=function(){return new Na},La=jt.getStatEventTarget=function(){return Er()},Ma=jt.ErrorCode=Pr,Fa=jt.EventType=Or,Ua=jt.Event=Ir,Va=jt.Stat={sb:0,vb:1,wb:2,Pb:3,Ub:4,Rb:5,Sb:6,Qb:7,Ob:8,Tb:9,PROXY:10,NOPROXY:11,Mb:12,Ib:13,Jb:14,Hb:15,Kb:16,Lb:17,ob:18,nb:19,pb:20},ja=jt.FetchXmlHttpFactory=qi,Ba=jt.WebChannel=Fr,qa=jt.XhrIo=Yi,za="@firebase/firestore",Ka=function(){function e(t){y(this,e),this.uid=t}return g(e,[{key:"isAuthenticated",value:function(){return null!=this.uid}},{key:"toKey",value:function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}},{key:"isEqual",value:function(e){return e.uid===this.uid}}]),e}();Ka.UNAUTHENTICATED=new Ka(null),Ka.GOOGLE_CREDENTIALS=new Ka("google-credentials-uid"),Ka.FIRST_PARTY=new Ka("first-party-uid"),Ka.MOCK_USER=new Ka("mock-user");var Ga="9.17.1",Wa=new be("@firebase/firestore");function Ha(){return Wa.logLevel}function Qa(e){if(Wa.logLevel<=de.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(Xa);Wa.debug.apply(Wa,["Firestore (".concat(Ga,"): ").concat(e)].concat(p(i)))}}function Ya(e){if(Wa.logLevel<=de.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(Xa);Wa.error.apply(Wa,["Firestore (".concat(Ga,"): ").concat(e)].concat(p(i)))}}function $a(e){if(Wa.logLevel<=de.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(Xa);Wa.warn.apply(Wa,["Firestore (".concat(Ga,"): ").concat(e)].concat(p(i)))}}function Xa(e){if("string"==typeof e)return e;try{return t=e,JSON.stringify(t)}catch(t){return e}var t}function Ja(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Unexpected state",t="FIRESTORE (".concat(Ga,") INTERNAL ASSERTION FAILED: ")+e;throw Ya(t),new Error(t)}function Za(e,t){e||Ja()}function eo(e,t){return e}var to={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},no=function(e){x(n,e);var t=T(n);function n(e,r){var i;return y(this,n),(i=t.call(this,e,r)).code=e,i.message=r,i.toString=function(){return"".concat(i.name,": [code=").concat(i.code,"]: ").concat(i.message)},i}return g(n)}(W),ro=g((function e(){var t=this;y(this,e),this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))})),io=g((function e(t,n){y(this,e),this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization","Bearer ".concat(t))})),ao=function(){function e(){y(this,e)}return g(e,[{key:"getToken",value:function(){return Promise.resolve(null)}},{key:"invalidateToken",value:function(){}},{key:"start",value:function(e,t){e.enqueueRetryable((function(){return t(Ka.UNAUTHENTICATED)}))}},{key:"shutdown",value:function(){}}]),e}(),oo=function(){function e(t){y(this,e),this.token=t,this.changeListener=null}return g(e,[{key:"getToken",value:function(){return Promise.resolve(this.token)}},{key:"invalidateToken",value:function(){}},{key:"start",value:function(e,t){var n=this;this.changeListener=t,e.enqueueRetryable((function(){return t(n.token.user)}))}},{key:"shutdown",value:function(){this.changeListener=null}}]),e}(),uo=function(){function e(t){y(this,e),this.t=t,this.currentUser=Ka.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}return g(e,[{key:"start",value:function(e,t){var n=this,r=this.i,i=function(e){return n.i!==r?(r=n.i,t(e)):Promise.resolve()},a=new ro;this.o=function(){n.i++,n.currentUser=n.u(),a.resolve(),a=new ro,e.enqueueRetryable((function(){return i(n.currentUser)}))};var o=function(){var t=a;e.enqueueRetryable(se(oe().mark((function e(){return oe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.promise;case 2:return e.next=4,i(n.currentUser);case 4:case"end":return e.stop()}}),e)}))))},u=function(e){Qa("FirebaseAuthCredentialsProvider","Auth detected"),n.auth=e,n.auth.addAuthTokenListener(n.o),o()};this.t.onInit((function(e){return u(e)})),setTimeout((function(){if(!n.auth){var e=n.t.getImmediate({optional:!0});e?u(e):(Qa("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new ro)}}),0),o()}},{key:"getToken",value:function(){var e=this,t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((function(n){return e.i!==t?(Qa("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),e.getToken()):n?(Za("string"==typeof n.accessToken),new io(n.accessToken,e.currentUser)):null})):Promise.resolve(null)}},{key:"invalidateToken",value:function(){this.forceRefresh=!0}},{key:"shutdown",value:function(){this.auth&&this.auth.removeAuthTokenListener(this.o)}},{key:"u",value:function(){var e=this.auth&&this.auth.getUid();return Za(null===e||"string"==typeof e),new Ka(e)}}]),e}(),so=function(){function e(t,n,r,i){y(this,e),this.h=t,this.l=n,this.m=r,this.g=i,this.type="FirstParty",this.user=Ka.FIRST_PARTY,this.p=new Map}return g(e,[{key:"I",value:function(){return this.g?this.g():(Za(!("object"!=typeof this.h||null===this.h||!this.h.auth||!this.h.auth.getAuthHeaderValueForFirstParty)),this.h.auth.getAuthHeaderValueForFirstParty([]))}},{key:"headers",get:function(){this.p.set("X-Goog-AuthUser",this.l);var e=this.I();return e&&this.p.set("Authorization",e),this.m&&this.p.set("X-Goog-Iam-Authorization-Token",this.m),this.p}}]),e}(),co=function(){function e(t,n,r,i){y(this,e),this.h=t,this.l=n,this.m=r,this.g=i}return g(e,[{key:"getToken",value:function(){return Promise.resolve(new so(this.h,this.l,this.m,this.g))}},{key:"start",value:function(e,t){e.enqueueRetryable((function(){return t(Ka.FIRST_PARTY)}))}},{key:"shutdown",value:function(){}},{key:"invalidateToken",value:function(){}}]),e}(),lo=g((function e(t){y(this,e),this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)})),fo=function(){function e(t){y(this,e),this.T=t,this.forceRefresh=!1,this.appCheck=null,this.A=null}return g(e,[{key:"start",value:function(e,t){var n=this,r=function(e){null!=e.error&&Qa("FirebaseAppCheckTokenProvider","Error getting App Check token; using placeholder token instead. Error: ".concat(e.error.message));var r=e.token!==n.A;return n.A=e.token,Qa("FirebaseAppCheckTokenProvider","Received ".concat(r?"new":"existing"," token.")),r?t(e.token):Promise.resolve()};this.o=function(t){e.enqueueRetryable((function(){return r(t)}))};var i=function(e){Qa("FirebaseAppCheckTokenProvider","AppCheck detected"),n.appCheck=e,n.appCheck.addTokenListener(n.o)};this.T.onInit((function(e){return i(e)})),setTimeout((function(){if(!n.appCheck){var e=n.T.getImmediate({optional:!0});e?i(e):Qa("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}},{key:"getToken",value:function(){var e=this,t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then((function(t){return t?(Za("string"==typeof t.token),e.A=t.token,new lo(t.token)):null})):Promise.resolve(null)}},{key:"invalidateToken",value:function(){this.forceRefresh=!0}},{key:"shutdown",value:function(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}]),e}();function ho(e){var t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(var r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}var po=function(){function e(){y(this,e)}return g(e,null,[{key:"R",value:function(){for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length,n="";n.length<20;)for(var r=ho(40),i=0;i<r.length;++i)n.length<20&&r[i]<t&&(n+=e.charAt(r[i]%e.length));return n}}]),e}();function vo(e,t){return e<t?-1:e>t?1:0}function yo(e,t,n){return e.length===t.length&&e.every((function(e,r){return n(e,t[r])}))}function mo(e){return e+"\0"}var go=function(){function e(t,n){if(y(this,e),this.seconds=t,this.nanoseconds=n,n<0)throw new no(to.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new no(to.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<-62135596800)throw new no(to.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new no(to.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return g(e,[{key:"toDate",value:function(){return new Date(this.toMillis())}},{key:"toMillis",value:function(){return 1e3*this.seconds+this.nanoseconds/1e6}},{key:"_compareTo",value:function(e){return this.seconds===e.seconds?vo(this.nanoseconds,e.nanoseconds):vo(this.seconds,e.seconds)}},{key:"isEqual",value:function(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}},{key:"toString",value:function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}},{key:"toJSON",value:function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}},{key:"valueOf",value:function(){var e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}],[{key:"now",value:function(){return e.fromMillis(Date.now())}},{key:"fromDate",value:function(t){return e.fromMillis(t.getTime())}},{key:"fromMillis",value:function(t){var n=Math.floor(t/1e3);return new e(n,Math.floor(1e6*(t-1e3*n)))}}]),e}(),ko=function(){function e(t){y(this,e),this.timestamp=t}return g(e,[{key:"compareTo",value:function(e){return this.timestamp._compareTo(e.timestamp)}},{key:"isEqual",value:function(e){return this.timestamp.isEqual(e.timestamp)}},{key:"toMicroseconds",value:function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}},{key:"toString",value:function(){return"SnapshotVersion("+this.timestamp.toString()+")"}},{key:"toTimestamp",value:function(){return this.timestamp}}],[{key:"fromTimestamp",value:function(t){return new e(t)}},{key:"min",value:function(){return new e(new go(0,0))}},{key:"max",value:function(){return new e(new go(253402300799,999999999))}}]),e}(),bo=function(){function e(t,n,r){y(this,e),void 0===n?n=0:n>t.length&&Ja(),void 0===r?r=t.length-n:r>t.length-n&&Ja(),this.segments=t,this.offset=n,this.len=r}return g(e,[{key:"length",get:function(){return this.len}},{key:"isEqual",value:function(t){return 0===e.comparator(this,t)}},{key:"child",value:function(t){var n=this.segments.slice(this.offset,this.limit());return t instanceof e?t.forEach((function(e){n.push(e)})):n.push(t),this.construct(n)}},{key:"limit",value:function(){return this.offset+this.length}},{key:"popFirst",value:function(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}},{key:"popLast",value:function(){return this.construct(this.segments,this.offset,this.length-1)}},{key:"firstSegment",value:function(){return this.segments[this.offset]}},{key:"lastSegment",value:function(){return this.get(this.length-1)}},{key:"get",value:function(e){return this.segments[this.offset+e]}},{key:"isEmpty",value:function(){return 0===this.length}},{key:"isPrefixOf",value:function(e){if(e.length<this.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}},{key:"isImmediateParentOf",value:function(e){if(this.length+1!==e.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}},{key:"forEach",value:function(e){for(var t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}},{key:"toArray",value:function(){return this.segments.slice(this.offset,this.limit())}}],[{key:"comparator",value:function(e,t){for(var n=Math.min(e.length,t.length),r=0;r<n;r++){var i=e.get(r),a=t.get(r);if(i<a)return-1;if(i>a)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}]),e}(),wo=function(e){x(n,e);var t=T(n);function n(){return y(this,n),t.apply(this,arguments)}return g(n,[{key:"construct",value:function(e,t,r){return new n(e,t,r)}},{key:"canonicalString",value:function(){return this.toArray().join("/")}},{key:"toString",value:function(){return this.canonicalString()}}],[{key:"fromString",value:function(){for(var e=[],t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];for(var a=0,o=r;a<o.length;a++){var u=o[a];if(u.indexOf("//")>=0)throw new no(to.INVALID_ARGUMENT,"Invalid segment (".concat(u,"). Paths must not contain // in them."));e.push.apply(e,p(u.split("/").filter((function(e){return e.length>0}))))}return new n(e)}},{key:"emptyPath",value:function(){return new n([])}}]),n}(bo),xo=/^[_a-zA-Z][_a-zA-Z0-9]*$/,_o=function(e){x(n,e);var t=T(n);function n(){return y(this,n),t.apply(this,arguments)}return g(n,[{key:"construct",value:function(e,t,r){return new n(e,t,r)}},{key:"canonicalString",value:function(){return this.toArray().map((function(e){return e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e})).join(".")}},{key:"toString",value:function(){return this.canonicalString()}},{key:"isKeyField",value:function(){return 1===this.length&&"__name__"===this.get(0)}}],[{key:"isValidIdentifier",value:function(e){return xo.test(e)}},{key:"keyField",value:function(){return new n(["__name__"])}},{key:"fromServerFormat",value:function(e){for(var t=[],r="",i=0,a=function(){if(0===r.length)throw new no(to.INVALID_ARGUMENT,"Invalid field path (".concat(e,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"));t.push(r),r=""},o=!1;i<e.length;){var u=e[i];if("\\"===u){if(i+1===e.length)throw new no(to.INVALID_ARGUMENT,"Path has trailing escape character: "+e);var s=e[i+1];if("\\"!==s&&"."!==s&&"`"!==s)throw new no(to.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=s,i+=2}else"`"===u?(o=!o,i++):"."!==u||o?(r+=u,i++):(a(),i++)}if(a(),o)throw new no(to.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}},{key:"emptyPath",value:function(){return new n([])}}]),n}(bo),Io=function(){function e(t){y(this,e),this.path=t}return g(e,[{key:"collectionGroup",get:function(){return this.path.popLast().lastSegment()}},{key:"hasCollectionId",value:function(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}},{key:"getCollectionGroup",value:function(){return this.path.get(this.path.length-2)}},{key:"getCollectionPath",value:function(){return this.path.popLast()}},{key:"isEqual",value:function(e){return null!==e&&0===wo.comparator(this.path,e.path)}},{key:"toString",value:function(){return this.path.toString()}}],[{key:"fromPath",value:function(t){return new e(wo.fromString(t))}},{key:"fromName",value:function(t){return new e(wo.fromString(t).popFirst(5))}},{key:"empty",value:function(){return new e(wo.emptyPath())}},{key:"comparator",value:function(e,t){return wo.comparator(e.path,t.path)}},{key:"isDocumentKey",value:function(e){return e.length%2==0}},{key:"fromSegments",value:function(t){return new e(new wo(t.slice()))}}]),e}(),So=g((function e(t,n,r,i){y(this,e),this.indexId=t,this.collectionGroup=n,this.fields=r,this.indexState=i}));function Eo(e){return e.fields.find((function(e){return 2===e.kind}))}function To(e){return e.fields.filter((function(e){return 2!==e.kind}))}So.UNKNOWN_ID=-1;var Co=g((function e(t,n){y(this,e),this.fieldPath=t,this.kind=n}));var No=function(){function e(t,n){y(this,e),this.sequenceNumber=t,this.offset=n}return g(e,null,[{key:"empty",value:function(){return new e(0,Ro.min())}}]),e}();function Ao(e,t){var n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=ko.fromTimestamp(1e9===r?new go(n+1,0):new go(n,r));return new Ro(i,Io.empty(),t)}function Do(e){return new Ro(e.readTime,e.key,-1)}var Ro=function(){function e(t,n,r){y(this,e),this.readTime=t,this.documentKey=n,this.largestBatchId=r}return g(e,null,[{key:"min",value:function(){return new e(ko.min(),Io.empty(),-1)}},{key:"max",value:function(){return new e(ko.max(),Io.empty(),-1)}}]),e}();function Po(e,t){var n=e.readTime.compareTo(t.readTime);return 0!==n?n:0!==(n=Io.comparator(e.documentKey,t.documentKey))?n:vo(e.largestBatchId,t.largestBatchId)}var Oo="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Lo=function(){function e(){y(this,e),this.onCommittedListeners=[]}return g(e,[{key:"addOnCommittedListener",value:function(e){this.onCommittedListeners.push(e)}},{key:"raiseOnCommittedEvent",value:function(){this.onCommittedListeners.forEach((function(e){return e()}))}}]),e}();function Mo(e){return Fo.apply(this,arguments)}function Fo(){return Fo=se(oe().mark((function e(t){return oe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.code===to.FAILED_PRECONDITION&&t.message===Oo){e.next=2;break}throw t;case 2:Qa("LocalStore","Unexpectedly lost primary lease");case 3:case"end":return e.stop()}}),e)}))),Fo.apply(this,arguments)}var Uo=function(){function e(t){var n=this;y(this,e),this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((function(e){n.isDone=!0,n.result=e,n.nextCallback&&n.nextCallback(e)}),(function(e){n.isDone=!0,n.error=e,n.catchCallback&&n.catchCallback(e)}))}return g(e,[{key:"catch",value:function(e){return this.next(void 0,e)}},{key:"next",value:function(t,n){var r=this;return this.callbackAttached&&Ja(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new e((function(e,i){r.nextCallback=function(n){r.wrapSuccess(t,n).next(e,i)},r.catchCallback=function(t){r.wrapFailure(n,t).next(e,i)}}))}},{key:"toPromise",value:function(){var e=this;return new Promise((function(t,n){e.next(t,n)}))}},{key:"wrapUserFunction",value:function(t){try{var n=t();return n instanceof e?n:e.resolve(n)}catch(t){return e.reject(t)}}},{key:"wrapSuccess",value:function(t,n){return t?this.wrapUserFunction((function(){return t(n)})):e.resolve(n)}},{key:"wrapFailure",value:function(t,n){return t?this.wrapUserFunction((function(){return t(n)})):e.reject(n)}}],[{key:"resolve",value:function(t){return new e((function(e,n){e(t)}))}},{key:"reject",value:function(t){return new e((function(e,n){n(t)}))}},{key:"waitFor",value:function(t){return new e((function(e,n){var r=0,i=0,a=!1;t.forEach((function(t){++r,t.next((function(){++i,a&&i===r&&e()}),(function(e){return n(e)}))})),a=!0,i===r&&e()}))}},{key:"or",value:function(t){var n,r=e.resolve(!1),i=k(t);try{var a=function(){var t=n.value;r=r.next((function(n){return n?e.resolve(n):t()}))};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return r}},{key:"forEach",value:function(e,t){var n=this,r=[];return e.forEach((function(e,i){r.push(t.call(n,e,i))})),this.waitFor(r)}},{key:"mapArray",value:function(t,n){return new e((function(e,r){for(var i=t.length,a=new Array(i),o=0,u=function(u){var s=u;n(t[s]).next((function(t){a[s]=t,++o===i&&e(a)}),(function(e){return r(e)}))},s=0;s<i;s++)u(s)}))}},{key:"doWhile",value:function(t,n){return new e((function(e,r){!function i(){!0===t()?n().next((function(){i()}),r):e()}()}))}}]),e}(),Vo=function(){function e(t,n){var r=this;y(this,e),this.action=t,this.transaction=n,this.aborted=!1,this.P=new ro,this.transaction.oncomplete=function(){r.P.resolve()},this.transaction.onabort=function(){n.error?r.P.reject(new qo(t,n.error)):r.P.resolve()},this.transaction.onerror=function(e){var n=Ho(e.target.error);r.P.reject(new qo(t,n))}}return g(e,[{key:"v",get:function(){return this.P.promise}},{key:"abort",value:function(e){e&&this.P.reject(e),this.aborted||(Qa("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}},{key:"V",value:function(){var e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}},{key:"store",value:function(e){var t=this.transaction.objectStore(e);return new Ko(t)}}],[{key:"open",value:function(t,n,r,i){try{return new e(n,t.transaction(i,r))}catch(t){throw new qo(n,t)}}}]),e}(),jo=function(){function e(t,n,r){y(this,e),this.name=t,this.version=n,this.S=r,12.2===e.D(j())&&Ya("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return g(e,[{key:"F",value:function(){var e=se(oe().mark((function e(t){var n=this;return oe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.db,e.t0){e.next=6;break}return Qa("SimpleDb","Opening database:",this.name),e.next=5,new Promise((function(e,r){var i=indexedDB.open(n.name,n.version);i.onsuccess=function(t){var n=t.target.result;e(n)},i.onblocked=function(){r(new qo(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=function(e){var n=e.target.error;"VersionError"===n.name?r(new no(to.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):"InvalidStateError"===n.name?r(new no(to.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+n)):r(new qo(t,n))},i.onupgradeneeded=function(e){Qa("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',e.oldVersion);var t=e.target.result;n.S.$(t,i.transaction,e.oldVersion,n.version).next((function(){Qa("SimpleDb","Database upgrade to version "+n.version+" complete")}))}}));case 5:this.db=e.sent;case 6:return this.B&&(this.db.onversionchange=function(e){return n.B(e)}),e.abrupt("return",this.db);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"L",value:function(e){this.B=e,this.db&&(this.db.onversionchange=function(t){return e(t)})}},{key:"runTransaction",value:function(){var e=se(oe().mark((function e(t,n,r,i){var a,o,u,s,c,l=this;return oe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a="readonly"===n,o=0;case 2:return++o,e.prev=3,e.delegateYield(oe().mark((function e(){var n,o;return oe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.F(t);case 2:return l.db=e.sent,n=Vo.open(l.db,t,a?"readonly":"readwrite",r),o=i(n).next((function(e){return n.V(),e})).catch((function(e){return n.abort(e),Uo.reject(e)})).toPromise(),o.catch((function(){})),e.next=7,n.v;case 7:return e.t0=o,e.abrupt("return",{v:e.t0});case 9:case"end":return e.stop()}}),e)}))(),"t0",5);case 5:if("object"!==typeof(u=e.t0)){e.next=8;break}return e.abrupt("return",u.v);case 8:e.next=15;break;case 10:if(e.prev=10,e.t1=e.catch(3),s=e.t1,c="FirebaseError"!==s.name&&o<3,Qa("SimpleDb","Transaction failed with error:",s.message,"Retrying:",c),this.close(),c){e.next=15;break}return e.abrupt("return",Promise.reject(s));case 15:e.next=2;break;case 17:case"end":return e.stop()}}),e,this,[[3,10]])})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"close",value:function(){this.db&&this.db.close(),this.db=void 0}}],[{key:"delete",value:function(e){return Qa("SimpleDb","Removing database:",e),Go(window.indexedDB.deleteDatabase(e)).toPromise()}},{key:"C",value:function(){if(!G())return!1;if(e.N())return!0;var t=j(),n=e.D(t),r=0<n&&n<10,i=e.k(t),a=0<i&&i<4.5;return!(t.indexOf("MSIE ")>0||t.indexOf("Trident/")>0||t.indexOf("Edge/")>0||r||a)}},{key:"N",value:function(){var e;return"undefined"!=typeof process&&"YES"===(null===(e={NODE_ENV:"production",PUBLIC_URL:"/toDoApp",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0})||void 0===e?void 0:e.O)}},{key:"M",value:function(e,t){return e.store(t)}},{key:"D",value:function(e){var t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(n)}},{key:"k",value:function(e){var t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}}]),e}(),Bo=function(){function e(t){y(this,e),this.q=t,this.U=!1,this.K=null}return g(e,[{key:"isDone",get:function(){return this.U}},{key:"G",get:function(){return this.K}},{key:"cursor",set:function(e){this.q=e}},{key:"done",value:function(){this.U=!0}},{key:"j",value:function(e){this.K=e}},{key:"delete",value:function(){return Go(this.q.delete())}}]),e}(),qo=function(e){x(n,e);var t=T(n);function n(e,r){var i;return y(this,n),(i=t.call(this,to.UNAVAILABLE,"IndexedDB transaction '".concat(e,"' failed: ").concat(r))).name="IndexedDbTransactionError",i}return g(n)}(no);function zo(e){return"IndexedDbTransactionError"===e.name}var Ko=function(){function e(t){y(this,e),this.store=t}return g(e,[{key:"put",value:function(e,t){var n;return void 0!==t?(Qa("SimpleDb","PUT",this.store.name,e,t),n=this.store.put(t,e)):(Qa("SimpleDb","PUT",this.store.name,"<auto-key>",e),n=this.store.put(e)),Go(n)}},{key:"add",value:function(e){return Qa("SimpleDb","ADD",this.store.name,e,e),Go(this.store.add(e))}},{key:"get",value:function(e){var t=this;return Go(this.store.get(e)).next((function(n){return void 0===n&&(n=null),Qa("SimpleDb","GET",t.store.name,e,n),n}))}},{key:"delete",value:function(e){return Qa("SimpleDb","DELETE",this.store.name,e),Go(this.store.delete(e))}},{key:"count",value:function(){return Qa("SimpleDb","COUNT",this.store.name),Go(this.store.count())}},{key:"W",value:function(e,t){var n=this.options(e,t);if(n.index||"function"!=typeof this.store.getAll){var r=this.cursor(n),i=[];return this.H(r,(function(e,t){i.push(t)})).next((function(){return i}))}var a=this.store.getAll(n.range);return new Uo((function(e,t){a.onerror=function(e){t(e.target.error)},a.onsuccess=function(t){e(t.target.result)}}))}},{key:"J",value:function(e,t){var n=this.store.getAll(e,null===t?void 0:t);return new Uo((function(e,t){n.onerror=function(e){t(e.target.error)},n.onsuccess=function(t){e(t.target.result)}}))}},{key:"Y",value:function(e,t){Qa("SimpleDb","DELETE ALL",this.store.name);var n=this.options(e,t);n.X=!1;var r=this.cursor(n);return this.H(r,(function(e,t,n){return n.delete()}))}},{key:"Z",value:function(e,t){var n;t?n=e:(n={},t=e);var r=this.cursor(n);return this.H(r,t)}},{key:"tt",value:function(e){var t=this.cursor({});return new Uo((function(n,r){t.onerror=function(e){var t=Ho(e.target.error);r(t)},t.onsuccess=function(t){var r=t.target.result;r?e(r.primaryKey,r.value).next((function(e){e?r.continue():n()})):n()}}))}},{key:"H",value:function(e,t){var n=[];return new Uo((function(r,i){e.onerror=function(e){i(e.target.error)},e.onsuccess=function(e){var i=e.target.result;if(i){var a=new Bo(i),o=t(i.primaryKey,i.value,a);if(o instanceof Uo){var u=o.catch((function(e){return a.done(),Uo.reject(e)}));n.push(u)}a.isDone?r():null===a.G?i.continue():i.continue(a.G)}else r()}})).next((function(){return Uo.waitFor(n)}))}},{key:"options",value:function(e,t){var n;return void 0!==e&&("string"==typeof e?n=e:t=e),{index:n,range:t}}},{key:"cursor",value:function(e){var t="next";if(e.reverse&&(t="prev"),e.index){var n=this.store.index(e.index);return e.X?n.openKeyCursor(e.range,t):n.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}]),e}();function Go(e){return new Uo((function(t,n){e.onsuccess=function(e){var n=e.target.result;t(n)},e.onerror=function(e){var t=Ho(e.target.error);n(t)}}))}var Wo=!1;function Ho(e){var t=jo.D(j());if(t>=12.2&&t<13){var n="An internal error was encountered in the Indexed Database server";if(e.message.indexOf(n)>=0){var r=new no("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '".concat(n,"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround."));return Wo||(Wo=!0,setTimeout((function(){throw r}),0)),r}}return e}var Qo=function(){function e(t,n){y(this,e),this.asyncQueue=t,this.et=n,this.task=null}return g(e,[{key:"start",value:function(){this.nt(15e3)}},{key:"stop",value:function(){this.task&&(this.task.cancel(),this.task=null)}},{key:"started",get:function(){return null!==this.task}},{key:"nt",value:function(e){var t=this;Qa("IndexBackiller","Scheduled in ".concat(e,"ms")),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,se(oe().mark((function e(){return oe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.task=null,e.prev=1,e.t0=Qa,e.t1="Documents written: ",e.next=6,t.et.st();case 6:e.t2=e.sent,e.t3=e.t1.concat.call(e.t1,e.t2),(0,e.t0)("IndexBackiller",e.t3),e.next=19;break;case 11:if(e.prev=11,e.t4=e.catch(1),!zo(e.t4)){e.next=17;break}Qa("IndexBackiller","Ignoring IndexedDB error during index backfill: ",e.t4),e.next=19;break;case 17:return e.next=19,Mo(e.t4);case 19:return e.next=21,t.nt(6e4);case 21:case"end":return e.stop()}}),e,null,[[1,11]])}))))}}]),e}(),Yo=function(){function e(t,n){y(this,e),this.localStore=t,this.persistence=n}return g(e,[{key:"st",value:function(){var e=se(oe().mark((function e(){var t,n=this,r=arguments;return oe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.length>0&&void 0!==r[0]?r[0]:50,e.abrupt("return",this.persistence.runTransaction("Backfill Indexes","readwrite-primary",(function(e){return n.it(e,t)})));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"it",value:function(e,t){var n=this,r=new Set,i=t,a=!0;return Uo.doWhile((function(){return!0===a&&i>0}),(function(){return n.localStore.indexManager.getNextCollectionGroupToUpdate(e).next((function(t){if(null!==t&&!r.has(t))return Qa("IndexBackiller","Processing collection: ".concat(t)),n.rt(e,t,i).next((function(e){i-=e,r.add(t)}));a=!1}))})).next((function(){return t-i}))}},{key:"rt",value:function(e,t,n){var r=this;return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next((function(i){return r.localStore.localDocuments.getNextDocuments(e,t,i,n).next((function(n){var a=n.changes;return r.localStore.indexManager.updateIndexEntries(e,a).next((function(){return r.ot(i,n)})).next((function(n){return Qa("IndexBackiller","Updating offset: ".concat(n)),r.localStore.indexManager.updateCollectionGroup(e,t,n)})).next((function(){return a.size}))}))}))}},{key:"ot",value:function(e,t){var n=e;return t.changes.forEach((function(e,t){var r=Do(t);Po(r,n)>0&&(n=r)})),new Ro(n.readTime,n.documentKey,Math.max(t.batchId,e.largestBatchId))}}]),e}(),$o=function(){function e(t,n){var r=this;y(this,e),this.previousValue=t,n&&(n.sequenceNumberHandler=function(e){return r.ut(e)},this.ct=function(e){return n.writeSequenceNumber(e)})}return g(e,[{key:"ut",value:function(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}},{key:"next",value:function(){var e=++this.previousValue;return this.ct&&this.ct(e),e}}]),e}();$o.at=-1;var Xo=g((function e(t,n,r,i,a,o,u,s){y(this,e),this.databaseId=t,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=a,this.forceLongPolling=o,this.autoDetectLongPolling=u,this.useFetchStreams=s})),Jo=function(){function e(t,n){y(this,e),this.projectId=t,this.database=n||"(default)"}return g(e,[{key:"isDefaultDatabase",get:function(){return"(default)"===this.database}},{key:"isEqual",value:function(t){return t instanceof e&&t.projectId===this.projectId&&t.database===this.database}}],[{key:"empty",value:function(){return new e("","")}}]),e}();function Zo(e){var t=0;for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function eu(e,t){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function tu(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function nu(e){return null==e}function ru(e){return 0===e&&1/e==-1/0}function iu(e){return"number"==typeof e&&Number.isInteger(e)&&!ru(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}var au=function(e){function t(e){y(this,t),this.binaryString=e}return g(t,[{key:Symbol.iterator,value:function(){var e=this,t=0;return{next:function(){return t<e.binaryString.length?{value:e.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}}},{key:"toBase64",value:function(){return e=this.binaryString,btoa(e);var e}},{key:"toUint8Array",value:function(){return function(e){for(var t=new Uint8Array(e.length),n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}},{key:"approximateByteSize",value:function(){return 2*this.binaryString.length}},{key:"compareTo",value:function(e){return vo(this.binaryString,e.binaryString)}},{key:"isEqual",value:function(e){return this.binaryString===e.binaryString}}],[{key:"fromBase64String",value:function(e){return new t(atob(e))}},{key:"fromUint8Array",value:function(e){var n=function(e){for(var t="",n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new t(n)}}]),t}();au.EMPTY_BYTE_STRING=new au("");var ou=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function uu(e){if(Za(!!e),"string"==typeof e){var t=0,n=ou.exec(e);if(Za(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),t=Number(r)}var i=new Date(e);return{seconds:Math.floor(i.getTime()/1e3),nanos:t}}return{seconds:su(e.seconds),nanos:su(e.nanos)}}function su(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function cu(e){return"string"==typeof e?au.fromBase64String(e):au.fromUint8Array(e)}function lu(e){var t,n;return"server_timestamp"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function fu(e){var t=e.mapValue.fields.__previous_value__;return lu(t)?fu(t):t}function hu(e){var t=uu(e.mapValue.fields.__local_write_time__.timestampValue);return new go(t.seconds,t.nanos)}var du={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},pu={nullValue:"NULL_VALUE"};function vu(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?lu(e)?4:Nu(e)?9007199254740991:10:Ja()}function yu(e,t){if(e===t)return!0;var n=vu(e);if(n!==vu(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return hu(e).isEqual(hu(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;var n=uu(e.timestampValue),r=uu(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return cu(e.bytesValue).isEqual(cu(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return su(e.geoPointValue.latitude)===su(t.geoPointValue.latitude)&&su(e.geoPointValue.longitude)===su(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return su(e.integerValue)===su(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){var n=su(e.doubleValue),r=su(t.doubleValue);return n===r?ru(n)===ru(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return yo(e.arrayValue.values||[],t.arrayValue.values||[],yu);case 10:return function(e,t){var n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(Zo(n)!==Zo(r))return!1;for(var i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!yu(n[i],r[i])))return!1;return!0}(e,t);default:return Ja()}}function mu(e,t){return void 0!==(e.values||[]).find((function(e){return yu(e,t)}))}function gu(e,t){if(e===t)return 0;var n=vu(e),r=vu(t);if(n!==r)return vo(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return vo(e.booleanValue,t.booleanValue);case 2:return function(e,t){var n=su(e.integerValue||e.doubleValue),r=su(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return ku(e.timestampValue,t.timestampValue);case 4:return ku(hu(e),hu(t));case 5:return vo(e.stringValue,t.stringValue);case 6:return function(e,t){var n=cu(e),r=cu(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){for(var n=e.split("/"),r=t.split("/"),i=0;i<n.length&&i<r.length;i++){var a=vo(n[i],r[i]);if(0!==a)return a}return vo(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){var n=vo(su(e.latitude),su(t.latitude));return 0!==n?n:vo(su(e.longitude),su(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(e,t){for(var n=e.values||[],r=t.values||[],i=0;i<n.length&&i<r.length;++i){var a=gu(n[i],r[i]);if(a)return a}return vo(n.length,r.length)}(e.arrayValue,t.arrayValue);case 10:return function(e,t){if(e===du.mapValue&&t===du.mapValue)return 0;if(e===du.mapValue)return 1;if(t===du.mapValue)return-1;var n=e.fields||{},r=Object.keys(n),i=t.fields||{},a=Object.keys(i);r.sort(),a.sort();for(var o=0;o<r.length&&o<a.length;++o){var u=vo(r[o],a[o]);if(0!==u)return u;var s=gu(n[r[o]],i[a[o]]);if(0!==s)return s}return vo(r.length,a.length)}(e.mapValue,t.mapValue);default:throw Ja()}}function ku(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return vo(e,t);var n=uu(e),r=uu(t),i=vo(n.seconds,r.seconds);return 0!==i?i:vo(n.nanos,r.nanos)}function bu(e){return wu(e)}function wu(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){var t=uu(e);return"time(".concat(t.seconds,",").concat(t.nanos,")")}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?cu(e.bytesValue).toBase64():"referenceValue"in e?(n=e.referenceValue,Io.fromName(n).toString()):"geoPointValue"in e?"geo(".concat((t=e.geoPointValue).latitude,",").concat(t.longitude,")"):"arrayValue"in e?function(e){var t,n="[",r=!0,i=k(e.values||[]);try{for(i.s();!(t=i.n()).done;){var a=t.value;r?r=!1:n+=",",n+=wu(a)}}catch(o){i.e(o)}finally{i.f()}return n+"]"}(e.arrayValue):"mapValue"in e?function(e){var t,n="{",r=!0,i=k(Object.keys(e.fields||{}).sort());try{for(i.s();!(t=i.n()).done;){var a=t.value;r?r=!1:n+=",",n+="".concat(a,":").concat(wu(e.fields[a]))}}catch(o){i.e(o)}finally{i.f()}return n+"}"}(e.mapValue):Ja();var t,n}function xu(e,t){return{referenceValue:"projects/".concat(e.projectId,"/databases/").concat(e.database,"/documents/").concat(t.path.canonicalString())}}function _u(e){return!!e&&"integerValue"in e}function Iu(e){return!!e&&"arrayValue"in e}function Su(e){return!!e&&"nullValue"in e}function Eu(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function Tu(e){return!!e&&"mapValue"in e}function Cu(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){var t={mapValue:{fields:{}}};return eu(e.mapValue.fields,(function(e,n){return t.mapValue.fields[e]=Cu(n)})),t}if(e.arrayValue){for(var n={arrayValue:{values:[]}},r=0;r<(e.arrayValue.values||[]).length;++r)n.arrayValue.values[r]=Cu(e.arrayValue.values[r]);return n}return Object.assign({},e)}function Nu(e){return"__max__"===(((e.mapValue||{}).fields||{}).__type__||{}).stringValue}function Au(e){return"nullValue"in e?pu:"booleanValue"in e?{booleanValue:!1}:"integerValue"in e||"doubleValue"in e?{doubleValue:NaN}:"timestampValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in e?{stringValue:""}:"bytesValue"in e?{bytesValue:""}:"referenceValue"in e?xu(Jo.empty(),Io.empty()):"geoPointValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in e?{arrayValue:{}}:"mapValue"in e?{mapValue:{}}:Ja()}function Du(e){return"nullValue"in e?{booleanValue:!1}:"booleanValue"in e?{doubleValue:NaN}:"integerValue"in e||"doubleValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in e?{stringValue:""}:"stringValue"in e?{bytesValue:""}:"bytesValue"in e?xu(Jo.empty(),Io.empty()):"referenceValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in e?{arrayValue:{}}:"arrayValue"in e?{mapValue:{}}:"mapValue"in e?du:Ja()}function Ru(e,t){var n=gu(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?-1:!e.inclusive&&t.inclusive?1:0}function Pu(e,t){var n=gu(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?1:!e.inclusive&&t.inclusive?-1:0}var Ou=g((function e(t,n){y(this,e),this.position=t,this.inclusive=n}));function Lu(e,t,n){for(var r=0,i=0;i<e.position.length;i++){var a=t[i],o=e.position[i];if(r=a.field.isKeyField()?Io.comparator(Io.fromName(o.referenceValue),n.key):gu(o,n.data.field(a.field)),"desc"===a.dir&&(r*=-1),0!==r)break}return r}function Mu(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(var n=0;n<e.position.length;n++)if(!yu(e.position[n],t.position[n]))return!1;return!0}var Fu=g((function e(){y(this,e)})),Uu=function(e){x(n,e);var t=T(n);function n(e,r,i){var a;return y(this,n),(a=t.call(this)).field=e,a.op=r,a.value=i,a}return g(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(gu(t,this.value)):null!==t&&vu(this.value)===vu(t)&&this.matchesComparison(gu(t,this.value))}},{key:"matchesComparison",value:function(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return Ja()}}},{key:"isInequality",value:function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}},{key:"getFlattenedFilters",value:function(){return[this]}},{key:"getFilters",value:function(){return[this]}},{key:"getFirstInequalityField",value:function(){return this.isInequality()?this.field:null}}],[{key:"create",value:function(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,r):new Qu(e,t,r):"array-contains"===t?new Ju(e,r):"in"===t?new Zu(e,r):"not-in"===t?new es(e,r):"array-contains-any"===t?new ts(e,r):new n(e,t,r)}},{key:"createKeyFieldInFilter",value:function(e,t,n){return"in"===t?new Yu(e,n):new $u(e,n)}}]),n}(Fu),Vu=function(e){x(n,e);var t=T(n);function n(e,r){var i;return y(this,n),(i=t.call(this)).filters=e,i.op=r,i.ht=null,i}return g(n,[{key:"matches",value:function(e){return ju(this)?void 0===this.filters.find((function(t){return!t.matches(e)})):void 0!==this.filters.find((function(t){return t.matches(e)}))}},{key:"getFlattenedFilters",value:function(){return null!==this.ht||(this.ht=this.filters.reduce((function(e,t){return e.concat(t.getFlattenedFilters())}),[])),this.ht}},{key:"getFilters",value:function(){return Object.assign([],this.filters)}},{key:"getFirstInequalityField",value:function(){var e=this.lt((function(e){return e.isInequality()}));return null!==e?e.field:null}},{key:"lt",value:function(e){var t,n=k(this.getFlattenedFilters());try{for(n.s();!(t=n.n()).done;){var r=t.value;if(e(r))return r}}catch(i){n.e(i)}finally{n.f()}return null}}],[{key:"create",value:function(e,t){return new n(e,t)}}]),n}(Fu);function ju(e){return"and"===e.op}function Bu(e){return"or"===e.op}function qu(e){return zu(e)&&ju(e)}function zu(e){var t,n=k(e.filters);try{for(n.s();!(t=n.n()).done;){if(t.value instanceof Vu)return!1}}catch(r){n.e(r)}finally{n.f()}return!0}function Ku(e){if(e instanceof Uu)return e.field.canonicalString()+e.op.toString()+bu(e.value);if(qu(e))return e.filters.map((function(e){return Ku(e)})).join(",");var t=e.filters.map((function(e){return Ku(e)})).join(",");return"".concat(e.op,"(").concat(t,")")}function Gu(e,t){return e instanceof Uu?function(e,t){return t instanceof Uu&&e.op===t.op&&e.field.isEqual(t.field)&&yu(e.value,t.value)}(e,t):e instanceof Vu?function(e,t){return t instanceof Vu&&e.op===t.op&&e.filters.length===t.filters.length&&e.filters.reduce((function(e,n,r){return e&&Gu(n,t.filters[r])}),!0)}(e,t):void Ja()}function Wu(e,t){var n=e.filters.concat(t);return Vu.create(n,e.op)}function Hu(e){return e instanceof Uu?function(e){return"".concat(e.field.canonicalString()," ").concat(e.op," ").concat(bu(e.value))}(e):e instanceof Vu?function(e){return e.op.toString()+" {"+e.getFilters().map(Hu).join(" ,")+"}"}(e):"Filter"}var Qu=function(e){x(n,e);var t=T(n);function n(e,r,i){var a;return y(this,n),(a=t.call(this,e,r,i)).key=Io.fromName(i.referenceValue),a}return g(n,[{key:"matches",value:function(e){var t=Io.comparator(e.key,this.key);return this.matchesComparison(t)}}]),n}(Uu),Yu=function(e){x(n,e);var t=T(n);function n(e,r){var i;return y(this,n),(i=t.call(this,e,"in",r)).keys=Xu("in",r),i}return g(n,[{key:"matches",value:function(e){return this.keys.some((function(t){return t.isEqual(e.key)}))}}]),n}(Uu),$u=function(e){x(n,e);var t=T(n);function n(e,r){var i;return y(this,n),(i=t.call(this,e,"not-in",r)).keys=Xu("not-in",r),i}return g(n,[{key:"matches",value:function(e){return!this.keys.some((function(t){return t.isEqual(e.key)}))}}]),n}(Uu);function Xu(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map((function(e){return Io.fromName(e.referenceValue)}))}var Ju=function(e){x(n,e);var t=T(n);function n(e,r){return y(this,n),t.call(this,e,"array-contains",r)}return g(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return Iu(t)&&mu(t.arrayValue,this.value)}}]),n}(Uu),Zu=function(e){x(n,e);var t=T(n);function n(e,r){return y(this,n),t.call(this,e,"in",r)}return g(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return null!==t&&mu(this.value.arrayValue,t)}}]),n}(Uu),es=function(e){x(n,e);var t=T(n);function n(e,r){return y(this,n),t.call(this,e,"not-in",r)}return g(n,[{key:"matches",value:function(e){if(mu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var t=e.data.field(this.field);return null!==t&&!mu(this.value.arrayValue,t)}}]),n}(Uu),ts=function(e){x(n,e);var t=T(n);function n(e,r){return y(this,n),t.call(this,e,"array-contains-any",r)}return g(n,[{key:"matches",value:function(e){var t=this,n=e.data.field(this.field);return!(!Iu(n)||!n.arrayValue.values)&&n.arrayValue.values.some((function(e){return mu(t.value.arrayValue,e)}))}}]),n}(Uu),ns=g((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";y(this,e),this.field=t,this.dir=n}));function rs(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}var is=function(){function e(t,n){y(this,e),this.comparator=t,this.root=n||os.EMPTY}return g(e,[{key:"insert",value:function(t,n){return new e(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,os.BLACK,null,null))}},{key:"remove",value:function(t){return new e(this.comparator,this.root.remove(t,this.comparator).copy(null,null,os.BLACK,null,null))}},{key:"get",value:function(e){for(var t=this.root;!t.isEmpty();){var n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}},{key:"indexOf",value:function(e){for(var t=0,n=this.root;!n.isEmpty();){var r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}},{key:"isEmpty",value:function(){return this.root.isEmpty()}},{key:"size",get:function(){return this.root.size}},{key:"minKey",value:function(){return this.root.minKey()}},{key:"maxKey",value:function(){return this.root.maxKey()}},{key:"inorderTraversal",value:function(e){return this.root.inorderTraversal(e)}},{key:"forEach",value:function(e){this.inorderTraversal((function(t,n){return e(t,n),!1}))}},{key:"toString",value:function(){var e=[];return this.inorderTraversal((function(t,n){return e.push("".concat(t,":").concat(n)),!1})),"{".concat(e.join(", "),"}")}},{key:"reverseTraversal",value:function(e){return this.root.reverseTraversal(e)}},{key:"getIterator",value:function(){return new as(this.root,null,this.comparator,!1)}},{key:"getIteratorFrom",value:function(e){return new as(this.root,e,this.comparator,!1)}},{key:"getReverseIterator",value:function(){return new as(this.root,null,this.comparator,!0)}},{key:"getReverseIteratorFrom",value:function(e){return new as(this.root,e,this.comparator,!0)}}]),e}(),as=function(){function e(t,n,r,i){y(this,e),this.isReverse=i,this.nodeStack=[];for(var a=1;!t.isEmpty();)if(a=n?r(t.key,n):1,n&&i&&(a*=-1),a<0)t=this.isReverse?t.left:t.right;else{if(0===a){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}return g(e,[{key:"getNext",value:function(){var e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}},{key:"hasNext",value:function(){return this.nodeStack.length>0}},{key:"peek",value:function(){if(0===this.nodeStack.length)return null;var e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}]),e}(),os=function(){function e(t,n,r,i,a){y(this,e),this.key=t,this.value=n,this.color=null!=r?r:e.RED,this.left=null!=i?i:e.EMPTY,this.right=null!=a?a:e.EMPTY,this.size=this.left.size+1+this.right.size}return g(e,[{key:"copy",value:function(t,n,r,i,a){return new e(null!=t?t:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=a?a:this.right)}},{key:"isEmpty",value:function(){return!1}},{key:"inorderTraversal",value:function(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}},{key:"reverseTraversal",value:function(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}},{key:"min",value:function(){return this.left.isEmpty()?this:this.left.min()}},{key:"minKey",value:function(){return this.min().key}},{key:"maxKey",value:function(){return this.right.isEmpty()?this.key:this.right.maxKey()}},{key:"insert",value:function(e,t,n){var r=this,i=n(e,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n))).fixUp()}},{key:"removeMin",value:function(){if(this.left.isEmpty())return e.EMPTY;var t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),(t=t.copy(null,null,null,t.left.removeMin(),null)).fixUp()}},{key:"remove",value:function(t,n){var r,i=this;if(n(t,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(t,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===n(t,i.key)){if(i.right.isEmpty())return e.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(t,n))}return i.fixUp()}},{key:"isRed",value:function(){return this.color}},{key:"fixUp",value:function(){var e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}},{key:"moveRedLeft",value:function(){var e=this.colorFlip();return e.right.left.isRed()&&(e=(e=(e=e.copy(null,null,null,null,e.right.rotateRight())).rotateLeft()).colorFlip()),e}},{key:"moveRedRight",value:function(){var e=this.colorFlip();return e.left.left.isRed()&&(e=(e=e.rotateRight()).colorFlip()),e}},{key:"rotateLeft",value:function(){var t=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}},{key:"rotateRight",value:function(){var t=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}},{key:"colorFlip",value:function(){var e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}},{key:"checkMaxDepth",value:function(){var e=this.check();return Math.pow(2,e)<=this.size+1}},{key:"check",value:function(){if(this.isRed()&&this.left.isRed())throw Ja();if(this.right.isRed())throw Ja();var e=this.left.check();if(e!==this.right.check())throw Ja();return e+(this.isRed()?0:1)}}]),e}();os.EMPTY=null,os.RED=!0,os.BLACK=!1,os.EMPTY=new(function(){function e(){y(this,e),this.size=0}return g(e,[{key:"key",get:function(){throw Ja()}},{key:"value",get:function(){throw Ja()}},{key:"color",get:function(){throw Ja()}},{key:"left",get:function(){throw Ja()}},{key:"right",get:function(){throw Ja()}},{key:"copy",value:function(e,t,n,r,i){return this}},{key:"insert",value:function(e,t,n){return new os(e,t)}},{key:"remove",value:function(e,t){return this}},{key:"isEmpty",value:function(){return!0}},{key:"inorderTraversal",value:function(e){return!1}},{key:"reverseTraversal",value:function(e){return!1}},{key:"minKey",value:function(){return null}},{key:"maxKey",value:function(){return null}},{key:"isRed",value:function(){return!1}},{key:"checkMaxDepth",value:function(){return!0}},{key:"check",value:function(){return 0}}]),e}());var us=function(){function e(t){y(this,e),this.comparator=t,this.data=new is(this.comparator)}return g(e,[{key:"has",value:function(e){return null!==this.data.get(e)}},{key:"first",value:function(){return this.data.minKey()}},{key:"last",value:function(){return this.data.maxKey()}},{key:"size",get:function(){return this.data.size}},{key:"indexOf",value:function(e){return this.data.indexOf(e)}},{key:"forEach",value:function(e){this.data.inorderTraversal((function(t,n){return e(t),!1}))}},{key:"forEachInRange",value:function(e,t){for(var n=this.data.getIteratorFrom(e[0]);n.hasNext();){var r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}},{key:"forEachWhile",value:function(e,t){var n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}},{key:"firstAfterOrEqual",value:function(e){var t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}},{key:"getIterator",value:function(){return new ss(this.data.getIterator())}},{key:"getIteratorFrom",value:function(e){return new ss(this.data.getIteratorFrom(e))}},{key:"add",value:function(e){return this.copy(this.data.remove(e).insert(e,!0))}},{key:"delete",value:function(e){return this.has(e)?this.copy(this.data.remove(e)):this}},{key:"isEmpty",value:function(){return this.data.isEmpty()}},{key:"unionWith",value:function(e){var t=this;return t.size<e.size&&(t=e,e=this),e.forEach((function(e){t=t.add(e)})),t}},{key:"isEqual",value:function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.data.getIterator(),r=t.data.getIterator();n.hasNext();){var i=n.getNext().key,a=r.getNext().key;if(0!==this.comparator(i,a))return!1}return!0}},{key:"toArray",value:function(){var e=[];return this.forEach((function(t){e.push(t)})),e}},{key:"toString",value:function(){var e=[];return this.forEach((function(t){return e.push(t)})),"SortedSet("+e.toString()+")"}},{key:"copy",value:function(t){var n=new e(this.comparator);return n.data=t,n}}]),e}(),ss=function(){function e(t){y(this,e),this.iter=t}return g(e,[{key:"getNext",value:function(){return this.iter.getNext().key}},{key:"hasNext",value:function(){return this.iter.hasNext()}}]),e}();function cs(e){return e.hasNext()?e.getNext():void 0}var ls=function(){function e(t){y(this,e),this.fields=t,t.sort(_o.comparator)}return g(e,[{key:"unionWith",value:function(t){var n,r=new us(_o.comparator),i=k(this.fields);try{for(i.s();!(n=i.n()).done;){var a=n.value;r=r.add(a)}}catch(c){i.e(c)}finally{i.f()}var o,u=k(t);try{for(u.s();!(o=u.n()).done;){var s=o.value;r=r.add(s)}}catch(c){u.e(c)}finally{u.f()}return new e(r.toArray())}},{key:"covers",value:function(e){var t,n=k(this.fields);try{for(n.s();!(t=n.n()).done;){if(t.value.isPrefixOf(e))return!0}}catch(r){n.e(r)}finally{n.f()}return!1}},{key:"isEqual",value:function(e){return yo(this.fields,e.fields,(function(e,t){return e.isEqual(t)}))}}],[{key:"empty",value:function(){return new e([])}}]),e}(),fs=function(){function e(t){y(this,e),this.value=t}return g(e,[{key:"field",value:function(e){if(e.isEmpty())return this.value;for(var t=this.value,n=0;n<e.length-1;++n)if(!Tu(t=(t.mapValue.fields||{})[e.get(n)]))return null;return(t=(t.mapValue.fields||{})[e.lastSegment()])||null}},{key:"set",value:function(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Cu(t)}},{key:"setAll",value:function(e){var t=this,n=_o.emptyPath(),r={},i=[];e.forEach((function(e,a){if(!n.isImmediateParentOf(a)){var o=t.getFieldsMap(n);t.applyChanges(o,r,i),r={},i=[],n=a.popLast()}e?r[a.lastSegment()]=Cu(e):i.push(a.lastSegment())}));var a=this.getFieldsMap(n);this.applyChanges(a,r,i)}},{key:"delete",value:function(e){var t=this.field(e.popLast());Tu(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}},{key:"isEqual",value:function(e){return yu(this.value,e.value)}},{key:"getFieldsMap",value:function(e){var t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(var n=0;n<e.length;++n){var r=t.mapValue.fields[e.get(n)];Tu(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}},{key:"applyChanges",value:function(e,t,n){eu(t,(function(t,n){return e[t]=n}));var r,i=k(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;delete e[a]}}catch(o){i.e(o)}finally{i.f()}}},{key:"clone",value:function(){return new e(Cu(this.value))}}],[{key:"empty",value:function(){return new e({mapValue:{}})}}]),e}();function hs(e){var t=[];return eu(e.fields,(function(e,n){var r=new _o([e]);if(Tu(n)){var i=hs(n.mapValue).fields;if(0===i.length)t.push(r);else{var a,o=k(i);try{for(o.s();!(a=o.n()).done;){var u=a.value;t.push(r.child(u))}}catch(s){o.e(s)}finally{o.f()}}}else t.push(r)})),new ls(t)}var ds=function(){function e(t,n,r,i,a,o,u){y(this,e),this.key=t,this.documentType=n,this.version=r,this.readTime=i,this.createTime=a,this.data=o,this.documentState=u}return g(e,[{key:"convertToFoundDocument",value:function(e,t){return!this.createTime.isEqual(ko.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}},{key:"convertToNoDocument",value:function(e){return this.version=e,this.documentType=2,this.data=fs.empty(),this.documentState=0,this}},{key:"convertToUnknownDocument",value:function(e){return this.version=e,this.documentType=3,this.data=fs.empty(),this.documentState=2,this}},{key:"setHasCommittedMutations",value:function(){return this.documentState=2,this}},{key:"setHasLocalMutations",value:function(){return this.documentState=1,this.version=ko.min(),this}},{key:"setReadTime",value:function(e){return this.readTime=e,this}},{key:"hasLocalMutations",get:function(){return 1===this.documentState}},{key:"hasCommittedMutations",get:function(){return 2===this.documentState}},{key:"hasPendingWrites",get:function(){return this.hasLocalMutations||this.hasCommittedMutations}},{key:"isValidDocument",value:function(){return 0!==this.documentType}},{key:"isFoundDocument",value:function(){return 1===this.documentType}},{key:"isNoDocument",value:function(){return 2===this.documentType}},{key:"isUnknownDocument",value:function(){return 3===this.documentType}},{key:"isEqual",value:function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}},{key:"mutableCopy",value:function(){return new e(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}},{key:"toString",value:function(){return"Document(".concat(this.key,", ").concat(this.version,", ").concat(JSON.stringify(this.data.value),", {createTime: ").concat(this.createTime,"}), {documentType: ").concat(this.documentType,"}), {documentState: ").concat(this.documentState,"})")}}],[{key:"newInvalidDocument",value:function(t){return new e(t,0,ko.min(),ko.min(),ko.min(),fs.empty(),0)}},{key:"newFoundDocument",value:function(t,n,r,i){return new e(t,1,n,ko.min(),r,i,0)}},{key:"newNoDocument",value:function(t,n){return new e(t,2,n,ko.min(),ko.min(),fs.empty(),0)}},{key:"newUnknownDocument",value:function(t,n){return new e(t,3,n,ko.min(),ko.min(),fs.empty(),2)}}]),e}(),ps=g((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;y(this,e),this.path=t,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=a,this.startAt=o,this.endAt=u,this.ft=null}));function vs(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;return new ps(e,t,n,r,i,a,o)}function ys(e){var t=eo(e);if(null===t.ft){var n=t.path.canonicalString();null!==t.collectionGroup&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map((function(e){return Ku(e)})).join(","),n+="|ob:",n+=t.orderBy.map((function(e){return function(e){return e.field.canonicalString()+e.dir}(e)})).join(","),nu(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map((function(e){return bu(e)})).join(",")),t.endAt&&(n+="|ub:",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map((function(e){return bu(e)})).join(",")),t.ft=n}return t.ft}function ms(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(var n=0;n<e.orderBy.length;n++)if(!rs(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(var r=0;r<e.filters.length;r++)if(!Gu(e.filters[r],t.filters[r]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!Mu(e.startAt,t.startAt)&&Mu(e.endAt,t.endAt)}function gs(e){return Io.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}function ks(e,t){return e.filters.filter((function(e){return e instanceof Uu&&e.field.isEqual(t)}))}function bs(e,t,n){var r,i=pu,a=!0,o=k(ks(e,t));try{for(o.s();!(r=o.n()).done;){var u=r.value,s=pu,c=!0;switch(u.op){case"<":case"<=":s=Au(u.value);break;case"==":case"in":case">=":s=u.value;break;case">":s=u.value,c=!1;break;case"!=":case"not-in":s=pu}Ru({value:i,inclusive:a},{value:s,inclusive:c})<0&&(i=s,a=c)}}catch(h){o.e(h)}finally{o.f()}if(null!==n)for(var l=0;l<e.orderBy.length;++l)if(e.orderBy[l].field.isEqual(t)){var f=n.position[l];Ru({value:i,inclusive:a},{value:f,inclusive:n.inclusive})<0&&(i=f,a=n.inclusive);break}return{value:i,inclusive:a}}function ws(e,t,n){var r,i=du,a=!0,o=k(ks(e,t));try{for(o.s();!(r=o.n()).done;){var u=r.value,s=du,c=!0;switch(u.op){case">=":case">":s=Du(u.value),c=!1;break;case"==":case"in":case"<=":s=u.value;break;case"<":s=u.value,c=!1;break;case"!=":case"not-in":s=du}Pu({value:i,inclusive:a},{value:s,inclusive:c})>0&&(i=s,a=c)}}catch(h){o.e(h)}finally{o.f()}if(null!==n)for(var l=0;l<e.orderBy.length;++l)if(e.orderBy[l].field.isEqual(t)){var f=n.position[l];Pu({value:i,inclusive:a},{value:f,inclusive:n.inclusive})>0&&(i=f,a=n.inclusive);break}return{value:i,inclusive:a}}var xs=g((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;y(this,e),this.path=t,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=a,this.limitType=o,this.startAt=u,this.endAt=s,this.dt=null,this._t=null,this.startAt,this.endAt}));function _s(e,t,n,r,i,a,o,u){return new xs(e,t,n,r,i,a,o,u)}function Is(e){return new xs(e)}function Ss(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}function Es(e){return e.explicitOrderBy.length>0?e.explicitOrderBy[0].field:null}function Ts(e){var t,n=k(e.filters);try{for(n.s();!(t=n.n()).done;){var r=t.value.getFirstInequalityField();if(null!==r)return r}}catch(i){n.e(i)}finally{n.f()}return null}function Cs(e){return null!==e.collectionGroup}function Ns(e){var t=eo(e);if(null===t.dt){t.dt=[];var n=Ts(t),r=Es(t);if(null!==n&&null===r)n.isKeyField()||t.dt.push(new ns(n)),t.dt.push(new ns(_o.keyField(),"asc"));else{var i,a=!1,o=k(t.explicitOrderBy);try{for(o.s();!(i=o.n()).done;){var u=i.value;t.dt.push(u),u.field.isKeyField()&&(a=!0)}}catch(c){o.e(c)}finally{o.f()}if(!a){var s=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";t.dt.push(new ns(_o.keyField(),s))}}}return t.dt}function As(e){var t=eo(e);if(!t._t)if("F"===t.limitType)t._t=vs(t.path,t.collectionGroup,Ns(t),t.filters,t.limit,t.startAt,t.endAt);else{var n,r=[],i=k(Ns(t));try{for(i.s();!(n=i.n()).done;){var a=n.value,o="desc"===a.dir?"asc":"desc";r.push(new ns(a.field,o))}}catch(c){i.e(c)}finally{i.f()}var u=t.endAt?new Ou(t.endAt.position,t.endAt.inclusive):null,s=t.startAt?new Ou(t.startAt.position,t.startAt.inclusive):null;t._t=vs(t.path,t.collectionGroup,r,t.filters,t.limit,u,s)}return t._t}function Ds(e,t){t.getFirstInequalityField(),Ts(e);var n=e.filters.concat([t]);return new xs(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function Rs(e,t,n){return new xs(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function Ps(e,t){return ms(As(e),As(t))&&e.limitType===t.limitType}function Os(e){return"".concat(ys(As(e)),"|lt:").concat(e.limitType)}function Ls(e){return"Query(target=".concat(function(e){var t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=", filters: [".concat(e.filters.map((function(e){return Hu(e)})).join(", "),"]")),nu(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=", orderBy: [".concat(e.orderBy.map((function(e){return function(e){return"".concat(e.field.canonicalString()," (").concat(e.dir,")")}(e)})).join(", "),"]")),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((function(e){return bu(e)})).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((function(e){return bu(e)})).join(",")),"Target(".concat(t,")")}(As(e)),"; limitType=").concat(e.limitType,")")}function Ms(e,t){return t.isFoundDocument()&&function(e,t){var n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):Io.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){var n,r=k(Ns(e));try{for(r.s();!(n=r.n()).done;){var i=n.value;if(!i.field.isKeyField()&&null===t.data.field(i.field))return!1}}catch(a){r.e(a)}finally{r.f()}return!0}(e,t)&&function(e,t){var n,r=k(e.filters);try{for(r.s();!(n=r.n()).done;){if(!n.value.matches(t))return!1}}catch(i){r.e(i)}finally{r.f()}return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){var r=Lu(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,Ns(e),t))&&!(e.endAt&&!function(e,t,n){var r=Lu(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,Ns(e),t))}(e,t)}function Fs(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function Us(e){return function(t,n){var r,i=!1,a=k(Ns(e));try{for(a.s();!(r=a.n()).done;){var o=r.value,u=Vs(o,t,n);if(0!==u)return u;i=i||o.field.isKeyField()}}catch(s){a.e(s)}finally{a.f()}return 0}}function Vs(e,t,n){var r=e.field.isKeyField()?Io.comparator(t.key,n.key):function(e,t,n){var r=t.data.field(e),i=n.data.field(e);return null!==r&&null!==i?gu(r,i):Ja()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return Ja()}}function js(e,t){if(e.wt){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:ru(t)?"-0":t}}function Bs(e){return{integerValue:""+e}}function qs(e,t){return iu(t)?Bs(t):js(e,t)}var zs=g((function e(){y(this,e),this._=void 0}));function Ks(e,t,n){return e instanceof Hs?function(e,t){var n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&(n.fields.__previous_value__=t),{mapValue:n}}(n,t):e instanceof Qs?Ys(e,t):e instanceof $s?Xs(e,t):function(e,t){var n=Ws(e,t),r=Zs(n)+Zs(e.gt);return _u(n)&&_u(e.gt)?Bs(r):js(e.yt,r)}(e,t)}function Gs(e,t,n){return e instanceof Qs?Ys(e,t):e instanceof $s?Xs(e,t):n}function Ws(e,t){return e instanceof Js?_u(n=t)||function(e){return!!e&&"doubleValue"in e}(n)?t:{integerValue:0}:null;var n}var Hs=function(e){x(n,e);var t=T(n);function n(){return y(this,n),t.apply(this,arguments)}return g(n)}(zs),Qs=function(e){x(n,e);var t=T(n);function n(e){var r;return y(this,n),(r=t.call(this)).elements=e,r}return g(n)}(zs);function Ys(e,t){var n,r=ec(t),i=k(e.elements);try{var a=function(){var e=n.value;r.some((function(t){return yu(t,e)}))||r.push(e)};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return{arrayValue:{values:r}}}var $s=function(e){x(n,e);var t=T(n);function n(e){var r;return y(this,n),(r=t.call(this)).elements=e,r}return g(n)}(zs);function Xs(e,t){var n,r=ec(t),i=k(e.elements);try{var a=function(){var e=n.value;r=r.filter((function(t){return!yu(t,e)}))};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return{arrayValue:{values:r}}}var Js=function(e){x(n,e);var t=T(n);function n(e,r){var i;return y(this,n),(i=t.call(this)).yt=e,i.gt=r,i}return g(n)}(zs);function Zs(e){return su(e.integerValue||e.doubleValue)}function ec(e){return Iu(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}var tc=g((function e(t,n){y(this,e),this.field=t,this.transform=n}));var nc=g((function e(t,n){y(this,e),this.version=t,this.transformResults=n})),rc=function(){function e(t,n){y(this,e),this.updateTime=t,this.exists=n}return g(e,[{key:"isNone",get:function(){return void 0===this.updateTime&&void 0===this.exists}},{key:"isEqual",value:function(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}],[{key:"none",value:function(){return new e}},{key:"exists",value:function(t){return new e(void 0,t)}},{key:"updateTime",value:function(t){return new e(t)}}]),e}();function ic(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}var ac=g((function e(){y(this,e)}));function oc(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new gc(e.key,rc.none()):new fc(e.key,e.data,rc.none());var n,r=e.data,i=fs.empty(),a=new us(_o.comparator),o=k(t.fields);try{for(o.s();!(n=o.n()).done;){var u=n.value;if(!a.has(u)){var s=r.field(u);null===s&&u.length>1&&(u=u.popLast(),s=r.field(u)),null===s?i.delete(u):i.set(u,s),a=a.add(u)}}}catch(c){o.e(c)}finally{o.f()}return new hc(e.key,i,new ls(a.toArray()),rc.none())}function uc(e,t,n){e instanceof fc?function(e,t,n){var r=e.value.clone(),i=pc(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof hc?function(e,t,n){if(ic(e.precondition,t)){var r=pc(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(dc(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}else t.convertToUnknownDocument(n.version)}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function sc(e,t,n,r){return e instanceof fc?function(e,t,n,r){if(!ic(e.precondition,t))return n;var i=e.value.clone(),a=vc(e.fieldTransforms,r,t);return i.setAll(a),t.convertToFoundDocument(t.version,i).setHasLocalMutations(),null}(e,t,n,r):e instanceof hc?function(e,t,n,r){if(!ic(e.precondition,t))return n;var i=vc(e.fieldTransforms,r,t),a=t.data;return a.setAll(dc(e)),a.setAll(i),t.convertToFoundDocument(t.version,a).setHasLocalMutations(),null===n?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map((function(e){return e.field})))}(e,t,n,r):function(e,t,n){return ic(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):n}(e,t,n)}function cc(e,t){var n,r=null,i=k(e.fieldTransforms);try{for(i.s();!(n=i.n()).done;){var a=n.value,o=t.data.field(a.field),u=Ws(a.transform,o||null);null!=u&&(null===r&&(r=fs.empty()),r.set(a.field,u))}}catch(s){i.e(s)}finally{i.f()}return r||null}function lc(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&yo(e,t,(function(e,t){return function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof Qs&&t instanceof Qs||e instanceof $s&&t instanceof $s?yo(e.elements,t.elements,yu):e instanceof Js&&t instanceof Js?yu(e.gt,t.gt):e instanceof Hs&&t instanceof Hs}(e.transform,t.transform)}(e,t)}))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}var fc=function(e){x(n,e);var t=T(n);function n(e,r,i){var a,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];return y(this,n),(a=t.call(this)).key=e,a.value=r,a.precondition=i,a.fieldTransforms=o,a.type=0,a}return g(n,[{key:"getFieldMask",value:function(){return null}}]),n}(ac),hc=function(e){x(n,e);var t=T(n);function n(e,r,i,a){var o,u=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];return y(this,n),(o=t.call(this)).key=e,o.data=r,o.fieldMask=i,o.precondition=a,o.fieldTransforms=u,o.type=1,o}return g(n,[{key:"getFieldMask",value:function(){return this.fieldMask}}]),n}(ac);function dc(e){var t=new Map;return e.fieldMask.fields.forEach((function(n){if(!n.isEmpty()){var r=e.data.field(n);t.set(n,r)}})),t}function pc(e,t,n){var r=new Map;Za(e.length===n.length);for(var i=0;i<n.length;i++){var a=e[i],o=a.transform,u=t.data.field(a.field);r.set(a.field,Gs(o,u,n[i]))}return r}function vc(e,t,n){var r,i=new Map,a=k(e);try{for(a.s();!(r=a.n()).done;){var o=r.value,u=o.transform,s=n.data.field(o.field);i.set(o.field,Ks(u,s,t))}}catch(c){a.e(c)}finally{a.f()}return i}var yc,mc,gc=function(e){x(n,e);var t=T(n);function n(e,r){var i;return y(this,n),(i=t.call(this)).key=e,i.precondition=r,i.type=2,i.fieldTransforms=[],i}return g(n,[{key:"getFieldMask",value:function(){return null}}]),n}(ac),kc=function(e){x(n,e);var t=T(n);function n(e,r){var i;return y(this,n),(i=t.call(this)).key=e,i.precondition=r,i.type=3,i.fieldTransforms=[],i}return g(n,[{key:"getFieldMask",value:function(){return null}}]),n}(ac),bc=g((function e(t){y(this,e),this.count=t}));function wc(e){switch(e){default:return Ja();case to.CANCELLED:case to.UNKNOWN:case to.DEADLINE_EXCEEDED:case to.RESOURCE_EXHAUSTED:case to.INTERNAL:case to.UNAVAILABLE:case to.UNAUTHENTICATED:return!1;case to.INVALID_ARGUMENT:case to.NOT_FOUND:case to.ALREADY_EXISTS:case to.PERMISSION_DENIED:case to.FAILED_PRECONDITION:case to.ABORTED:case to.OUT_OF_RANGE:case to.UNIMPLEMENTED:case to.DATA_LOSS:return!0}}function xc(e){if(void 0===e)return Ya("GRPC error has no .code"),to.UNKNOWN;switch(e){case yc.OK:return to.OK;case yc.CANCELLED:return to.CANCELLED;case yc.UNKNOWN:return to.UNKNOWN;case yc.DEADLINE_EXCEEDED:return to.DEADLINE_EXCEEDED;case yc.RESOURCE_EXHAUSTED:return to.RESOURCE_EXHAUSTED;case yc.INTERNAL:return to.INTERNAL;case yc.UNAVAILABLE:return to.UNAVAILABLE;case yc.UNAUTHENTICATED:return to.UNAUTHENTICATED;case yc.INVALID_ARGUMENT:return to.INVALID_ARGUMENT;case yc.NOT_FOUND:return to.NOT_FOUND;case yc.ALREADY_EXISTS:return to.ALREADY_EXISTS;case yc.PERMISSION_DENIED:return to.PERMISSION_DENIED;case yc.FAILED_PRECONDITION:return to.FAILED_PRECONDITION;case yc.ABORTED:return to.ABORTED;case yc.OUT_OF_RANGE:return to.OUT_OF_RANGE;case yc.UNIMPLEMENTED:return to.UNIMPLEMENTED;case yc.DATA_LOSS:return to.DATA_LOSS;default:return Ja()}}(mc=yc||(yc={}))[mc.OK=0]="OK",mc[mc.CANCELLED=1]="CANCELLED",mc[mc.UNKNOWN=2]="UNKNOWN",mc[mc.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",mc[mc.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",mc[mc.NOT_FOUND=5]="NOT_FOUND",mc[mc.ALREADY_EXISTS=6]="ALREADY_EXISTS",mc[mc.PERMISSION_DENIED=7]="PERMISSION_DENIED",mc[mc.UNAUTHENTICATED=16]="UNAUTHENTICATED",mc[mc.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",mc[mc.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",mc[mc.ABORTED=10]="ABORTED",mc[mc.OUT_OF_RANGE=11]="OUT_OF_RANGE",mc[mc.UNIMPLEMENTED=12]="UNIMPLEMENTED",mc[mc.INTERNAL=13]="INTERNAL",mc[mc.UNAVAILABLE=14]="UNAVAILABLE",mc[mc.DATA_LOSS=15]="DATA_LOSS";var _c=function(){function e(t,n){y(this,e),this.mapKeyFn=t,this.equalsFn=n,this.inner={},this.innerSize=0}return g(e,[{key:"get",value:function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n){var r,i=k(n);try{for(i.s();!(r=i.n()).done;){var a=s(r.value,2),o=a[0],u=a[1];if(this.equalsFn(o,e))return u}}catch(c){i.e(c)}finally{i.f()}}}},{key:"has",value:function(e){return void 0!==this.get(e)}},{key:"set",value:function(e,t){var n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(var i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,t]);r.push([e,t]),this.innerSize++}},{key:"delete",value:function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}},{key:"forEach",value:function(e){eu(this.inner,(function(t,n){var r,i=k(n);try{for(i.s();!(r=i.n()).done;){var a=s(r.value,2),o=a[0],u=a[1];e(o,u)}}catch(c){i.e(c)}finally{i.f()}}))}},{key:"isEmpty",value:function(){return tu(this.inner)}},{key:"size",value:function(){return this.innerSize}}]),e}(),Ic=new is(Io.comparator);function Sc(){return Ic}var Ec=new is(Io.comparator);function Tc(){for(var e=Ec,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];e=e.insert(o.key,o)}return e}function Cc(e){var t=Ec;return e.forEach((function(e,n){return t=t.insert(e,n.overlayedDocument)})),t}function Nc(){return Dc()}function Ac(){return Dc()}function Dc(){return new _c((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)}))}var Rc=new is(Io.comparator),Pc=new us(Io.comparator);function Oc(){for(var e=Pc,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];e=e.add(o)}return e}var Lc=new us(vo);function Mc(){return Lc}var Fc=function(){function e(t,n,r,i,a){y(this,e),this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=a}return g(e,null,[{key:"createSynthesizedRemoteEventForCurrentChange",value:function(t,n,r){var i=new Map;return i.set(t,Uc.createSynthesizedTargetChangeForCurrentChange(t,n,r)),new e(ko.min(),i,Mc(),Sc(),Oc())}}]),e}(),Uc=function(){function e(t,n,r,i,a){y(this,e),this.resumeToken=t,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=a}return g(e,null,[{key:"createSynthesizedTargetChangeForCurrentChange",value:function(t,n,r){return new e(r,n,Oc(),Oc(),Oc())}}]),e}(),Vc=g((function e(t,n,r,i){y(this,e),this.It=t,this.removedTargetIds=n,this.key=r,this.Tt=i})),jc=g((function e(t,n){y(this,e),this.targetId=t,this.Et=n})),Bc=g((function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:au.EMPTY_BYTE_STRING,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;y(this,e),this.state=t,this.targetIds=n,this.resumeToken=r,this.cause=i})),qc=function(){function e(){y(this,e),this.At=0,this.Rt=Gc(),this.bt=au.EMPTY_BYTE_STRING,this.Pt=!1,this.vt=!0}return g(e,[{key:"current",get:function(){return this.Pt}},{key:"resumeToken",get:function(){return this.bt}},{key:"Vt",get:function(){return 0!==this.At}},{key:"St",get:function(){return this.vt}},{key:"Dt",value:function(e){e.approximateByteSize()>0&&(this.vt=!0,this.bt=e)}},{key:"Ct",value:function(){var e=Oc(),t=Oc(),n=Oc();return this.Rt.forEach((function(r,i){switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:Ja()}})),new Uc(this.bt,this.Pt,e,t,n)}},{key:"xt",value:function(){this.vt=!1,this.Rt=Gc()}},{key:"Nt",value:function(e,t){this.vt=!0,this.Rt=this.Rt.insert(e,t)}},{key:"kt",value:function(e){this.vt=!0,this.Rt=this.Rt.remove(e)}},{key:"Ot",value:function(){this.At+=1}},{key:"Mt",value:function(){this.At-=1}},{key:"Ft",value:function(){this.vt=!0,this.Pt=!0}}]),e}(),zc=function(){function e(t){y(this,e),this.$t=t,this.Bt=new Map,this.Lt=Sc(),this.qt=Kc(),this.Ut=new us(vo)}return g(e,[{key:"Kt",value:function(e){var t,n=k(e.It);try{for(n.s();!(t=n.n()).done;){var r=t.value;e.Tt&&e.Tt.isFoundDocument()?this.Gt(r,e.Tt):this.Qt(r,e.key,e.Tt)}}catch(u){n.e(u)}finally{n.f()}var i,a=k(e.removedTargetIds);try{for(a.s();!(i=a.n()).done;){var o=i.value;this.Qt(o,e.key,e.Tt)}}catch(u){a.e(u)}finally{a.f()}}},{key:"jt",value:function(e){var t=this;this.forEachTarget(e,(function(n){var r=t.Wt(n);switch(e.state){case 0:t.zt(n)&&r.Dt(e.resumeToken);break;case 1:r.Mt(),r.Vt||r.xt(),r.Dt(e.resumeToken);break;case 2:r.Mt(),r.Vt||t.removeTarget(n);break;case 3:t.zt(n)&&(r.Ft(),r.Dt(e.resumeToken));break;case 4:t.zt(n)&&(t.Ht(n),r.Dt(e.resumeToken));break;default:Ja()}}))}},{key:"forEachTarget",value:function(e,t){var n=this;e.targetIds.length>0?e.targetIds.forEach(t):this.Bt.forEach((function(e,r){n.zt(r)&&t(r)}))}},{key:"Jt",value:function(e){var t=e.targetId,n=e.Et.count,r=this.Yt(t);if(r){var i=r.target;if(gs(i))if(0===n){var a=new Io(i.path);this.Qt(t,a,ds.newNoDocument(a,ko.min()))}else Za(1===n);else this.Xt(t)!==n&&(this.Ht(t),this.Ut=this.Ut.add(t))}}},{key:"Zt",value:function(e){var t=this,n=new Map;this.Bt.forEach((function(r,i){var a=t.Yt(i);if(a){if(r.current&&gs(a.target)){var o=new Io(a.target.path);null!==t.Lt.get(o)||t.te(i,o)||t.Qt(i,o,ds.newNoDocument(o,e))}r.St&&(n.set(i,r.Ct()),r.xt())}}));var r=Oc();this.qt.forEach((function(e,n){var i=!0;n.forEachWhile((function(e){var n=t.Yt(e);return!n||2===n.purpose||(i=!1,!1)})),i&&(r=r.add(e))})),this.Lt.forEach((function(t,n){return n.setReadTime(e)}));var i=new Fc(e,n,this.Ut,this.Lt,r);return this.Lt=Sc(),this.qt=Kc(),this.Ut=new us(vo),i}},{key:"Gt",value:function(e,t){if(this.zt(e)){var n=this.te(e,t.key)?2:0;this.Wt(e).Nt(t.key,n),this.Lt=this.Lt.insert(t.key,t),this.qt=this.qt.insert(t.key,this.ee(t.key).add(e))}}},{key:"Qt",value:function(e,t,n){if(this.zt(e)){var r=this.Wt(e);this.te(e,t)?r.Nt(t,1):r.kt(t),this.qt=this.qt.insert(t,this.ee(t).delete(e)),n&&(this.Lt=this.Lt.insert(t,n))}}},{key:"removeTarget",value:function(e){this.Bt.delete(e)}},{key:"Xt",value:function(e){var t=this.Wt(e).Ct();return this.$t.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}},{key:"Ot",value:function(e){this.Wt(e).Ot()}},{key:"Wt",value:function(e){var t=this.Bt.get(e);return t||(t=new qc,this.Bt.set(e,t)),t}},{key:"ee",value:function(e){var t=this.qt.get(e);return t||(t=new us(vo),this.qt=this.qt.insert(e,t)),t}},{key:"zt",value:function(e){var t=null!==this.Yt(e);return t||Qa("WatchChangeAggregator","Detected inactive target",e),t}},{key:"Yt",value:function(e){var t=this.Bt.get(e);return t&&t.Vt?null:this.$t.ne(e)}},{key:"Ht",value:function(e){var t=this;this.Bt.set(e,new qc),this.$t.getRemoteKeysForTarget(e).forEach((function(n){t.Qt(e,n,null)}))}},{key:"te",value:function(e,t){return this.$t.getRemoteKeysForTarget(e).has(t)}}]),e}();function Kc(){return new is(Io.comparator)}function Gc(){return new is(Io.comparator)}var Wc={asc:"ASCENDING",desc:"DESCENDING"},Hc={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Qc={and:"AND",or:"OR"},Yc=g((function e(t,n){y(this,e),this.databaseId=t,this.wt=n}));function $c(e,t){return e.wt?"".concat(new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z",""),".").concat(("000000000"+t.nanoseconds).slice(-9),"Z"):{seconds:""+t.seconds,nanos:t.nanoseconds}}function Xc(e,t){return e.wt?t.toBase64():t.toUint8Array()}function Jc(e,t){return $c(e,t.toTimestamp())}function Zc(e){return Za(!!e),ko.fromTimestamp(function(e){var t=uu(e);return new go(t.seconds,t.nanos)}(e))}function el(e,t){return function(e){return new wo(["projects",e.projectId,"databases",e.database])}(e).child("documents").child(t).canonicalString()}function tl(e){var t=wo.fromString(e);return Za(Il(t)),t}function nl(e,t){return el(e.databaseId,t.path)}function rl(e,t){var n=tl(t);if(n.get(1)!==e.databaseId.projectId)throw new no(to.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new no(to.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new Io(ul(n))}function il(e,t){return el(e.databaseId,t)}function al(e){var t=tl(e);return 4===t.length?wo.emptyPath():ul(t)}function ol(e){return new wo(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function ul(e){return Za(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function sl(e,t,n){return{name:nl(e,t),fields:n.value.mapValue.fields}}function cl(e,t,n){var r=rl(e,t.name),i=Zc(t.updateTime),a=t.createTime?Zc(t.createTime):ko.min(),o=new fs({mapValue:{fields:t.fields}}),u=ds.newFoundDocument(r,i,a,o);return n&&u.setHasCommittedMutations(),n?u.setHasCommittedMutations():u}function ll(e,t){return"found"in t?function(e,t){Za(!!t.found),t.found.name,t.found.updateTime;var n=rl(e,t.found.name),r=Zc(t.found.updateTime),i=t.found.createTime?Zc(t.found.createTime):ko.min(),a=new fs({mapValue:{fields:t.found.fields}});return ds.newFoundDocument(n,r,i,a)}(e,t):"missing"in t?function(e,t){Za(!!t.missing),Za(!!t.readTime);var n=rl(e,t.missing),r=Zc(t.readTime);return ds.newNoDocument(n,r)}(e,t):Ja()}function fl(e,t){var n;if(t instanceof fc)n={update:sl(e,t.key,t.value)};else if(t instanceof gc)n={delete:nl(e,t.key)};else if(t instanceof hc)n={update:sl(e,t.key,t.data),updateMask:_l(t.fieldMask)};else{if(!(t instanceof kc))return Ja();n={verify:nl(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map((function(e){return function(e,t){var n=t.transform;if(n instanceof Hs)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof Qs)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof $s)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof Js)return{fieldPath:t.field.canonicalString(),increment:n.gt};throw Ja()}(0,e)}))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:Jc(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:Ja()}(e,t.precondition)),n}function hl(e,t){var n=t.currentDocument?function(e){return void 0!==e.updateTime?rc.updateTime(Zc(e.updateTime)):void 0!==e.exists?rc.exists(e.exists):rc.none()}(t.currentDocument):rc.none(),r=t.updateTransforms?t.updateTransforms.map((function(t){return function(e,t){var n=null;if("setToServerValue"in t)Za("REQUEST_TIME"===t.setToServerValue),n=new Hs;else if("appendMissingElements"in t){var r=t.appendMissingElements.values||[];n=new Qs(r)}else if("removeAllFromArray"in t){var i=t.removeAllFromArray.values||[];n=new $s(i)}else"increment"in t?n=new Js(e,t.increment):Ja();var a=_o.fromServerFormat(t.fieldPath);return new tc(a,n)}(e,t)})):[];if(t.update){t.update.name;var i=rl(e,t.update.name),a=new fs({mapValue:{fields:t.update.fields}});if(t.updateMask){var o=function(e){var t=e.fieldPaths||[];return new ls(t.map((function(e){return _o.fromServerFormat(e)})))}(t.updateMask);return new hc(i,a,o,n,r)}return new fc(i,a,n,r)}if(t.delete){var u=rl(e,t.delete);return new gc(u,n)}if(t.verify){var s=rl(e,t.verify);return new kc(s,n)}return Ja()}function dl(e,t){return{documents:[il(e,t.path)]}}function pl(e,t){var n={structuredQuery:{}},r=t.path;null!==t.collectionGroup?(n.parent=il(e,r),n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(n.parent=il(e,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);var i=function(e){if(0!==e.length)return xl(Vu.create(e,"and"))}(t.filters);i&&(n.structuredQuery.where=i);var a=function(e){if(0!==e.length)return e.map((function(e){return function(e){return{field:bl(e.field),direction:ml(e.dir)}}(e)}))}(t.orderBy);a&&(n.structuredQuery.orderBy=a);var o,u=function(e,t){return e.wt||nu(t)?t:{value:t}}(e,t.limit);return null!==u&&(n.structuredQuery.limit=u),t.startAt&&(n.structuredQuery.startAt={before:(o=t.startAt).inclusive,values:o.position}),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),n}function vl(e){var t=al(e.parent),n=e.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){Za(1===r);var a=n.from[0];a.allDescendants?i=a.collectionId:t=t.child(a.collectionId)}var o=[];n.where&&(o=function(e){var t=yl(e);return t instanceof Vu&&qu(t)?t.getFilters():[t]}(n.where));var u=[];n.orderBy&&(u=n.orderBy.map((function(e){return function(e){return new ns(wl(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e)})));var s=null;n.limit&&(s=function(e){var t;return nu(t="object"==typeof e?e.value:e)?null:t}(n.limit));var c=null;n.startAt&&(c=function(e){var t=!!e.before,n=e.values||[];return new Ou(n,t)}(n.startAt));var l=null;return n.endAt&&(l=function(e){var t=!e.before,n=e.values||[];return new Ou(n,t)}(n.endAt)),_s(t,i,u,o,s,"F",c,l)}function yl(e){return void 0!==e.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":var t=wl(e.unaryFilter.field);return Uu.create(t,"==",{doubleValue:NaN});case"IS_NULL":var n=wl(e.unaryFilter.field);return Uu.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=wl(e.unaryFilter.field);return Uu.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var i=wl(e.unaryFilter.field);return Uu.create(i,"!=",{nullValue:"NULL_VALUE"});default:return Ja()}}(e):void 0!==e.fieldFilter?function(e){return Uu.create(wl(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Ja()}}(e.fieldFilter.op),e.fieldFilter.value)}(e):void 0!==e.compositeFilter?function(e){return Vu.create(e.compositeFilter.filters.map((function(e){return yl(e)})),function(e){switch(e){case"AND":return"and";case"OR":return"or";default:return Ja()}}(e.compositeFilter.op))}(e):Ja()}function ml(e){return Wc[e]}function gl(e){return Hc[e]}function kl(e){return Qc[e]}function bl(e){return{fieldPath:e.canonicalString()}}function wl(e){return _o.fromServerFormat(e.fieldPath)}function xl(e){return e instanceof Uu?function(e){if("=="===e.op){if(Eu(e.value))return{unaryFilter:{field:bl(e.field),op:"IS_NAN"}};if(Su(e.value))return{unaryFilter:{field:bl(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(Eu(e.value))return{unaryFilter:{field:bl(e.field),op:"IS_NOT_NAN"}};if(Su(e.value))return{unaryFilter:{field:bl(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:bl(e.field),op:gl(e.op),value:e.value}}}(e):e instanceof Vu?function(e){var t=e.getFilters().map((function(e){return xl(e)}));return 1===t.length?t[0]:{compositeFilter:{op:kl(e.op),filters:t}}}(e):Ja()}function _l(e){var t=[];return e.fields.forEach((function(e){return t.push(e.canonicalString())})),{fieldPaths:t}}function Il(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}function Sl(e){for(var t="",n=0;n<e.length;n++)t.length>0&&(t=Tl(t)),t=El(e.get(n),t);return Tl(t)}function El(e,t){for(var n=t,r=e.length,i=0;i<r;i++){var a=e.charAt(i);switch(a){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=a}}return n}function Tl(e){return e+"\x01\x01"}function Cl(e){var t=e.length;if(Za(t>=2),2===t)return Za("\x01"===e.charAt(0)&&"\x01"===e.charAt(1)),wo.emptyPath();for(var n=t-2,r=[],i="",a=0;a<t;){var o=e.indexOf("\x01",a);switch((o<0||o>n)&&Ja(),e.charAt(o+1)){case"\x01":var u=e.substring(a,o),s=void 0;0===i.length?s=u:(s=i+=u,i=""),r.push(s);break;case"\x10":i+=e.substring(a,o),i+="\0";break;case"\x11":i+=e.substring(a,o+1);break;default:Ja()}a=o+2}return new wo(r)}var Nl=["userId","batchId"];function Al(e,t){return[e,Sl(t)]}function Dl(e,t,n){return[e,Sl(t),n]}var Rl={},Pl=["prefixPath","collectionGroup","readTime","documentId"],Ol=["prefixPath","collectionGroup","documentId"],Ll=["collectionGroup","readTime","prefixPath","documentId"],Ml=["canonicalId","targetId"],Fl=["targetId","path"],Ul=["path","targetId"],Vl=["collectionId","parent"],jl=["indexId","uid"],Bl=["uid","sequenceNumber"],ql=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],zl=["indexId","uid","orderedDocumentKey"],Kl=["userId","collectionPath","documentId"],Gl=["userId","collectionPath","largestBatchId"],Wl=["userId","collectionGroup","largestBatchId"],Hl=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments"].concat(["clientMetadata"]).concat(["remoteDocumentGlobal"]).concat(["collectionParents"]).concat(["bundles","namedQueries"]),Ql=[].concat(p(Hl),["documentOverlays"]),Yl=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],$l=Yl,Xl=[].concat($l,["indexConfiguration","indexState","indexEntries"]),Jl=function(e){x(n,e);var t=T(n);function n(e,r){var i;return y(this,n),(i=t.call(this)).se=e,i.currentSequenceNumber=r,i}return g(n)}(Lo);function Zl(e,t){var n=eo(e);return jo.M(n.se,t)}var ef=function(){function e(t,n,r,i){y(this,e),this.batchId=t,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}return g(e,[{key:"applyToRemoteDocument",value:function(e,t){for(var n=t.mutationResults,r=0;r<this.mutations.length;r++){var i=this.mutations[r];i.key.isEqual(e.key)&&uc(i,e,n[r])}}},{key:"applyToLocalView",value:function(e,t){var n,r=k(this.baseMutations);try{for(r.s();!(n=r.n()).done;){var i=n.value;i.key.isEqual(e.key)&&(t=sc(i,e,t,this.localWriteTime))}}catch(s){r.e(s)}finally{r.f()}var a,o=k(this.mutations);try{for(o.s();!(a=o.n()).done;){var u=a.value;u.key.isEqual(e.key)&&(t=sc(u,e,t,this.localWriteTime))}}catch(s){o.e(s)}finally{o.f()}return t}},{key:"applyToLocalDocumentSet",value:function(e,t){var n=this,r=Ac();return this.mutations.forEach((function(i){var a=e.get(i.key),o=a.overlayedDocument,u=n.applyToLocalView(o,a.mutatedFields),s=oc(o,u=t.has(i.key)?null:u);null!==s&&r.set(i.key,s),o.isValidDocument()||o.convertToNoDocument(ko.min())})),r}},{key:"keys",value:function(){return this.mutations.reduce((function(e,t){return e.add(t.key)}),Oc())}},{key:"isEqual",value:function(e){return this.batchId===e.batchId&&yo(this.mutations,e.mutations,(function(e,t){return lc(e,t)}))&&yo(this.baseMutations,e.baseMutations,(function(e,t){return lc(e,t)}))}}]),e}(),tf=function(){function e(t,n,r,i){y(this,e),this.batch=t,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}return g(e,null,[{key:"from",value:function(t,n,r){Za(t.mutations.length===r.length);for(var i=Rc,a=t.mutations,o=0;o<a.length;o++)i=i.insert(a[o].key,r[o].version);return new e(t,n,r,i)}}]),e}(),nf=function(){function e(t,n){y(this,e),this.largestBatchId=t,this.mutation=n}return g(e,[{key:"getKey",value:function(){return this.mutation.key}},{key:"isEqual",value:function(e){return null!==e&&this.mutation===e.mutation}},{key:"toString",value:function(){return"Overlay{\n      largestBatchId: ".concat(this.largestBatchId,",\n      mutation: ").concat(this.mutation.toString(),"\n    }")}}]),e}(),rf=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:ko.min(),o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:ko.min(),u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:au.EMPTY_BYTE_STRING;y(this,e),this.target=t,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=u}return g(e,[{key:"withSequenceNumber",value:function(t){return new e(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}},{key:"withResumeToken",value:function(t,n){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t)}},{key:"withLastLimboFreeSnapshotVersion",value:function(t){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken)}}]),e}(),af=g((function e(t){y(this,e),this.ie=t}));function of(e,t){var n=t.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:uf(t.readTime),hasCommittedMutations:t.hasCommittedMutations};if(t.isFoundDocument())r.document=function(e,t){return{name:nl(e,t.key),fields:t.data.value.mapValue.fields,updateTime:$c(e,t.version.toTimestamp()),createTime:$c(e,t.createTime.toTimestamp())}}(e.ie,t);else if(t.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:sf(t.version)};else{if(!t.isUnknownDocument())return Ja();r.unknownDocument={path:n.path.toArray(),version:sf(t.version)}}return r}function uf(e){var t=e.toTimestamp();return[t.seconds,t.nanoseconds]}function sf(e){var t=e.toTimestamp();return{seconds:t.seconds,nanoseconds:t.nanoseconds}}function cf(e){var t=new go(e.seconds,e.nanoseconds);return ko.fromTimestamp(t)}function lf(e,t){for(var n=(t.baseMutations||[]).map((function(t){return hl(e.ie,t)})),r=0;r<t.mutations.length-1;++r){var i=t.mutations[r];if(r+1<t.mutations.length&&void 0!==t.mutations[r+1].transform){var a=t.mutations[r+1];i.updateTransforms=a.transform.fieldTransforms,t.mutations.splice(r+1,1),++r}}var o=t.mutations.map((function(t){return hl(e.ie,t)})),u=go.fromMillis(t.localWriteTimeMs);return new ef(t.batchId,u,n,o)}function ff(e){var t,n,r=cf(e.readTime),i=void 0!==e.lastLimboFreeSnapshotVersion?cf(e.lastLimboFreeSnapshotVersion):ko.min();return void 0!==e.query.documents?(Za(1===(n=e.query).documents.length),t=As(Is(al(n.documents[0])))):t=function(e){return As(vl(e))}(e.query),new rf(t,e.targetId,0,e.lastListenSequenceNumber,r,i,au.fromBase64String(e.resumeToken))}function hf(e,t){var n,r=sf(t.snapshotVersion),i=sf(t.lastLimboFreeSnapshotVersion);n=gs(t.target)?dl(e.ie,t.target):pl(e.ie,t.target);var a=t.resumeToken.toBase64();return{targetId:t.targetId,canonicalId:ys(t.target),readTime:r,resumeToken:a,lastListenSequenceNumber:t.sequenceNumber,lastLimboFreeSnapshotVersion:i,query:n}}function df(e){var t=vl({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?Rs(t,t.limit,"L"):t}function pf(e,t){return new nf(t.largestBatchId,hl(e.ie,t.overlayMutation))}function vf(e,t){var n=t.path.lastSegment();return[e,Sl(t.path.popLast()),n]}function yf(e,t,n,r){return{indexId:e,uid:t.uid||"",sequenceNumber:n,readTime:sf(r.readTime),documentKey:Sl(r.documentKey.path),largestBatchId:r.largestBatchId}}var mf=function(){function e(){y(this,e)}return g(e,[{key:"getBundleMetadata",value:function(e,t){return gf(e).get(t).next((function(e){if(e)return{id:(t=e).bundleId,createTime:cf(t.createTime),version:t.version};var t}))}},{key:"saveBundleMetadata",value:function(e,t){return gf(e).put({bundleId:(n=t).id,createTime:sf(Zc(n.createTime)),version:n.version});var n}},{key:"getNamedQuery",value:function(e,t){return kf(e).get(t).next((function(e){if(e)return{name:(t=e).name,query:df(t.bundledQuery),readTime:cf(t.readTime)};var t}))}},{key:"saveNamedQuery",value:function(e,t){return kf(e).put(function(e){return{name:e.name,readTime:sf(Zc(e.readTime)),bundledQuery:e.bundledQuery}}(t))}}]),e}();function gf(e){return Zl(e,"bundles")}function kf(e){return Zl(e,"namedQueries")}var bf=function(){function e(t,n){y(this,e),this.yt=t,this.userId=n}return g(e,[{key:"getOverlay",value:function(e,t){var n=this;return wf(e).get(vf(this.userId,t)).next((function(e){return e?pf(n.yt,e):null}))}},{key:"getOverlays",value:function(e,t){var n=this,r=Nc();return Uo.forEach(t,(function(t){return n.getOverlay(e,t).next((function(e){null!==e&&r.set(t,e)}))})).next((function(){return r}))}},{key:"saveOverlays",value:function(e,t,n){var r=this,i=[];return n.forEach((function(n,a){var o=new nf(t,a);i.push(r.oe(e,o))})),Uo.waitFor(i)}},{key:"removeOverlaysForBatchId",value:function(e,t,n){var r=this,i=new Set;t.forEach((function(e){return i.add(Sl(e.getCollectionPath()))}));var a=[];return i.forEach((function(t){var i=IDBKeyRange.bound([r.userId,t,n],[r.userId,t,n+1],!1,!0);a.push(wf(e).Y("collectionPathOverlayIndex",i))})),Uo.waitFor(a)}},{key:"getOverlaysForCollection",value:function(e,t,n){var r=this,i=Nc(),a=Sl(t),o=IDBKeyRange.bound([this.userId,a,n],[this.userId,a,Number.POSITIVE_INFINITY],!0);return wf(e).W("collectionPathOverlayIndex",o).next((function(e){var t,n=k(e);try{for(n.s();!(t=n.n()).done;){var a=t.value,o=pf(r.yt,a);i.set(o.getKey(),o)}}catch(u){n.e(u)}finally{n.f()}return i}))}},{key:"getOverlaysForCollectionGroup",value:function(e,t,n,r){var i,a=this,o=Nc(),u=IDBKeyRange.bound([this.userId,t,n],[this.userId,t,Number.POSITIVE_INFINITY],!0);return wf(e).Z({index:"collectionGroupOverlayIndex",range:u},(function(e,t,n){var u=pf(a.yt,t);o.size()<r||u.largestBatchId===i?(o.set(u.getKey(),u),i=u.largestBatchId):n.done()})).next((function(){return o}))}},{key:"oe",value:function(e,t){return wf(e).put(function(e,t,n){var r=s(vf(t,n.mutation.key),3);r[0];return{userId:t,collectionPath:r[1],documentId:r[2],collectionGroup:n.mutation.key.getCollectionGroup(),largestBatchId:n.largestBatchId,overlayMutation:fl(e.ie,n.mutation)}}(this.yt,this.userId,t))}}],[{key:"re",value:function(t,n){return new e(t,n.uid||"")}}]),e}();function wf(e){return Zl(e,"documentOverlays")}var xf=function(){function e(){y(this,e)}return g(e,[{key:"ue",value:function(e,t){this.ce(e,t),t.ae()}},{key:"ce",value:function(e,t){if("nullValue"in e)this.he(t,5);else if("booleanValue"in e)this.he(t,10),t.le(e.booleanValue?1:0);else if("integerValue"in e)this.he(t,15),t.le(su(e.integerValue));else if("doubleValue"in e){var n=su(e.doubleValue);isNaN(n)?this.he(t,13):(this.he(t,15),ru(n)?t.le(0):t.le(n))}else if("timestampValue"in e){var r=e.timestampValue;this.he(t,20),"string"==typeof r?t.fe(r):(t.fe("".concat(r.seconds||"")),t.le(r.nanos||0))}else if("stringValue"in e)this.de(e.stringValue,t),this._e(t);else if("bytesValue"in e)this.he(t,30),t.we(cu(e.bytesValue)),this._e(t);else if("referenceValue"in e)this.me(e.referenceValue,t);else if("geoPointValue"in e){var i=e.geoPointValue;this.he(t,45),t.le(i.latitude||0),t.le(i.longitude||0)}else"mapValue"in e?Nu(e)?this.he(t,Number.MAX_SAFE_INTEGER):(this.ge(e.mapValue,t),this._e(t)):"arrayValue"in e?(this.ye(e.arrayValue,t),this._e(t)):Ja()}},{key:"de",value:function(e,t){this.he(t,25),this.pe(e,t)}},{key:"pe",value:function(e,t){t.fe(e)}},{key:"ge",value:function(e,t){var n=e.fields||{};this.he(t,55);for(var r=0,i=Object.keys(n);r<i.length;r++){var a=i[r];this.de(a,t),this.ce(n[a],t)}}},{key:"ye",value:function(e,t){var n=e.values||[];this.he(t,50);var r,i=k(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;this.ce(a,t)}}catch(o){i.e(o)}finally{i.f()}}},{key:"me",value:function(e,t){var n=this;this.he(t,37),Io.fromName(e).path.forEach((function(e){n.he(t,60),n.pe(e,t)}))}},{key:"he",value:function(e,t){e.le(t)}},{key:"_e",value:function(e){e.le(2)}}]),e}();function _f(e){if(0===e)return 8;var t=0;return e>>4==0&&(t+=4,e<<=4),e>>6==0&&(t+=2,e<<=2),e>>7==0&&(t+=1),t}function If(e){var t=64-function(e){for(var t=0,n=0;n<8;++n){var r=_f(255&e[n]);if(t+=r,8!==r)break}return t}(e);return Math.ceil(t/8)}xf.Ie=new xf;var Sf=function(){function e(){y(this,e),this.buffer=new Uint8Array(1024),this.position=0}return g(e,[{key:"Te",value:function(e){for(var t=e[Symbol.iterator](),n=t.next();!n.done;)this.Ee(n.value),n=t.next();this.Ae()}},{key:"Re",value:function(e){for(var t=e[Symbol.iterator](),n=t.next();!n.done;)this.be(n.value),n=t.next();this.Pe()}},{key:"ve",value:function(e){var t,n=k(e);try{for(n.s();!(t=n.n()).done;){var r=t.value,i=r.charCodeAt(0);if(i<128)this.Ee(i);else if(i<2048)this.Ee(960|i>>>6),this.Ee(128|63&i);else if(r<"\ud800"||"\udbff"<r)this.Ee(480|i>>>12),this.Ee(128|63&i>>>6),this.Ee(128|63&i);else{var a=r.codePointAt(0);this.Ee(240|a>>>18),this.Ee(128|63&a>>>12),this.Ee(128|63&a>>>6),this.Ee(128|63&a)}}}catch(o){n.e(o)}finally{n.f()}this.Ae()}},{key:"Ve",value:function(e){var t,n=k(e);try{for(n.s();!(t=n.n()).done;){var r=t.value,i=r.charCodeAt(0);if(i<128)this.be(i);else if(i<2048)this.be(960|i>>>6),this.be(128|63&i);else if(r<"\ud800"||"\udbff"<r)this.be(480|i>>>12),this.be(128|63&i>>>6),this.be(128|63&i);else{var a=r.codePointAt(0);this.be(240|a>>>18),this.be(128|63&a>>>12),this.be(128|63&a>>>6),this.be(128|63&a)}}}catch(o){n.e(o)}finally{n.f()}this.Pe()}},{key:"Se",value:function(e){var t=this.De(e),n=If(t);this.Ce(1+n),this.buffer[this.position++]=255&n;for(var r=t.length-n;r<t.length;++r)this.buffer[this.position++]=255&t[r]}},{key:"xe",value:function(e){var t=this.De(e),n=If(t);this.Ce(1+n),this.buffer[this.position++]=~(255&n);for(var r=t.length-n;r<t.length;++r)this.buffer[this.position++]=~(255&t[r])}},{key:"Ne",value:function(){this.ke(255),this.ke(255)}},{key:"Oe",value:function(){this.Me(255),this.Me(255)}},{key:"reset",value:function(){this.position=0}},{key:"seed",value:function(e){this.Ce(e.length),this.buffer.set(e,this.position),this.position+=e.length}},{key:"Fe",value:function(){return this.buffer.slice(0,this.position)}},{key:"De",value:function(e){var t=function(e){var t=new DataView(new ArrayBuffer(8));return t.setFloat64(0,e,!1),new Uint8Array(t.buffer)}(e),n=0!=(128&t[0]);t[0]^=n?255:128;for(var r=1;r<t.length;++r)t[r]^=n?255:0;return t}},{key:"Ee",value:function(e){var t=255&e;0===t?(this.ke(0),this.ke(255)):255===t?(this.ke(255),this.ke(0)):this.ke(t)}},{key:"be",value:function(e){var t=255&e;0===t?(this.Me(0),this.Me(255)):255===t?(this.Me(255),this.Me(0)):this.Me(e)}},{key:"Ae",value:function(){this.ke(0),this.ke(1)}},{key:"Pe",value:function(){this.Me(0),this.Me(1)}},{key:"ke",value:function(e){this.Ce(1),this.buffer[this.position++]=e}},{key:"Me",value:function(e){this.Ce(1),this.buffer[this.position++]=~e}},{key:"Ce",value:function(e){var t=e+this.position;if(!(t<=this.buffer.length)){var n=2*this.buffer.length;n<t&&(n=t);var r=new Uint8Array(n);r.set(this.buffer),this.buffer=r}}}]),e}(),Ef=function(){function e(t){y(this,e),this.$e=t}return g(e,[{key:"we",value:function(e){this.$e.Te(e)}},{key:"fe",value:function(e){this.$e.ve(e)}},{key:"le",value:function(e){this.$e.Se(e)}},{key:"ae",value:function(){this.$e.Ne()}}]),e}(),Tf=function(){function e(t){y(this,e),this.$e=t}return g(e,[{key:"we",value:function(e){this.$e.Re(e)}},{key:"fe",value:function(e){this.$e.Ve(e)}},{key:"le",value:function(e){this.$e.xe(e)}},{key:"ae",value:function(){this.$e.Oe()}}]),e}(),Cf=function(){function e(){y(this,e),this.$e=new Sf,this.Be=new Ef(this.$e),this.Le=new Tf(this.$e)}return g(e,[{key:"seed",value:function(e){this.$e.seed(e)}},{key:"qe",value:function(e){return 0===e?this.Be:this.Le}},{key:"Fe",value:function(){return this.$e.Fe()}},{key:"reset",value:function(){this.$e.reset()}}]),e}(),Nf=function(){function e(t,n,r,i){y(this,e),this.indexId=t,this.documentKey=n,this.arrayValue=r,this.directionalValue=i}return g(e,[{key:"Ue",value:function(){var t=this.directionalValue.length,n=0===t||255===this.directionalValue[t-1]?t+1:t,r=new Uint8Array(n);return r.set(this.directionalValue,0),n!==t?r.set([0],this.directionalValue.length):++r[r.length-1],new e(this.indexId,this.documentKey,this.arrayValue,r)}}]),e}();function Af(e,t){var n=e.indexId-t.indexId;return 0!==n?n:0!==(n=Df(e.arrayValue,t.arrayValue))?n:0!==(n=Df(e.directionalValue,t.directionalValue))?n:Io.comparator(e.documentKey,t.documentKey)}function Df(e,t){for(var n=0;n<e.length&&n<t.length;++n){var r=e[n]-t[n];if(0!==r)return r}return e.length-t.length}var Rf=function(){function e(t){y(this,e),this.collectionId=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment(),this.Ke=t.orderBy,this.Ge=[];var n,r=k(t.filters);try{for(r.s();!(n=r.n()).done;){var i=n.value;i.isInequality()?this.Qe=i:this.Ge.push(i)}}catch(a){r.e(a)}finally{r.f()}}return g(e,[{key:"je",value:function(e){Za(e.collectionGroup===this.collectionId);var t=Eo(e);if(void 0!==t&&!this.We(t))return!1;for(var n=To(e),r=0,i=0;r<n.length&&this.We(n[r]);++r);if(r===n.length)return!0;if(void 0!==this.Qe){var a=n[r];if(!this.ze(this.Qe,a)||!this.He(this.Ke[i++],a))return!1;++r}for(;r<n.length;++r){var o=n[r];if(i>=this.Ke.length||!this.He(this.Ke[i++],o))return!1}return!0}},{key:"We",value:function(e){var t,n=k(this.Ge);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(this.ze(r,e))return!0}}catch(i){n.e(i)}finally{n.f()}return!1}},{key:"ze",value:function(e,t){if(void 0===e||!e.field.isEqual(t.fieldPath))return!1;var n="array-contains"===e.op||"array-contains-any"===e.op;return 2===t.kind===n}},{key:"He",value:function(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}]),e}();function Pf(e){var t,n;if(Za(e instanceof Uu||e instanceof Vu),e instanceof Uu){if(e instanceof Zu){var r=(null===(n=null===(t=e.value.arrayValue)||void 0===t?void 0:t.values)||void 0===n?void 0:n.map((function(t){return Uu.create(e.field,"==",t)})))||[];return Vu.create(r,"or")}return e}var i=e.filters.map((function(e){return Pf(e)}));return Vu.create(i,e.op)}function Of(e){if(0===e.getFilters().length)return[];var t=Uf(Pf(e));return Za(Ff(t)),Lf(t)||Mf(t)?[t]:t.getFilters()}function Lf(e){return e instanceof Uu}function Mf(e){return e instanceof Vu&&qu(e)}function Ff(e){return Lf(e)||Mf(e)||function(e){if(e instanceof Vu&&Bu(e)){var t,n=k(e.getFilters());try{for(n.s();!(t=n.n()).done;){var r=t.value;if(!Lf(r)&&!Mf(r))return!1}}catch(i){n.e(i)}finally{n.f()}return!0}return!1}(e)}function Uf(e){if(Za(e instanceof Uu||e instanceof Vu),e instanceof Uu)return e;if(1===e.filters.length)return Uf(e.filters[0]);var t=e.filters.map((function(e){return Uf(e)})),n=Vu.create(t,e.op);return Ff(n=Bf(n))?n:(Za(n instanceof Vu),Za(ju(n)),Za(n.filters.length>1),n.filters.reduce((function(e,t){return Vf(e,t)})))}function Vf(e,t){var n;return Za(e instanceof Uu||e instanceof Vu),Za(t instanceof Uu||t instanceof Vu),n=e instanceof Uu?t instanceof Uu?function(e,t){return Vu.create([e,t],"and")}(e,t):jf(e,t):t instanceof Uu?jf(t,e):function(e,t){if(Za(e.filters.length>0&&t.filters.length>0),ju(e)&&ju(t))return Wu(e,t.getFilters());var n=Bu(e)?e:t,r=Bu(e)?t:e,i=n.filters.map((function(e){return Vf(e,r)}));return Vu.create(i,"or")}(e,t),Bf(n)}function jf(e,t){if(ju(t))return Wu(t,e.getFilters());var n=t.filters.map((function(t){return Vf(e,t)}));return Vu.create(n,"or")}function Bf(e){if(Za(e instanceof Uu||e instanceof Vu),e instanceof Uu)return e;var t=e.getFilters();if(1===t.length)return Bf(t[0]);if(zu(e))return e;var n=t.map((function(e){return Bf(e)})),r=[];return n.forEach((function(t){t instanceof Uu?r.push(t):t instanceof Vu&&(t.op===e.op?r.push.apply(r,p(t.filters)):r.push(t))})),1===r.length?r[0]:Vu.create(r,e.op)}var qf=function(){function e(){y(this,e),this.Je=new zf}return g(e,[{key:"addToCollectionParentIndex",value:function(e,t){return this.Je.add(t),Uo.resolve()}},{key:"getCollectionParents",value:function(e,t){return Uo.resolve(this.Je.getEntries(t))}},{key:"addFieldIndex",value:function(e,t){return Uo.resolve()}},{key:"deleteFieldIndex",value:function(e,t){return Uo.resolve()}},{key:"getDocumentsMatchingTarget",value:function(e,t){return Uo.resolve(null)}},{key:"getIndexType",value:function(e,t){return Uo.resolve(0)}},{key:"getFieldIndexes",value:function(e,t){return Uo.resolve([])}},{key:"getNextCollectionGroupToUpdate",value:function(e){return Uo.resolve(null)}},{key:"getMinOffset",value:function(e,t){return Uo.resolve(Ro.min())}},{key:"getMinOffsetFromCollectionGroup",value:function(e,t){return Uo.resolve(Ro.min())}},{key:"updateCollectionGroup",value:function(e,t,n){return Uo.resolve()}},{key:"updateIndexEntries",value:function(e,t){return Uo.resolve()}}]),e}(),zf=function(){function e(){y(this,e),this.index={}}return g(e,[{key:"add",value:function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new us(wo.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}},{key:"has",value:function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}},{key:"getEntries",value:function(e){return(this.index[e]||new us(wo.comparator)).toArray()}}]),e}(),Kf=new Uint8Array(0),Gf=function(){function e(t,n){y(this,e),this.user=t,this.databaseId=n,this.Ye=new zf,this.Xe=new _c((function(e){return ys(e)}),(function(e,t){return ms(e,t)})),this.uid=t.uid||""}return g(e,[{key:"addToCollectionParentIndex",value:function(e,t){var n=this;if(!this.Ye.has(t)){var r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener((function(){n.Ye.add(t)}));var a={collectionId:r,parent:Sl(i)};return Wf(e).put(a)}return Uo.resolve()}},{key:"getCollectionParents",value:function(e,t){var n=[],r=IDBKeyRange.bound([t,""],[mo(t),""],!1,!0);return Wf(e).W(r).next((function(e){var r,i=k(e);try{for(i.s();!(r=i.n()).done;){var a=r.value;if(a.collectionId!==t)break;n.push(Cl(a.parent))}}catch(o){i.e(o)}finally{i.f()}return n}))}},{key:"addFieldIndex",value:function(e,t){var n=this,r=Qf(e),i=function(e){return{indexId:e.indexId,collectionGroup:e.collectionGroup,fields:e.fields.map((function(e){return[e.fieldPath.canonicalString(),e.kind]}))}}(t);delete i.indexId;var a=r.add(i);if(t.indexState){var o=Yf(e);return a.next((function(e){o.put(yf(e,n.user,t.indexState.sequenceNumber,t.indexState.offset))}))}return a.next()}},{key:"deleteFieldIndex",value:function(e,t){var n=Qf(e),r=Yf(e),i=Hf(e);return n.delete(t.indexId).next((function(){return r.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))})).next((function(){return i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))}))}},{key:"getDocumentsMatchingTarget",value:function(e,t){var n=this,r=Hf(e),i=!0,a=new Map;return Uo.forEach(this.Ze(t),(function(t){return n.tn(e,t).next((function(e){i&&(i=!!e),a.set(t,e)}))})).next((function(){if(i){var e=Oc(),o=[];return Uo.forEach(a,(function(i,a){var u;Qa("IndexedDbIndexManager","Using index ".concat((u=i,"id=".concat(u.indexId,"|cg=").concat(u.collectionGroup,"|f=").concat(u.fields.map((function(e){return"".concat(e.fieldPath,":").concat(e.kind)})).join(",")))," to execute ").concat(ys(t)));var s=function(e,t){var n=Eo(t);if(void 0===n)return null;var r,i=k(ks(e,n.fieldPath));try{for(i.s();!(r=i.n()).done;){var a=r.value;switch(a.op){case"array-contains-any":return a.value.arrayValue.values||[];case"array-contains":return[a.value]}}}catch(o){i.e(o)}finally{i.f()}return null}(a,i),c=function(e,t){var n,r=new Map,i=k(To(t));try{for(i.s();!(n=i.n()).done;){var a,o=n.value,u=k(ks(e,o.fieldPath));try{for(u.s();!(a=u.n()).done;){var s=a.value;switch(s.op){case"==":case"in":r.set(o.fieldPath.canonicalString(),s.value);break;case"not-in":case"!=":return r.set(o.fieldPath.canonicalString(),s.value),Array.from(r.values())}}}catch(c){u.e(c)}finally{u.f()}}}catch(c){i.e(c)}finally{i.f()}return null}(a,i),l=function(e,t){var n,r=[],i=!0,a=k(To(t));try{for(a.s();!(n=a.n()).done;){var o=n.value,u=0===o.kind?bs(e,o.fieldPath,e.startAt):ws(e,o.fieldPath,e.startAt);r.push(u.value),i&&(i=u.inclusive)}}catch(s){a.e(s)}finally{a.f()}return new Ou(r,i)}(a,i),f=function(e,t){var n,r=[],i=!0,a=k(To(t));try{for(a.s();!(n=a.n()).done;){var o=n.value,u=0===o.kind?ws(e,o.fieldPath,e.endAt):bs(e,o.fieldPath,e.endAt);r.push(u.value),i&&(i=u.inclusive)}}catch(s){a.e(s)}finally{a.f()}return new Ou(r,i)}(a,i),h=n.en(i,a,l),d=n.en(i,a,f),p=n.nn(i,a,c),v=n.sn(i.indexId,s,h,l.inclusive,d,f.inclusive,p);return Uo.forEach(v,(function(n){return r.J(n,t.limit).next((function(t){t.forEach((function(t){var n=Io.fromSegments(t.documentKey);e.has(n)||(e=e.add(n),o.push(n))}))}))}))})).next((function(){return o}))}return Uo.resolve(null)}))}},{key:"Ze",value:function(e){var t=this.Xe.get(e);return t||(t=0===e.filters.length?[e]:Of(Vu.create(e.filters,"and")).map((function(t){return vs(e.path,e.collectionGroup,e.orderBy,t.getFilters(),e.limit,e.startAt,e.endAt)})),this.Xe.set(e,t),t)}},{key:"sn",value:function(e,t,n,r,i,a,o){for(var u=this,s=(null!=t?t.length:1)*Math.max(n.length,i.length),c=s/(null!=t?t.length:1),l=[],f=function(s){var f=t?u.rn(t[s/c]):Kf,h=u.on(e,f,n[s%c],r),d=u.un(e,f,i[s%c],a),v=o.map((function(t){return u.on(e,f,t,!0)}));l.push.apply(l,p(u.createRange(h,d,v)))},h=0;h<s;++h)f(h);return l}},{key:"on",value:function(e,t,n,r){var i=new Nf(e,Io.empty(),t,n);return r?i:i.Ue()}},{key:"un",value:function(e,t,n,r){var i=new Nf(e,Io.empty(),t,n);return r?i.Ue():i}},{key:"tn",value:function(e,t){var n=new Rf(t),r=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,r).next((function(e){var t,r=null,i=k(e);try{for(i.s();!(t=i.n()).done;){var a=t.value;n.je(a)&&(!r||a.fields.length>r.fields.length)&&(r=a)}}catch(o){i.e(o)}finally{i.f()}return r}))}},{key:"getIndexType",value:function(e,t){var n=this,r=2,i=this.Ze(t);return Uo.forEach(i,(function(t){return n.tn(e,t).next((function(e){e?0!==r&&e.fields.length<function(e){var t,n=new us(_o.comparator),r=!1,i=k(e.filters);try{for(i.s();!(t=i.n()).done;){var a,o=k(t.value.getFlattenedFilters());try{for(o.s();!(a=o.n()).done;){var u=a.value;u.field.isKeyField()||("array-contains"===u.op||"array-contains-any"===u.op?r=!0:n=n.add(u.field))}}catch(f){o.e(f)}finally{o.f()}}}catch(f){i.e(f)}finally{i.f()}var s,c=k(e.orderBy);try{for(c.s();!(s=c.n()).done;){var l=s.value;l.field.isKeyField()||(n=n.add(l.field))}}catch(f){c.e(f)}finally{c.f()}return n.size+(r?1:0)}(t)&&(r=1):r=0}))})).next((function(){return function(e){return null!==e.limit}(t)&&i.length>1&&2===r?1:r}))}},{key:"cn",value:function(e,t){var n,r=new Cf,i=k(To(e));try{for(i.s();!(n=i.n()).done;){var a=n.value,o=t.data.field(a.fieldPath);if(null==o)return null;var u=r.qe(a.kind);xf.Ie.ue(o,u)}}catch(s){i.e(s)}finally{i.f()}return r.Fe()}},{key:"rn",value:function(e){var t=new Cf;return xf.Ie.ue(e,t.qe(0)),t.Fe()}},{key:"an",value:function(e,t){var n=new Cf;return xf.Ie.ue(xu(this.databaseId,t),n.qe(function(e){var t=To(e);return 0===t.length?0:t[t.length-1].kind}(e))),n.Fe()}},{key:"nn",value:function(e,t,n){if(null===n)return[];var r=[];r.push(new Cf);var i,a=0,o=k(To(e));try{for(o.s();!(i=o.n()).done;){var u,s=i.value,c=n[a++],l=k(r);try{for(l.s();!(u=l.n()).done;){var f=u.value;if(this.hn(t,s.fieldPath)&&Iu(c))r=this.ln(r,s,c);else{var h=f.qe(s.kind);xf.Ie.ue(c,h)}}}catch(d){l.e(d)}finally{l.f()}}}catch(d){o.e(d)}finally{o.f()}return this.fn(r)}},{key:"en",value:function(e,t,n){return this.nn(e,t,n.position)}},{key:"fn",value:function(e){for(var t=[],n=0;n<e.length;++n)t[n]=e[n].Fe();return t}},{key:"ln",value:function(e,t,n){var r,i=p(e),a=[],o=k(n.arrayValue.values||[]);try{for(o.s();!(r=o.n()).done;){var u,s=r.value,c=k(i);try{for(c.s();!(u=c.n()).done;){var l=u.value,f=new Cf;f.seed(l.Fe()),xf.Ie.ue(s,f.qe(t.kind)),a.push(f)}}catch(h){c.e(h)}finally{c.f()}}}catch(h){o.e(h)}finally{o.f()}return a}},{key:"hn",value:function(e,t){return!!e.filters.find((function(e){return e instanceof Uu&&e.field.isEqual(t)&&("in"===e.op||"not-in"===e.op)}))}},{key:"getFieldIndexes",value:function(e,t){var n=this,r=Qf(e),i=Yf(e);return(t?r.W("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.W()).next((function(e){var t=[];return Uo.forEach(e,(function(e){return i.get([e.indexId,n.uid]).next((function(n){t.push(function(e,t){var n=t?new No(t.sequenceNumber,new Ro(cf(t.readTime),new Io(Cl(t.documentKey)),t.largestBatchId)):No.empty(),r=e.fields.map((function(e){var t=s(e,2),n=t[0],r=t[1];return new Co(_o.fromServerFormat(n),r)}));return new So(e.indexId,e.collectionGroup,r,n)}(e,n))}))})).next((function(){return t}))}))}},{key:"getNextCollectionGroupToUpdate",value:function(e){return this.getFieldIndexes(e).next((function(e){return 0===e.length?null:(e.sort((function(e,t){var n=e.indexState.sequenceNumber-t.indexState.sequenceNumber;return 0!==n?n:vo(e.collectionGroup,t.collectionGroup)})),e[0].collectionGroup)}))}},{key:"updateCollectionGroup",value:function(e,t,n){var r=this,i=Qf(e),a=Yf(e);return this.dn(e).next((function(e){return i.W("collectionGroupIndex",IDBKeyRange.bound(t,t)).next((function(t){return Uo.forEach(t,(function(t){return a.put(yf(t.indexId,r.user,e,n))}))}))}))}},{key:"updateIndexEntries",value:function(e,t){var n=this,r=new Map;return Uo.forEach(t,(function(t,i){var a=r.get(t.collectionGroup);return(a?Uo.resolve(a):n.getFieldIndexes(e,t.collectionGroup)).next((function(a){return r.set(t.collectionGroup,a),Uo.forEach(a,(function(r){return n._n(e,t,r).next((function(t){var a=n.wn(i,r);return t.isEqual(a)?Uo.resolve():n.mn(e,i,r,t,a)}))}))}))}))}},{key:"gn",value:function(e,t,n,r){return Hf(e).put({indexId:r.indexId,uid:this.uid,arrayValue:r.arrayValue,directionalValue:r.directionalValue,orderedDocumentKey:this.an(n,t.key),documentKey:t.key.path.toArray()})}},{key:"yn",value:function(e,t,n,r){return Hf(e).delete([r.indexId,this.uid,r.arrayValue,r.directionalValue,this.an(n,t.key),t.key.path.toArray()])}},{key:"_n",value:function(e,t,n){var r=Hf(e),i=new us(Af);return r.Z({index:"documentKeyIndex",range:IDBKeyRange.only([n.indexId,this.uid,this.an(n,t)])},(function(e,r){i=i.add(new Nf(n.indexId,t,r.arrayValue,r.directionalValue))})).next((function(){return i}))}},{key:"wn",value:function(e,t){var n=new us(Af),r=this.cn(t,e);if(null==r)return n;var i=Eo(t);if(null!=i){var a=e.data.field(i.fieldPath);if(Iu(a)){var o,u=k(a.arrayValue.values||[]);try{for(u.s();!(o=u.n()).done;){var s=o.value;n=n.add(new Nf(t.indexId,e.key,this.rn(s),r))}}catch(c){u.e(c)}finally{u.f()}}}else n=n.add(new Nf(t.indexId,e.key,Kf,r));return n}},{key:"mn",value:function(e,t,n,r,i){var a=this;Qa("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);var o=[];return function(e,t,n,r,i){for(var a=e.getIterator(),o=t.getIterator(),u=cs(a),s=cs(o);u||s;){var c=!1,l=!1;if(u&&s){var f=n(u,s);f<0?l=!0:f>0&&(c=!0)}else null!=u?l=!0:c=!0;c?(r(s),s=cs(o)):l?(i(u),u=cs(a)):(u=cs(a),s=cs(o))}}(r,i,Af,(function(r){o.push(a.gn(e,t,n,r))}),(function(r){o.push(a.yn(e,t,n,r))})),Uo.waitFor(o)}},{key:"dn",value:function(e){var t=1;return Yf(e).Z({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(function(e,n,r){r.done(),t=n.sequenceNumber+1})).next((function(){return t}))}},{key:"createRange",value:function(e,t,n){n=n.sort((function(e,t){return Af(e,t)})).filter((function(e,t,n){return!t||0!==Af(e,n[t-1])}));var r=[];r.push(e);var i,a=k(n);try{for(a.s();!(i=a.n()).done;){var o=i.value,u=Af(o,e),s=Af(o,t);if(0===u)r[0]=e.Ue();else if(u>0&&s<0)r.push(o),r.push(o.Ue());else if(s>0)break}}catch(d){a.e(d)}finally{a.f()}r.push(t);for(var c=[],l=0;l<r.length;l+=2){if(this.pn(r[l],r[l+1]))return[];var f=[r[l].indexId,this.uid,r[l].arrayValue,r[l].directionalValue,Kf,[]],h=[r[l+1].indexId,this.uid,r[l+1].arrayValue,r[l+1].directionalValue,Kf,[]];c.push(IDBKeyRange.bound(f,h))}return c}},{key:"pn",value:function(e,t){return Af(e,t)>0}},{key:"getMinOffsetFromCollectionGroup",value:function(e,t){return this.getFieldIndexes(e,t).next($f)}},{key:"getMinOffset",value:function(e,t){var n=this;return Uo.mapArray(this.Ze(t),(function(t){return n.tn(e,t).next((function(e){return e||Ja()}))})).next($f)}}]),e}();function Wf(e){return Zl(e,"collectionParents")}function Hf(e){return Zl(e,"indexEntries")}function Qf(e){return Zl(e,"indexConfiguration")}function Yf(e){return Zl(e,"indexState")}function $f(e){Za(0!==e.length);for(var t=e[0].indexState.offset,n=t.largestBatchId,r=1;r<e.length;r++){var i=e[r].indexState.offset;Po(i,t)<0&&(t=i),n<i.largestBatchId&&(n=i.largestBatchId)}return new Ro(t.readTime,t.documentKey,n)}var Xf={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Jf=function(){function e(t,n,r){y(this,e),this.cacheSizeCollectionThreshold=t,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}return g(e,null,[{key:"withCacheSize",value:function(t){return new e(t,e.DEFAULT_COLLECTION_PERCENTILE,e.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}]),e}();function Zf(e,t,n){var r=e.store("mutations"),i=e.store("documentMutations"),a=[],o=IDBKeyRange.only(n.batchId),u=0,s=r.Z({range:o},(function(e,t,n){return u++,n.delete()}));a.push(s.next((function(){Za(1===u)})));var c,l=[],f=k(n.mutations);try{for(f.s();!(c=f.n()).done;){var h=c.value,d=Dl(t,h.key.path,n.batchId);a.push(i.delete(d)),l.push(h.key)}}catch(p){f.e(p)}finally{f.f()}return Uo.waitFor(a).next((function(){return l}))}function eh(e){if(!e)return 0;var t;if(e.document)t=e.document;else if(e.unknownDocument)t=e.unknownDocument;else{if(!e.noDocument)throw Ja();t=e.noDocument}return JSON.stringify(t).length}Jf.DEFAULT_COLLECTION_PERCENTILE=10,Jf.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Jf.DEFAULT=new Jf(41943040,Jf.DEFAULT_COLLECTION_PERCENTILE,Jf.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Jf.DISABLED=new Jf(-1,0,0);var th=function(){function e(t,n,r,i){y(this,e),this.userId=t,this.yt=n,this.indexManager=r,this.referenceDelegate=i,this.In={}}return g(e,[{key:"checkEmpty",value:function(e){var t=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return rh(e).Z({index:"userMutationsIndex",range:n},(function(e,n,r){t=!1,r.done()})).next((function(){return t}))}},{key:"addMutationBatch",value:function(e,t,n,r){var i=this,a=ih(e),o=rh(e);return o.add({}).next((function(u){Za("number"==typeof u);var s,c=new ef(u,t,n,r),l=function(e,t,n){var r=n.baseMutations.map((function(t){return fl(e.ie,t)})),i=n.mutations.map((function(t){return fl(e.ie,t)}));return{userId:t,batchId:n.batchId,localWriteTimeMs:n.localWriteTime.toMillis(),baseMutations:r,mutations:i}}(i.yt,i.userId,c),f=[],h=new us((function(e,t){return vo(e.canonicalString(),t.canonicalString())})),d=k(r);try{for(d.s();!(s=d.n()).done;){var p=s.value,v=Dl(i.userId,p.key.path,u);h=h.add(p.key.path.popLast()),f.push(o.put(l)),f.push(a.put(v,Rl))}}catch(y){d.e(y)}finally{d.f()}return h.forEach((function(t){f.push(i.indexManager.addToCollectionParentIndex(e,t))})),e.addOnCommittedListener((function(){i.In[u]=c.keys()})),Uo.waitFor(f).next((function(){return c}))}))}},{key:"lookupMutationBatch",value:function(e,t){var n=this;return rh(e).get(t).next((function(e){return e?(Za(e.userId===n.userId),lf(n.yt,e)):null}))}},{key:"Tn",value:function(e,t){var n=this;return this.In[t]?Uo.resolve(this.In[t]):this.lookupMutationBatch(e,t).next((function(e){if(e){var r=e.keys();return n.In[t]=r,r}return null}))}},{key:"getNextMutationBatchAfterBatchId",value:function(e,t){var n=this,r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]),a=null;return rh(e).Z({index:"userMutationsIndex",range:i},(function(e,t,i){t.userId===n.userId&&(Za(t.batchId>=r),a=lf(n.yt,t)),i.done()})).next((function(){return a}))}},{key:"getHighestUnacknowledgedBatchId",value:function(e){var t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return rh(e).Z({index:"userMutationsIndex",range:t,reverse:!0},(function(e,t,r){n=t.batchId,r.done()})).next((function(){return n}))}},{key:"getAllMutationBatches",value:function(e){var t=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return rh(e).W("userMutationsIndex",n).next((function(e){return e.map((function(e){return lf(t.yt,e)}))}))}},{key:"getAllMutationBatchesAffectingDocumentKey",value:function(e,t){var n=this,r=Al(this.userId,t.path),i=IDBKeyRange.lowerBound(r),a=[];return ih(e).Z({range:i},(function(r,i,o){var u=s(r,3),c=u[0],l=u[1],f=u[2],h=Cl(l);if(c===n.userId&&t.path.isEqual(h))return rh(e).get(f).next((function(e){if(!e)throw Ja();Za(e.userId===n.userId),a.push(lf(n.yt,e))}));o.done()})).next((function(){return a}))}},{key:"getAllMutationBatchesAffectingDocumentKeys",value:function(e,t){var n=this,r=new us(vo),i=[];return t.forEach((function(t){var a=Al(n.userId,t.path),o=IDBKeyRange.lowerBound(a),u=ih(e).Z({range:o},(function(e,i,a){var o=s(e,3),u=o[0],c=o[1],l=o[2],f=Cl(c);u===n.userId&&t.path.isEqual(f)?r=r.add(l):a.done()}));i.push(u)})),Uo.waitFor(i).next((function(){return n.En(e,r)}))}},{key:"getAllMutationBatchesAffectingQuery",value:function(e,t){var n=this,r=t.path,i=r.length+1,a=Al(this.userId,r),o=IDBKeyRange.lowerBound(a),u=new us(vo);return ih(e).Z({range:o},(function(e,t,a){var o=s(e,3),c=o[0],l=o[1],f=o[2],h=Cl(l);c===n.userId&&r.isPrefixOf(h)?h.length===i&&(u=u.add(f)):a.done()})).next((function(){return n.En(e,u)}))}},{key:"En",value:function(e,t){var n=this,r=[],i=[];return t.forEach((function(t){i.push(rh(e).get(t).next((function(e){if(null===e)throw Ja();Za(e.userId===n.userId),r.push(lf(n.yt,e))})))})),Uo.waitFor(i).next((function(){return r}))}},{key:"removeMutationBatch",value:function(e,t){var n=this;return Zf(e.se,this.userId,t).next((function(r){return e.addOnCommittedListener((function(){n.An(t.batchId)})),Uo.forEach(r,(function(t){return n.referenceDelegate.markPotentiallyOrphaned(e,t)}))}))}},{key:"An",value:function(e){delete this.In[e]}},{key:"performConsistencyCheck",value:function(e){var t=this;return this.checkEmpty(e).next((function(n){if(!n)return Uo.resolve();var r=IDBKeyRange.lowerBound([t.userId]),i=[];return ih(e).Z({range:r},(function(e,n,r){if(e[0]===t.userId){var a=Cl(e[1]);i.push(a)}else r.done()})).next((function(){Za(0===i.length)}))}))}},{key:"containsKey",value:function(e,t){return nh(e,this.userId,t)}},{key:"Rn",value:function(e){var t=this;return ah(e).get(this.userId).next((function(e){return e||{userId:t.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""}}))}}],[{key:"re",value:function(t,n,r,i){return Za(""!==t.uid),new e(t.isAuthenticated()?t.uid:"",n,r,i)}}]),e}();function nh(e,t,n){var r=Al(t,n.path),i=r[1],a=IDBKeyRange.lowerBound(r),o=!1;return ih(e).Z({range:a,X:!0},(function(e,n,r){var a=s(e,3),u=a[0],c=a[1];a[2];u===t&&c===i&&(o=!0),r.done()})).next((function(){return o}))}function rh(e){return Zl(e,"mutations")}function ih(e){return Zl(e,"documentMutations")}function ah(e){return Zl(e,"mutationQueues")}var oh=function(){function e(t){y(this,e),this.bn=t}return g(e,[{key:"next",value:function(){return this.bn+=2,this.bn}}],[{key:"Pn",value:function(){return new e(0)}},{key:"vn",value:function(){return new e(-1)}}]),e}(),uh=function(){function e(t,n){y(this,e),this.referenceDelegate=t,this.yt=n}return g(e,[{key:"allocateTargetId",value:function(e){var t=this;return this.Vn(e).next((function(n){var r=new oh(n.highestTargetId);return n.highestTargetId=r.next(),t.Sn(e,n).next((function(){return n.highestTargetId}))}))}},{key:"getLastRemoteSnapshotVersion",value:function(e){return this.Vn(e).next((function(e){return ko.fromTimestamp(new go(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds))}))}},{key:"getHighestSequenceNumber",value:function(e){return this.Vn(e).next((function(e){return e.highestListenSequenceNumber}))}},{key:"setTargetsMetadata",value:function(e,t,n){var r=this;return this.Vn(e).next((function(i){return i.highestListenSequenceNumber=t,n&&(i.lastRemoteSnapshotVersion=n.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),r.Sn(e,i)}))}},{key:"addTargetData",value:function(e,t){var n=this;return this.Dn(e,t).next((function(){return n.Vn(e).next((function(r){return r.targetCount+=1,n.Cn(t,r),n.Sn(e,r)}))}))}},{key:"updateTargetData",value:function(e,t){return this.Dn(e,t)}},{key:"removeTargetData",value:function(e,t){var n=this;return this.removeMatchingKeysForTargetId(e,t.targetId).next((function(){return sh(e).delete(t.targetId)})).next((function(){return n.Vn(e)})).next((function(t){return Za(t.targetCount>0),t.targetCount-=1,n.Sn(e,t)}))}},{key:"removeTargets",value:function(e,t,n){var r=this,i=0,a=[];return sh(e).Z((function(o,u){var s=ff(u);s.sequenceNumber<=t&&null===n.get(s.targetId)&&(i++,a.push(r.removeTargetData(e,s)))})).next((function(){return Uo.waitFor(a)})).next((function(){return i}))}},{key:"forEachTarget",value:function(e,t){return sh(e).Z((function(e,n){var r=ff(n);t(r)}))}},{key:"Vn",value:function(e){return ch(e).get("targetGlobalKey").next((function(e){return Za(null!==e),e}))}},{key:"Sn",value:function(e,t){return ch(e).put("targetGlobalKey",t)}},{key:"Dn",value:function(e,t){return sh(e).put(hf(this.yt,t))}},{key:"Cn",value:function(e,t){var n=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,n=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,n=!0),n}},{key:"getTargetCount",value:function(e){return this.Vn(e).next((function(e){return e.targetCount}))}},{key:"getTargetData",value:function(e,t){var n=ys(t),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]),i=null;return sh(e).Z({range:r,index:"queryTargetsIndex"},(function(e,n,r){var a=ff(n);ms(t,a.target)&&(i=a,r.done())})).next((function(){return i}))}},{key:"addMatchingKeys",value:function(e,t,n){var r=this,i=[],a=lh(e);return t.forEach((function(t){var o=Sl(t.path);i.push(a.put({targetId:n,path:o})),i.push(r.referenceDelegate.addReference(e,n,t))})),Uo.waitFor(i)}},{key:"removeMatchingKeys",value:function(e,t,n){var r=this,i=lh(e);return Uo.forEach(t,(function(t){var a=Sl(t.path);return Uo.waitFor([i.delete([n,a]),r.referenceDelegate.removeReference(e,n,t)])}))}},{key:"removeMatchingKeysForTargetId",value:function(e,t){var n=lh(e),r=IDBKeyRange.bound([t],[t+1],!1,!0);return n.delete(r)}},{key:"getMatchingKeysForTargetId",value:function(e,t){var n=IDBKeyRange.bound([t],[t+1],!1,!0),r=lh(e),i=Oc();return r.Z({range:n,X:!0},(function(e,t,n){var r=Cl(e[1]),a=new Io(r);i=i.add(a)})).next((function(){return i}))}},{key:"containsKey",value:function(e,t){var n=Sl(t.path),r=IDBKeyRange.bound([n],[mo(n)],!1,!0),i=0;return lh(e).Z({index:"documentTargetsIndex",X:!0,range:r},(function(e,t,n){var r=s(e,2),a=r[0];r[1];0!==a&&(i++,n.done())})).next((function(){return i>0}))}},{key:"ne",value:function(e,t){return sh(e).get(t).next((function(e){return e?ff(e):null}))}}]),e}();function sh(e){return Zl(e,"targets")}function ch(e){return Zl(e,"targetGlobal")}function lh(e){return Zl(e,"targetDocuments")}function fh(e,t){var n=s(e,2),r=n[0],i=n[1],a=s(t,2),o=a[0],u=a[1],c=vo(r,o);return 0===c?vo(i,u):c}var hh=function(){function e(t){y(this,e),this.xn=t,this.buffer=new us(fh),this.Nn=0}return g(e,[{key:"kn",value:function(){return++this.Nn}},{key:"On",value:function(e){var t=[e,this.kn()];if(this.buffer.size<this.xn)this.buffer=this.buffer.add(t);else{var n=this.buffer.last();fh(t,n)<0&&(this.buffer=this.buffer.delete(n).add(t))}}},{key:"maxValue",get:function(){return this.buffer.last()[0]}}]),e}(),dh=function(){function e(t,n,r){y(this,e),this.garbageCollector=t,this.asyncQueue=n,this.localStore=r,this.Mn=null}return g(e,[{key:"start",value:function(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Fn(6e4)}},{key:"stop",value:function(){this.Mn&&(this.Mn.cancel(),this.Mn=null)}},{key:"started",get:function(){return null!==this.Mn}},{key:"Fn",value:function(e){var t=this;Qa("LruGarbageCollector","Garbage collection scheduled in ".concat(e,"ms")),this.Mn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,se(oe().mark((function e(){return oe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.Mn=null,e.prev=1,e.next=4,t.localStore.collectGarbage(t.garbageCollector);case 4:e.next=14;break;case 6:if(e.prev=6,e.t0=e.catch(1),!zo(e.t0)){e.next=12;break}Qa("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e.t0),e.next=14;break;case 12:return e.next=14,Mo(e.t0);case 14:return e.next=16,t.Fn(3e5);case 16:case"end":return e.stop()}}),e,null,[[1,6]])}))))}}]),e}(),ph=function(){function e(t,n){y(this,e),this.$n=t,this.params=n}return g(e,[{key:"calculateTargetCount",value:function(e,t){return this.$n.Bn(e).next((function(e){return Math.floor(t/100*e)}))}},{key:"nthSequenceNumber",value:function(e,t){var n=this;if(0===t)return Uo.resolve($o.at);var r=new hh(t);return this.$n.forEachTarget(e,(function(e){return r.On(e.sequenceNumber)})).next((function(){return n.$n.Ln(e,(function(e){return r.On(e)}))})).next((function(){return r.maxValue}))}},{key:"removeTargets",value:function(e,t,n){return this.$n.removeTargets(e,t,n)}},{key:"removeOrphanedDocuments",value:function(e,t){return this.$n.removeOrphanedDocuments(e,t)}},{key:"collect",value:function(e,t){var n=this;return-1===this.params.cacheSizeCollectionThreshold?(Qa("LruGarbageCollector","Garbage collection skipped; disabled"),Uo.resolve(Xf)):this.getCacheSize(e).next((function(r){return r<n.params.cacheSizeCollectionThreshold?(Qa("LruGarbageCollector","Garbage collection skipped; Cache size ".concat(r," is lower than threshold ").concat(n.params.cacheSizeCollectionThreshold)),Xf):n.qn(e,t)}))}},{key:"getCacheSize",value:function(e){return this.$n.getCacheSize(e)}},{key:"qn",value:function(e,t){var n,r,i,a,o,u,s,c=this,l=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((function(t){return t>c.params.maximumSequenceNumbersToCollect?(Qa("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of ".concat(c.params.maximumSequenceNumbersToCollect," from ").concat(t)),r=c.params.maximumSequenceNumbersToCollect):r=t,a=Date.now(),c.nthSequenceNumber(e,r)})).next((function(r){return n=r,o=Date.now(),c.removeTargets(e,n,t)})).next((function(t){return i=t,u=Date.now(),c.removeOrphanedDocuments(e,n)})).next((function(e){return s=Date.now(),Ha()<=de.DEBUG&&Qa("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in ".concat(a-l,"ms\n\tDetermined least recently used ").concat(r," in ")+(o-a)+"ms\n"+"\tRemoved ".concat(i," targets in ")+(u-o)+"ms\n"+"\tRemoved ".concat(e," documents in ")+(s-u)+"ms\n"+"Total Duration: ".concat(s-l,"ms")),Uo.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:e})}))}}]),e}(),vh=function(){function e(t,n){y(this,e),this.db=t,this.garbageCollector=function(e,t){return new ph(e,t)}(this,n)}return g(e,[{key:"Bn",value:function(e){var t=this.Un(e);return this.db.getTargetCache().getTargetCount(e).next((function(e){return t.next((function(t){return e+t}))}))}},{key:"Un",value:function(e){var t=0;return this.Ln(e,(function(e){t++})).next((function(){return t}))}},{key:"forEachTarget",value:function(e,t){return this.db.getTargetCache().forEachTarget(e,t)}},{key:"Ln",value:function(e,t){return this.Kn(e,(function(e,n){return t(n)}))}},{key:"addReference",value:function(e,t,n){return yh(e,n)}},{key:"removeReference",value:function(e,t,n){return yh(e,n)}},{key:"removeTargets",value:function(e,t,n){return this.db.getTargetCache().removeTargets(e,t,n)}},{key:"markPotentiallyOrphaned",value:function(e,t){return yh(e,t)}},{key:"Gn",value:function(e,t){return function(e,t){var n=!1;return ah(e).tt((function(r){return nh(e,r,t).next((function(e){return e&&(n=!0),Uo.resolve(!e)}))})).next((function(){return n}))}(e,t)}},{key:"removeOrphanedDocuments",value:function(e,t){var n=this,r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],a=0;return this.Kn(e,(function(o,u){if(u<=t){var s=n.Gn(e,o).next((function(t){if(!t)return a++,r.getEntry(e,o).next((function(){return r.removeEntry(o,ko.min()),lh(e).delete([0,Sl(o.path)])}))}));i.push(s)}})).next((function(){return Uo.waitFor(i)})).next((function(){return r.apply(e)})).next((function(){return a}))}},{key:"removeTarget",value:function(e,t){var n=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,n)}},{key:"updateLimboDocument",value:function(e,t){return yh(e,t)}},{key:"Kn",value:function(e,t){var n,r=lh(e),i=$o.at;return r.Z({index:"documentTargetsIndex"},(function(e,r){var a=s(e,2),o=a[0],u=(a[1],r.path),c=r.sequenceNumber;0===o?(i!==$o.at&&t(new Io(Cl(n)),i),i=c,n=u):i=$o.at})).next((function(){i!==$o.at&&t(new Io(Cl(n)),i)}))}},{key:"getCacheSize",value:function(e){return this.db.getRemoteDocumentCache().getSize(e)}}]),e}();function yh(e,t){return lh(e).put(function(e,t){return{targetId:0,path:Sl(e.path),sequenceNumber:t}}(t,e.currentSequenceNumber))}var mh=function(){function e(){y(this,e),this.changes=new _c((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)})),this.changesApplied=!1}return g(e,[{key:"addEntry",value:function(e){this.assertNotApplied(),this.changes.set(e.key,e)}},{key:"removeEntry",value:function(e,t){this.assertNotApplied(),this.changes.set(e,ds.newInvalidDocument(e).setReadTime(t))}},{key:"getEntry",value:function(e,t){this.assertNotApplied();var n=this.changes.get(t);return void 0!==n?Uo.resolve(n):this.getFromCache(e,t)}},{key:"getEntries",value:function(e,t){return this.getAllFromCache(e,t)}},{key:"apply",value:function(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}},{key:"assertNotApplied",value:function(){}}]),e}(),gh=function(){function e(t){y(this,e),this.yt=t}return g(e,[{key:"setIndexManager",value:function(e){this.indexManager=e}},{key:"addEntry",value:function(e,t,n){return xh(e).put(n)}},{key:"removeEntry",value:function(e,t,n){return xh(e).delete(function(e,t){var n=e.path.toArray();return[n.slice(0,n.length-2),n[n.length-2],uf(t),n[n.length-1]]}(t,n))}},{key:"updateMetadata",value:function(e,t){var n=this;return this.getMetadata(e).next((function(r){return r.byteSize+=t,n.Qn(e,r)}))}},{key:"getEntry",value:function(e,t){var n=this,r=ds.newInvalidDocument(t);return xh(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(_h(t))},(function(e,i){r=n.jn(t,i)})).next((function(){return r}))}},{key:"Wn",value:function(e,t){var n=this,r={size:0,document:ds.newInvalidDocument(t)};return xh(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(_h(t))},(function(e,i){r={document:n.jn(t,i),size:eh(i)}})).next((function(){return r}))}},{key:"getEntries",value:function(e,t){var n=this,r=Sc();return this.zn(e,t,(function(e,t){var i=n.jn(e,t);r=r.insert(e,i)})).next((function(){return r}))}},{key:"Hn",value:function(e,t){var n=this,r=Sc(),i=new is(Io.comparator);return this.zn(e,t,(function(e,t){var a=n.jn(e,t);r=r.insert(e,a),i=i.insert(e,eh(t))})).next((function(){return{documents:r,Jn:i}}))}},{key:"zn",value:function(e,t,n){if(t.isEmpty())return Uo.resolve();var r=new us(Sh);t.forEach((function(e){return r=r.add(e)}));var i=IDBKeyRange.bound(_h(r.first()),_h(r.last())),a=r.getIterator(),o=a.getNext();return xh(e).Z({index:"documentKeyIndex",range:i},(function(e,t,r){for(var i=Io.fromSegments([].concat(p(t.prefixPath),[t.collectionGroup,t.documentId]));o&&Sh(o,i)<0;)n(o,null),o=a.getNext();o&&o.isEqual(i)&&(n(o,t),o=a.hasNext()?a.getNext():null),o?r.j(_h(o)):r.done()})).next((function(){for(;o;)n(o,null),o=a.hasNext()?a.getNext():null}))}},{key:"getDocumentsMatchingQuery",value:function(e,t,n,r){var i=this,a=t.path,o=[a.popLast().toArray(),a.lastSegment(),uf(n.readTime),n.documentKey.path.isEmpty()?"":n.documentKey.path.lastSegment()],u=[a.popLast().toArray(),a.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return xh(e).W(IDBKeyRange.bound(o,u,!0)).next((function(e){var n,a=Sc(),o=k(e);try{for(o.s();!(n=o.n()).done;){var u=n.value,s=i.jn(Io.fromSegments(u.prefixPath.concat(u.collectionGroup,u.documentId)),u);s.isFoundDocument()&&(Ms(t,s)||r.has(s.key))&&(a=a.insert(s.key,s))}}catch(c){o.e(c)}finally{o.f()}return a}))}},{key:"getAllFromCollectionGroup",value:function(e,t,n,r){var i=this,a=Sc(),o=Ih(t,n),u=Ih(t,Ro.max());return xh(e).Z({index:"collectionGroupIndex",range:IDBKeyRange.bound(o,u,!0)},(function(e,t,n){var o=i.jn(Io.fromSegments(t.prefixPath.concat(t.collectionGroup,t.documentId)),t);(a=a.insert(o.key,o)).size===r&&n.done()})).next((function(){return a}))}},{key:"newChangeBuffer",value:function(e){return new bh(this,!!e&&e.trackRemovals)}},{key:"getSize",value:function(e){return this.getMetadata(e).next((function(e){return e.byteSize}))}},{key:"getMetadata",value:function(e){return wh(e).get("remoteDocumentGlobalKey").next((function(e){return Za(!!e),e}))}},{key:"Qn",value:function(e,t){return wh(e).put("remoteDocumentGlobalKey",t)}},{key:"jn",value:function(e,t){if(t){var n=function(e,t){var n;if(t.document)n=cl(e.ie,t.document,!!t.hasCommittedMutations);else if(t.noDocument){var r=Io.fromSegments(t.noDocument.path),i=cf(t.noDocument.readTime);n=ds.newNoDocument(r,i),t.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!t.unknownDocument)return Ja();var a=Io.fromSegments(t.unknownDocument.path),o=cf(t.unknownDocument.version);n=ds.newUnknownDocument(a,o)}return t.readTime&&n.setReadTime(function(e){var t=new go(e[0],e[1]);return ko.fromTimestamp(t)}(t.readTime)),n}(this.yt,t);if(!n.isNoDocument()||!n.version.isEqual(ko.min()))return n}return ds.newInvalidDocument(e)}}]),e}();function kh(e){return new gh(e)}var bh=function(e){x(n,e);var t=T(n);function n(e,r){var i;return y(this,n),(i=t.call(this)).Yn=e,i.trackRemovals=r,i.Xn=new _c((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)})),i}return g(n,[{key:"applyChanges",value:function(e){var t=this,n=[],r=0,i=new us((function(e,t){return vo(e.canonicalString(),t.canonicalString())}));return this.changes.forEach((function(a,o){var u=t.Xn.get(a);if(n.push(t.Yn.removeEntry(e,a,u.readTime)),o.isValidDocument()){var s=of(t.Yn.yt,o);i=i.add(a.path.popLast());var c=eh(s);r+=c-u.size,n.push(t.Yn.addEntry(e,a,s))}else if(r-=u.size,t.trackRemovals){var l=of(t.Yn.yt,o.convertToNoDocument(ko.min()));n.push(t.Yn.addEntry(e,a,l))}})),i.forEach((function(r){n.push(t.Yn.indexManager.addToCollectionParentIndex(e,r))})),n.push(this.Yn.updateMetadata(e,r)),Uo.waitFor(n)}},{key:"getFromCache",value:function(e,t){var n=this;return this.Yn.Wn(e,t).next((function(e){return n.Xn.set(t,{size:e.size,readTime:e.document.readTime}),e.document}))}},{key:"getAllFromCache",value:function(e,t){var n=this;return this.Yn.Hn(e,t).next((function(e){var t=e.documents;return e.Jn.forEach((function(e,r){n.Xn.set(e,{size:r,readTime:t.get(e).readTime})})),t}))}}]),n}(mh);function wh(e){return Zl(e,"remoteDocumentGlobal")}function xh(e){return Zl(e,"remoteDocumentsV14")}function _h(e){var t=e.path.toArray();return[t.slice(0,t.length-2),t[t.length-2],t[t.length-1]]}function Ih(e,t){var n=t.documentKey.path.toArray();return[e,uf(t.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function Sh(e,t){for(var n=e.path.toArray(),r=t.path.toArray(),i=0,a=0;a<n.length-2&&a<r.length-2;++a)if(i=vo(n[a],r[a]))return i;return(i=vo(n.length,r.length))||((i=vo(n[n.length-2],r[r.length-2]))||vo(n[n.length-1],r[r.length-1]))}var Eh=g((function e(t,n){y(this,e),this.overlayedDocument=t,this.mutatedFields=n})),Th=function(){function e(t,n,r,i){y(this,e),this.remoteDocumentCache=t,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}return g(e,[{key:"getDocument",value:function(e,t){var n=this,r=null;return this.documentOverlayCache.getOverlay(e,t).next((function(i){return r=i,n.remoteDocumentCache.getEntry(e,t)})).next((function(e){return null!==r&&sc(r.mutation,e,ls.empty(),go.now()),e}))}},{key:"getDocuments",value:function(e,t){var n=this;return this.remoteDocumentCache.getEntries(e,t).next((function(t){return n.getLocalViewOfDocuments(e,t,Oc()).next((function(){return t}))}))}},{key:"getLocalViewOfDocuments",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Oc(),i=Nc();return this.populateOverlays(e,i,t).next((function(){return n.computeViews(e,t,i,r).next((function(e){var t=Tc();return e.forEach((function(e,n){t=t.insert(e,n.overlayedDocument)})),t}))}))}},{key:"getOverlayedDocuments",value:function(e,t){var n=this,r=Nc();return this.populateOverlays(e,r,t).next((function(){return n.computeViews(e,t,r,Oc())}))}},{key:"populateOverlays",value:function(e,t,n){var r=[];return n.forEach((function(e){t.has(e)||r.push(e)})),this.documentOverlayCache.getOverlays(e,r).next((function(e){e.forEach((function(e,n){t.set(e,n)}))}))}},{key:"computeViews",value:function(e,t,n,r){var i=Sc(),a=Dc(),o=Dc();return t.forEach((function(e,t){var o=n.get(t.key);r.has(t.key)&&(void 0===o||o.mutation instanceof hc)?i=i.insert(t.key,t):void 0!==o?(a.set(t.key,o.mutation.getFieldMask()),sc(o.mutation,t,o.mutation.getFieldMask(),go.now())):a.set(t.key,ls.empty())})),this.recalculateAndSaveOverlays(e,i).next((function(e){return e.forEach((function(e,t){return a.set(e,t)})),t.forEach((function(e,t){var n;return o.set(e,new Eh(t,null!==(n=a.get(e))&&void 0!==n?n:null))})),o}))}},{key:"recalculateAndSaveOverlays",value:function(e,t){var n=this,r=Dc(),i=new is((function(e,t){return e-t})),a=Oc();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((function(e){var n,a=k(e);try{var o=function(){var e=n.value;e.keys().forEach((function(n){var a=t.get(n);if(null!==a){var o=r.get(n)||ls.empty();o=e.applyToLocalView(a,o),r.set(n,o);var u=(i.get(e.batchId)||Oc()).add(n);i=i.insert(e.batchId,u)}}))};for(a.s();!(n=a.n()).done;)o()}catch(u){a.e(u)}finally{a.f()}})).next((function(){for(var o=[],u=i.getReverseIterator(),s=function(){var i=u.getNext(),s=i.key,c=i.value,l=Ac();c.forEach((function(e){if(!a.has(e)){var n=oc(t.get(e),r.get(e));null!==n&&l.set(e,n),a=a.add(e)}})),o.push(n.documentOverlayCache.saveOverlays(e,s,l))};u.hasNext();)s();return Uo.waitFor(o)})).next((function(){return r}))}},{key:"recalculateAndSaveOverlaysForDocumentKeys",value:function(e,t){var n=this;return this.remoteDocumentCache.getEntries(e,t).next((function(t){return n.recalculateAndSaveOverlays(e,t)}))}},{key:"getDocumentsMatchingQuery",value:function(e,t,n){return function(e){return Io.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):Cs(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n):this.getDocumentsMatchingCollectionQuery(e,t,n)}},{key:"getNextDocuments",value:function(e,t,n,r){var i=this;return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,r).next((function(a){var o=r-a.size>0?i.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,r-a.size):Uo.resolve(Nc()),u=-1,s=a;return o.next((function(t){return Uo.forEach(t,(function(t,n){return u<n.largestBatchId&&(u=n.largestBatchId),a.get(t)?Uo.resolve():i.remoteDocumentCache.getEntry(e,t).next((function(e){s=s.insert(t,e)}))})).next((function(){return i.populateOverlays(e,t,a)})).next((function(){return i.computeViews(e,s,t,Oc())})).next((function(e){return{batchId:u,changes:Cc(e)}}))}))}))}},{key:"getDocumentsMatchingDocumentQuery",value:function(e,t){return this.getDocument(e,new Io(t)).next((function(e){var t=Tc();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t}))}},{key:"getDocumentsMatchingCollectionGroupQuery",value:function(e,t,n){var r=this,i=t.collectionGroup,a=Tc();return this.indexManager.getCollectionParents(e,i).next((function(o){return Uo.forEach(o,(function(o){var u=function(e,t){return new xs(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,o.child(i));return r.getDocumentsMatchingCollectionQuery(e,u,n).next((function(e){e.forEach((function(e,t){a=a.insert(e,t)}))}))})).next((function(){return a}))}))}},{key:"getDocumentsMatchingCollectionQuery",value:function(e,t,n){var r,i=this;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next((function(a){return r=a,i.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,r)})).next((function(e){r.forEach((function(t,n){var r=n.getKey();null===e.get(r)&&(e=e.insert(r,ds.newInvalidDocument(r)))}));var n=Tc();return e.forEach((function(e,i){var a=r.get(e);void 0!==a&&sc(a.mutation,i,ls.empty(),go.now()),Ms(t,i)&&(n=n.insert(e,i))})),n}))}}]),e}(),Ch=function(){function e(t){y(this,e),this.yt=t,this.Zn=new Map,this.ts=new Map}return g(e,[{key:"getBundleMetadata",value:function(e,t){return Uo.resolve(this.Zn.get(t))}},{key:"saveBundleMetadata",value:function(e,t){var n;return this.Zn.set(t.id,{id:(n=t).id,version:n.version,createTime:Zc(n.createTime)}),Uo.resolve()}},{key:"getNamedQuery",value:function(e,t){return Uo.resolve(this.ts.get(t))}},{key:"saveNamedQuery",value:function(e,t){return this.ts.set(t.name,function(e){return{name:e.name,query:df(e.bundledQuery),readTime:Zc(e.readTime)}}(t)),Uo.resolve()}}]),e}(),Nh=function(){function e(){y(this,e),this.overlays=new is(Io.comparator),this.es=new Map}return g(e,[{key:"getOverlay",value:function(e,t){return Uo.resolve(this.overlays.get(t))}},{key:"getOverlays",value:function(e,t){var n=this,r=Nc();return Uo.forEach(t,(function(t){return n.getOverlay(e,t).next((function(e){null!==e&&r.set(t,e)}))})).next((function(){return r}))}},{key:"saveOverlays",value:function(e,t,n){var r=this;return n.forEach((function(n,i){r.oe(e,t,i)})),Uo.resolve()}},{key:"removeOverlaysForBatchId",value:function(e,t,n){var r=this,i=this.es.get(n);return void 0!==i&&(i.forEach((function(e){return r.overlays=r.overlays.remove(e)})),this.es.delete(n)),Uo.resolve()}},{key:"getOverlaysForCollection",value:function(e,t,n){for(var r=Nc(),i=t.length+1,a=new Io(t.child("")),o=this.overlays.getIteratorFrom(a);o.hasNext();){var u=o.getNext().value,s=u.getKey();if(!t.isPrefixOf(s.path))break;s.path.length===i&&u.largestBatchId>n&&r.set(u.getKey(),u)}return Uo.resolve(r)}},{key:"getOverlaysForCollectionGroup",value:function(e,t,n,r){for(var i=new is((function(e,t){return e-t})),a=this.overlays.getIterator();a.hasNext();){var o=a.getNext().value;if(o.getKey().getCollectionGroup()===t&&o.largestBatchId>n){var u=i.get(o.largestBatchId);null===u&&(u=Nc(),i=i.insert(o.largestBatchId,u)),u.set(o.getKey(),o)}}for(var s=Nc(),c=i.getIterator();c.hasNext()&&(c.getNext().value.forEach((function(e,t){return s.set(e,t)})),!(s.size()>=r)););return Uo.resolve(s)}},{key:"oe",value:function(e,t,n){var r=this.overlays.get(n.key);if(null!==r){var i=this.es.get(r.largestBatchId).delete(n.key);this.es.set(r.largestBatchId,i)}this.overlays=this.overlays.insert(n.key,new nf(t,n));var a=this.es.get(t);void 0===a&&(a=Oc(),this.es.set(t,a)),this.es.set(t,a.add(n.key))}}]),e}(),Ah=function(){function e(){y(this,e),this.ns=new us(Dh.ss),this.rs=new us(Dh.os)}return g(e,[{key:"isEmpty",value:function(){return this.ns.isEmpty()}},{key:"addReference",value:function(e,t){var n=new Dh(e,t);this.ns=this.ns.add(n),this.rs=this.rs.add(n)}},{key:"us",value:function(e,t){var n=this;e.forEach((function(e){return n.addReference(e,t)}))}},{key:"removeReference",value:function(e,t){this.cs(new Dh(e,t))}},{key:"hs",value:function(e,t){var n=this;e.forEach((function(e){return n.removeReference(e,t)}))}},{key:"ls",value:function(e){var t=this,n=new Io(new wo([])),r=new Dh(n,e),i=new Dh(n,e+1),a=[];return this.rs.forEachInRange([r,i],(function(e){t.cs(e),a.push(e.key)})),a}},{key:"fs",value:function(){var e=this;this.ns.forEach((function(t){return e.cs(t)}))}},{key:"cs",value:function(e){this.ns=this.ns.delete(e),this.rs=this.rs.delete(e)}},{key:"ds",value:function(e){var t=new Io(new wo([])),n=new Dh(t,e),r=new Dh(t,e+1),i=Oc();return this.rs.forEachInRange([n,r],(function(e){i=i.add(e.key)})),i}},{key:"containsKey",value:function(e){var t=new Dh(e,0),n=this.ns.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}]),e}(),Dh=function(){function e(t,n){y(this,e),this.key=t,this._s=n}return g(e,null,[{key:"ss",value:function(e,t){return Io.comparator(e.key,t.key)||vo(e._s,t._s)}},{key:"os",value:function(e,t){return vo(e._s,t._s)||Io.comparator(e.key,t.key)}}]),e}(),Rh=function(){function e(t,n){y(this,e),this.indexManager=t,this.referenceDelegate=n,this.mutationQueue=[],this.ws=1,this.gs=new us(Dh.ss)}return g(e,[{key:"checkEmpty",value:function(e){return Uo.resolve(0===this.mutationQueue.length)}},{key:"addMutationBatch",value:function(e,t,n,r){var i=this.ws;this.ws++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];var a=new ef(i,t,n,r);this.mutationQueue.push(a);var o,u=k(r);try{for(u.s();!(o=u.n()).done;){var s=o.value;this.gs=this.gs.add(new Dh(s.key,i)),this.indexManager.addToCollectionParentIndex(e,s.key.path.popLast())}}catch(c){u.e(c)}finally{u.f()}return Uo.resolve(a)}},{key:"lookupMutationBatch",value:function(e,t){return Uo.resolve(this.ys(t))}},{key:"getNextMutationBatchAfterBatchId",value:function(e,t){var n=t+1,r=this.ps(n),i=r<0?0:r;return Uo.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}},{key:"getHighestUnacknowledgedBatchId",value:function(){return Uo.resolve(0===this.mutationQueue.length?-1:this.ws-1)}},{key:"getAllMutationBatches",value:function(e){return Uo.resolve(this.mutationQueue.slice())}},{key:"getAllMutationBatchesAffectingDocumentKey",value:function(e,t){var n=this,r=new Dh(t,0),i=new Dh(t,Number.POSITIVE_INFINITY),a=[];return this.gs.forEachInRange([r,i],(function(e){var t=n.ys(e._s);a.push(t)})),Uo.resolve(a)}},{key:"getAllMutationBatchesAffectingDocumentKeys",value:function(e,t){var n=this,r=new us(vo);return t.forEach((function(e){var t=new Dh(e,0),i=new Dh(e,Number.POSITIVE_INFINITY);n.gs.forEachInRange([t,i],(function(e){r=r.add(e._s)}))})),Uo.resolve(this.Is(r))}},{key:"getAllMutationBatchesAffectingQuery",value:function(e,t){var n=t.path,r=n.length+1,i=n;Io.isDocumentKey(i)||(i=i.child(""));var a=new Dh(new Io(i),0),o=new us(vo);return this.gs.forEachWhile((function(e){var t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(o=o.add(e._s)),!0)}),a),Uo.resolve(this.Is(o))}},{key:"Is",value:function(e){var t=this,n=[];return e.forEach((function(e){var r=t.ys(e);null!==r&&n.push(r)})),n}},{key:"removeMutationBatch",value:function(e,t){var n=this;Za(0===this.Ts(t.batchId,"removed")),this.mutationQueue.shift();var r=this.gs;return Uo.forEach(t.mutations,(function(i){var a=new Dh(i.key,t.batchId);return r=r.delete(a),n.referenceDelegate.markPotentiallyOrphaned(e,i.key)})).next((function(){n.gs=r}))}},{key:"An",value:function(e){}},{key:"containsKey",value:function(e,t){var n=new Dh(t,0),r=this.gs.firstAfterOrEqual(n);return Uo.resolve(t.isEqual(r&&r.key))}},{key:"performConsistencyCheck",value:function(e){return this.mutationQueue.length,Uo.resolve()}},{key:"Ts",value:function(e,t){return this.ps(e)}},{key:"ps",value:function(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}},{key:"ys",value:function(e){var t=this.ps(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}]),e}(),Ph=function(){function e(t){y(this,e),this.Es=t,this.docs=new is(Io.comparator),this.size=0}return g(e,[{key:"setIndexManager",value:function(e){this.indexManager=e}},{key:"addEntry",value:function(e,t){var n=t.key,r=this.docs.get(n),i=r?r.size:0,a=this.Es(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:a}),this.size+=a-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}},{key:"removeEntry",value:function(e){var t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}},{key:"getEntry",value:function(e,t){var n=this.docs.get(t);return Uo.resolve(n?n.document.mutableCopy():ds.newInvalidDocument(t))}},{key:"getEntries",value:function(e,t){var n=this,r=Sc();return t.forEach((function(e){var t=n.docs.get(e);r=r.insert(e,t?t.document.mutableCopy():ds.newInvalidDocument(e))})),Uo.resolve(r)}},{key:"getDocumentsMatchingQuery",value:function(e,t,n,r){for(var i=Sc(),a=t.path,o=new Io(a.child("")),u=this.docs.getIteratorFrom(o);u.hasNext();){var s=u.getNext(),c=s.key,l=s.value.document;if(!a.isPrefixOf(c.path))break;c.path.length>a.length+1||Po(Do(l),n)<=0||(r.has(l.key)||Ms(t,l))&&(i=i.insert(l.key,l.mutableCopy()))}return Uo.resolve(i)}},{key:"getAllFromCollectionGroup",value:function(e,t,n,r){Ja()}},{key:"As",value:function(e,t){return Uo.forEach(this.docs,(function(e){return t(e)}))}},{key:"newChangeBuffer",value:function(e){return new Oh(this)}},{key:"getSize",value:function(e){return Uo.resolve(this.size)}}]),e}(),Oh=function(e){x(n,e);var t=T(n);function n(e){var r;return y(this,n),(r=t.call(this)).Yn=e,r}return g(n,[{key:"applyChanges",value:function(e){var t=this,n=[];return this.changes.forEach((function(r,i){i.isValidDocument()?n.push(t.Yn.addEntry(e,i)):t.Yn.removeEntry(r)})),Uo.waitFor(n)}},{key:"getFromCache",value:function(e,t){return this.Yn.getEntry(e,t)}},{key:"getAllFromCache",value:function(e,t){return this.Yn.getEntries(e,t)}}]),n}(mh),Lh=function(){function e(t){y(this,e),this.persistence=t,this.Rs=new _c((function(e){return ys(e)}),ms),this.lastRemoteSnapshotVersion=ko.min(),this.highestTargetId=0,this.bs=0,this.Ps=new Ah,this.targetCount=0,this.vs=oh.Pn()}return g(e,[{key:"forEachTarget",value:function(e,t){return this.Rs.forEach((function(e,n){return t(n)})),Uo.resolve()}},{key:"getLastRemoteSnapshotVersion",value:function(e){return Uo.resolve(this.lastRemoteSnapshotVersion)}},{key:"getHighestSequenceNumber",value:function(e){return Uo.resolve(this.bs)}},{key:"allocateTargetId",value:function(e){return this.highestTargetId=this.vs.next(),Uo.resolve(this.highestTargetId)}},{key:"setTargetsMetadata",value:function(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.bs&&(this.bs=t),Uo.resolve()}},{key:"Dn",value:function(e){this.Rs.set(e.target,e);var t=e.targetId;t>this.highestTargetId&&(this.vs=new oh(t),this.highestTargetId=t),e.sequenceNumber>this.bs&&(this.bs=e.sequenceNumber)}},{key:"addTargetData",value:function(e,t){return this.Dn(t),this.targetCount+=1,Uo.resolve()}},{key:"updateTargetData",value:function(e,t){return this.Dn(t),Uo.resolve()}},{key:"removeTargetData",value:function(e,t){return this.Rs.delete(t.target),this.Ps.ls(t.targetId),this.targetCount-=1,Uo.resolve()}},{key:"removeTargets",value:function(e,t,n){var r=this,i=0,a=[];return this.Rs.forEach((function(o,u){u.sequenceNumber<=t&&null===n.get(u.targetId)&&(r.Rs.delete(o),a.push(r.removeMatchingKeysForTargetId(e,u.targetId)),i++)})),Uo.waitFor(a).next((function(){return i}))}},{key:"getTargetCount",value:function(e){return Uo.resolve(this.targetCount)}},{key:"getTargetData",value:function(e,t){var n=this.Rs.get(t)||null;return Uo.resolve(n)}},{key:"addMatchingKeys",value:function(e,t,n){return this.Ps.us(t,n),Uo.resolve()}},{key:"removeMatchingKeys",value:function(e,t,n){this.Ps.hs(t,n);var r=this.persistence.referenceDelegate,i=[];return r&&t.forEach((function(t){i.push(r.markPotentiallyOrphaned(e,t))})),Uo.waitFor(i)}},{key:"removeMatchingKeysForTargetId",value:function(e,t){return this.Ps.ls(t),Uo.resolve()}},{key:"getMatchingKeysForTargetId",value:function(e,t){var n=this.Ps.ds(t);return Uo.resolve(n)}},{key:"containsKey",value:function(e,t){return Uo.resolve(this.Ps.containsKey(t))}}]),e}(),Mh=function(){function e(t,n){var r=this;y(this,e),this.Vs={},this.overlays={},this.Ss=new $o(0),this.Ds=!1,this.Ds=!0,this.referenceDelegate=t(this),this.Cs=new Lh(this),this.indexManager=new qf,this.remoteDocumentCache=new Ph((function(e){return r.referenceDelegate.xs(e)})),this.yt=new af(n),this.Ns=new Ch(this.yt)}return g(e,[{key:"start",value:function(){return Promise.resolve()}},{key:"shutdown",value:function(){return this.Ds=!1,Promise.resolve()}},{key:"started",get:function(){return this.Ds}},{key:"setDatabaseDeletedListener",value:function(){}},{key:"setNetworkEnabled",value:function(){}},{key:"getIndexManager",value:function(e){return this.indexManager}},{key:"getDocumentOverlayCache",value:function(e){var t=this.overlays[e.toKey()];return t||(t=new Nh,this.overlays[e.toKey()]=t),t}},{key:"getMutationQueue",value:function(e,t){var n=this.Vs[e.toKey()];return n||(n=new Rh(t,this.referenceDelegate),this.Vs[e.toKey()]=n),n}},{key:"getTargetCache",value:function(){return this.Cs}},{key:"getRemoteDocumentCache",value:function(){return this.remoteDocumentCache}},{key:"getBundleCache",value:function(){return this.Ns}},{key:"runTransaction",value:function(e,t,n){var r=this;Qa("MemoryPersistence","Starting transaction:",e);var i=new Fh(this.Ss.next());return this.referenceDelegate.ks(),n(i).next((function(e){return r.referenceDelegate.Os(i).next((function(){return e}))})).toPromise().then((function(e){return i.raiseOnCommittedEvent(),e}))}},{key:"Ms",value:function(e,t){return Uo.or(Object.values(this.Vs).map((function(n){return function(){return n.containsKey(e,t)}})))}}]),e}(),Fh=function(e){x(n,e);var t=T(n);function n(e){var r;return y(this,n),(r=t.call(this)).currentSequenceNumber=e,r}return g(n)}(Lo),Uh=function(){function e(t){y(this,e),this.persistence=t,this.Fs=new Ah,this.$s=null}return g(e,[{key:"Ls",get:function(){if(this.$s)return this.$s;throw Ja()}},{key:"addReference",value:function(e,t,n){return this.Fs.addReference(n,t),this.Ls.delete(n.toString()),Uo.resolve()}},{key:"removeReference",value:function(e,t,n){return this.Fs.removeReference(n,t),this.Ls.add(n.toString()),Uo.resolve()}},{key:"markPotentiallyOrphaned",value:function(e,t){return this.Ls.add(t.toString()),Uo.resolve()}},{key:"removeTarget",value:function(e,t){var n=this;this.Fs.ls(t.targetId).forEach((function(e){return n.Ls.add(e.toString())}));var r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next((function(e){e.forEach((function(e){return n.Ls.add(e.toString())}))})).next((function(){return r.removeTargetData(e,t)}))}},{key:"ks",value:function(){this.$s=new Set}},{key:"Os",value:function(e){var t=this,n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Uo.forEach(this.Ls,(function(r){var i=Io.fromPath(r);return t.qs(e,i).next((function(e){e||n.removeEntry(i,ko.min())}))})).next((function(){return t.$s=null,n.apply(e)}))}},{key:"updateLimboDocument",value:function(e,t){var n=this;return this.qs(e,t).next((function(e){e?n.Ls.delete(t.toString()):n.Ls.add(t.toString())}))}},{key:"xs",value:function(e){return 0}},{key:"qs",value:function(e,t){var n=this;return Uo.or([function(){return Uo.resolve(n.Fs.containsKey(t))},function(){return n.persistence.getTargetCache().containsKey(e,t)},function(){return n.persistence.Ms(e,t)}])}}],[{key:"Bs",value:function(t){return new e(t)}}]),e}(),Vh=function(){function e(t){y(this,e),this.yt=t}return g(e,[{key:"$",value:function(e,t,n,r){var i=this,a=new Vo("createOrUpgrade",t);n<1&&r>=1&&(function(e){e.createObjectStore("owner")}(e),function(e){e.createObjectStore("mutationQueues",{keyPath:"userId"}),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Nl,{unique:!0}),e.createObjectStore("documentMutations")}(e),jh(e),function(e){e.createObjectStore("remoteDocuments")}(e));var o=Uo.resolve();return n<3&&r>=3&&(0!==n&&(function(e){e.deleteObjectStore("targetDocuments"),e.deleteObjectStore("targets"),e.deleteObjectStore("targetGlobal")}(e),jh(e)),o=o.next((function(){return function(e){var t=e.store("targetGlobal"),n={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:ko.min().toTimestamp(),targetCount:0};return t.put("targetGlobalKey",n)}(a)}))),n<4&&r>=4&&(0!==n&&(o=o.next((function(){return function(e,t){return t.store("mutations").W().next((function(n){e.deleteObjectStore("mutations"),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Nl,{unique:!0});var r=t.store("mutations"),i=n.map((function(e){return r.put(e)}));return Uo.waitFor(i)}))}(e,a)}))),o=o.next((function(){!function(e){e.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)}))),n<5&&r>=5&&(o=o.next((function(){return i.Us(a)}))),n<6&&r>=6&&(o=o.next((function(){return function(e){e.createObjectStore("remoteDocumentGlobal")}(e),i.Ks(a)}))),n<7&&r>=7&&(o=o.next((function(){return i.Gs(a)}))),n<8&&r>=8&&(o=o.next((function(){return i.Qs(e,a)}))),n<9&&r>=9&&(o=o.next((function(){!function(e){e.objectStoreNames.contains("remoteDocumentChanges")&&e.deleteObjectStore("remoteDocumentChanges")}(e)}))),n<10&&r>=10&&(o=o.next((function(){return i.js(a)}))),n<11&&r>=11&&(o=o.next((function(){!function(e){e.createObjectStore("bundles",{keyPath:"bundleId"})}(e),function(e){e.createObjectStore("namedQueries",{keyPath:"name"})}(e)}))),n<12&&r>=12&&(o=o.next((function(){!function(e){var t=e.createObjectStore("documentOverlays",{keyPath:Kl});t.createIndex("collectionPathOverlayIndex",Gl,{unique:!1}),t.createIndex("collectionGroupOverlayIndex",Wl,{unique:!1})}(e)}))),n<13&&r>=13&&(o=o.next((function(){return function(e){var t=e.createObjectStore("remoteDocumentsV14",{keyPath:Pl});t.createIndex("documentKeyIndex",Ol),t.createIndex("collectionGroupIndex",Ll)}(e)})).next((function(){return i.Ws(e,a)})).next((function(){return e.deleteObjectStore("remoteDocuments")}))),n<14&&r>=14&&(o=o.next((function(){return i.zs(e,a)}))),n<15&&r>=15&&(o=o.next((function(){return function(e){e.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),e.createObjectStore("indexState",{keyPath:jl}).createIndex("sequenceNumberIndex",Bl,{unique:!1}),e.createObjectStore("indexEntries",{keyPath:ql}).createIndex("documentKeyIndex",zl,{unique:!1})}(e)}))),o}},{key:"Ks",value:function(e){var t=0;return e.store("remoteDocuments").Z((function(e,n){t+=eh(n)})).next((function(){var n={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",n)}))}},{key:"Us",value:function(e){var t=this,n=e.store("mutationQueues"),r=e.store("mutations");return n.W().next((function(n){return Uo.forEach(n,(function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.W("userMutationsIndex",i).next((function(r){return Uo.forEach(r,(function(r){Za(r.userId===n.userId);var i=lf(t.yt,r);return Zf(e,n.userId,i).next((function(){}))}))}))}))}))}},{key:"Gs",value:function(e){var t=e.store("targetDocuments"),n=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next((function(e){var r=[];return n.Z((function(n,i){var a=new wo(n),o=function(e){return[0,Sl(e)]}(a);r.push(t.get(o).next((function(n){return n?Uo.resolve():function(n){return t.put({targetId:0,path:Sl(n),sequenceNumber:e.highestListenSequenceNumber})}(a)})))})).next((function(){return Uo.waitFor(r)}))}))}},{key:"Qs",value:function(e,t){e.createObjectStore("collectionParents",{keyPath:Vl});var n=t.store("collectionParents"),r=new zf,i=function(e){if(r.add(e)){var t=e.lastSegment(),i=e.popLast();return n.put({collectionId:t,parent:Sl(i)})}};return t.store("remoteDocuments").Z({X:!0},(function(e,t){var n=new wo(e);return i(n.popLast())})).next((function(){return t.store("documentMutations").Z({X:!0},(function(e,t){var n=s(e,3),r=(n[0],n[1]),a=(n[2],Cl(r));return i(a.popLast())}))}))}},{key:"js",value:function(e){var t=this,n=e.store("targets");return n.Z((function(e,r){var i=ff(r),a=hf(t.yt,i);return n.put(a)}))}},{key:"Ws",value:function(e,t){var n=t.store("remoteDocuments"),r=[];return n.Z((function(e,n){var i,a=t.store("remoteDocumentsV14"),o=(i=n,i.document?new Io(wo.fromString(i.document.name).popFirst(5)):i.noDocument?Io.fromSegments(i.noDocument.path):i.unknownDocument?Io.fromSegments(i.unknownDocument.path):Ja()).path.toArray(),u={prefixPath:o.slice(0,o.length-2),collectionGroup:o[o.length-2],documentId:o[o.length-1],readTime:n.readTime||[0,0],unknownDocument:n.unknownDocument,noDocument:n.noDocument,document:n.document,hasCommittedMutations:!!n.hasCommittedMutations};r.push(a.put(u))})).next((function(){return Uo.waitFor(r)}))}},{key:"zs",value:function(e,t){var n=this,r=t.store("mutations"),i=kh(this.yt),a=new Mh(Uh.Bs,this.yt.ie);return r.W().next((function(e){var r=new Map;return e.forEach((function(e){var t,i=null!==(t=r.get(e.userId))&&void 0!==t?t:Oc();lf(n.yt,e).keys().forEach((function(e){return i=i.add(e)})),r.set(e.userId,i)})),Uo.forEach(r,(function(e,r){var o=new Ka(r),u=bf.re(n.yt,o),s=a.getIndexManager(o),c=th.re(o,n.yt,s,a.referenceDelegate);return new Th(i,c,u,s).recalculateAndSaveOverlaysForDocumentKeys(new Jl(t,$o.at),e).next()}))}))}}]),e}();function jh(e){e.createObjectStore("targetDocuments",{keyPath:Fl}).createIndex("documentTargetsIndex",Ul,{unique:!0}),e.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",Ml,{unique:!0}),e.createObjectStore("targetGlobal")}var Bh="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",qh=function(){function e(t,n,r,i,a,o,u,s,c,l){var f=arguments.length>10&&void 0!==arguments[10]?arguments[10]:15;if(y(this,e),this.allowTabSynchronization=t,this.persistenceKey=n,this.clientId=r,this.Hs=a,this.window=o,this.document=u,this.Js=c,this.Ys=l,this.Xs=f,this.Ss=null,this.Ds=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Zs=null,this.inForeground=!1,this.ti=null,this.ei=null,this.ni=Number.NEGATIVE_INFINITY,this.si=function(e){return Promise.resolve()},!e.C())throw new no(to.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new vh(this,i),this.ii=n+"main",this.yt=new af(s),this.ri=new jo(this.ii,this.Xs,new Vh(this.yt)),this.Cs=new uh(this.referenceDelegate,this.yt),this.remoteDocumentCache=kh(this.yt),this.Ns=new mf,this.window&&this.window.localStorage?this.oi=this.window.localStorage:(this.oi=null,!1===l&&Ya("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}return g(e,[{key:"start",value:function(){var e=this;return this.ui().then((function(){if(!e.isPrimary&&!e.allowTabSynchronization)throw new no(to.FAILED_PRECONDITION,Bh);return e.ci(),e.ai(),e.hi(),e.runTransaction("getHighestListenSequenceNumber","readonly",(function(t){return e.Cs.getHighestSequenceNumber(t)}))})).then((function(t){e.Ss=new $o(t,e.Js)})).then((function(){e.Ds=!0})).catch((function(t){return e.ri&&e.ri.close(),Promise.reject(t)}))}},{key:"li",value:function(e){var t=this;return this.si=function(){var n=se(oe().mark((function n(r){return oe().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!t.started){n.next=2;break}return n.abrupt("return",e(r));case 2:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),e(this.isPrimary)}},{key:"setDatabaseDeletedListener",value:function(e){this.ri.L(function(){var t=se(oe().mark((function t(n){return oe().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.t0=null===n.newVersion,!t.t0){t.next=4;break}return t.next=4,e();case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}},{key:"setNetworkEnabled",value:function(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Hs.enqueueAndForget(se(oe().mark((function e(){return oe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.started,!e.t0){e.next=4;break}return e.next=4,t.ui();case 4:case"end":return e.stop()}}),e)})))))}},{key:"ui",value:function(){var e=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(function(t){return Kh(t).put({clientId:e.clientId,updateTimeMs:Date.now(),networkEnabled:e.networkEnabled,inForeground:e.inForeground}).next((function(){if(e.isPrimary)return e.fi(t).next((function(t){t||(e.isPrimary=!1,e.Hs.enqueueRetryable((function(){return e.si(!1)})))}))})).next((function(){return e.di(t)})).next((function(n){return e.isPrimary&&!n?e._i(t).next((function(){return!1})):!!n&&e.wi(t).next((function(){return!0}))}))})).catch((function(t){if(zo(t))return Qa("IndexedDbPersistence","Failed to extend owner lease: ",t),e.isPrimary;if(!e.allowTabSynchronization)throw t;return Qa("IndexedDbPersistence","Releasing owner lease after error during lease refresh",t),!1})).then((function(t){e.isPrimary!==t&&e.Hs.enqueueRetryable((function(){return e.si(t)})),e.isPrimary=t}))}},{key:"fi",value:function(e){var t=this;return zh(e).get("owner").next((function(e){return Uo.resolve(t.mi(e))}))}},{key:"gi",value:function(e){return Kh(e).delete(this.clientId)}},{key:"yi",value:function(){var e=se(oe().mark((function e(){var t,n,r,i,a=this;return oe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isPrimary||this.pi(this.ni,18e5)){e.next=6;break}return this.ni=Date.now(),e.next=4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(function(e){var t=Zl(e,"clientMetadata");return t.W().next((function(e){var n=a.Ii(e,18e5),r=e.filter((function(e){return-1===n.indexOf(e)}));return Uo.forEach(r,(function(e){return t.delete(e.clientId)})).next((function(){return r}))}))})).catch((function(){return[]}));case 4:if(t=e.sent,this.oi){n=k(t);try{for(n.s();!(r=n.n()).done;)i=r.value,this.oi.removeItem(this.Ti(i.clientId))}catch(o){n.e(o)}finally{n.f()}}case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"hi",value:function(){var e=this;this.ei=this.Hs.enqueueAfterDelay("client_metadata_refresh",4e3,(function(){return e.ui().then((function(){return e.yi()})).then((function(){return e.hi()}))}))}},{key:"mi",value:function(e){return!!e&&e.ownerId===this.clientId}},{key:"di",value:function(e){var t=this;return this.Ys?Uo.resolve(!0):zh(e).get("owner").next((function(n){if(null!==n&&t.pi(n.leaseTimestampMs,5e3)&&!t.Ei(n.ownerId)){if(t.mi(n)&&t.networkEnabled)return!0;if(!t.mi(n)){if(!n.allowTabSynchronization)throw new no(to.FAILED_PRECONDITION,Bh);return!1}}return!(!t.networkEnabled||!t.inForeground)||Kh(e).W().next((function(e){return void 0===t.Ii(e,5e3).find((function(e){if(t.clientId!==e.clientId){var n=!t.networkEnabled&&e.networkEnabled,r=!t.inForeground&&e.inForeground,i=t.networkEnabled===e.networkEnabled;if(n||r&&i)return!0}return!1}))}))})).next((function(e){return t.isPrimary!==e&&Qa("IndexedDbPersistence","Client ".concat(e?"is":"is not"," eligible for a primary lease.")),e}))}},{key:"shutdown",value:function(){var e=se(oe().mark((function e(){var t=this;return oe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.Ds=!1,this.Ai(),this.ei&&(this.ei.cancel(),this.ei=null),this.Ri(),this.bi(),e.next=7,this.ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],(function(e){var n=new Jl(e,$o.at);return t._i(n).next((function(){return t.gi(n)}))}));case 7:this.ri.close(),this.Pi();case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Ii",value:function(e,t){var n=this;return e.filter((function(e){return n.pi(e.updateTimeMs,t)&&!n.Ei(e.clientId)}))}},{key:"vi",value:function(){var e=this;return this.runTransaction("getActiveClients","readonly",(function(t){return Kh(t).W().next((function(t){return e.Ii(t,18e5).map((function(e){return e.clientId}))}))}))}},{key:"started",get:function(){return this.Ds}},{key:"getMutationQueue",value:function(e,t){return th.re(e,this.yt,t,this.referenceDelegate)}},{key:"getTargetCache",value:function(){return this.Cs}},{key:"getRemoteDocumentCache",value:function(){return this.remoteDocumentCache}},{key:"getIndexManager",value:function(e){return new Gf(e,this.yt.ie.databaseId)}},{key:"getDocumentOverlayCache",value:function(e){return bf.re(this.yt,e)}},{key:"getBundleCache",value:function(){return this.Ns}},{key:"runTransaction",value:function(e,t,n){var r=this;Qa("IndexedDbPersistence","Starting transaction:",e);var i,a,o="readonly"===t?"readonly":"readwrite",u=15===(i=this.Xs)?Xl:14===i?$l:13===i?Yl:12===i?Ql:11===i?Hl:void Ja();return this.ri.runTransaction(e,o,u,(function(i){return a=new Jl(i,r.Ss?r.Ss.next():$o.at),"readwrite-primary"===t?r.fi(a).next((function(e){return!!e||r.di(a)})).next((function(t){if(!t)throw Ya("Failed to obtain primary lease for action '".concat(e,"'.")),r.isPrimary=!1,r.Hs.enqueueRetryable((function(){return r.si(!1)})),new no(to.FAILED_PRECONDITION,Oo);return n(a)})).next((function(e){return r.wi(a).next((function(){return e}))})):r.Vi(a).next((function(){return n(a)}))})).then((function(e){return a.raiseOnCommittedEvent(),e}))}},{key:"Vi",value:function(e){var t=this;return zh(e).get("owner").next((function(e){if(null!==e&&t.pi(e.leaseTimestampMs,5e3)&&!t.Ei(e.ownerId)&&!t.mi(e)&&!(t.Ys||t.allowTabSynchronization&&e.allowTabSynchronization))throw new no(to.FAILED_PRECONDITION,Bh)}))}},{key:"wi",value:function(e){var t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return zh(e).put("owner",t)}},{key:"_i",value:function(e){var t=this,n=zh(e);return n.get("owner").next((function(e){return t.mi(e)?(Qa("IndexedDbPersistence","Releasing primary lease."),n.delete("owner")):Uo.resolve()}))}},{key:"pi",value:function(e,t){var n=Date.now();return!(e<n-t)&&(!(e>n)||(Ya("Detected an update time that is in the future: ".concat(e," > ").concat(n)),!1))}},{key:"ci",value:function(){var e=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ti=function(){e.Hs.enqueueAndForget((function(){return e.inForeground="visible"===e.document.visibilityState,e.ui()}))},this.document.addEventListener("visibilitychange",this.ti),this.inForeground="visible"===this.document.visibilityState)}},{key:"Ri",value:function(){this.ti&&(this.document.removeEventListener("visibilitychange",this.ti),this.ti=null)}},{key:"ai",value:function(){var e,t=this;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.Zs=function(){t.Ai(),!B()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")&&navigator.appVersion.match(/Version\/1[45]/)&&t.Hs.enterRestrictedMode(!0),t.Hs.enqueueAndForget((function(){return t.shutdown()}))},this.window.addEventListener("pagehide",this.Zs))}},{key:"bi",value:function(){this.Zs&&(this.window.removeEventListener("pagehide",this.Zs),this.Zs=null)}},{key:"Ei",value:function(e){var t;try{var n=null!==(null===(t=this.oi)||void 0===t?void 0:t.getItem(this.Ti(e)));return Qa("IndexedDbPersistence","Client '".concat(e,"' ").concat(n?"is":"is not"," zombied in LocalStorage")),n}catch(e){return Ya("IndexedDbPersistence","Failed to get zombied client id.",e),!1}}},{key:"Ai",value:function(){if(this.oi)try{this.oi.setItem(this.Ti(this.clientId),String(Date.now()))}catch(Jt){Ya("Failed to set zombie client id.",Jt)}}},{key:"Pi",value:function(){if(this.oi)try{this.oi.removeItem(this.Ti(this.clientId))}catch(Jt){}}},{key:"Ti",value:function(e){return"firestore_zombie_".concat(this.persistenceKey,"_").concat(e)}}],[{key:"C",value:function(){return jo.C()}}]),e}();function zh(e){return Zl(e,"owner")}function Kh(e){return Zl(e,"clientMetadata")}function Gh(e,t){var n=e.projectId;return e.isDefaultDatabase||(n+="."+e.database),"firestore/"+t+"/"+n+"/"}var Wh=function(){function e(t,n,r,i){y(this,e),this.targetId=t,this.fromCache=n,this.Si=r,this.Di=i}return g(e,null,[{key:"Ci",value:function(t,n){var r,i=Oc(),a=Oc(),o=k(n.docChanges);try{for(o.s();!(r=o.n()).done;){var u=r.value;switch(u.type){case 0:i=i.add(u.doc.key);break;case 1:a=a.add(u.doc.key)}}}catch(s){o.e(s)}finally{o.f()}return new e(t,n.fromCache,i,a)}}]),e}(),Hh=function(){function e(){y(this,e),this.xi=!1}return g(e,[{key:"initialize",value:function(e,t){this.Ni=e,this.indexManager=t,this.xi=!0}},{key:"getDocumentsMatchingQuery",value:function(e,t,n,r){var i=this;return this.ki(e,t).next((function(a){return a||i.Oi(e,t,r,n)})).next((function(n){return n||i.Mi(e,t)}))}},{key:"ki",value:function(e,t){var n=this;if(Ss(t))return Uo.resolve(null);var r=As(t);return this.indexManager.getIndexType(e,r).next((function(i){return 0===i?null:(null!==t.limit&&1===i&&(t=Rs(t,null,"F"),r=As(t)),n.indexManager.getDocumentsMatchingTarget(e,r).next((function(i){var a=Oc.apply(void 0,p(i));return n.Ni.getDocuments(e,a).next((function(i){return n.indexManager.getMinOffset(e,r).next((function(r){var o=n.Fi(t,i);return n.$i(t,o,a,r.readTime)?n.ki(e,Rs(t,null,"F")):n.Bi(e,o,t,r)}))}))})))}))}},{key:"Oi",value:function(e,t,n,r){var i=this;return Ss(t)||r.isEqual(ko.min())?this.Mi(e,t):this.Ni.getDocuments(e,n).next((function(a){var o=i.Fi(t,a);return i.$i(t,o,n,r)?i.Mi(e,t):(Ha()<=de.DEBUG&&Qa("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),Ls(t)),i.Bi(e,o,t,Ao(r,-1)))}))}},{key:"Fi",value:function(e,t){var n=new us(Us(e));return t.forEach((function(t,r){Ms(e,r)&&(n=n.add(r))})),n}},{key:"$i",value:function(e,t,n,r){if(null===e.limit)return!1;if(n.size!==t.size)return!0;var i="F"===e.limitType?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}},{key:"Mi",value:function(e,t){return Ha()<=de.DEBUG&&Qa("QueryEngine","Using full collection scan to execute query:",Ls(t)),this.Ni.getDocumentsMatchingQuery(e,t,Ro.min())}},{key:"Bi",value:function(e,t,n,r){return this.Ni.getDocumentsMatchingQuery(e,n,r).next((function(e){return t.forEach((function(t){e=e.insert(t.key,t)})),e}))}}]),e}(),Qh=function(){function e(t,n,r,i){y(this,e),this.persistence=t,this.Li=n,this.yt=i,this.qi=new is(vo),this.Ui=new _c((function(e){return ys(e)}),ms),this.Ki=new Map,this.Gi=t.getRemoteDocumentCache(),this.Cs=t.getTargetCache(),this.Ns=t.getBundleCache(),this.Qi(r)}return g(e,[{key:"Qi",value:function(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Th(this.Gi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Gi.setIndexManager(this.indexManager),this.Li.initialize(this.localDocuments,this.indexManager)}},{key:"collectGarbage",value:function(e){var t=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",(function(n){return e.collect(n,t.qi)}))}}]),e}();function Yh(e,t,n,r){return new Qh(e,t,n,r)}function $h(e,t){return Xh.apply(this,arguments)}function Xh(){return Xh=se(oe().mark((function e(t,n){var r;return oe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=eo(t),e.next=3,r.persistence.runTransaction("Handle user change","readonly",(function(e){var t;return r.mutationQueue.getAllMutationBatches(e).next((function(i){return t=i,r.Qi(n),r.mutationQueue.getAllMutationBatches(e)})).next((function(n){var i,a=[],o=[],u=Oc(),s=k(t);try{for(s.s();!(i=s.n()).done;){var c=i.value;a.push(c.batchId);var l,f=k(c.mutations);try{for(f.s();!(l=f.n()).done;){var h=l.value;u=u.add(h.key)}}catch(b){f.e(b)}finally{f.f()}}}catch(b){s.e(b)}finally{s.f()}var d,p=k(n);try{for(p.s();!(d=p.n()).done;){var v=d.value;o.push(v.batchId);var y,m=k(v.mutations);try{for(m.s();!(y=m.n()).done;){var g=y.value;u=u.add(g.key)}}catch(b){m.e(b)}finally{m.f()}}}catch(b){p.e(b)}finally{p.f()}return r.localDocuments.getDocuments(e,u).next((function(e){return{ji:e,removedBatchIds:a,addedBatchIds:o}}))}))}));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)}))),Xh.apply(this,arguments)}function Jh(e,t){var n=eo(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(function(e){var r=t.batch.keys(),i=n.Gi.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){var i=n.batch,a=i.keys(),o=Uo.resolve();return a.forEach((function(e){o=o.next((function(){return r.getEntry(t,e)})).next((function(t){var a=n.docVersions.get(e);Za(null!==a),t.version.compareTo(a)<0&&(i.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))}))})),o.next((function(){return e.mutationQueue.removeMutationBatch(t,i)}))}(n,e,t,i).next((function(){return i.apply(e)})).next((function(){return n.mutationQueue.performConsistencyCheck(e)})).next((function(){return n.documentOverlayCache.removeOverlaysForBatchId(e,r,t.batch.batchId)})).next((function(){return n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){for(var t=Oc(),n=0;n<e.mutationResults.length;++n)e.mutationResults[n].transformResults.length>0&&(t=t.add(e.batch.mutations[n].key));return t}(t))})).next((function(){return n.localDocuments.getDocuments(e,r)}))}))}function Zh(e){var t=eo(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(function(e){return t.Cs.getLastRemoteSnapshotVersion(e)}))}function ed(e,t){var n=eo(e),r=t.snapshotVersion,i=n.qi;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(function(e){var a=n.Gi.newChangeBuffer({trackRemovals:!0});i=n.qi;var o=[];t.targetChanges.forEach((function(a,u){var s=i.get(u);if(s){o.push(n.Cs.removeMatchingKeys(e,a.removedDocuments,u).next((function(){return n.Cs.addMatchingKeys(e,a.addedDocuments,u)})));var c=s.withSequenceNumber(e.currentSequenceNumber);t.targetMismatches.has(u)?c=c.withResumeToken(au.EMPTY_BYTE_STRING,ko.min()).withLastLimboFreeSnapshotVersion(ko.min()):a.resumeToken.approximateByteSize()>0&&(c=c.withResumeToken(a.resumeToken,r)),i=i.insert(u,c),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||(t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0)}(s,c,a)&&o.push(n.Cs.updateTargetData(e,c))}}));var u=Sc(),s=Oc();if(t.documentUpdates.forEach((function(r){t.resolvedLimboDocuments.has(r)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))})),o.push(td(e,a,t.documentUpdates).next((function(e){u=e.Wi,s=e.zi}))),!r.isEqual(ko.min())){var c=n.Cs.getLastRemoteSnapshotVersion(e).next((function(t){return n.Cs.setTargetsMetadata(e,e.currentSequenceNumber,r)}));o.push(c)}return Uo.waitFor(o).next((function(){return a.apply(e)})).next((function(){return n.localDocuments.getLocalViewOfDocuments(e,u,s)})).next((function(){return u}))})).then((function(e){return n.qi=i,e}))}function td(e,t,n){var r=Oc(),i=Oc();return n.forEach((function(e){return r=r.add(e)})),t.getEntries(e,r).next((function(e){var r=Sc();return n.forEach((function(n,a){var o=e.get(n);a.isFoundDocument()!==o.isFoundDocument()&&(i=i.add(n)),a.isNoDocument()&&a.version.isEqual(ko.min())?(t.removeEntry(n,a.readTime),r=r.insert(n,a)):!o.isValidDocument()||a.version.compareTo(o.version)>0||0===a.version.compareTo(o.version)&&o.hasPendingWrites?(t.addEntry(a),r=r.insert(n,a)):Qa("LocalStore","Ignoring outdated watch update for ",n,". Current version:",o.version," Watch version:",a.version)})),{Wi:r,zi:i}}))}function nd(e,t){var n=eo(e);return n.persistence.runTransaction("Get next mutation batch","readonly",(function(e){return void 0===t&&(t=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(e,t)}))}function rd(e,t){var n=eo(e);return n.persistence.runTransaction("Allocate target","readwrite",(function(e){var r;return n.Cs.getTargetData(e,t).next((function(i){return i?(r=i,Uo.resolve(r)):n.Cs.allocateTargetId(e).next((function(i){return r=new rf(t,i,0,e.currentSequenceNumber),n.Cs.addTargetData(e,r).next((function(){return r}))}))}))})).then((function(e){var r=n.qi.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.qi=n.qi.insert(e.targetId,e),n.Ui.set(t,e.targetId)),e}))}function id(e,t,n){return ad.apply(this,arguments)}function ad(){return ad=se(oe().mark((function e(t,n,r){var i,a,o;return oe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=eo(t),a=i.qi.get(n),o=r?"readwrite":"readwrite-primary",e.prev=1,e.t0=r,e.t0){e.next=6;break}return e.next=6,i.persistence.runTransaction("Release target",o,(function(e){return i.persistence.referenceDelegate.removeTarget(e,a)}));case 6:e.next=13;break;case 8:if(e.prev=8,e.t1=e.catch(1),zo(e.t1)){e.next=12;break}throw e.t1;case 12:Qa("LocalStore","Failed to update sequence numbers for target ".concat(n,": ").concat(e.t1));case 13:i.qi=i.qi.remove(n),i.Ui.delete(a.target);case 14:case"end":return e.stop()}}),e,null,[[1,8]])}))),ad.apply(this,arguments)}function od(e,t,n){var r=eo(e),i=ko.min(),a=Oc();return r.persistence.runTransaction("Execute query","readonly",(function(e){return function(e,t,n){var r=eo(e),i=r.Ui.get(n);return void 0!==i?Uo.resolve(r.qi.get(i)):r.Cs.getTargetData(t,n)}(r,e,As(t)).next((function(t){if(t)return i=t.lastLimboFreeSnapshotVersion,r.Cs.getMatchingKeysForTargetId(e,t.targetId).next((function(e){a=e}))})).next((function(){return r.Li.getDocumentsMatchingQuery(e,t,n?i:ko.min(),n?a:Oc())})).next((function(e){return cd(r,Fs(t),e),{documents:e,Hi:a}}))}))}function ud(e,t){var n=eo(e),r=eo(n.Cs),i=n.qi.get(t);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",(function(e){return r.ne(e,t).next((function(e){return e?e.target:null}))}))}function sd(e,t){var n=eo(e),r=n.Ki.get(t)||ko.min();return n.persistence.runTransaction("Get new document changes","readonly",(function(e){return n.Gi.getAllFromCollectionGroup(e,t,Ao(r,-1),Number.MAX_SAFE_INTEGER)})).then((function(e){return cd(n,t,e),e}))}function cd(e,t,n){var r=e.Ki.get(t)||ko.min();n.forEach((function(e,t){t.readTime.compareTo(r)>0&&(r=t.readTime)})),e.Ki.set(t,r)}function ld(e,t,n,r){return fd.apply(this,arguments)}function fd(){return fd=se(oe().mark((function e(t,n,r,i){var a,o,u,s,c,l,f,h,d,p;return oe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=eo(t),o=Oc(),u=Sc(),s=k(r);try{for(s.s();!(c=s.n()).done;)l=c.value,f=n.Ji(l.metadata.name),l.document&&(o=o.add(f)),(h=n.Yi(l)).setReadTime(n.Xi(l.metadata.readTime)),u=u.insert(f,h)}catch(v){s.e(v)}finally{s.f()}return d=a.Gi.newChangeBuffer({trackRemovals:!0}),e.next=7,rd(a,function(e){return As(Is(wo.fromString("__bundle__/docs/".concat(e))))}(i));case 7:return p=e.sent,e.abrupt("return",a.persistence.runTransaction("Apply bundle documents","readwrite",(function(e){return td(e,d,u).next((function(t){return d.apply(e),t})).next((function(t){return a.Cs.removeMatchingKeysForTargetId(e,p.targetId).next((function(){return a.Cs.addMatchingKeys(e,o,p.targetId)})).next((function(){return a.localDocuments.getLocalViewOfDocuments(e,t.Wi,t.zi)})).next((function(){return t.Wi}))}))})));case 9:case"end":return e.stop()}}),e)}))),fd.apply(this,arguments)}function hd(e,t){return dd.apply(this,arguments)}function dd(){return dd=se(oe().mark((function e(t,n){var r,i,a,o=arguments;return oe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.length>2&&void 0!==o[2]?o[2]:Oc(),e.next=3,rd(t,As(df(n.bundledQuery)));case 3:return i=e.sent,a=eo(t),e.abrupt("return",a.persistence.runTransaction("Save named query","readwrite",(function(e){var t=Zc(n.readTime);if(i.snapshotVersion.compareTo(t)>=0)return a.Ns.saveNamedQuery(e,n);var o=i.withResumeToken(au.EMPTY_BYTE_STRING,t);return a.qi=a.qi.insert(o.targetId,o),a.Cs.updateTargetData(e,o).next((function(){return a.Cs.removeMatchingKeysForTargetId(e,i.targetId)})).next((function(){return a.Cs.addMatchingKeys(e,r,i.targetId)})).next((function(){return a.Ns.saveNamedQuery(e,n)}))})));case 6:case"end":return e.stop()}}),e)}))),dd.apply(this,arguments)}function pd(e,t){return"firestore_clients_".concat(e,"_").concat(t)}function vd(e,t,n){var r="firestore_mutations_".concat(e,"_").concat(n);return t.isAuthenticated()&&(r+="_".concat(t.uid)),r}function yd(e,t){return"firestore_targets_".concat(e,"_").concat(t)}var md=function(){function e(t,n,r,i){y(this,e),this.user=t,this.batchId=n,this.state=r,this.error=i}return g(e,[{key:"tr",value:function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}],[{key:"Zi",value:function(t,n,r){var i,a=JSON.parse(r),o="object"==typeof a&&-1!==["pending","acknowledged","rejected"].indexOf(a.state)&&(void 0===a.error||"object"==typeof a.error);return o&&a.error&&((o="string"==typeof a.error.message&&"string"==typeof a.error.code)&&(i=new no(a.error.code,a.error.message))),o?new e(t,n,a.state,i):(Ya("SharedClientState","Failed to parse mutation state for ID '".concat(n,"': ").concat(r)),null)}}]),e}(),gd=function(){function e(t,n,r){y(this,e),this.targetId=t,this.state=n,this.error=r}return g(e,[{key:"tr",value:function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}],[{key:"Zi",value:function(t,n){var r,i=JSON.parse(n),a="object"==typeof i&&-1!==["not-current","current","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return a&&i.error&&((a="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(r=new no(i.error.code,i.error.message))),a?new e(t,i.state,r):(Ya("SharedClientState","Failed to parse target state for ID '".concat(t,"': ").concat(n)),null)}}]),e}(),kd=function(){function e(t,n){y(this,e),this.clientId=t,this.activeTargetIds=n}return g(e,null,[{key:"Zi",value:function(t,n){for(var r=JSON.parse(n),i="object"==typeof r&&r.activeTargetIds instanceof Array,a=Mc(),o=0;i&&o<r.activeTargetIds.length;++o)i=iu(r.activeTargetIds[o]),a=a.add(r.activeTargetIds[o]);return i?new e(t,a):(Ya("SharedClientState","Failed to parse client data for instance '".concat(t,"': ").concat(n)),null)}}]),e}(),bd=function(){function e(t,n){y(this,e),this.clientId=t,this.onlineState=n}return g(e,null,[{key:"Zi",value:function(t){var n=JSON.parse(t);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new e(n.clientId,n.onlineState):(Ya("SharedClientState","Failed to parse online state: ".concat(t)),null)}}]),e}(),wd=function(){function e(){y(this,e),this.activeTargetIds=Mc()}return g(e,[{key:"er",value:function(e){this.activeTargetIds=this.activeTargetIds.add(e)}},{key:"nr",value:function(e){this.activeTargetIds=this.activeTargetIds.delete(e)}},{key:"tr",value:function(){var e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}]),e}(),xd=function(){function e(t,n,r,i,a){y(this,e),this.window=t,this.Hs=n,this.persistenceKey=r,this.sr=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ir=this.rr.bind(this),this.ur=new is(vo),this.started=!1,this.cr=[];var o=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=a,this.ar=pd(this.persistenceKey,this.sr),this.hr=function(e){return"firestore_sequence_number_".concat(e)}(this.persistenceKey),this.ur=this.ur.insert(this.sr,new wd),this.lr=new RegExp("^firestore_clients_".concat(o,"_([^_]*)$")),this.dr=new RegExp("^firestore_mutations_".concat(o,"_(\\d+)(?:_(.*))?$")),this._r=new RegExp("^firestore_targets_".concat(o,"_(\\d+)$")),this.wr=function(e){return"firestore_online_state_".concat(e)}(this.persistenceKey),this.mr=function(e){return"firestore_bundle_loaded_v2_".concat(e)}(this.persistenceKey),this.window.addEventListener("storage",this.ir)}return g(e,[{key:"start",value:function(){var e=se(oe().mark((function e(){var t,n,r,i,a,o,u,s,c,l,f,h=this;return oe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.syncEngine.vi();case 2:t=e.sent,n=k(t),e.prev=4,n.s();case 6:if((r=n.n()).done){e.next=14;break}if((i=r.value)!==this.sr){e.next=10;break}return e.abrupt("continue",12);case 10:(a=this.getItem(pd(this.persistenceKey,i)))&&(o=kd.Zi(i,a))&&(this.ur=this.ur.insert(o.clientId,o));case 12:e.next=6;break;case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(4),n.e(e.t0);case 19:return e.prev=19,n.f(),e.finish(19);case 22:this.gr(),(u=this.storage.getItem(this.wr))&&(s=this.yr(u))&&this.pr(s),c=k(this.cr);try{for(c.s();!(l=c.n()).done;)f=l.value,this.rr(f)}catch(d){c.e(d)}finally{c.f()}this.cr=[],this.window.addEventListener("pagehide",(function(){return h.shutdown()})),this.started=!0;case 28:case"end":return e.stop()}}),e,this,[[4,16,19,22]])})));return function(){return e.apply(this,arguments)}}()},{key:"writeSequenceNumber",value:function(e){this.setItem(this.hr,JSON.stringify(e))}},{key:"getAllActiveQueryTargets",value:function(){return this.Ir(this.ur)}},{key:"isActiveQueryTarget",value:function(e){var t=!1;return this.ur.forEach((function(n,r){r.activeTargetIds.has(e)&&(t=!0)})),t}},{key:"addPendingMutation",value:function(e){this.Tr(e,"pending")}},{key:"updateMutationState",value:function(e,t,n){this.Tr(e,t,n),this.Er(e)}},{key:"addLocalQueryTarget",value:function(e){var t="not-current";if(this.isActiveQueryTarget(e)){var n=this.storage.getItem(yd(this.persistenceKey,e));if(n){var r=gd.Zi(e,n);r&&(t=r.state)}}return this.Ar.er(e),this.gr(),t}},{key:"removeLocalQueryTarget",value:function(e){this.Ar.nr(e),this.gr()}},{key:"isLocalQueryTarget",value:function(e){return this.Ar.activeTargetIds.has(e)}},{key:"clearQueryState",value:function(e){this.removeItem(yd(this.persistenceKey,e))}},{key:"updateQueryState",value:function(e,t,n){this.Rr(e,t,n)}},{key:"handleUserChange",value:function(e,t,n){var r=this;t.forEach((function(e){r.Er(e)})),this.currentUser=e,n.forEach((function(e){r.addPendingMutation(e)}))}},{key:"setOnlineState",value:function(e){this.br(e)}},{key:"notifyBundleLoaded",value:function(e){this.Pr(e)}},{key:"shutdown",value:function(){this.started&&(this.window.removeEventListener("storage",this.ir),this.removeItem(this.ar),this.started=!1)}},{key:"getItem",value:function(e){var t=this.storage.getItem(e);return Qa("SharedClientState","READ",e,t),t}},{key:"setItem",value:function(e,t){Qa("SharedClientState","SET",e,t),this.storage.setItem(e,t)}},{key:"removeItem",value:function(e){Qa("SharedClientState","REMOVE",e),this.storage.removeItem(e)}},{key:"rr",value:function(e){var t=this,n=e;if(n.storageArea===this.storage){if(Qa("SharedClientState","EVENT",n.key,n.newValue),n.key===this.ar)return void Ya("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Hs.enqueueRetryable(se(oe().mark((function e(){var r,i,a,o,u,s,c;return oe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.started){e.next=43;break}if(null===n.key){e.next=41;break}if(!t.lr.test(n.key)){e.next=11;break}if(null!=n.newValue){e.next=6;break}return r=t.vr(n.key),e.abrupt("return",t.Vr(r,null));case 6:if(!(i=t.Sr(n.key,n.newValue))){e.next=9;break}return e.abrupt("return",t.Vr(i.clientId,i));case 9:e.next=41;break;case 11:if(!t.dr.test(n.key)){e.next=18;break}if(null===n.newValue){e.next=16;break}if(!(a=t.Dr(n.key,n.newValue))){e.next=16;break}return e.abrupt("return",t.Cr(a));case 16:e.next=41;break;case 18:if(!t._r.test(n.key)){e.next=25;break}if(null===n.newValue){e.next=23;break}if(!(o=t.Nr(n.key,n.newValue))){e.next=23;break}return e.abrupt("return",t.kr(o));case 23:e.next=41;break;case 25:if(n.key!==t.wr){e.next=32;break}if(null===n.newValue){e.next=30;break}if(!(u=t.yr(n.newValue))){e.next=30;break}return e.abrupt("return",t.pr(u));case 30:e.next=41;break;case 32:if(n.key!==t.hr){e.next=37;break}s=function(e){var t=$o.at;if(null!=e)try{var n=JSON.parse(e);Za("number"==typeof n),t=n}catch(e){Ya("SharedClientState","Failed to read sequence number from WebStorage",e)}return t}(n.newValue),s!==$o.at&&t.sequenceNumberHandler(s),e.next=41;break;case 37:if(n.key!==t.mr){e.next=41;break}return c=t.Or(n.newValue),e.next=41,Promise.all(c.map((function(e){return t.syncEngine.Mr(e)})));case 41:e.next=44;break;case 43:t.cr.push(n);case 44:case"end":return e.stop()}}),e)}))))}}},{key:"Ar",get:function(){return this.ur.get(this.sr)}},{key:"gr",value:function(){this.setItem(this.ar,this.Ar.tr())}},{key:"Tr",value:function(e,t,n){var r=new md(this.currentUser,e,t,n),i=vd(this.persistenceKey,this.currentUser,e);this.setItem(i,r.tr())}},{key:"Er",value:function(e){var t=vd(this.persistenceKey,this.currentUser,e);this.removeItem(t)}},{key:"br",value:function(e){var t={clientId:this.sr,onlineState:e};this.storage.setItem(this.wr,JSON.stringify(t))}},{key:"Rr",value:function(e,t,n){var r=yd(this.persistenceKey,e),i=new gd(e,t,n);this.setItem(r,i.tr())}},{key:"Pr",value:function(e){var t=JSON.stringify(Array.from(e));this.setItem(this.mr,t)}},{key:"vr",value:function(e){var t=this.lr.exec(e);return t?t[1]:null}},{key:"Sr",value:function(e,t){var n=this.vr(e);return kd.Zi(n,t)}},{key:"Dr",value:function(e,t){var n=this.dr.exec(e),r=Number(n[1]),i=void 0!==n[2]?n[2]:null;return md.Zi(new Ka(i),r,t)}},{key:"Nr",value:function(e,t){var n=this._r.exec(e),r=Number(n[1]);return gd.Zi(r,t)}},{key:"yr",value:function(e){return bd.Zi(e)}},{key:"Or",value:function(e){return JSON.parse(e)}},{key:"Cr",value:function(){var e=se(oe().mark((function e(t){return oe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.user.uid!==this.currentUser.uid){e.next=2;break}return e.abrupt("return",this.syncEngine.Fr(t.batchId,t.state,t.error));case 2:Qa("SharedClientState","Ignoring mutation for non-active user ".concat(t.user.uid));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"kr",value:function(e){return this.syncEngine.$r(e.targetId,e.state,e.error)}},{key:"Vr",value:function(e,t){var n=this,r=t?this.ur.insert(e,t):this.ur.remove(e),i=this.Ir(this.ur),a=this.Ir(r),o=[],u=[];return a.forEach((function(e){i.has(e)||o.push(e)})),i.forEach((function(e){a.has(e)||u.push(e)})),this.syncEngine.Br(o,u).then((function(){n.ur=r}))}},{key:"pr",value:function(e){this.ur.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}},{key:"Ir",value:function(e){var t=Mc();return e.forEach((function(e,n){t=t.unionWith(n.activeTargetIds)})),t}}],[{key:"C",value:function(e){return!(!e||!e.localStorage)}}]),e}(),_d=function(){function e(){y(this,e),this.Lr=new wd,this.qr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}return g(e,[{key:"addPendingMutation",value:function(e){}},{key:"updateMutationState",value:function(e,t,n){}},{key:"addLocalQueryTarget",value:function(e){return this.Lr.er(e),this.qr[e]||"not-current"}},{key:"updateQueryState",value:function(e,t,n){this.qr[e]=t}},{key:"removeLocalQueryTarget",value:function(e){this.Lr.nr(e)}},{key:"isLocalQueryTarget",value:function(e){return this.Lr.activeTargetIds.has(e)}},{key:"clearQueryState",value:function(e){delete this.qr[e]}},{key:"getAllActiveQueryTargets",value:function(){return this.Lr.activeTargetIds}},{key:"isActiveQueryTarget",value:function(e){return this.Lr.activeTargetIds.has(e)}},{key:"start",value:function(){return this.Lr=new wd,Promise.resolve()}},{key:"handleUserChange",value:function(e,t,n){}},{key:"setOnlineState",value:function(e){}},{key:"shutdown",value:function(){}},{key:"writeSequenceNumber",value:function(e){}},{key:"notifyBundleLoaded",value:function(e){}}]),e}(),Id=function(){function e(){y(this,e)}return g(e,[{key:"Ur",value:function(e){}},{key:"shutdown",value:function(){}}]),e}(),Sd=function(){function e(){var t=this;y(this,e),this.Kr=function(){return t.Gr()},this.Qr=function(){return t.jr()},this.Wr=[],this.zr()}return g(e,[{key:"Ur",value:function(e){this.Wr.push(e)}},{key:"shutdown",value:function(){window.removeEventListener("online",this.Kr),window.removeEventListener("offline",this.Qr)}},{key:"zr",value:function(){window.addEventListener("online",this.Kr),window.addEventListener("offline",this.Qr)}},{key:"Gr",value:function(){Qa("ConnectivityMonitor","Network connectivity changed: AVAILABLE");var e,t=k(this.Wr);try{for(t.s();!(e=t.n()).done;){(0,e.value)(0)}}catch(n){t.e(n)}finally{t.f()}}},{key:"jr",value:function(){Qa("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");var e,t=k(this.Wr);try{for(t.s();!(e=t.n()).done;){(0,e.value)(1)}}catch(n){t.e(n)}finally{t.f()}}}],[{key:"C",value:function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}]),e}(),Ed={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"},Td=function(){function e(t){y(this,e),this.Hr=t.Hr,this.Jr=t.Jr}return g(e,[{key:"Yr",value:function(e){this.Xr=e}},{key:"Zr",value:function(e){this.eo=e}},{key:"onMessage",value:function(e){this.no=e}},{key:"close",value:function(){this.Jr()}},{key:"send",value:function(e){this.Hr(e)}},{key:"so",value:function(){this.Xr()}},{key:"io",value:function(e){this.eo(e)}},{key:"ro",value:function(e){this.no(e)}}]),e}(),Cd=function(e){x(n,e);var t=T(n);function n(e){var r;return y(this,n),(r=t.call(this,e)).forceLongPolling=e.forceLongPolling,r.autoDetectLongPolling=e.autoDetectLongPolling,r.useFetchStreams=e.useFetchStreams,r}return g(n,[{key:"fo",value:function(e,t,n,r){return new Promise((function(i,a){var o=new qa;o.setWithCredentials(!0),o.listenOnce(Fa.COMPLETE,(function(){try{switch(o.getLastErrorCode()){case Ma.NO_ERROR:var t=o.getResponseJson();Qa("Connection","XHR received:",JSON.stringify(t)),i(t);break;case Ma.TIMEOUT:Qa("Connection",'RPC "'+e+'" timed out'),a(new no(to.DEADLINE_EXCEEDED,"Request time out"));break;case Ma.HTTP_ERROR:var n=o.getStatus();if(Qa("Connection",'RPC "'+e+'" failed with status:',n,"response text:",o.getResponseText()),n>0){var r=o.getResponseJson();Array.isArray(r)&&(r=r[0]);var u=null==r?void 0:r.error;if(u&&u.status&&u.message){var s=function(e){var t=e.toLowerCase().replace(/_/g,"-");return Object.values(to).indexOf(t)>=0?t:to.UNKNOWN}(u.status);a(new no(s,u.message))}else a(new no(to.UNKNOWN,"Server responded with status "+o.getStatus()))}else a(new no(to.UNAVAILABLE,"Connection failed."));break;default:Ja()}}finally{Qa("Connection",'RPC "'+e+'" completed.')}}));var u=JSON.stringify(r);o.send(t,"POST",u,n,15)}))}},{key:"wo",value:function(e,t,n){var r=[this.oo,"/","google.firestore.v1.Firestore","/",e,"/channel"],i=Oa(),a=La(),o={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/".concat(this.databaseId.projectId,"/databases/").concat(this.databaseId.database)},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(o.xmlHttpFactory=new ja({})),this.lo(o.initMessageHeaders,t,n),o.encodeInitMessageHeaders=!0;var u=r.join("");Qa("Connection","Creating WebChannel: "+u,o);var s=i.createWebChannel(u,o),c=!1,l=!1,f=new Td({Hr:function(e){l?Qa("Connection","Not sending because WebChannel is closed:",e):(c||(Qa("Connection","Opening WebChannel transport."),s.open(),c=!0),Qa("Connection","WebChannel sending:",e),s.send(e))},Jr:function(){return s.close()}}),h=function(e,t,n){e.listen(t,(function(e){try{n(e)}catch(e){setTimeout((function(){throw e}),0)}}))};return h(s,Ba.EventType.OPEN,(function(){l||Qa("Connection","WebChannel transport opened.")})),h(s,Ba.EventType.CLOSE,(function(){l||(l=!0,Qa("Connection","WebChannel transport closed"),f.io())})),h(s,Ba.EventType.ERROR,(function(e){l||(l=!0,$a("Connection","WebChannel transport errored:",e),f.io(new no(to.UNAVAILABLE,"The operation could not be completed")))})),h(s,Ba.EventType.MESSAGE,(function(e){var t;if(!l){var n=e.data[0];Za(!!n);var r=n,i=r.error||(null===(t=r[0])||void 0===t?void 0:t.error);if(i){Qa("Connection","WebChannel received error:",i);var a=i.status,o=function(e){var t=yc[e];if(void 0!==t)return xc(t)}(a),u=i.message;void 0===o&&(o=to.INTERNAL,u="Unknown error status: "+a+" with message "+i.message),l=!0,f.io(new no(o,u)),s.close()}else Qa("Connection","WebChannel received:",n),f.ro(n)}})),h(a,Ua.STAT_EVENT,(function(e){e.stat===Va.PROXY?Qa("Connection","Detected buffering proxy"):e.stat===Va.NOPROXY&&Qa("Connection","Detected no buffering proxy")})),setTimeout((function(){f.so()}),0),f}}]),n}(function(){function e(t){y(this,e),this.databaseInfo=t,this.databaseId=t.databaseId;var n=t.ssl?"https":"http";this.oo=n+"://"+t.host,this.uo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}return g(e,[{key:"co",get:function(){return!1}},{key:"ao",value:function(e,t,n,r,i){var a=this.ho(e,t);Qa("RestConnection","Sending: ",a,n);var o={};return this.lo(o,r,i),this.fo(e,a,o,n).then((function(e){return Qa("RestConnection","Received: ",e),e}),(function(t){throw $a("RestConnection","".concat(e," failed with error: "),t,"url: ",a,"request:",n),t}))}},{key:"_o",value:function(e,t,n,r,i,a){return this.ao(e,t,n,r,i)}},{key:"lo",value:function(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+Ga,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((function(t,n){return e[n]=t})),n&&n.headers.forEach((function(t,n){return e[n]=t}))}},{key:"ho",value:function(e,t){var n=Ed[e];return"".concat(this.oo,"/v1/").concat(t,":").concat(n)}}]),e}());function Nd(){return"undefined"!=typeof window?window:null}function Ad(){return"undefined"!=typeof document?document:null}function Dd(e){return new Yc(e,!0)}var Rd=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;y(this,e),this.Hs=t,this.timerId=n,this.mo=r,this.yo=i,this.po=a,this.Io=0,this.To=null,this.Eo=Date.now(),this.reset()}return g(e,[{key:"reset",value:function(){this.Io=0}},{key:"Ao",value:function(){this.Io=this.po}},{key:"Ro",value:function(e){var t=this;this.cancel();var n=Math.floor(this.Io+this.bo()),r=Math.max(0,Date.now()-this.Eo),i=Math.max(0,n-r);i>0&&Qa("ExponentialBackoff","Backing off for ".concat(i," ms (base delay: ").concat(this.Io," ms, delay with jitter: ").concat(n," ms, last attempt: ").concat(r," ms ago)")),this.To=this.Hs.enqueueAfterDelay(this.timerId,i,(function(){return t.Eo=Date.now(),e()})),this.Io*=this.yo,this.Io<this.mo&&(this.Io=this.mo),this.Io>this.po&&(this.Io=this.po)}},{key:"Po",value:function(){null!==this.To&&(this.To.skipDelay(),this.To=null)}},{key:"cancel",value:function(){null!==this.To&&(this.To.cancel(),this.To=null)}},{key:"bo",value:function(){return(Math.random()-.5)*this.Io}}]),e}(),Pd=function(){function e(t,n,r,i,a,o,u,s){y(this,e),this.Hs=t,this.vo=r,this.Vo=i,this.connection=a,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=u,this.listener=s,this.state=0,this.So=0,this.Do=null,this.Co=null,this.stream=null,this.xo=new Rd(t,n)}return g(e,[{key:"No",value:function(){return 1===this.state||5===this.state||this.ko()}},{key:"ko",value:function(){return 2===this.state||3===this.state}},{key:"start",value:function(){4!==this.state?this.auth():this.Oo()}},{key:"stop",value:function(){var e=se(oe().mark((function e(){return oe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.No(),!e.t0){e.next=4;break}return e.next=4,this.close(0);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Mo",value:function(){this.state=0,this.xo.reset()}},{key:"Fo",value:function(){var e=this;this.ko()&&null===this.Do&&(this.Do=this.Hs.enqueueAfterDelay(this.vo,6e4,(function(){return e.$o()})))}},{key:"Bo",value:function(e){this.Lo(),this.stream.send(e)}},{key:"$o",value:function(){var e=se(oe().mark((function e(){return oe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.ko()){e.next=2;break}return e.abrupt("return",this.close(0));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Lo",value:function(){this.Do&&(this.Do.cancel(),this.Do=null)}},{key:"qo",value:function(){this.Co&&(this.Co.cancel(),this.Co=null)}},{key:"close",value:function(){var e=se(oe().mark((function e(t,n){return oe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.Lo(),this.qo(),this.xo.cancel(),this.So++,4!==t?this.xo.reset():n&&n.code===to.RESOURCE_EXHAUSTED?(Ya(n.toString()),Ya("Using maximum backoff delay to prevent overloading the backend."),this.xo.Ao()):n&&n.code===to.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.Uo(),this.stream.close(),this.stream=null),this.state=t,e.next=9,this.listener.Zr(n);case 9:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"Uo",value:function(){}},{key:"auth",value:function(){var e=this;this.state=1;var t=this.Ko(this.So),n=this.So;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((function(t){var r=s(t,2),i=r[0],a=r[1];e.So===n&&e.Go(i,a)}),(function(n){t((function(){var t=new no(to.UNKNOWN,"Fetching auth token failed: "+n.message);return e.Qo(t)}))}))}},{key:"Go",value:function(e,t){var n=this,r=this.Ko(this.So);this.stream=this.jo(e,t),this.stream.Yr((function(){r((function(){return n.state=2,n.Co=n.Hs.enqueueAfterDelay(n.Vo,1e4,(function(){return n.ko()&&(n.state=3),Promise.resolve()})),n.listener.Yr()}))})),this.stream.Zr((function(e){r((function(){return n.Qo(e)}))})),this.stream.onMessage((function(e){r((function(){return n.onMessage(e)}))}))}},{key:"Oo",value:function(){var e=this;this.state=5,this.xo.Ro(se(oe().mark((function t(){return oe().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.state=0,e.start();case 1:case"end":return t.stop()}}),t)}))))}},{key:"Qo",value:function(e){return Qa("PersistentStream","close with error: ".concat(e)),this.stream=null,this.close(4,e)}},{key:"Ko",value:function(e){var t=this;return function(n){t.Hs.enqueueAndForget((function(){return t.So===e?n():(Qa("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())}))}}}]),e}(),Od=function(e){x(n,e);var t=T(n);function n(e,r,i,a,o,u){var s;return y(this,n),(s=t.call(this,e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",r,i,a,u)).yt=o,s}return g(n,[{key:"jo",value:function(e,t){return this.connection.wo("Listen",e,t)}},{key:"onMessage",value:function(e){this.xo.reset();var t=function(e,t){var n;if("targetChange"in t){t.targetChange;var r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:Ja()}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],a=function(e,t){return e.wt?(Za(void 0===t||"string"==typeof t),au.fromBase64String(t||"")):(Za(void 0===t||t instanceof Uint8Array),au.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,u=o&&function(e){var t=void 0===e.code?to.UNKNOWN:xc(e.code);return new no(t,e.message||"")}(o);n=new Bc(r,i,a,u||null)}else if("documentChange"in t){t.documentChange;var s=t.documentChange;s.document,s.document.name,s.document.updateTime;var c=rl(e,s.document.name),l=Zc(s.document.updateTime),f=s.document.createTime?Zc(s.document.createTime):ko.min(),h=new fs({mapValue:{fields:s.document.fields}}),d=ds.newFoundDocument(c,l,f,h),p=s.targetIds||[],v=s.removedTargetIds||[];n=new Vc(p,v,d.key,d)}else if("documentDelete"in t){t.documentDelete;var y=t.documentDelete;y.document;var m=rl(e,y.document),g=y.readTime?Zc(y.readTime):ko.min(),k=ds.newNoDocument(m,g),b=y.removedTargetIds||[];n=new Vc([],b,k.key,k)}else if("documentRemove"in t){t.documentRemove;var w=t.documentRemove;w.document;var x=rl(e,w.document),_=w.removedTargetIds||[];n=new Vc([],_,x,null)}else{if(!("filter"in t))return Ja();t.filter;var I=t.filter;I.targetId;var S=I.count||0,E=new bc(S),T=I.targetId;n=new jc(T,E)}return n}(this.yt,e),n=function(e){if(!("targetChange"in e))return ko.min();var t=e.targetChange;return t.targetIds&&t.targetIds.length?ko.min():t.readTime?Zc(t.readTime):ko.min()}(e);return this.listener.Wo(t,n)}},{key:"zo",value:function(e){var t={};t.database=ol(this.yt),t.addTarget=function(e,t){var n,r=t.target;return(n=gs(r)?{documents:dl(e,r)}:{query:pl(e,r)}).targetId=t.targetId,t.resumeToken.approximateByteSize()>0?n.resumeToken=Xc(e,t.resumeToken):t.snapshotVersion.compareTo(ko.min())>0&&(n.readTime=$c(e,t.snapshotVersion.toTimestamp())),n}(this.yt,e);var n=function(e,t){var n=function(e,t){switch(t){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return Ja()}}(0,t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.yt,e);n&&(t.labels=n),this.Bo(t)}},{key:"Ho",value:function(e){var t={};t.database=ol(this.yt),t.removeTarget=e,this.Bo(t)}}]),n}(Pd),Ld=function(e){x(n,e);var t=T(n);function n(e,r,i,a,o,u){var s;return y(this,n),(s=t.call(this,e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",r,i,a,u)).yt=o,s.Jo=!1,s}return g(n,[{key:"Yo",get:function(){return this.Jo}},{key:"start",value:function(){this.Jo=!1,this.lastStreamToken=void 0,Ft(_(n.prototype),"start",this).call(this)}},{key:"Uo",value:function(){this.Jo&&this.Xo([])}},{key:"jo",value:function(e,t){return this.connection.wo("Write",e,t)}},{key:"onMessage",value:function(e){if(Za(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Jo){this.xo.reset();var t=function(e,t){return e&&e.length>0?(Za(void 0!==t),e.map((function(e){return function(e,t){var n=e.updateTime?Zc(e.updateTime):Zc(t);return n.isEqual(ko.min())&&(n=Zc(t)),new nc(n,e.transformResults||[])}(e,t)}))):[]}(e.writeResults,e.commitTime),n=Zc(e.commitTime);return this.listener.Zo(n,t)}return Za(!e.writeResults||0===e.writeResults.length),this.Jo=!0,this.listener.tu()}},{key:"eu",value:function(){var e={};e.database=ol(this.yt),this.Bo(e)}},{key:"Xo",value:function(e){var t=this,n={streamToken:this.lastStreamToken,writes:e.map((function(e){return fl(t.yt,e)}))};this.Bo(n)}}]),n}(Pd),Md=function(e){x(n,e);var t=T(n);function n(e,r,i,a){var o;return y(this,n),(o=t.call(this)).authCredentials=e,o.appCheckCredentials=r,o.connection=i,o.yt=a,o.nu=!1,o}return g(n,[{key:"su",value:function(){if(this.nu)throw new no(to.FAILED_PRECONDITION,"The client has already been terminated.")}},{key:"ao",value:function(e,t,n){var r=this;return this.su(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((function(i){var a=s(i,2),o=a[0],u=a[1];return r.connection.ao(e,t,n,o,u)})).catch((function(e){throw"FirebaseError"===e.name?(e.code===to.UNAUTHENTICATED&&(r.authCredentials.invalidateToken(),r.appCheckCredentials.invalidateToken()),e):new no(to.UNKNOWN,e.toString())}))}},{key:"_o",value:function(e,t,n,r){var i=this;return this.su(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((function(a){var o=s(a,2),u=o[0],c=o[1];return i.connection._o(e,t,n,u,c,r)})).catch((function(e){throw"FirebaseError"===e.name?(e.code===to.UNAUTHENTICATED&&(i.authCredentials.invalidateToken(),i.appCheckCredentials.invalidateToken()),e):new no(to.UNKNOWN,e.toString())}))}},{key:"terminate",value:function(){this.nu=!0}}]),n}(function(){return g((function e(){y(this,e)}))}());var Fd=function(){function e(t,n){y(this,e),this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this.iu=0,this.ru=null,this.ou=!0}return g(e,[{key:"uu",value:function(){var e=this;0===this.iu&&(this.cu("Unknown"),this.ru=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(function(){return e.ru=null,e.au("Backend didn't respond within 10 seconds."),e.cu("Offline"),Promise.resolve()})))}},{key:"hu",value:function(e){"Online"===this.state?this.cu("Unknown"):(this.iu++,this.iu>=1&&(this.lu(),this.au("Connection failed 1 times. Most recent error: ".concat(e.toString())),this.cu("Offline")))}},{key:"set",value:function(e){this.lu(),this.iu=0,"Online"===e&&(this.ou=!1),this.cu(e)}},{key:"cu",value:function(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}},{key:"au",value:function(e){var t="Could not reach Cloud Firestore backend. ".concat(e,"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.");this.ou?(Ya(t),this.ou=!1):Qa("OnlineStateTracker",t)}},{key:"lu",value:function(){null!==this.ru&&(this.ru.cancel(),this.ru=null)}}]),e}(),Ud=g((function e(t,n,r,i,a){var o=this;y(this,e),this.localStore=t,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.fu=[],this.du=new Map,this._u=new Set,this.wu=[],this.mu=a,this.mu.Ur((function(e){r.enqueueAndForget(se(oe().mark((function e(){return oe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=Yd(o),!e.t0){e.next=5;break}return Qa("RemoteStore","Restarting streams for network reachability change."),e.next=5,function(){var e=se(oe().mark((function e(t){var n;return oe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=eo(t))._u.add(4),e.next=4,Bd(n);case 4:return n.gu.set("Unknown"),n._u.delete(4),e.next=8,Vd(n);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(o);case 5:case"end":return e.stop()}}),e)}))))})),this.gu=new Fd(r,i)}));function Vd(e){return jd.apply(this,arguments)}function jd(){return jd=se(oe().mark((function e(t){var n,r,i;return oe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!Yd(t)){e.next=18;break}n=k(t.wu),e.prev=2,n.s();case 4:if((r=n.n()).done){e.next=10;break}return i=r.value,e.next=8,i(!0);case 8:e.next=4;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),n.e(e.t0);case 15:return e.prev=15,n.f(),e.finish(15);case 18:case"end":return e.stop()}}),e,null,[[2,12,15,18]])}))),jd.apply(this,arguments)}function Bd(e){return qd.apply(this,arguments)}function qd(){return qd=se(oe().mark((function e(t){var n,r,i;return oe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=k(t.wu),e.prev=1,n.s();case 3:if((r=n.n()).done){e.next=9;break}return i=r.value,e.next=7,i(!1);case 7:e.next=3;break;case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),n.e(e.t0);case 14:return e.prev=14,n.f(),e.finish(14);case 17:case"end":return e.stop()}}),e,null,[[1,11,14,17]])}))),qd.apply(this,arguments)}function zd(e,t){var n=eo(e);n.du.has(t.targetId)||(n.du.set(t.targetId,t),Qd(n)?Hd(n):Ip(n).ko()&&Gd(n,t))}function Kd(e,t){var n=eo(e),r=Ip(n);n.du.delete(t),r.ko()&&Wd(n,t),0===n.du.size&&(r.ko()?r.Fo():Yd(n)&&n.gu.set("Unknown"))}function Gd(e,t){e.yu.Ot(t.targetId),Ip(e).zo(t)}function Wd(e,t){e.yu.Ot(t),Ip(e).Ho(t)}function Hd(e){e.yu=new zc({getRemoteKeysForTarget:function(t){return e.remoteSyncer.getRemoteKeysForTarget(t)},ne:function(t){return e.du.get(t)||null}}),Ip(e).start(),e.gu.uu()}function Qd(e){return Yd(e)&&!Ip(e).No()&&e.du.size>0}function Yd(e){return 0===eo(e)._u.size}function $d(e){e.yu=void 0}function Xd(e){return Jd.apply(this,arguments)}function Jd(){return Jd=se(oe().mark((function e(t){return oe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.du.forEach((function(e,n){Gd(t,e)}));case 1:case"end":return e.stop()}}),e)}))),Jd.apply(this,arguments)}function Zd(e,t){return ep.apply(this,arguments)}function ep(){return ep=se(oe().mark((function e(t,n){return oe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:$d(t),Qd(t)?(t.gu.hu(n),Hd(t)):t.gu.set("Unknown");case 1:case"end":return e.stop()}}),e)}))),ep.apply(this,arguments)}function tp(e,t,n){return np.apply(this,arguments)}function np(){return np=se(oe().mark((function e(t,n,r){var i;return oe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.gu.set("Online"),!(n instanceof Bc&&2===n.state&&n.cause)){e.next=13;break}return e.prev=1,e.next=4,function(){var e=se(oe().mark((function e(t,n){var r,i,a,o;return oe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=n.cause,i=k(n.targetIds),e.prev=2,i.s();case 4:if((a=i.n()).done){e.next=14;break}if(o=a.value,e.t0=t.du.has(o),!e.t0){e.next=12;break}return e.next=10,t.remoteSyncer.rejectListen(o,r);case 10:t.du.delete(o),t.yu.removeTarget(o);case 12:e.next=4;break;case 14:e.next=19;break;case 16:e.prev=16,e.t1=e.catch(2),i.e(e.t1);case 19:return e.prev=19,i.f(),e.finish(19);case 22:case"end":return e.stop()}}),e,null,[[2,16,19,22]])})));return function(t,n){return e.apply(this,arguments)}}()(t,n);case 4:e.next=11;break;case 6:return e.prev=6,e.t0=e.catch(1),Qa("RemoteStore","Failed to remove targets %s: %s ",n.targetIds.join(","),e.t0),e.next=11,rp(t,e.t0);case 11:case 22:e.next=29;break;case 13:if(n instanceof Vc?t.yu.Kt(n):n instanceof jc?t.yu.Jt(n):t.yu.jt(n),r.isEqual(ko.min())){e.next=29;break}return e.prev=14,e.next=17,Zh(t.localStore);case 17:if(i=e.sent,e.t1=r.compareTo(i)>=0,!e.t1){e.next=22;break}return e.next=22,function(e,t){var n=e.yu.Zt(t);return n.targetChanges.forEach((function(n,r){if(n.resumeToken.approximateByteSize()>0){var i=e.du.get(r);i&&e.du.set(r,i.withResumeToken(n.resumeToken,t))}})),n.targetMismatches.forEach((function(t){var n=e.du.get(t);if(n){e.du.set(t,n.withResumeToken(au.EMPTY_BYTE_STRING,n.snapshotVersion)),Wd(e,t);var r=new rf(n.target,t,1,n.sequenceNumber);Gd(e,r)}})),e.remoteSyncer.applyRemoteEvent(n)}(t,r);case 24:return e.prev=24,e.t2=e.catch(14),Qa("RemoteStore","Failed to raise snapshot:",e.t2),e.next=29,rp(t,e.t2);case 29:case"end":return e.stop()}}),e,null,[[1,6],[14,24]])}))),np.apply(this,arguments)}function rp(e,t,n){return ip.apply(this,arguments)}function ip(){return ip=se(oe().mark((function e(t,n,r){return oe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(zo(n)){e.next=2;break}throw n;case 2:return t._u.add(1),e.next=5,Bd(t);case 5:t.gu.set("Offline"),r||(r=function(){return Zh(t.localStore)}),t.asyncQueue.enqueueRetryable(se(oe().mark((function e(){return oe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Qa("RemoteStore","Retrying IndexedDB access"),e.next=3,r();case 3:return t._u.delete(1),e.next=6,Vd(t);case 6:case"end":return e.stop()}}),e)}))));case 8:case"end":return e.stop()}}),e)}))),ip.apply(this,arguments)}function ap(e,t){return t().catch((function(n){return rp(e,n,t)}))}function op(e){return up.apply(this,arguments)}function up(){return up=se(oe().mark((function e(t){var n,r,i,a;return oe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=eo(t),r=Sp(n),i=n.fu.length>0?n.fu[n.fu.length-1].batchId:-1;case 2:if(!sp(n)){e.next=19;break}return e.prev=3,e.next=6,nd(n.localStore,i);case 6:if(null!==(a=e.sent)){e.next=10;break}return 0===n.fu.length&&r.Fo(),e.abrupt("break",19);case 10:i=a.batchId,cp(n,a),e.next=17;break;case 13:return e.prev=13,e.t0=e.catch(3),e.next=17,rp(n,e.t0);case 17:e.next=2;break;case 19:lp(n)&&fp(n);case 20:case"end":return e.stop()}}),e,null,[[3,13]])}))),up.apply(this,arguments)}function sp(e){return Yd(e)&&e.fu.length<10}function cp(e,t){e.fu.push(t);var n=Sp(e);n.ko()&&n.Yo&&n.Xo(t.mutations)}function lp(e){return Yd(e)&&!Sp(e).No()&&e.fu.length>0}function fp(e){Sp(e).start()}function hp(e){return dp.apply(this,arguments)}function dp(){return dp=se(oe().mark((function e(t){return oe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Sp(t).eu();case 1:case"end":return e.stop()}}),e)}))),dp.apply(this,arguments)}function pp(e){return vp.apply(this,arguments)}function vp(){return vp=se(oe().mark((function e(t){var n,r,i,a;return oe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=Sp(t),r=k(t.fu);try{for(r.s();!(i=r.n()).done;)a=i.value,n.Xo(a.mutations)}catch(o){r.e(o)}finally{r.f()}case 3:case"end":return e.stop()}}),e)}))),vp.apply(this,arguments)}function yp(e,t,n){return mp.apply(this,arguments)}function mp(){return mp=se(oe().mark((function e(t,n,r){var i,a;return oe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.fu.shift(),a=tf.from(i,n,r),e.next=3,ap(t,(function(){return t.remoteSyncer.applySuccessfulWrite(a)}));case 3:return e.next=5,op(t);case 5:case"end":return e.stop()}}),e)}))),mp.apply(this,arguments)}function gp(e,t){return kp.apply(this,arguments)}function kp(){return kp=se(oe().mark((function e(t,n){return oe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=n&&Sp(t).Yo,!e.t0){e.next=4;break}return e.next=4,function(){var e=se(oe().mark((function e(t,n){var r,i;return oe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!wc(i=n.code)||i===to.ABORTED){e.next=7;break}return r=t.fu.shift(),Sp(t).Mo(),e.next=5,ap(t,(function(){return t.remoteSyncer.rejectFailedWrite(r.batchId,n)}));case 5:return e.next=7,op(t);case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(t,n);case 4:lp(t)&&fp(t);case 5:case"end":return e.stop()}}),e)}))),kp.apply(this,arguments)}function bp(e,t){return wp.apply(this,arguments)}function wp(){return wp=se(oe().mark((function e(t,n){var r,i;return oe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=eo(t)).asyncQueue.verifyOperationInProgress(),Qa("RemoteStore","RemoteStore received new credentials"),i=Yd(r),r._u.add(3),e.next=6,Bd(r);case 6:return i&&r.gu.set("Unknown"),e.next=9,r.remoteSyncer.handleCredentialChange(n);case 9:return r._u.delete(3),e.next=12,Vd(r);case 12:case"end":return e.stop()}}),e)}))),wp.apply(this,arguments)}function xp(e,t){return _p.apply(this,arguments)}function _p(){return _p=se(oe().mark((function e(t,n){var r;return oe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=eo(t),!n){e.next=7;break}return r._u.delete(2),e.next=5,Vd(r);case 5:e.next=13;break;case 7:if(e.t0=n,e.t0){e.next=13;break}return r._u.add(2),e.next=12,Bd(r);case 12:r.gu.set("Unknown");case 13:case"end":return e.stop()}}),e)}))),_p.apply(this,arguments)}function Ip(e){return e.pu||(e.pu=function(e,t,n){var r=eo(e);return r.su(),new Od(t,r.connection,r.authCredentials,r.appCheckCredentials,r.yt,n)}(e.datastore,e.asyncQueue,{Yr:Xd.bind(null,e),Zr:Zd.bind(null,e),Wo:tp.bind(null,e)}),e.wu.push(function(){var t=se(oe().mark((function t(n){return oe().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=4;break}e.pu.Mo(),Qd(e)?Hd(e):e.gu.set("Unknown"),t.next=7;break;case 4:return t.next=6,e.pu.stop();case 6:$d(e);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())),e.pu}function Sp(e){return e.Iu||(e.Iu=function(e,t,n){var r=eo(e);return r.su(),new Ld(t,r.connection,r.authCredentials,r.appCheckCredentials,r.yt,n)}(e.datastore,e.asyncQueue,{Yr:hp.bind(null,e),Zr:gp.bind(null,e),tu:pp.bind(null,e),Zo:yp.bind(null,e)}),e.wu.push(function(){var t=se(oe().mark((function t(n){return oe().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=6;break}return e.Iu.Mo(),t.next=4,op(e);case 4:t.next=9;break;case 6:return t.next=8,e.Iu.stop();case 8:e.fu.length>0&&(Qa("RemoteStore","Stopping write stream with ".concat(e.fu.length," pending writes")),e.fu=[]);case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())),e.Iu}var Ep=function(){function e(t,n,r,i,a){y(this,e),this.asyncQueue=t,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=a,this.deferred=new ro,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((function(e){}))}return g(e,[{key:"start",value:function(e){var t=this;this.timerHandle=setTimeout((function(){return t.handleDelayElapsed()}),e)}},{key:"skipDelay",value:function(){return this.handleDelayElapsed()}},{key:"cancel",value:function(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new no(to.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}},{key:"handleDelayElapsed",value:function(){var e=this;this.asyncQueue.enqueueAndForget((function(){return null!==e.timerHandle?(e.clearTimeout(),e.op().then((function(t){return e.deferred.resolve(t)}))):Promise.resolve()}))}},{key:"clearTimeout",value:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}))}],[{key:"createAndSchedule",value:function(t,n,r,i,a){var o=new e(t,n,Date.now()+r,i,a);return o.start(r),o}}]),e}();function Tp(e,t){if(Ya("AsyncQueue","".concat(t,": ").concat(e)),zo(e))return new no(to.UNAVAILABLE,"".concat(t,": ").concat(e));throw e}var Cp=function(){function e(t){y(this,e),this.comparator=t?function(e,n){return t(e,n)||Io.comparator(e.key,n.key)}:function(e,t){return Io.comparator(e.key,t.key)},this.keyedMap=Tc(),this.sortedSet=new is(this.comparator)}return g(e,[{key:"has",value:function(e){return null!=this.keyedMap.get(e)}},{key:"get",value:function(e){return this.keyedMap.get(e)}},{key:"first",value:function(){return this.sortedSet.minKey()}},{key:"last",value:function(){return this.sortedSet.maxKey()}},{key:"isEmpty",value:function(){return this.sortedSet.isEmpty()}},{key:"indexOf",value:function(e){var t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}},{key:"size",get:function(){return this.sortedSet.size}},{key:"forEach",value:function(e){this.sortedSet.inorderTraversal((function(t,n){return e(t),!1}))}},{key:"add",value:function(e){var t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}},{key:"delete",value:function(e){var t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}},{key:"isEqual",value:function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();n.hasNext();){var i=n.getNext().key,a=r.getNext().key;if(!i.isEqual(a))return!1}return!0}},{key:"toString",value:function(){var e=[];return this.forEach((function(t){e.push(t.toString())})),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}},{key:"copy",value:function(t,n){var r=new e;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=n,r}}],[{key:"emptySet",value:function(t){return new e(t.comparator)}}]),e}(),Np=function(){function e(){y(this,e),this.Tu=new is(Io.comparator)}return g(e,[{key:"track",value:function(e){var t=e.doc.key,n=this.Tu.get(t);n?0!==e.type&&3===n.type?this.Tu=this.Tu.insert(t,e):3===e.type&&1!==n.type?this.Tu=this.Tu.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.Tu=this.Tu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.Tu=this.Tu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.Tu=this.Tu.remove(t):1===e.type&&2===n.type?this.Tu=this.Tu.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.Tu=this.Tu.insert(t,{type:2,doc:e.doc}):Ja():this.Tu=this.Tu.insert(t,e)}},{key:"Eu",value:function(){var e=[];return this.Tu.inorderTraversal((function(t,n){e.push(n)})),e}}]),e}(),Ap=function(){function e(t,n,r,i,a,o,u,s,c){y(this,e),this.query=t,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=a,this.fromCache=o,this.syncStateChanged=u,this.excludesMetadataChanges=s,this.hasCachedResults=c}return g(e,[{key:"hasPendingWrites",get:function(){return!this.mutatedKeys.isEmpty()}},{key:"isEqual",value:function(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Ps(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;var t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(var r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}],[{key:"fromInitialDocuments",value:function(t,n,r,i,a){var o=[];return n.forEach((function(e){o.push({type:0,doc:e})})),new e(t,n,Cp.emptySet(n),o,r,i,!0,!1,a)}}]),e}(),Dp=g((function e(){y(this,e),this.Au=void 0,this.listeners=[]})),Rp=g((function e(){y(this,e),this.queries=new _c((function(e){return Os(e)}),Ps),this.onlineState="Unknown",this.Ru=new Set}));function Pp(e,t){return Op.apply(this,arguments)}function Op(){return Op=se(oe().mark((function e(t,n){var r,i,a,o,u;return oe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=eo(t),i=n.query,a=!1,(o=r.queries.get(i))||(a=!0,o=new Dp),!a){e.next=13;break}return e.prev=3,e.next=6,r.onListen(i);case 6:o.Au=e.sent,e.next=13;break;case 9:return e.prev=9,e.t0=e.catch(3),u=Tp(e.t0,"Initialization of query '".concat(Ls(n.query),"' failed")),e.abrupt("return",void n.onError(u));case 13:r.queries.set(i,o),o.listeners.push(n),n.bu(r.onlineState),o.Au&&n.Pu(o.Au)&&Vp(r);case 14:case"end":return e.stop()}}),e,null,[[3,9]])}))),Op.apply(this,arguments)}function Lp(e,t){return Mp.apply(this,arguments)}function Mp(){return Mp=se(oe().mark((function e(t,n){var r,i,a,o,u;return oe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=eo(t),i=n.query,a=!1,(o=r.queries.get(i))&&(u=o.listeners.indexOf(n))>=0&&(o.listeners.splice(u,1),a=0===o.listeners.length),!a){e.next=6;break}return e.abrupt("return",(r.queries.delete(i),r.onUnlisten(i)));case 6:case"end":return e.stop()}}),e)}))),Mp.apply(this,arguments)}function Fp(e,t){var n,r=eo(e),i=!1,a=k(t);try{for(a.s();!(n=a.n()).done;){var o=n.value,u=o.query,s=r.queries.get(u);if(s){var c,l=k(s.listeners);try{for(l.s();!(c=l.n()).done;){c.value.Pu(o)&&(i=!0)}}catch(f){l.e(f)}finally{l.f()}s.Au=o}}}catch(f){a.e(f)}finally{a.f()}i&&Vp(r)}function Up(e,t,n){var r=eo(e),i=r.queries.get(t);if(i){var a,o=k(i.listeners);try{for(o.s();!(a=o.n()).done;){a.value.onError(n)}}catch(u){o.e(u)}finally{o.f()}}r.queries.delete(t)}function Vp(e){e.Ru.forEach((function(e){e.next()}))}var jp=function(){function e(t,n,r){y(this,e),this.query=t,this.vu=n,this.Vu=!1,this.Su=null,this.onlineState="Unknown",this.options=r||{}}return g(e,[{key:"Pu",value:function(e){if(!this.options.includeMetadataChanges){var t,n=[],r=k(e.docChanges);try{for(r.s();!(t=r.n()).done;){var i=t.value;3!==i.type&&n.push(i)}}catch(o){r.e(o)}finally{r.f()}e=new Ap(e.query,e.docs,e.oldDocs,n,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}var a=!1;return this.Vu?this.Du(e)&&(this.vu.next(e),a=!0):this.Cu(e,this.onlineState)&&(this.xu(e),a=!0),this.Su=e,a}},{key:"onError",value:function(e){this.vu.error(e)}},{key:"bu",value:function(e){this.onlineState=e;var t=!1;return this.Su&&!this.Vu&&this.Cu(this.Su,e)&&(this.xu(this.Su),t=!0),t}},{key:"Cu",value:function(e,t){if(!e.fromCache)return!0;var n="Offline"!==t;return(!this.options.Nu||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}},{key:"Du",value:function(e){if(e.docChanges.length>0)return!0;var t=this.Su&&this.Su.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}},{key:"xu",value:function(e){e=Ap.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Vu=!0,this.vu.next(e)}}]),e}(),Bp=function(){function e(t,n){y(this,e),this.ku=t,this.byteLength=n}return g(e,[{key:"Ou",value:function(){return"metadata"in this.ku}}]),e}(),qp=function(){function e(t){y(this,e),this.yt=t}return g(e,[{key:"Ji",value:function(e){return rl(this.yt,e)}},{key:"Yi",value:function(e){return e.metadata.exists?cl(this.yt,e.document,!1):ds.newNoDocument(this.Ji(e.metadata.name),this.Xi(e.metadata.readTime))}},{key:"Xi",value:function(e){return Zc(e)}}]),e}(),zp=function(){function e(t,n,r){y(this,e),this.Mu=t,this.localStore=n,this.yt=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=Kp(t)}return g(e,[{key:"Fu",value:function(e){this.progress.bytesLoaded+=e.byteLength;var t=this.progress.documentsLoaded;if(e.ku.namedQuery)this.queries.push(e.ku.namedQuery);else if(e.ku.documentMetadata){this.documents.push({metadata:e.ku.documentMetadata}),e.ku.documentMetadata.exists||++t;var n=wo.fromString(e.ku.documentMetadata.name);this.collectionGroups.add(n.get(n.length-2))}else e.ku.document&&(this.documents[this.documents.length-1].document=e.ku.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}},{key:"$u",value:function(e){var t,n=new Map,r=new qp(this.yt),i=k(e);try{for(i.s();!(t=i.n()).done;){var a=t.value;if(a.metadata.queries){var o,u=r.Ji(a.metadata.name),s=k(a.metadata.queries);try{for(s.s();!(o=s.n()).done;){var c=o.value,l=(n.get(c)||Oc()).add(u);n.set(c,l)}}catch(f){s.e(f)}finally{s.f()}}}}catch(f){i.e(f)}finally{i.f()}return n}},{key:"complete",value:function(){var e=se(oe().mark((function e(){var t,n,r,i,a;return oe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ld(this.localStore,new qp(this.yt),this.documents,this.Mu.id);case 2:t=e.sent,n=this.$u(this.documents),r=k(this.queries),e.prev=5,r.s();case 7:if((i=r.n()).done){e.next=13;break}return a=i.value,e.next=11,hd(this.localStore,a,n.get(a.name));case 11:e.next=7;break;case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(5),r.e(e.t0);case 18:return e.prev=18,r.f(),e.finish(18);case 21:return e.abrupt("return",(this.progress.taskState="Success",{progress:this.progress,Bu:this.collectionGroups,Lu:t}));case 22:case"end":return e.stop()}}),e,this,[[5,15,18,21]])})));return function(){return e.apply(this,arguments)}}()}]),e}();function Kp(e){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}var Gp=g((function e(t){y(this,e),this.key=t})),Wp=g((function e(t){y(this,e),this.key=t})),Hp=function(){function e(t,n){y(this,e),this.query=t,this.qu=n,this.Uu=null,this.hasCachedResults=!1,this.current=!1,this.Ku=Oc(),this.mutatedKeys=Oc(),this.Gu=Us(t),this.Qu=new Cp(this.Gu)}return g(e,[{key:"ju",get:function(){return this.qu}},{key:"Wu",value:function(e,t){var n=this,r=t?t.zu:new Np,i=t?t.Qu:this.Qu,a=t?t.mutatedKeys:this.mutatedKeys,o=i,u=!1,s="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,c="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((function(e,t){var l=i.get(e),f=Ms(n.query,t)?t:null,h=!!l&&n.mutatedKeys.has(l.key),d=!!f&&(f.hasLocalMutations||n.mutatedKeys.has(f.key)&&f.hasCommittedMutations),p=!1;l&&f?l.data.isEqual(f.data)?h!==d&&(r.track({type:3,doc:f}),p=!0):n.Hu(l,f)||(r.track({type:2,doc:f}),p=!0,(s&&n.Gu(f,s)>0||c&&n.Gu(f,c)<0)&&(u=!0)):!l&&f?(r.track({type:0,doc:f}),p=!0):l&&!f&&(r.track({type:1,doc:l}),p=!0,(s||c)&&(u=!0)),p&&(f?(o=o.add(f),a=d?a.add(e):a.delete(e)):(o=o.delete(e),a=a.delete(e)))})),null!==this.query.limit)for(;o.size>this.query.limit;){var l="F"===this.query.limitType?o.last():o.first();o=o.delete(l.key),a=a.delete(l.key),r.track({type:1,doc:l})}return{Qu:o,zu:r,$i:u,mutatedKeys:a}}},{key:"Hu",value:function(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}},{key:"applyChanges",value:function(e,t,n){var r=this,i=this.Qu;this.Qu=e.Qu,this.mutatedKeys=e.mutatedKeys;var a=e.zu.Eu();a.sort((function(e,t){return function(e,t){var n=function(e){switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ja()}};return n(e)-n(t)}(e.type,t.type)||r.Gu(e.doc,t.doc)})),this.Ju(n);var o=t?this.Yu():[],u=0===this.Ku.size&&this.current?1:0,s=u!==this.Uu;return this.Uu=u,0!==a.length||s?{snapshot:new Ap(this.query,e.Qu,i,a,e.mutatedKeys,0===u,s,!1,!!n&&n.resumeToken.approximateByteSize()>0),Xu:o}:{Xu:o}}},{key:"bu",value:function(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Qu:this.Qu,zu:new Np,mutatedKeys:this.mutatedKeys,$i:!1},!1)):{Xu:[]}}},{key:"Zu",value:function(e){return!this.qu.has(e)&&!!this.Qu.has(e)&&!this.Qu.get(e).hasLocalMutations}},{key:"Ju",value:function(e){var t=this;e&&(e.addedDocuments.forEach((function(e){return t.qu=t.qu.add(e)})),e.modifiedDocuments.forEach((function(e){})),e.removedDocuments.forEach((function(e){return t.qu=t.qu.delete(e)})),this.current=e.current)}},{key:"Yu",value:function(){var e=this;if(!this.current)return[];var t=this.Ku;this.Ku=Oc(),this.Qu.forEach((function(t){e.Zu(t.key)&&(e.Ku=e.Ku.add(t.key))}));var n=[];return t.forEach((function(t){e.Ku.has(t)||n.push(new Wp(t))})),this.Ku.forEach((function(e){t.has(e)||n.push(new Gp(e))})),n}},{key:"tc",value:function(e){this.qu=e.Hi,this.Ku=Oc();var t=this.Wu(e.documents);return this.applyChanges(t,!0)}},{key:"ec",value:function(){return Ap.fromInitialDocuments(this.query,this.Qu,this.mutatedKeys,0===this.Uu,this.hasCachedResults)}}]),e}(),Qp=g((function e(t,n,r){y(this,e),this.query=t,this.targetId=n,this.view=r})),Yp=g((function e(t){y(this,e),this.key=t,this.nc=!1})),$p=function(){function e(t,n,r,i,a,o){y(this,e),this.localStore=t,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=o,this.sc={},this.ic=new _c((function(e){return Os(e)}),Ps),this.rc=new Map,this.oc=new Set,this.uc=new is(Io.comparator),this.cc=new Map,this.ac=new Ah,this.hc={},this.lc=new Map,this.fc=oh.vn(),this.onlineState="Unknown",this.dc=void 0}return g(e,[{key:"isPrimaryClient",get:function(){return!0===this.dc}}]),e}();function Xp(e,t){return Jp.apply(this,arguments)}function Jp(){return Jp=se(oe().mark((function e(t,n){var r,i,a,o,u,s;return oe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=Kv(t),!(o=r.ic.get(n))){e.next=6;break}i=o.targetId,r.sharedClientState.addLocalQueryTarget(i),a=o.view.ec(),e.next=15;break;case 6:return e.next=8,rd(r.localStore,As(n));case 8:return u=e.sent,r.isPrimaryClient&&zd(r.remoteStore,u),s=r.sharedClientState.addLocalQueryTarget(u.targetId),i=u.targetId,e.next=14,Zp(r,n,i,"current"===s,u.resumeToken);case 14:a=e.sent;case 15:return e.abrupt("return",a);case 16:case"end":return e.stop()}}),e)}))),Jp.apply(this,arguments)}function Zp(e,t,n,r,i){return ev.apply(this,arguments)}function ev(){return ev=se(oe().mark((function e(t,n,r,i,a){var o,u,s,c,l,f;return oe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t._c=function(e,n,r){return function(){var e=se(oe().mark((function e(t,n,r,i){var a,o,u;return oe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=n.view.Wu(r),e.t0=a.$i,!e.t0){e.next=6;break}return e.next=5,od(t.localStore,n.query,!1).then((function(e){var t=e.documents;return n.view.Wu(t,a)}));case 5:a=e.sent;case 6:return o=i&&i.targetChanges.get(n.targetId),u=n.view.applyChanges(a,t.isPrimaryClient,o),e.abrupt("return",(bv(t,n.targetId,u.Xu),u.snapshot));case 8:case"end":return e.stop()}}),e)})));return function(t,n,r,i){return e.apply(this,arguments)}}()(t,e,n,r)},e.next=3,od(t.localStore,n,!0);case 3:return o=e.sent,u=new Hp(n,o.Hi),s=u.Wu(o.documents),c=Uc.createSynthesizedTargetChangeForCurrentChange(r,i&&"Offline"!==t.onlineState,a),l=u.applyChanges(s,t.isPrimaryClient,c),bv(t,r,l.Xu),f=new Qp(n,r,u),e.abrupt("return",(t.ic.set(n,f),t.rc.has(r)?t.rc.get(r).push(n):t.rc.set(r,[n]),l.snapshot));case 11:case"end":return e.stop()}}),e)}))),ev.apply(this,arguments)}function tv(e,t){return nv.apply(this,arguments)}function nv(){return nv=se(oe().mark((function e(t,n){var r,i,a;return oe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=eo(t),i=r.ic.get(n),!((a=r.rc.get(i.targetId)).length>1)){e.next=3;break}return e.abrupt("return",(r.rc.set(i.targetId,a.filter((function(e){return!Ps(e,n)}))),void r.ic.delete(n)));case 3:if(!r.isPrimaryClient){e.next=11;break}if(r.sharedClientState.removeLocalQueryTarget(i.targetId),e.t0=r.sharedClientState.isActiveQueryTarget(i.targetId),e.t0){e.next=9;break}return e.next=9,id(r.localStore,i.targetId,!1).then((function(){r.sharedClientState.clearQueryState(i.targetId),Kd(r.remoteStore,i.targetId),gv(r,i.targetId)})).catch(Mo);case 9:e.next=14;break;case 11:return gv(r,i.targetId),e.next=14,id(r.localStore,i.targetId,!0);case 14:case"end":return e.stop()}}),e)}))),nv.apply(this,arguments)}function rv(e,t,n){return iv.apply(this,arguments)}function iv(){return iv=se(oe().mark((function e(t,n,r){var i,a,o;return oe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Gv(t),e.prev=1,e.next=4,function(e,t){var n,r,i=eo(e),a=go.now(),o=t.reduce((function(e,t){return e.add(t.key)}),Oc());return i.persistence.runTransaction("Locally write mutations","readwrite",(function(e){var u=Sc(),s=Oc();return i.Gi.getEntries(e,o).next((function(e){(u=e).forEach((function(e,t){t.isValidDocument()||(s=s.add(e))}))})).next((function(){return i.localDocuments.getOverlayedDocuments(e,u)})).next((function(r){n=r;var o,u=[],s=k(t);try{for(s.s();!(o=s.n()).done;){var c=o.value,l=cc(c,n.get(c.key).overlayedDocument);null!=l&&u.push(new hc(c.key,l,hs(l.value.mapValue),rc.exists(!0)))}}catch(f){s.e(f)}finally{s.f()}return i.mutationQueue.addMutationBatch(e,a,u,t)})).next((function(t){r=t;var a=t.applyToLocalDocumentSet(n,s);return i.documentOverlayCache.saveOverlays(e,t.batchId,a)}))})).then((function(){return{batchId:r.batchId,changes:Cc(n)}}))}(i.localStore,n);case 4:return a=e.sent,i.sharedClientState.addPendingMutation(a.batchId),function(e,t,n){var r=e.hc[e.currentUser.toKey()];r||(r=new is(vo)),r=r.insert(t,n),e.hc[e.currentUser.toKey()]=r}(i,a.batchId,r),e.next=9,_v(i,a.changes);case 9:return e.next=11,op(i.remoteStore);case 11:e.next=17;break;case 13:e.prev=13,e.t0=e.catch(1),o=Tp(e.t0,"Failed to persist write"),r.reject(o);case 17:case"end":return e.stop()}}),e,null,[[1,13]])}))),iv.apply(this,arguments)}function av(e,t){return ov.apply(this,arguments)}function ov(){return ov=se(oe().mark((function e(t,n){var r,i;return oe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=eo(t),e.prev=1,e.next=4,ed(r.localStore,n);case 4:return i=e.sent,n.targetChanges.forEach((function(e,t){var n=r.cc.get(t);n&&(Za(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1),e.addedDocuments.size>0?n.nc=!0:e.modifiedDocuments.size>0?Za(n.nc):e.removedDocuments.size>0&&(Za(n.nc),n.nc=!1))})),e.next=8,_v(r,i,n);case 8:e.next=14;break;case 10:return e.prev=10,e.t0=e.catch(1),e.next=14,Mo(e.t0);case 14:case"end":return e.stop()}}),e,null,[[1,10]])}))),ov.apply(this,arguments)}function uv(e,t,n){var r=eo(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){var i=[];r.ic.forEach((function(e,n){var r=n.view.bu(t);r.snapshot&&i.push(r.snapshot)})),function(e,t){var n=eo(e);n.onlineState=t;var r=!1;n.queries.forEach((function(e,n){var i,a=k(n.listeners);try{for(a.s();!(i=a.n()).done;){i.value.bu(t)&&(r=!0)}}catch(o){a.e(o)}finally{a.f()}})),r&&Vp(n)}(r.eventManager,t),i.length&&r.sc.Wo(i),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}function sv(e,t,n){return cv.apply(this,arguments)}function cv(){return cv=se(oe().mark((function e(t,n,r){var i,a,o,u,s,c;return oe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((i=eo(t)).sharedClientState.updateQueryState(n,"rejected",r),a=i.cc.get(n),!(o=a&&a.key)){e.next=14;break}return u=(u=new is(Io.comparator)).insert(o,ds.newNoDocument(o,ko.min())),s=Oc().add(o),c=new Fc(ko.min(),new Map,new us(vo),u,s),e.next=9,av(i,c);case 9:i.uc=i.uc.remove(o),i.cc.delete(n),xv(i),e.next=16;break;case 14:return e.next=16,id(i.localStore,n,!1).then((function(){return gv(i,n,r)})).catch(Mo);case 16:case"end":return e.stop()}}),e)}))),cv.apply(this,arguments)}function lv(e,t){return fv.apply(this,arguments)}function fv(){return fv=se(oe().mark((function e(t,n){var r,i,a;return oe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=eo(t),i=n.batch.batchId,e.prev=1,e.next=4,Jh(r.localStore,n);case 4:return a=e.sent,mv(r,i,null),yv(r,i),r.sharedClientState.updateMutationState(i,"acknowledged"),e.next=10,_v(r,a);case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(1),e.next=16,Mo(e.t0);case 16:case"end":return e.stop()}}),e,null,[[1,12]])}))),fv.apply(this,arguments)}function hv(e,t,n){return dv.apply(this,arguments)}function dv(){return dv=se(oe().mark((function e(t,n,r){var i,a;return oe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=eo(t),e.prev=1,e.next=4,function(e,t){var n=eo(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",(function(e){var r;return n.mutationQueue.lookupMutationBatch(e,t).next((function(t){return Za(null!==t),r=t.keys(),n.mutationQueue.removeMutationBatch(e,t)})).next((function(){return n.mutationQueue.performConsistencyCheck(e)})).next((function(){return n.documentOverlayCache.removeOverlaysForBatchId(e,r,t)})).next((function(){return n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,r)})).next((function(){return n.localDocuments.getDocuments(e,r)}))}))}(i.localStore,n);case 4:return a=e.sent,mv(i,n,r),yv(i,n),i.sharedClientState.updateMutationState(n,"rejected",r),e.next=10,_v(i,a);case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(1),e.next=16,Mo(e.t0);case 16:case"end":return e.stop()}}),e,null,[[1,12]])}))),dv.apply(this,arguments)}function pv(e,t){return vv.apply(this,arguments)}function vv(){return vv=se(oe().mark((function e(t,n){var r,i,a,o;return oe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Yd((r=eo(t)).remoteStore)||Qa("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),e.prev=2,e.next=5,function(e){var t=eo(e);return t.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(function(e){return t.mutationQueue.getHighestUnacknowledgedBatchId(e)}))}(r.localStore);case 5:if(-1!==(i=e.sent)){e.next=8;break}return e.abrupt("return",void n.resolve());case 8:(a=r.lc.get(i)||[]).push(n),r.lc.set(i,a),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(2),o=Tp(e.t0,"Initialization of waitForPendingWrites() operation failed"),n.reject(o);case 16:case"end":return e.stop()}}),e,null,[[2,12]])}))),vv.apply(this,arguments)}function yv(e,t){(e.lc.get(t)||[]).forEach((function(e){e.resolve()})),e.lc.delete(t)}function mv(e,t,n){var r=eo(e),i=r.hc[r.currentUser.toKey()];if(i){var a=i.get(t);a&&(n?a.reject(n):a.resolve(),i=i.remove(t)),r.hc[r.currentUser.toKey()]=i}}function gv(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.sharedClientState.removeLocalQueryTarget(t);var r,i=k(e.rc.get(t));try{for(i.s();!(r=i.n()).done;){var a=r.value;e.ic.delete(a),n&&e.sc.wc(a,n)}}catch(o){i.e(o)}finally{i.f()}e.rc.delete(t),e.isPrimaryClient&&e.ac.ls(t).forEach((function(t){e.ac.containsKey(t)||kv(e,t)}))}function kv(e,t){e.oc.delete(t.path.canonicalString());var n=e.uc.get(t);null!==n&&(Kd(e.remoteStore,n),e.uc=e.uc.remove(t),e.cc.delete(n),xv(e))}function bv(e,t,n){var r,i=k(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;a instanceof Gp?(e.ac.addReference(a.key,t),wv(e,a)):a instanceof Wp?(Qa("SyncEngine","Document no longer in limbo: "+a.key),e.ac.removeReference(a.key,t),e.ac.containsKey(a.key)||kv(e,a.key)):Ja()}}catch(o){i.e(o)}finally{i.f()}}function wv(e,t){var n=t.key,r=n.path.canonicalString();e.uc.get(n)||e.oc.has(r)||(Qa("SyncEngine","New document in limbo: "+n),e.oc.add(r),xv(e))}function xv(e){for(;e.oc.size>0&&e.uc.size<e.maxConcurrentLimboResolutions;){var t=e.oc.values().next().value;e.oc.delete(t);var n=new Io(wo.fromString(t)),r=e.fc.next();e.cc.set(r,new Yp(n)),e.uc=e.uc.insert(n,r),zd(e.remoteStore,new rf(As(Is(n.path)),r,2,$o.at))}}function _v(e,t,n){return Iv.apply(this,arguments)}function Iv(){return Iv=se(oe().mark((function e(t,n,r){var i,a,o,u;return oe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=eo(t),a=[],o=[],u=[],e.t0=i.ic.isEmpty(),e.t0){e.next=9;break}return i.ic.forEach((function(e,t){u.push(i._c(t,n,r).then((function(e){if((e||r)&&i.isPrimaryClient&&i.sharedClientState.updateQueryState(t.targetId,(null==e?void 0:e.fromCache)?"not-current":"current"),e){a.push(e);var n=Wh.Ci(t.targetId,e);o.push(n)}})))})),e.next=6,Promise.all(u);case 6:return i.sc.Wo(a),e.next=9,function(){var e=se(oe().mark((function e(t,n){var r,i,a,o,u,s,c,l;return oe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=eo(t),e.prev=1,e.next=4,r.persistence.runTransaction("notifyLocalViewChanges","readwrite",(function(e){return Uo.forEach(n,(function(t){return Uo.forEach(t.Si,(function(n){return r.persistence.referenceDelegate.addReference(e,t.targetId,n)})).next((function(){return Uo.forEach(t.Di,(function(n){return r.persistence.referenceDelegate.removeReference(e,t.targetId,n)}))}))}))}));case 4:e.next=11;break;case 6:if(e.prev=6,e.t0=e.catch(1),zo(e.t0)){e.next=10;break}throw e.t0;case 10:Qa("LocalStore","Failed to update sequence numbers: "+e.t0);case 11:i=k(n);try{for(i.s();!(a=i.n()).done;)o=a.value,u=o.targetId,o.fromCache||(s=r.qi.get(u),c=s.snapshotVersion,l=s.withLastLimboFreeSnapshotVersion(c),r.qi=r.qi.insert(u,l))}catch(f){i.e(f)}finally{i.f()}case 13:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t,n){return e.apply(this,arguments)}}()(i.localStore,o);case 9:case"end":return e.stop()}}),e)}))),Iv.apply(this,arguments)}function Sv(e,t){return Ev.apply(this,arguments)}function Ev(){return Ev=se(oe().mark((function e(t,n){var r,i;return oe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((r=eo(t)).currentUser.isEqual(n)){e.next=11;break}return Qa("SyncEngine","User change. New user:",n.toKey()),e.next=5,$h(r.localStore,n);case 5:return i=e.sent,r.currentUser=n,function(e,t){e.lc.forEach((function(e){e.forEach((function(e){e.reject(new no(to.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))}))})),e.lc.clear()}(r),r.sharedClientState.handleUserChange(n,i.removedBatchIds,i.addedBatchIds),e.next=11,_v(r,i.ji);case 11:case"end":return e.stop()}}),e)}))),Ev.apply(this,arguments)}function Tv(e,t){var n=eo(e),r=n.cc.get(t);if(r&&r.nc)return Oc().add(r.key);var i=Oc(),a=n.rc.get(t);if(!a)return i;var o,u=k(a);try{for(u.s();!(o=u.n()).done;){var s=o.value,c=n.ic.get(s);i=i.unionWith(c.view.ju)}}catch(l){u.e(l)}finally{u.f()}return i}function Cv(e,t){return Nv.apply(this,arguments)}function Nv(){return Nv=se(oe().mark((function e(t,n){var r,i,a;return oe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=eo(t),e.next=3,od(r.localStore,n.query,!0);case 3:return i=e.sent,a=n.view.tc(i),e.abrupt("return",(r.isPrimaryClient&&bv(r,n.targetId,a.Xu),a));case 6:case"end":return e.stop()}}),e)}))),Nv.apply(this,arguments)}function Av(e,t){return Dv.apply(this,arguments)}function Dv(){return Dv=se(oe().mark((function e(t,n){var r;return oe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=eo(t),e.abrupt("return",sd(r.localStore,n).then((function(e){return _v(r,e)})));case 2:case"end":return e.stop()}}),e)}))),Dv.apply(this,arguments)}function Rv(e,t,n,r){return Pv.apply(this,arguments)}function Pv(){return Pv=se(oe().mark((function e(t,n,r,i){var a,o;return oe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=eo(t),e.next=3,function(e,t){var n=eo(e),r=eo(n.mutationQueue);return n.persistence.runTransaction("Lookup mutation documents","readonly",(function(e){return r.Tn(e,t).next((function(t){return t?n.localDocuments.getDocuments(e,t):Uo.resolve(null)}))}))}(a.localStore,n);case 3:if(null===(o=e.sent)){e.next=15;break}if("pending"!==r){e.next=10;break}return e.next=8,op(a.remoteStore);case 8:e.next=11;break;case 10:"acknowledged"===r||"rejected"===r?(mv(a,n,i||null),yv(a,n),function(e,t){eo(eo(e).mutationQueue).An(t)}(a.localStore,n)):Ja();case 11:return e.next=13,_v(a,o);case 13:e.next=16;break;case 15:Qa("SyncEngine","Cannot apply mutation batch with id: "+n);case 16:case"end":return e.stop()}}),e)}))),Pv.apply(this,arguments)}function Ov(e,t){return Lv.apply(this,arguments)}function Lv(){return Lv=se(oe().mark((function e(t,n){var r,i,a,o,u,s,c,l;return oe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Kv(r=eo(t)),Gv(r),!0!==n||!0===r.dc){e.next=13;break}return i=r.sharedClientState.getAllActiveQueryTargets(),e.next=5,Mv(r,i.toArray());case 5:return a=e.sent,r.dc=!0,e.next=9,xp(r.remoteStore,!0);case 9:o=k(a);try{for(o.s();!(u=o.n()).done;)s=u.value,zd(r.remoteStore,s)}catch(f){o.e(f)}finally{o.f()}e.next=25;break;case 13:if(!1!==n||!1===r.dc){e.next=25;break}return c=[],l=Promise.resolve(),r.rc.forEach((function(e,t){r.sharedClientState.isLocalQueryTarget(t)?c.push(t):l=l.then((function(){return gv(r,t),id(r.localStore,t,!0)})),Kd(r.remoteStore,t)})),e.next=19,l;case 19:return e.next=21,Mv(r,c);case 21:return function(e){var t=eo(e);t.cc.forEach((function(e,n){Kd(t.remoteStore,n)})),t.ac.fs(),t.cc=new Map,t.uc=new is(Io.comparator)}(r),r.dc=!1,e.next=25,xp(r.remoteStore,!1);case 25:case"end":return e.stop()}}),e)}))),Lv.apply(this,arguments)}function Mv(e,t,n){return Fv.apply(this,arguments)}function Fv(){return Fv=se(oe().mark((function e(t,n,r){var i,a,o,u,s,c,l,f,h,d,p,v,y,m;return oe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=eo(t),a=[],o=[],u=k(n),e.prev=2,u.s();case 4:if((s=u.n()).done){e.next=45;break}if(c=s.value,l=void 0,!(f=i.rc.get(c))||0===f.length){e.next=34;break}return e.next=11,rd(i.localStore,As(f[0]));case 11:l=e.sent,h=k(f),e.prev=13,h.s();case 15:if((d=h.n()).done){e.next=24;break}return p=d.value,v=i.ic.get(p),e.next=20,Cv(i,v);case 20:(y=e.sent).snapshot&&o.push(y.snapshot);case 22:e.next=15;break;case 24:e.next=29;break;case 26:e.prev=26,e.t0=e.catch(13),h.e(e.t0);case 29:return e.prev=29,h.f(),e.finish(29);case 32:e.next=42;break;case 34:return e.next=36,ud(i.localStore,c);case 36:return m=e.sent,e.next=39,rd(i.localStore,m);case 39:return l=e.sent,e.next=42,Zp(i,Uv(m),c,!1,l.resumeToken);case 42:a.push(l);case 43:e.next=4;break;case 45:e.next=50;break;case 47:e.prev=47,e.t1=e.catch(2),u.e(e.t1);case 50:return e.prev=50,u.f(),e.finish(50);case 53:return e.abrupt("return",(i.sc.Wo(o),a));case 54:case"end":return e.stop()}}),e,null,[[2,47,50,53],[13,26,29,32]])}))),Fv.apply(this,arguments)}function Uv(e){return _s(e.path,e.collectionGroup,e.orderBy,e.filters,e.limit,"F",e.startAt,e.endAt)}function Vv(e){var t=eo(e);return eo(eo(t.localStore).persistence).vi()}function jv(e,t,n,r){return Bv.apply(this,arguments)}function Bv(){return Bv=se(oe().mark((function e(t,n,r,i){var a,o,u,s;return oe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(a=eo(t)).dc){e.next=3;break}return e.abrupt("return",void Qa("SyncEngine","Ignoring unexpected query state notification."));case 3:if(!((o=a.rc.get(n))&&o.length>0)){e.next=20;break}e.t0=r,e.next="current"===e.t0||"not-current"===e.t0?8:"rejected"===e.t0?15:19;break;case 8:return e.next=10,sd(a.localStore,Fs(o[0]));case 10:return u=e.sent,s=Fc.createSynthesizedRemoteEventForCurrentChange(n,"current"===r,au.EMPTY_BYTE_STRING),e.next=14,_v(a,u,s);case 14:return e.abrupt("break",20);case 15:return e.next=17,id(a.localStore,n,!0);case 17:return gv(a,n,i),e.abrupt("break",20);case 19:Ja();case 20:case"end":return e.stop()}}),e)}))),Bv.apply(this,arguments)}function qv(e,t,n){return zv.apply(this,arguments)}function zv(){return zv=se(oe().mark((function e(t,n,r){var i,a,o,u,s,c,l,f,h;return oe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(i=Kv(t)).dc){e.next=45;break}a=k(n),e.prev=3,a.s();case 5:if((o=a.n()).done){e.next=21;break}if(u=o.value,!i.rc.has(u)){e.next=10;break}return Qa("SyncEngine","Adding an already active target "+u),e.abrupt("continue",19);case 10:return e.next=12,ud(i.localStore,u);case 12:return s=e.sent,e.next=15,rd(i.localStore,s);case 15:return c=e.sent,e.next=18,Zp(i,Uv(s),c.targetId,!1,c.resumeToken);case 18:zd(i.remoteStore,c);case 19:e.next=5;break;case 21:e.next=26;break;case 23:e.prev=23,e.t0=e.catch(3),a.e(e.t0);case 26:return e.prev=26,a.f(),e.finish(26);case 29:l=k(r),e.prev=30,h=oe().mark((function e(){var t;return oe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=f.value,e.t0=i.rc.has(t),!e.t0){e.next=5;break}return e.next=5,id(i.localStore,t,!1).then((function(){Kd(i.remoteStore,t),gv(i,t)})).catch(Mo);case 5:case"end":return e.stop()}}),e)})),l.s();case 33:if((f=l.n()).done){e.next=37;break}return e.delegateYield(h(),"t1",35);case 35:e.next=33;break;case 37:e.next=42;break;case 39:e.prev=39,e.t2=e.catch(30),l.e(e.t2);case 42:return e.prev=42,l.f(),e.finish(42);case 45:case"end":return e.stop()}}),e,null,[[3,23,26,29],[30,39,42,45]])}))),zv.apply(this,arguments)}function Kv(e){var t=eo(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=av.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=Tv.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=sv.bind(null,t),t.sc.Wo=Fp.bind(null,t.eventManager),t.sc.wc=Up.bind(null,t.eventManager),t}function Gv(e){var t=eo(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=lv.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=hv.bind(null,t),t}function Wv(e,t,n){var r=eo(e);(function(){var e=se(oe().mark((function e(t,n,r){var i,a,o,u,s;return oe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n.getMetadata();case 3:return i=e.sent,e.next=6,function(e,t){var n=eo(e),r=Zc(t.createTime);return n.persistence.runTransaction("hasNewerBundle","readonly",(function(e){return n.Ns.getBundleMetadata(e,t.id)})).then((function(e){return!!e&&e.createTime.compareTo(r)>=0}))}(t.localStore,i);case 6:if(!e.sent){e.next=11;break}return e.next=9,n.close();case 9:return r._completeWith(function(e){return{taskState:"Success",documentsLoaded:e.totalDocuments,bytesLoaded:e.totalBytes,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}(i)),e.abrupt("return",Promise.resolve(new Set));case 11:return r._updateProgress(Kp(i)),a=new zp(i,t.localStore,n.yt),e.next=15,n.mc();case 15:o=e.sent;case 16:if(!o){e.next=26;break}return e.next=19,a.Fu(o);case 19:return(u=e.sent)&&r._updateProgress(u),e.next=23,n.mc();case 23:o=e.sent;case 24:e.next=16;break;case 26:return e.next=28,a.complete();case 28:return s=e.sent,e.next=31,_v(t,s.Lu,void 0);case 31:return e.next=33,function(e,t){var n=eo(e);return n.persistence.runTransaction("Save bundle","readwrite",(function(e){return n.Ns.saveBundleMetadata(e,t)}))}(t.localStore,i);case 33:return r._completeWith(s.progress),e.abrupt("return",Promise.resolve(s.Bu));case 37:return e.prev=37,e.t0=e.catch(0),e.abrupt("return",($a("SyncEngine","Loading bundle failed with ".concat(e.t0)),r._failWith(e.t0),Promise.resolve(new Set)));case 40:case"end":return e.stop()}}),e,null,[[0,37]])})));return function(t,n,r){return e.apply(this,arguments)}})()(r,t,n).then((function(e){r.sharedClientState.notifyBundleLoaded(e)}))}var Hv=function(){function e(){y(this,e),this.synchronizeTabs=!1}return g(e,[{key:"initialize",value:function(){var e=se(oe().mark((function e(t){return oe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.yt=Dd(t.databaseInfo.databaseId),this.sharedClientState=this.gc(t),this.persistence=this.yc(t),e.next=5,this.persistence.start();case 5:this.localStore=this.Ic(t),this.gcScheduler=this.Tc(t,this.localStore),this.indexBackfillerScheduler=this.Ec(t,this.localStore);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"Tc",value:function(e,t){return null}},{key:"Ec",value:function(e,t){return null}},{key:"Ic",value:function(e){return Yh(this.persistence,new Hh,e.initialUser,this.yt)}},{key:"yc",value:function(e){return new Mh(Uh.Bs,this.yt)}},{key:"gc",value:function(e){return new _d}},{key:"terminate",value:function(){var e=se(oe().mark((function e(){return oe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.gcScheduler&&this.gcScheduler.stop(),e.next=3,this.sharedClientState.shutdown();case 3:return e.next=5,this.persistence.shutdown();case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),Qv=function(e){x(n,e);var t=T(n);function n(e,r,i){var a;return y(this,n),(a=t.call(this)).Ac=e,a.cacheSizeBytes=r,a.forceOwnership=i,a.synchronizeTabs=!1,a}return g(n,[{key:"initialize",value:function(){var e=se(oe().mark((function e(t){var r=this;return oe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ft(_(n.prototype),"initialize",this).call(this,t);case 2:return e.next=4,this.Ac.initialize(this,t);case 4:return e.next=6,Gv(this.Ac.syncEngine);case 6:return e.next=8,op(this.Ac.remoteStore);case 8:return e.next=10,this.persistence.li((function(){return r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()}));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"Ic",value:function(e){return Yh(this.persistence,new Hh,e.initialUser,this.yt)}},{key:"Tc",value:function(e,t){var n=this.persistence.referenceDelegate.garbageCollector;return new dh(n,e.asyncQueue,t)}},{key:"Ec",value:function(e,t){var n=new Yo(t,this.persistence);return new Qo(e.asyncQueue,n)}},{key:"yc",value:function(e){var t=Gh(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?Jf.withCacheSize(this.cacheSizeBytes):Jf.DEFAULT;return new qh(this.synchronizeTabs,t,e.clientId,n,e.asyncQueue,Nd(),Ad(),this.yt,this.sharedClientState,!!this.forceOwnership)}},{key:"gc",value:function(e){return new _d}}]),n}(Hv),Yv=function(e){x(n,e);var t=T(n);function n(e,r){var i;return y(this,n),(i=t.call(this,e,r,!1)).Ac=e,i.cacheSizeBytes=r,i.synchronizeTabs=!0,i}return g(n,[{key:"initialize",value:function(){var e=se(oe().mark((function e(t){var r,i=this;return oe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ft(_(n.prototype),"initialize",this).call(this,t);case 2:if(r=this.Ac.syncEngine,e.t0=this.sharedClientState instanceof xd,!e.t0){e.next=8;break}return this.sharedClientState.syncEngine={Fr:Rv.bind(null,r),$r:jv.bind(null,r),Br:qv.bind(null,r),vi:Vv.bind(null,r),Mr:Av.bind(null,r)},e.next=8,this.sharedClientState.start();case 8:return e.next=10,this.persistence.li(function(){var e=se(oe().mark((function e(t){return oe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ov(i.Ac.syncEngine,t);case 2:i.gcScheduler&&(t&&!i.gcScheduler.started?i.gcScheduler.start():t||i.gcScheduler.stop()),i.indexBackfillerScheduler&&(t&&!i.indexBackfillerScheduler.started?i.indexBackfillerScheduler.start():t||i.indexBackfillerScheduler.stop());case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"gc",value:function(e){var t=Nd();if(!xd.C(t))throw new no(to.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var n=Gh(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new xd(t,e.asyncQueue,n,e.clientId,e.initialUser)}}]),n}(Qv),$v=function(){function e(){y(this,e)}return g(e,[{key:"initialize",value:function(){var e=se(oe().mark((function e(t,n){var r=this;return oe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.localStore,e.t0){e.next=12;break}return this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=function(e){return uv(r.syncEngine,e,1)},this.remoteStore.remoteSyncer.handleCredentialChange=Sv.bind(null,this.syncEngine),e.next=12,xp(this.remoteStore,this.syncEngine.isPrimaryClient);case 12:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"createEventManager",value:function(e){return new Rp}},{key:"createDatastore",value:function(e){var t,n=Dd(e.databaseInfo.databaseId),r=(t=e.databaseInfo,new Cd(t));return function(e,t,n,r){return new Md(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,r,n)}},{key:"createRemoteStore",value:function(e){var t,n,r,i,a,o=this;return t=this.localStore,n=this.datastore,r=e.asyncQueue,i=function(e){return uv(o.syncEngine,e,0)},a=Sd.C()?new Sd:new Id,new Ud(t,n,r,i,a)}},{key:"createSyncEngine",value:function(e,t){return function(e,t,n,r,i,a,o){var u=new $p(e,t,n,r,i,a);return o&&(u.dc=!0),u}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}},{key:"terminate",value:function(){return function(){var e=se(oe().mark((function e(t){var n;return oe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=eo(t),Qa("RemoteStore","RemoteStore shutting down."),n._u.add(5),e.next=5,Bd(n);case 5:n.mu.shutdown(),n.gu.set("Unknown");case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(this.remoteStore)}}]),e}();function Xv(e,t,n){if(!n)throw new no(to.INVALID_ARGUMENT,"Function ".concat(e,"() cannot be called with an empty ").concat(t,"."))}function Jv(e,t,n,r){if(!0===t&&!0===r)throw new no(to.INVALID_ARGUMENT,"".concat(e," and ").concat(n," cannot be used together."))}function Zv(e){if(!Io.isDocumentKey(e))throw new no(to.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but ".concat(e," has ").concat(e.length,"."))}function ey(e){if(Io.isDocumentKey(e))throw new no(to.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but ".concat(e," has ").concat(e.length,"."))}function ty(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e="".concat(e.substring(0,20),"...")),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";var t=function(e){return e.constructor?e.constructor.name:null}(e);return t?"a custom ".concat(t," object"):"an object"}return"function"==typeof e?"a function":Ja()}function ny(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new no(to.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var n=ty(e);throw new no(to.INVALID_ARGUMENT,"Expected type '".concat(t.name,"', but it was: ").concat(n))}return e}function ry(e,t){if(t<=0)throw new no(to.INVALID_ARGUMENT,"Function ".concat(e,"() requires a positive number, but it was: ").concat(t,"."))}var iy=new Map,ay=function(){function e(t){var n;if(y(this,e),void 0===t.host){if(void 0!==t.ssl)throw new no(to.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(n=t.ssl)||void 0===n||n;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new no(to.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.useFetchStreams=!!t.useFetchStreams,Jv("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling)}return g(e,[{key:"isEqual",value:function(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}]),e}(),oy=function(){function e(t,n,r,i){y(this,e),this._authCredentials=t,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new ay({}),this._settingsFrozen=!1}return g(e,[{key:"app",get:function(){if(!this._app)throw new no(to.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}},{key:"_initialized",get:function(){return this._settingsFrozen}},{key:"_terminated",get:function(){return void 0!==this._terminateTask}},{key:"_setSettings",value:function(e){if(this._settingsFrozen)throw new no(to.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new ay(e),void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new ao;switch(e.type){case"gapi":var t=e.client;return new co(t,e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new no(to.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}},{key:"_getSettings",value:function(){return this._settings}},{key:"_freezeSettings",value:function(){return this._settingsFrozen=!0,this._settings}},{key:"_delete",value:function(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}},{key:"toJSON",value:function(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}},{key:"_terminate",value:function(){return function(e){var t=iy.get(e);t&&(Qa("ComponentProvider","Removing Datastore"),iy.delete(e),t.terminate())}(this),Promise.resolve()}}]),e}();function uy(e,t,n){var r,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=(e=ny(e,oy))._getSettings();if("firestore.googleapis.com"!==a.host&&a.host!==t&&$a("Host has been set in both settings() and useEmulator(), emulator host will be used"),e._setSettings(Object.assign(Object.assign({},a),{host:"".concat(t,":").concat(n),ssl:!1})),i.mockUserToken){var o,u;if("string"==typeof i.mockUserToken)o=i.mockUserToken,u=Ka.MOCK_USER;else{o=V(i.mockUserToken,null===(r=e._app)||void 0===r?void 0:r.options.projectId);var s=i.mockUserToken.sub||i.mockUserToken.user_id;if(!s)throw new no(to.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new Ka(s)}e._authCredentials=new oo(new io(o,u))}}var sy=function(){function e(t,n,r){y(this,e),this.converter=n,this._key=r,this.type="document",this.firestore=t}return g(e,[{key:"_path",get:function(){return this._key.path}},{key:"id",get:function(){return this._key.path.lastSegment()}},{key:"path",get:function(){return this._key.path.canonicalString()}},{key:"parent",get:function(){return new ly(this.firestore,this.converter,this._key.path.popLast())}},{key:"withConverter",value:function(t){return new e(this.firestore,t,this._key)}}]),e}(),cy=function(){function e(t,n,r){y(this,e),this.converter=n,this._query=r,this.type="query",this.firestore=t}return g(e,[{key:"withConverter",value:function(t){return new e(this.firestore,t,this._query)}}]),e}(),ly=function(e){x(n,e);var t=T(n);function n(e,r,i){var a;return y(this,n),(a=t.call(this,e,r,Is(i)))._path=i,a.type="collection",a}return g(n,[{key:"id",get:function(){return this._query.path.lastSegment()}},{key:"path",get:function(){return this._query.path.canonicalString()}},{key:"parent",get:function(){var e=this._path.popLast();return e.isEmpty()?null:new sy(this.firestore,null,new Io(e))}},{key:"withConverter",value:function(e){return new n(this.firestore,e,this._path)}}]),n}(cy);function fy(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=ae(e),Xv("collection","path",t),e instanceof oy){var a=wo.fromString.apply(wo,[t].concat(r));return ey(a),new ly(e,null,a)}if(!(e instanceof sy||e instanceof ly))throw new no(to.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");var o=e._path.child(wo.fromString.apply(wo,[t].concat(r)));return ey(o),new ly(e.firestore,null,o)}function hy(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=ae(e),1===arguments.length&&(t=po.R()),Xv("doc","path",t),e instanceof oy){var a=wo.fromString.apply(wo,[t].concat(r));return Zv(a),new sy(e,null,new Io(a))}if(!(e instanceof sy||e instanceof ly))throw new no(to.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");var o=e._path.child(wo.fromString.apply(wo,[t].concat(r)));return Zv(o),new sy(e.firestore,e instanceof ly?e.converter:null,new Io(o))}function dy(e,t){return e=ae(e),t=ae(t),(e instanceof sy||e instanceof ly)&&(t instanceof sy||t instanceof ly)&&e.firestore===t.firestore&&e.path===t.path&&e.converter===t.converter}function py(e,t){return e=ae(e),t=ae(t),e instanceof cy&&t instanceof cy&&e.firestore===t.firestore&&Ps(e._query,t._query)&&e.converter===t.converter}function vy(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10240,n=0;return{read:function(){return se(oe().mark((function r(){var i;return oe().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!(n<e.byteLength)){r.next=3;break}return i={value:e.slice(n,n+t),done:!1},r.abrupt("return",(n+=t,i));case 3:return r.abrupt("return",{done:!0});case 4:case"end":return r.stop()}}),r)})))()},cancel:function(){return se(oe().mark((function e(){return oe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))()},releaseLock:function(){},closed:Promise.reject("unimplemented")}}var yy=function(){function e(t){y(this,e),this.observer=t,this.muted=!1}return g(e,[{key:"next",value:function(e){this.observer.next&&this.Rc(this.observer.next,e)}},{key:"error",value:function(e){this.observer.error?this.Rc(this.observer.error,e):Ya("Uncaught Error in snapshot listener:",e.toString())}},{key:"bc",value:function(){this.muted=!0}},{key:"Rc",value:function(e,t){var n=this;this.muted||setTimeout((function(){n.muted||e(t)}),0)}}]),e}(),my=function(){function e(t,n){var r=this;y(this,e),this.Pc=t,this.yt=n,this.metadata=new ro,this.buffer=new Uint8Array,this.vc=new TextDecoder("utf-8"),this.Vc().then((function(e){e&&e.Ou()?r.metadata.resolve(e.ku.metadata):r.metadata.reject(new Error("The first element of the bundle is not a metadata, it is\n             ".concat(JSON.stringify(null==e?void 0:e.ku))))}),(function(e){return r.metadata.reject(e)}))}return g(e,[{key:"close",value:function(){return this.Pc.cancel()}},{key:"getMetadata",value:function(){var e=se(oe().mark((function e(){return oe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.metadata.promise);case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"mc",value:function(){var e=se(oe().mark((function e(){return oe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getMetadata();case 2:return e.abrupt("return",this.Vc());case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Vc",value:function(){var e=se(oe().mark((function e(){var t,n,r,i;return oe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.Sc();case 2:if(null!==(t=e.sent)){e.next=5;break}return e.abrupt("return",null);case 5:return n=this.vc.decode(t),r=Number(n),isNaN(r)&&this.Dc("length string (".concat(n,") is not valid number")),e.next=9,this.Cc(r);case 9:return i=e.sent,e.abrupt("return",new Bp(JSON.parse(i),t.length+r));case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"xc",value:function(){return this.buffer.findIndex((function(e){return e==="{".charCodeAt(0)}))}},{key:"Sc",value:function(){var e=se(oe().mark((function e(){var t,n;return oe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.xc()<0)){e.next=7;break}return e.next=3,this.Nc();case 3:if(!e.sent){e.next=5;break}return e.abrupt("break",7);case 5:e.next=0;break;case 7:if(0!==this.buffer.length){e.next=9;break}return e.abrupt("return",null);case 9:return(t=this.xc())<0&&this.Dc("Reached the end of bundle when a length string is expected."),n=this.buffer.slice(0,t),e.abrupt("return",(this.buffer=this.buffer.slice(t),n));case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Cc",value:function(){var e=se(oe().mark((function e(t){var n;return oe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.buffer.length<t)){e.next=8;break}return e.next=3,this.Nc();case 3:if(e.t0=e.sent,!e.t0){e.next=6;break}this.Dc("Reached the end of bundle when more is expected.");case 6:e.next=0;break;case 8:return n=this.vc.decode(this.buffer.slice(0,t)),e.abrupt("return",(this.buffer=this.buffer.slice(t),n));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"Dc",value:function(e){throw this.Pc.cancel(),new Error("Invalid bundle format: ".concat(e))}},{key:"Nc",value:function(){var e=se(oe().mark((function e(){var t,n;return oe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.Pc.read();case 2:return(t=e.sent).done||((n=new Uint8Array(this.buffer.length+t.value.length)).set(this.buffer),n.set(t.value,this.buffer.length),this.buffer=n),e.abrupt("return",t.done);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),gy=function(){function e(t){y(this,e),this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}return g(e,[{key:"lookup",value:function(){var e=se(oe().mark((function e(t){var n,r=this;return oe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.ensureCommitNotCalled(),!(this.mutations.length>0)){e.next=2;break}throw new no(to.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");case 2:return e.next=4,function(){var e=se(oe().mark((function e(t,n){var r,i,a,o,u,s;return oe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=eo(t),i=ol(r.yt)+"/documents",a={documents:n.map((function(e){return nl(r.yt,e)}))},e.next=5,r._o("BatchGetDocuments",i,a,n.length);case 5:return o=e.sent,u=new Map,o.forEach((function(e){var t=ll(r.yt,e);u.set(t.key.toString(),t)})),s=[],e.abrupt("return",(n.forEach((function(e){var t=u.get(e.toString());Za(!!t),s.push(t)})),s));case 10:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(this.datastore,t);case 4:return n=e.sent,e.abrupt("return",(n.forEach((function(e){return r.recordVersion(e)})),n));case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"set",value:function(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}},{key:"update",value:function(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(e){this.lastWriteError=e}this.writtenDocs.add(e.toString())}},{key:"delete",value:function(e){this.write(new gc(e,this.precondition(e))),this.writtenDocs.add(e.toString())}},{key:"commit",value:function(){var e=se(oe().mark((function e(){var t,n=this;return oe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.ensureCommitNotCalled(),!this.lastWriteError){e.next=2;break}throw this.lastWriteError;case 2:return t=this.readVersions,this.mutations.forEach((function(e){t.delete(e.key.toString())})),t.forEach((function(e,t){var r=Io.fromPath(t);n.mutations.push(new kc(r,n.precondition(r)))})),e.next=7,function(){var e=se(oe().mark((function e(t,n){var r,i,a;return oe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=eo(t),i=ol(r.yt)+"/documents",a={writes:n.map((function(e){return fl(r.yt,e)}))},e.next=3,r.ao("Commit",i,a);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(this.datastore,this.mutations);case 7:this.committed=!0;case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"recordVersion",value:function(e){var t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw Ja();t=ko.min()}var n=this.readVersions.get(e.key.toString());if(n){if(!t.isEqual(n))throw new no(to.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}},{key:"precondition",value:function(e){var t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(ko.min())?rc.exists(!1):rc.updateTime(t):rc.none()}},{key:"preconditionForUpdate",value:function(e){var t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(ko.min()))throw new no(to.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return rc.updateTime(t)}return rc.exists(!0)}},{key:"write",value:function(e){this.ensureCommitNotCalled(),this.mutations.push(e)}},{key:"ensureCommitNotCalled",value:function(){}}]),e}(),ky=function(){function e(t,n,r,i,a){y(this,e),this.asyncQueue=t,this.datastore=n,this.options=r,this.updateFunction=i,this.deferred=a,this.kc=r.maxAttempts,this.xo=new Rd(this.asyncQueue,"transaction_retry")}return g(e,[{key:"run",value:function(){this.kc-=1,this.Oc()}},{key:"Oc",value:function(){var e=this;this.xo.Ro(se(oe().mark((function t(){var n,r;return oe().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=new gy(e.datastore),(r=e.Mc(n))&&r.then((function(t){e.asyncQueue.enqueueAndForget((function(){return n.commit().then((function(){e.deferred.resolve(t)})).catch((function(t){e.Fc(t)}))}))})).catch((function(t){e.Fc(t)}));case 2:case"end":return t.stop()}}),t)}))))}},{key:"Mc",value:function(e){try{var t=this.updateFunction(e);return!nu(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(e){return this.deferred.reject(e),null}}},{key:"Fc",value:function(e){var t=this;this.kc>0&&this.$c(e)?(this.kc-=1,this.asyncQueue.enqueueAndForget((function(){return t.Oc(),Promise.resolve()}))):this.deferred.reject(e)}},{key:"$c",value:function(e){if("FirebaseError"===e.name){var t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!wc(t)}return!1}}]),e}(),by=function(){function e(t,n,r,i){var a=this;y(this,e),this.authCredentials=t,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=Ka.UNAUTHENTICATED,this.clientId=po.R(),this.authCredentialListener=function(){return Promise.resolve()},this.appCheckCredentialListener=function(){return Promise.resolve()},this.authCredentials.start(r,function(){var e=se(oe().mark((function e(t){return oe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Qa("FirestoreClient","Received user=",t.uid),e.next=3,a.authCredentialListener(t);case 3:a.user=t;case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),this.appCheckCredentials.start(r,(function(e){return Qa("FirestoreClient","Received new app check token=",e),a.appCheckCredentialListener(e,a.user)}))}return g(e,[{key:"getConfiguration",value:function(){var e=se(oe().mark((function e(){return oe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100});case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setCredentialChangeListener",value:function(e){this.authCredentialListener=e}},{key:"setAppCheckTokenChangeListener",value:function(e){this.appCheckCredentialListener=e}},{key:"verifyNotTerminated",value:function(){if(this.asyncQueue.isShuttingDown)throw new no(to.FAILED_PRECONDITION,"The client has already been terminated.")}},{key:"terminate",value:function(){var e=this;this.asyncQueue.enterRestrictedMode();var t=new ro;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(se(oe().mark((function n(){var r;return oe().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,n.t0=e.onlineComponents,!n.t0){n.next=5;break}return n.next=5,e.onlineComponents.terminate();case 5:if(n.t1=e.offlineComponents,!n.t1){n.next=9;break}return n.next=9,e.offlineComponents.terminate();case 9:e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve(),n.next=18;break;case 14:n.prev=14,n.t2=n.catch(0),r=Tp(n.t2,"Failed to shutdown persistence"),t.reject(r);case 18:case"end":return n.stop()}}),n,null,[[0,14]])})))),t.promise}}]),e}();function wy(e,t){return xy.apply(this,arguments)}function xy(){return xy=se(oe().mark((function e(t,n){var r,i;return oe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.asyncQueue.verifyOperationInProgress(),Qa("FirestoreClient","Initializing OfflineComponentProvider"),e.next=3,t.getConfiguration();case 3:return r=e.sent,e.next=6,n.initialize(r);case 6:i=r.initialUser,t.setCredentialChangeListener(function(){var e=se(oe().mark((function e(t){return oe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=i.isEqual(t),e.t0){e.next=5;break}return e.next=4,$h(n.localStore,t);case 4:i=t;case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),n.persistence.setDatabaseDeletedListener((function(){return t.terminate()})),t.offlineComponents=n;case 8:case"end":return e.stop()}}),e)}))),xy.apply(this,arguments)}function _y(e,t){return Iy.apply(this,arguments)}function Iy(){return Iy=se(oe().mark((function e(t,n){var r,i;return oe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.asyncQueue.verifyOperationInProgress(),e.next=3,Sy(t);case 3:return r=e.sent,Qa("FirestoreClient","Initializing OnlineComponentProvider"),e.next=7,t.getConfiguration();case 7:return i=e.sent,e.next=10,n.initialize(r,i);case 10:t.setCredentialChangeListener((function(e){return bp(n.remoteStore,e)})),t.setAppCheckTokenChangeListener((function(e,t){return bp(n.remoteStore,t)})),t.onlineComponents=n;case 13:case"end":return e.stop()}}),e)}))),Iy.apply(this,arguments)}function Sy(e){return Ey.apply(this,arguments)}function Ey(){return Ey=se(oe().mark((function e(t){return oe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.offlineComponents,e.t0){e.next=5;break}return Qa("FirestoreClient","Using default OfflineComponentProvider"),e.next=5,wy(t,new Hv);case 5:return e.abrupt("return",t.offlineComponents);case 6:case"end":return e.stop()}}),e)}))),Ey.apply(this,arguments)}function Ty(e){return Cy.apply(this,arguments)}function Cy(){return Cy=se(oe().mark((function e(t){return oe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.onlineComponents,e.t0){e.next=5;break}return Qa("FirestoreClient","Using default OnlineComponentProvider"),e.next=5,_y(t,new $v);case 5:return e.abrupt("return",t.onlineComponents);case 6:case"end":return e.stop()}}),e)}))),Cy.apply(this,arguments)}function Ny(e){return Sy(e).then((function(e){return e.persistence}))}function Ay(e){return Sy(e).then((function(e){return e.localStore}))}function Dy(e){return Ty(e).then((function(e){return e.remoteStore}))}function Ry(e){return Ty(e).then((function(e){return e.syncEngine}))}function Py(e){return Ty(e).then((function(e){return e.datastore}))}function Oy(e){return Ly.apply(this,arguments)}function Ly(){return Ly=se(oe().mark((function e(t){var n,r;return oe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ty(t);case 2:return n=e.sent,r=n.eventManager,e.abrupt("return",(r.onListen=Xp.bind(null,n.syncEngine),r.onUnlisten=tv.bind(null,n.syncEngine),r));case 5:case"end":return e.stop()}}),e)}))),Ly.apply(this,arguments)}function My(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=new ro;return e.asyncQueue.enqueueAndForget(se(oe().mark((function i(){return oe().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.t0=function(e,t,n,r,i){var a=new yy({next:function(a){t.enqueueAndForget((function(){return Lp(e,o)}));var u=a.docs.has(n);!u&&a.fromCache?i.reject(new no(to.UNAVAILABLE,"Failed to get document because the client is offline.")):u&&a.fromCache&&r&&"server"===r.source?i.reject(new no(to.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(a)},error:function(e){return i.reject(e)}}),o=new jp(Is(n.path),a,{includeMetadataChanges:!0,Nu:!0});return Pp(e,o)},i.next=3,Oy(e);case 3:return i.t1=i.sent,i.t2=e.asyncQueue,i.t3=t,i.t4=n,i.t5=r,i.abrupt("return",(0,i.t0)(i.t1,i.t2,i.t3,i.t4,i.t5));case 9:case"end":return i.stop()}}),i)})))),r.promise}function Fy(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=new ro;return e.asyncQueue.enqueueAndForget(se(oe().mark((function i(){return oe().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.t0=function(e,t,n,r,i){var a=new yy({next:function(n){t.enqueueAndForget((function(){return Lp(e,o)})),n.fromCache&&"server"===r.source?i.reject(new no(to.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:function(e){return i.reject(e)}}),o=new jp(n,a,{includeMetadataChanges:!0,Nu:!0});return Pp(e,o)},i.next=3,Oy(e);case 3:return i.t1=i.sent,i.t2=e.asyncQueue,i.t3=t,i.t4=n,i.t5=r,i.abrupt("return",(0,i.t0)(i.t1,i.t2,i.t3,i.t4,i.t5));case 9:case"end":return i.stop()}}),i)})))),r.promise}var Uy=function(){function e(){var t=this;y(this,e),this.Bc=Promise.resolve(),this.Lc=[],this.qc=!1,this.Uc=[],this.Kc=null,this.Gc=!1,this.Qc=!1,this.jc=[],this.xo=new Rd(this,"async_queue_retry"),this.Wc=function(){var e=Ad();e&&Qa("AsyncQueue","Visibility state changed to "+e.visibilityState),t.xo.Po()};var n=Ad();n&&"function"==typeof n.addEventListener&&n.addEventListener("visibilitychange",this.Wc)}return g(e,[{key:"isShuttingDown",get:function(){return this.qc}},{key:"enqueueAndForget",value:function(e){this.enqueue(e)}},{key:"enqueueAndForgetEvenWhileRestricted",value:function(e){this.zc(),this.Hc(e)}},{key:"enterRestrictedMode",value:function(e){if(!this.qc){this.qc=!0,this.Qc=e||!1;var t=Ad();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Wc)}}},{key:"enqueue",value:function(e){var t=this;if(this.zc(),this.qc)return new Promise((function(){}));var n=new ro;return this.Hc((function(){return t.qc&&t.Qc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)})).then((function(){return n.promise}))}},{key:"enqueueRetryable",value:function(e){var t=this;this.enqueueAndForget((function(){return t.Lc.push(e),t.Jc()}))}},{key:"Jc",value:function(){var e=se(oe().mark((function e(){var t=this;return oe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0===this.Lc.length){e.next=14;break}return e.prev=1,e.next=4,this.Lc[0]();case 4:this.Lc.shift(),this.xo.reset(),e.next=13;break;case 8:if(e.prev=8,e.t0=e.catch(1),zo(e.t0)){e.next=12;break}throw e.t0;case 12:Qa("AsyncQueue","Operation failed with retryable error: "+e.t0);case 13:this.Lc.length>0&&this.xo.Ro((function(){return t.Jc()}));case 14:case"end":return e.stop()}}),e,this,[[1,8]])})));return function(){return e.apply(this,arguments)}}()},{key:"Hc",value:function(e){var t=this,n=this.Bc.then((function(){return t.Gc=!0,e().catch((function(e){t.Kc=e,t.Gc=!1;var n=function(e){var t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}(e);throw Ya("INTERNAL UNHANDLED ERROR: ",n),e})).then((function(e){return t.Gc=!1,e}))}));return this.Bc=n,n}},{key:"enqueueAfterDelay",value:function(e,t,n){var r=this;this.zc(),this.jc.indexOf(e)>-1&&(t=0);var i=Ep.createAndSchedule(this,e,t,n,(function(e){return r.Yc(e)}));return this.Uc.push(i),i}},{key:"zc",value:function(){this.Kc&&Ja()}},{key:"verifyOperationInProgress",value:function(){}},{key:"Xc",value:function(){var e=se(oe().mark((function e(){var t;return oe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.Bc,e.next=3,t;case 3:if(t!==this.Bc){e.next=0;break}case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Zc",value:function(e){var t,n=k(this.Uc);try{for(n.s();!(t=n.n()).done;){if(t.value.timerId===e)return!0}}catch(r){n.e(r)}finally{n.f()}return!1}},{key:"ta",value:function(e){var t=this;return this.Xc().then((function(){t.Uc.sort((function(e,t){return e.targetTimeMs-t.targetTimeMs}));var n,r=k(t.Uc);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(i.skipDelay(),"all"!==e&&i.timerId===e)break}}catch(a){r.e(a)}finally{r.f()}return t.Xc()}))}},{key:"ea",value:function(e){this.jc.push(e)}},{key:"Yc",value:function(e){var t=this.Uc.indexOf(e);this.Uc.splice(t,1)}}]),e}();function Vy(e){return function(e,t){if("object"!=typeof e||null===e)return!1;var n,r=e,i=k(["next","error","complete"]);try{for(i.s();!(n=i.n()).done;){var a=n.value;if(a in r&&"function"==typeof r[a])return!0}}catch(o){i.e(o)}finally{i.f()}return!1}(e)}var jy=function(){function e(){y(this,e),this._progressObserver={},this._taskCompletionResolver=new ro,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}return g(e,[{key:"onProgress",value:function(e,t,n){this._progressObserver={next:e,error:t,complete:n}}},{key:"catch",value:function(e){return this._taskCompletionResolver.promise.catch(e)}},{key:"then",value:function(e,t){return this._taskCompletionResolver.promise.then(e,t)}},{key:"_completeWith",value:function(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}},{key:"_failWith",value:function(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}},{key:"_updateProgress",value:function(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}]),e}(),By=function(e){x(n,e);var t=T(n);function n(e,r,i,a){var o;return y(this,n),(o=t.call(this,e,r,i,a)).type="firestore",o._queue=new Uy,o._persistenceKey=(null==a?void 0:a.name)||"[DEFAULT]",o}return g(n,[{key:"_terminate",value:function(){return this._firestoreClient||zy(this),this._firestoreClient.terminate()}}]),n}(oy);function qy(e){return e._firestoreClient||zy(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function zy(e){var t,n=e._freezeSettings(),r=function(e,t,n,r){return new Xo(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,r.useFetchStreams)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,n);e._firestoreClient=new by(e._authCredentials,e._appCheckCredentials,e._queue,r)}function Ky(e,t,n){var r=new ro;return e.asyncQueue.enqueue(se(oe().mark((function i(){var a;return oe().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.prev=0,i.next=3,wy(e,n);case 3:return i.next=5,_y(e,t);case 5:r.resolve(),i.next=14;break;case 8:if(i.prev=8,i.t0=i.catch(0),function(e){return"FirebaseError"===e.name?e.code===to.FAILED_PRECONDITION||e.code===to.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||(22===e.code||20===e.code||11===e.code)}(a=i.t0)){i.next=13;break}throw a;case 13:$a("Error enabling offline persistence. Falling back to persistence disabled: "+a),r.reject(a);case 14:case"end":return i.stop()}}),i,null,[[0,8]])})))).then((function(){return r.promise}))}function Gy(e){return function(e){return e.asyncQueue.enqueue(se(oe().mark((function t(){var n,r;return oe().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Ny(e);case 2:return n=t.sent,t.next=5,Dy(e);case 5:return r=t.sent,t.abrupt("return",(n.setNetworkEnabled(!0),function(e){var t=eo(e);return t._u.delete(0),Vd(t)}(r)));case 7:case"end":return t.stop()}}),t)}))))}(qy(e=ny(e,By)))}function Wy(e){return function(e){return e.asyncQueue.enqueue(se(oe().mark((function t(){var n,r;return oe().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Ny(e);case 2:return n=t.sent,t.next=5,Dy(e);case 5:return r=t.sent,t.abrupt("return",(n.setNetworkEnabled(!1),function(){var e=se(oe().mark((function e(t){var n;return oe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=eo(t))._u.add(0),e.next=4,Bd(n);case 4:n.gu.set("Offline");case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(r)));case 7:case"end":return t.stop()}}),t)}))))}(qy(e=ny(e,By)))}function Hy(e,t){var n=qy(e=ny(e,By)),r=new jy;return function(e,t,n,r){var i=function(e,t){return function(e,t){return new my(e,t)}(function(e,t){if(e instanceof Uint8Array)return vy(e,t);if(e instanceof ArrayBuffer)return vy(new Uint8Array(e),t);if(e instanceof ReadableStream)return e.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}("string"==typeof e?(new TextEncoder).encode(e):e),t)}(n,Dd(t));e.asyncQueue.enqueueAndForget(se(oe().mark((function t(){return oe().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=Wv,t.next=3,Ry(e);case 3:t.t1=t.sent,t.t2=i,t.t3=r,(0,t.t0)(t.t1,t.t2,t.t3);case 7:case"end":return t.stop()}}),t)}))))}(n,e._databaseId,t,r),r}function Qy(e,t){return function(e,t){return e.asyncQueue.enqueue(se(oe().mark((function n(){return oe().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.t0=function(e,t){var n=eo(e);return n.persistence.runTransaction("Get named query","readonly",(function(e){return n.Ns.getNamedQuery(e,t)}))},n.next=3,Ay(e);case 3:return n.t1=n.sent,n.t2=t,n.abrupt("return",(0,n.t0)(n.t1,n.t2));case 6:case"end":return n.stop()}}),n)}))))}(qy(e=ny(e,By)),t).then((function(t){return t?new cy(e,null,t.query):null}))}function Yy(e){if(e._initialized||e._terminated)throw new no(to.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}var $y=function(){function e(t){y(this,e),this._byteString=t}return g(e,[{key:"toBase64",value:function(){return this._byteString.toBase64()}},{key:"toUint8Array",value:function(){return this._byteString.toUint8Array()}},{key:"toString",value:function(){return"Bytes(base64: "+this.toBase64()+")"}},{key:"isEqual",value:function(e){return this._byteString.isEqual(e._byteString)}}],[{key:"fromBase64String",value:function(t){try{return new e(au.fromBase64String(t))}catch(t){throw new no(to.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}},{key:"fromUint8Array",value:function(t){return new e(au.fromUint8Array(t))}}]),e}(),Xy=function(){function e(){y(this,e);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0;i<n.length;++i)if(0===n[i].length)throw new no(to.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new _o(n)}return g(e,[{key:"isEqual",value:function(e){return this._internalPath.isEqual(e._internalPath)}}]),e}();var Jy=g((function e(t){y(this,e),this._methodName=t})),Zy=function(){function e(t,n){if(y(this,e),!isFinite(t)||t<-90||t>90)throw new no(to.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new no(to.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}return g(e,[{key:"latitude",get:function(){return this._lat}},{key:"longitude",get:function(){return this._long}},{key:"isEqual",value:function(e){return this._lat===e._lat&&this._long===e._long}},{key:"toJSON",value:function(){return{latitude:this._lat,longitude:this._long}}},{key:"_compareTo",value:function(e){return vo(this._lat,e._lat)||vo(this._long,e._long)}}]),e}(),em=/^__.*__$/,tm=function(){function e(t,n,r){y(this,e),this.data=t,this.fieldMask=n,this.fieldTransforms=r}return g(e,[{key:"toMutation",value:function(e,t){return null!==this.fieldMask?new hc(e,this.data,this.fieldMask,t,this.fieldTransforms):new fc(e,this.data,t,this.fieldTransforms)}}]),e}(),nm=function(){function e(t,n,r){y(this,e),this.data=t,this.fieldMask=n,this.fieldTransforms=r}return g(e,[{key:"toMutation",value:function(e,t){return new hc(e,this.data,this.fieldMask,t,this.fieldTransforms)}}]),e}();function rm(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ja()}}var im=function(){function e(t,n,r,i,a,o){y(this,e),this.settings=t,this.databaseId=n,this.yt=r,this.ignoreUndefinedProperties=i,void 0===a&&this.na(),this.fieldTransforms=a||[],this.fieldMask=o||[]}return g(e,[{key:"path",get:function(){return this.settings.path}},{key:"sa",get:function(){return this.settings.sa}},{key:"ia",value:function(t){return new e(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.yt,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}},{key:"ra",value:function(e){var t,n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.ia({path:n,oa:!1});return r.ua(e),r}},{key:"ca",value:function(e){var t,n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.ia({path:n,oa:!1});return r.na(),r}},{key:"aa",value:function(e){return this.ia({path:void 0,oa:!0})}},{key:"ha",value:function(e){return Im(e,this.settings.methodName,this.settings.la||!1,this.path,this.settings.fa)}},{key:"contains",value:function(e){return void 0!==this.fieldMask.find((function(t){return e.isPrefixOf(t)}))||void 0!==this.fieldTransforms.find((function(t){return e.isPrefixOf(t.field)}))}},{key:"na",value:function(){if(this.path)for(var e=0;e<this.path.length;e++)this.ua(this.path.get(e))}},{key:"ua",value:function(e){if(0===e.length)throw this.ha("Document fields must not be empty");if(rm(this.sa)&&em.test(e))throw this.ha('Document fields cannot begin and end with "__"')}}]),e}(),am=function(){function e(t,n,r){y(this,e),this.databaseId=t,this.ignoreUndefinedProperties=n,this.yt=r||Dd(t)}return g(e,[{key:"da",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new im({sa:e,methodName:t,fa:n,path:_o.emptyPath(),oa:!1,la:r},this.databaseId,this.yt,this.ignoreUndefinedProperties)}}]),e}();function om(e){var t=e._freezeSettings(),n=Dd(e._databaseId);return new am(e._databaseId,!!t.ignoreUndefinedProperties,n)}function um(e,t,n,r,i){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},o=e.da(a.merge||a.mergeFields?2:0,t,n,i);bm("Data must be an object, but it was:",o,r);var u,s,c=gm(r,o);if(a.merge)u=new ls(o.fieldMask),s=o.fieldTransforms;else if(a.mergeFields){var l,f=[],h=k(a.mergeFields);try{for(h.s();!(l=h.n()).done;){var d=l.value,p=wm(t,d,n);if(!o.contains(p))throw new no(to.INVALID_ARGUMENT,"Field '".concat(p,"' is specified in your field mask but missing from your input data."));Sm(f,p)||f.push(p)}}catch(v){h.e(v)}finally{h.f()}u=new ls(f),s=o.fieldTransforms.filter((function(e){return u.covers(e.field)}))}else u=null,s=o.fieldTransforms;return new tm(new fs(c),u,s)}var sm=function(e){x(n,e);var t=T(n);function n(){return y(this,n),t.apply(this,arguments)}return g(n,[{key:"_toFieldTransform",value:function(e){if(2!==e.sa)throw 1===e.sa?e.ha("".concat(this._methodName,"() can only appear at the top level of your update data")):e.ha("".concat(this._methodName,"() cannot be used with set() unless you pass {merge:true}"));return e.fieldMask.push(e.path),null}},{key:"isEqual",value:function(e){return e instanceof n}}]),n}(Jy);function cm(e,t,n){return new im({sa:3,fa:t.settings.fa,methodName:e._methodName,oa:n},t.databaseId,t.yt,t.ignoreUndefinedProperties)}var lm=function(e){x(n,e);var t=T(n);function n(){return y(this,n),t.apply(this,arguments)}return g(n,[{key:"_toFieldTransform",value:function(e){return new tc(e.path,new Hs)}},{key:"isEqual",value:function(e){return e instanceof n}}]),n}(Jy),fm=function(e){x(n,e);var t=T(n);function n(e,r){var i;return y(this,n),(i=t.call(this,e))._a=r,i}return g(n,[{key:"_toFieldTransform",value:function(e){var t=cm(this,e,!0),n=this._a.map((function(e){return mm(e,t)})),r=new Qs(n);return new tc(e.path,r)}},{key:"isEqual",value:function(e){return this===e}}]),n}(Jy),hm=function(e){x(n,e);var t=T(n);function n(e,r){var i;return y(this,n),(i=t.call(this,e))._a=r,i}return g(n,[{key:"_toFieldTransform",value:function(e){var t=cm(this,e,!0),n=this._a.map((function(e){return mm(e,t)})),r=new $s(n);return new tc(e.path,r)}},{key:"isEqual",value:function(e){return this===e}}]),n}(Jy),dm=function(e){x(n,e);var t=T(n);function n(e,r){var i;return y(this,n),(i=t.call(this,e)).wa=r,i}return g(n,[{key:"_toFieldTransform",value:function(e){var t=new Js(e.yt,qs(e.yt,this.wa));return new tc(e.path,t)}},{key:"isEqual",value:function(e){return this===e}}]),n}(Jy);function pm(e,t,n,r){var i=e.da(1,t,n);bm("Data must be an object, but it was:",i,r);var a=[],o=fs.empty();eu(r,(function(e,r){var u=_m(t,e,n);r=ae(r);var s=i.ca(u);if(r instanceof sm)a.push(u);else{var c=mm(r,s);null!=c&&(a.push(u),o.set(u,c))}}));var u=new ls(a);return new nm(o,u,i.fieldTransforms)}function vm(e,t,n,r,i,a){var o=e.da(1,t,n),u=[wm(t,r,n)],s=[i];if(a.length%2!=0)throw new no(to.INVALID_ARGUMENT,"Function ".concat(t,"() needs to be called with an even number of arguments that alternate between field names and values."));for(var c=0;c<a.length;c+=2)u.push(wm(t,a[c])),s.push(a[c+1]);for(var l=[],f=fs.empty(),h=u.length-1;h>=0;--h)if(!Sm(l,u[h])){var d=u[h],p=s[h];p=ae(p);var v=o.ca(d);if(p instanceof sm)l.push(d);else{var y=mm(p,v);null!=y&&(l.push(d),f.set(d,y))}}var m=new ls(l);return new nm(f,m,o.fieldTransforms)}function ym(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return mm(n,e.da(r?4:3,t))}function mm(e,t){if(km(e=ae(e)))return bm("Unsupported field value:",t,e),gm(e,t);if(e instanceof Jy)return function(e,t){if(!rm(t.sa))throw t.ha("".concat(e._methodName,"() can only be used with update() and set()"));if(!t.path)throw t.ha("".concat(e._methodName,"() is not currently supported inside arrays"));var n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.oa&&4!==t.sa)throw t.ha("Nested arrays are not supported");return function(e,t){var n,r=[],i=0,a=k(e);try{for(a.s();!(n=a.n()).done;){var o=mm(n.value,t.aa(i));null==o&&(o={nullValue:"NULL_VALUE"}),r.push(o),i++}}catch(u){a.e(u)}finally{a.f()}return{arrayValue:{values:r}}}(e,t)}return function(e,t){if(null===(e=ae(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return qs(t.yt,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){var n=go.fromDate(e);return{timestampValue:$c(t.yt,n)}}if(e instanceof go){var r=new go(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:$c(t.yt,r)}}if(e instanceof Zy)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof $y)return{bytesValue:Xc(t.yt,e._byteString)};if(e instanceof sy){var i=t.databaseId,a=e.firestore._databaseId;if(!a.isEqual(i))throw t.ha("Document reference is for database ".concat(a.projectId,"/").concat(a.database," but should be for database ").concat(i.projectId,"/").concat(i.database));return{referenceValue:el(e.firestore._databaseId||t.databaseId,e._key.path)}}throw t.ha("Unsupported field value: ".concat(ty(e)))}(e,t)}function gm(e,t){var n={};return tu(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):eu(e,(function(e,r){var i=mm(r,t.ra(e));null!=i&&(n[e]=i)})),{mapValue:{fields:n}}}function km(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof go||e instanceof Zy||e instanceof $y||e instanceof sy||e instanceof Jy)}function bm(e,t,n){if(!km(n)||!function(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}(n)){var r=ty(n);throw"an object"===r?t.ha(e+" a custom object"):t.ha(e+" "+r)}}function wm(e,t,n){if((t=ae(t))instanceof Xy)return t._internalPath;if("string"==typeof t)return _m(e,t);throw Im("Field path arguments must be of type string or ",e,!1,void 0,n)}var xm=new RegExp("[~\\*/\\[\\]]");function _m(e,t,n){if(t.search(xm)>=0)throw Im("Invalid field path (".concat(t,"). Paths must not contain '~', '*', '/', '[', or ']'"),e,!1,void 0,n);try{return C(Xy,p(t.split(".")))._internalPath}catch(r){throw Im("Invalid field path (".concat(t,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"),e,!1,void 0,n)}}function Im(e,t,n,r,i){var a=r&&!r.isEmpty(),o=void 0!==i,u="Function ".concat(t,"() called with invalid data");n&&(u+=" (via `toFirestore()`)"),u+=". ";var s="";return(a||o)&&(s+=" (found",a&&(s+=" in field ".concat(r)),o&&(s+=" in document ".concat(i)),s+=")"),new no(to.INVALID_ARGUMENT,u+e+s)}function Sm(e,t){return e.some((function(e){return e.isEqual(t)}))}var Em=function(){function e(t,n,r,i,a){y(this,e),this._firestore=t,this._userDataWriter=n,this._key=r,this._document=i,this._converter=a}return g(e,[{key:"id",get:function(){return this._key.path.lastSegment()}},{key:"ref",get:function(){return new sy(this._firestore,this._converter,this._key)}},{key:"exists",value:function(){return null!==this._document}},{key:"data",value:function(){if(this._document){if(this._converter){var e=new Tm(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}},{key:"get",value:function(e){if(this._document){var t=this._document.data.field(Cm("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}]),e}(),Tm=function(e){x(n,e);var t=T(n);function n(){return y(this,n),t.apply(this,arguments)}return g(n,[{key:"data",value:function(){return Ft(_(n.prototype),"data",this).call(this)}}]),n}(Em);function Cm(e,t){return"string"==typeof t?_m(e,t):t instanceof Xy?t._internalPath:t._delegate._internalPath}function Nm(e){if("L"===e.limitType&&0===e.explicitOrderBy.length)throw new no(to.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var Am=g((function e(){y(this,e)})),Dm=function(e){x(n,e);var t=T(n);function n(){return y(this,n),t.apply(this,arguments)}return g(n)}(Am);function Rm(e,t){for(var n=[],r=arguments.length,i=new Array(r>2?r-2:0),a=2;a<r;a++)i[a-2]=arguments[a];t instanceof Am&&n.push(t),function(e){var t=e.filter((function(e){return e instanceof Om})).length,n=e.filter((function(e){return e instanceof Pm})).length;if(t>1||t>0&&n>0)throw new no(to.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n=n.concat(i));var o,u=k(n);try{for(u.s();!(o=u.n()).done;){var s=o.value;e=s._apply(e)}}catch(c){u.e(c)}finally{u.f()}return e}var Pm=function(e){x(n,e);var t=T(n);function n(e,r,i){var a;return y(this,n),(a=t.call(this))._field=e,a._op=r,a._value=i,a.type="where",a}return g(n,[{key:"_apply",value:function(e){var t=this._parse(e);return Wm(e._query,t),new cy(e.firestore,e.converter,Ds(e._query,t))}},{key:"_parse",value:function(e){var t=om(e.firestore),n=function(e,t,n,r,i,a,o){var u;if(i.isKeyField()){if("array-contains"===a||"array-contains-any"===a)throw new no(to.INVALID_ARGUMENT,"Invalid Query. You can't perform '".concat(a,"' queries on documentId()."));if("in"===a||"not-in"===a){Gm(o,a);var s,c=[],l=k(o);try{for(l.s();!(s=l.n()).done;){var f=s.value;c.push(Km(r,e,f))}}catch(h){l.e(h)}finally{l.f()}u={arrayValue:{values:c}}}else u=Km(r,e,o)}else"in"!==a&&"not-in"!==a&&"array-contains-any"!==a||Gm(o,a),u=ym(n,"where",o,"in"===a||"not-in"===a);return Uu.create(i,a,u)}(e._query,0,t,e.firestore._databaseId,this._field,this._op,this._value);return n}}],[{key:"_create",value:function(e,t,r){return new n(e,t,r)}}]),n}(Dm);var Om=function(e){x(n,e);var t=T(n);function n(e,r){var i;return y(this,n),(i=t.call(this)).type=e,i._queryConstraints=r,i}return g(n,[{key:"_parse",value:function(e){var t=this._queryConstraints.map((function(t){return t._parse(e)})).filter((function(e){return e.getFilters().length>0}));return 1===t.length?t[0]:Vu.create(t,this._getOperator())}},{key:"_apply",value:function(e){var t=this._parse(e);return 0===t.getFilters().length?e:(function(e,t){var n,r=e,i=k(t.getFlattenedFilters());try{for(i.s();!(n=i.n()).done;){var a=n.value;Wm(r,a),r=Ds(r,a)}}catch(o){i.e(o)}finally{i.f()}}(e._query,t),new cy(e.firestore,e.converter,Ds(e._query,t)))}},{key:"_getQueryConstraints",value:function(){return this._queryConstraints}},{key:"_getOperator",value:function(){return"and"===this.type?"and":"or"}}],[{key:"_create",value:function(e,t){return new n(e,t)}}]),n}(Am);var Lm=function(e){x(n,e);var t=T(n);function n(e,r){var i;return y(this,n),(i=t.call(this))._field=e,i._direction=r,i.type="orderBy",i}return g(n,[{key:"_apply",value:function(e){var t=function(e,t,n){if(null!==e.startAt)throw new no(to.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new no(to.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var r=new ns(t,n);return function(e,t){if(null===Es(e)){var n=Ts(e);null!==n&&Hm(e,n,t.field)}}(e,r),r}(e._query,this._field,this._direction);return new cy(e.firestore,e.converter,function(e,t){var n=e.explicitOrderBy.concat([t]);return new xs(e.path,e.collectionGroup,n,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(e._query,t))}}],[{key:"_create",value:function(e,t){return new n(e,t)}}]),n}(Dm);var Mm=function(e){x(n,e);var t=T(n);function n(e,r,i){var a;return y(this,n),(a=t.call(this)).type=e,a._limit=r,a._limitType=i,a}return g(n,[{key:"_apply",value:function(e){return new cy(e.firestore,e.converter,Rs(e._query,this._limit,this._limitType))}}],[{key:"_create",value:function(e,t,r){return new n(e,t,r)}}]),n}(Dm);var Fm=function(e){x(n,e);var t=T(n);function n(e,r,i){var a;return y(this,n),(a=t.call(this)).type=e,a._docOrFields=r,a._inclusive=i,a}return g(n,[{key:"_apply",value:function(e){var t=zm(e,this.type,this._docOrFields,this._inclusive);return new cy(e.firestore,e.converter,function(e,t){return new xs(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,t,e.endAt)}(e._query,t))}}],[{key:"_create",value:function(e,t,r){return new n(e,t,r)}}]),n}(Dm);function Um(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Fm._create("startAt",t,!0)}function Vm(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Fm._create("startAfter",t,!1)}var jm=function(e){x(n,e);var t=T(n);function n(e,r,i){var a;return y(this,n),(a=t.call(this)).type=e,a._docOrFields=r,a._inclusive=i,a}return g(n,[{key:"_apply",value:function(e){var t=zm(e,this.type,this._docOrFields,this._inclusive);return new cy(e.firestore,e.converter,function(e,t){return new xs(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,t)}(e._query,t))}}],[{key:"_create",value:function(e,t,r){return new n(e,t,r)}}]),n}(Dm);function Bm(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return jm._create("endBefore",t,!1)}function qm(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return jm._create("endAt",t,!0)}function zm(e,t,n,r){if(n[0]=ae(n[0]),n[0]instanceof Em)return function(e,t,n,r,i){if(!r)throw new no(to.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for ".concat(n,"()."));var a,o=[],u=k(Ns(e));try{for(u.s();!(a=u.n()).done;){var s=a.value;if(s.field.isKeyField())o.push(xu(t,r.key));else{var c=r.data.field(s.field);if(lu(c))throw new no(to.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+s.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===c){var l=s.field.canonicalString();throw new no(to.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '".concat(l,"' (used as the orderBy) does not exist."))}o.push(c)}}}catch(f){u.e(f)}finally{u.f()}return new Ou(o,i)}(e._query,e.firestore._databaseId,t,n[0]._document,r);var i=om(e.firestore);return function(e,t,n,r,i,a){var o=e.explicitOrderBy;if(i.length>o.length)throw new no(to.INVALID_ARGUMENT,"Too many arguments provided to ".concat(r,"(). The number of arguments must be less than or equal to the number of orderBy() clauses"));for(var u=[],s=0;s<i.length;s++){var c=i[s];if(o[s].field.isKeyField()){if("string"!=typeof c)throw new no(to.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in ".concat(r,"(), but got a ").concat(typeof c));if(!Cs(e)&&-1!==c.indexOf("/"))throw new no(to.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by documentId(), the value passed to ".concat(r,"() must be a plain document ID, but '").concat(c,"' contains a slash."));var l=e.path.child(wo.fromString(c));if(!Io.isDocumentKey(l))throw new no(to.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by documentId(), the value passed to ".concat(r,"() must result in a valid document path, but '").concat(l,"' is not because it contains an odd number of segments."));var f=new Io(l);u.push(xu(t,f))}else{var h=ym(n,r,c);u.push(h)}}return new Ou(u,a)}(e._query,e.firestore._databaseId,i,t,n,r)}function Km(e,t,n){if("string"==typeof(n=ae(n))){if(""===n)throw new no(to.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Cs(t)&&-1!==n.indexOf("/"))throw new no(to.INVALID_ARGUMENT,"Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '".concat(n,"' contains a '/' character."));var r=t.path.child(wo.fromString(n));if(!Io.isDocumentKey(r))throw new no(to.INVALID_ARGUMENT,"Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '".concat(r,"' is not because it has an odd number of segments (").concat(r.length,")."));return xu(e,new Io(r))}if(n instanceof sy)return xu(e,n._key);throw new no(to.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ".concat(ty(n),"."))}function Gm(e,t){if(!Array.isArray(e)||0===e.length)throw new no(to.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '".concat(t.toString(),"' filters."));if(e.length>10)throw new no(to.INVALID_ARGUMENT,"Invalid Query. '".concat(t.toString(),"' filters support a maximum of 10 elements in the value array."))}function Wm(e,t){if(t.isInequality()){var n=Ts(e),r=t.field;if(null!==n&&!n.isEqual(r))throw new no(to.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '".concat(n.toString(),"' and '").concat(r.toString(),"'"));var i=Es(e);null!==i&&Hm(e,r,i)}var a=function(e,t){var n,r=k(e);try{for(r.s();!(n=r.n()).done;){var i,a=k(n.value.getFlattenedFilters());try{for(a.s();!(i=a.n()).done;){var o=i.value;if(t.indexOf(o.op)>=0)return o.op}}catch(u){a.e(u)}finally{a.f()}}}catch(u){r.e(u)}finally{r.f()}return null}(e.filters,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==a)throw a===t.op?new no(to.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '".concat(t.op.toString(),"' filter.")):new no(to.INVALID_ARGUMENT,"Invalid query. You cannot use '".concat(t.op.toString(),"' filters with '").concat(a.toString(),"' filters."))}function Hm(e,t,n){if(!n.isEqual(t))throw new no(to.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '".concat(t.toString(),"' and so you must also use '").concat(t.toString(),"' as your first argument to orderBy(), but your first orderBy() is on field '").concat(n.toString(),"' instead."))}var Qm=function(){function e(){y(this,e)}return g(e,[{key:"convertValue",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch(vu(e)){case 0:return null;case 1:return e.booleanValue;case 2:return su(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(cu(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw Ja()}}},{key:"convertObject",value:function(e,t){var n=this,r={};return eu(e.fields,(function(e,i){r[e]=n.convertValue(i,t)})),r}},{key:"convertGeoPoint",value:function(e){return new Zy(su(e.latitude),su(e.longitude))}},{key:"convertArray",value:function(e,t){var n=this;return(e.values||[]).map((function(e){return n.convertValue(e,t)}))}},{key:"convertServerTimestamp",value:function(e,t){switch(t){case"previous":var n=fu(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(hu(e));default:return null}}},{key:"convertTimestamp",value:function(e){var t=uu(e);return new go(t.seconds,t.nanos)}},{key:"convertDocumentKey",value:function(e,t){var n=wo.fromString(e);Za(Il(n));var r=new Jo(n.get(1),n.get(3)),i=new Io(n.popFirst(5));return r.isEqual(t)||Ya("Document ".concat(i," contains a document reference within a different database (").concat(r.projectId,"/").concat(r.database,") which is not supported. It will be treated as a reference in the current database (").concat(t.projectId,"/").concat(t.database,") instead.")),i}}]),e}();function Ym(e,t,n){return e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t}var $m=function(e){x(n,e);var t=T(n);function n(e){var r;return y(this,n),(r=t.call(this)).firestore=e,r}return g(n,[{key:"convertBytes",value:function(e){return new $y(e)}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return new sy(this.firestore,null,t)}}]),n}(Qm),Xm=function(){function e(t,n){y(this,e),this.hasPendingWrites=t,this.fromCache=n}return g(e,[{key:"isEqual",value:function(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}]),e}(),Jm=function(e){x(n,e);var t=T(n);function n(e,r,i,a,o,u){var s;return y(this,n),(s=t.call(this,e,r,i,a,u))._firestore=e,s._firestoreImpl=e,s.metadata=o,s}return g(n,[{key:"exists",value:function(){return Ft(_(n.prototype),"exists",this).call(this)}},{key:"data",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){var t=new Zm(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}},{key:"get",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){var n=this._document.data.field(Cm("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}]),n}(Em),Zm=function(e){x(n,e);var t=T(n);function n(){return y(this,n),t.apply(this,arguments)}return g(n,[{key:"data",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Ft(_(n.prototype),"data",this).call(this,e)}}]),n}(Jm),eg=function(){function e(t,n,r,i){y(this,e),this._firestore=t,this._userDataWriter=n,this._snapshot=i,this.metadata=new Xm(i.hasPendingWrites,i.fromCache),this.query=r}return g(e,[{key:"docs",get:function(){var e=[];return this.forEach((function(t){return e.push(t)})),e}},{key:"size",get:function(){return this._snapshot.docs.size}},{key:"empty",get:function(){return 0===this.size}},{key:"forEach",value:function(e,t){var n=this;this._snapshot.docs.forEach((function(r){e.call(t,new Zm(n._firestore,n._userDataWriter,r.key,r,new Xm(n._snapshot.mutatedKeys.has(r.key),n._snapshot.fromCache),n.query.converter))}))}},{key:"docChanges",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new no(to.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){var n=0;return e._snapshot.docChanges.map((function(t){var r=new Zm(e._firestore,e._userDataWriter,t.doc.key,t.doc,new Xm(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter);return t.doc,{type:"added",doc:r,oldIndex:-1,newIndex:n++}}))}var r=e._snapshot.oldDocs;return e._snapshot.docChanges.filter((function(e){return t||3!==e.type})).map((function(t){var n=new Zm(e._firestore,e._userDataWriter,t.doc.key,t.doc,new Xm(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter),i=-1,a=-1;return 0!==t.type&&(i=r.indexOf(t.doc.key),r=r.delete(t.doc.key)),1!==t.type&&(a=(r=r.add(t.doc)).indexOf(t.doc.key)),{type:tg(t.type),doc:n,oldIndex:i,newIndex:a}}))}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}]),e}();function tg(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ja()}}function ng(e,t){return e instanceof Jm&&t instanceof Jm?e._firestore===t._firestore&&e._key.isEqual(t._key)&&(null===e._document?null===t._document:e._document.isEqual(t._document))&&e._converter===t._converter:e instanceof eg&&t instanceof eg&&e._firestore===t._firestore&&py(e.query,t.query)&&e.metadata.isEqual(t.metadata)&&e._snapshot.isEqual(t._snapshot)}var rg=function(e){x(n,e);var t=T(n);function n(e){var r;return y(this,n),(r=t.call(this)).firestore=e,r}return g(n,[{key:"convertBytes",value:function(e){return new $y(e)}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return new sy(this.firestore,null,t)}}]),n}(Qm);function ig(e){e=ny(e,sy);var t=ny(e.firestore,By),n=qy(t),r=new rg(t);return function(e,t){var n=new ro;return e.asyncQueue.enqueueAndForget(se(oe().mark((function r(){return oe().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=function(){var e=se(oe().mark((function e(t,n,r){var i,a;return oe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,function(e,t){var n=eo(e);return n.persistence.runTransaction("read document","readonly",(function(e){return n.localDocuments.getDocument(e,t)}))}(t,n);case 3:(i=e.sent).isFoundDocument()?r.resolve(i):i.isNoDocument()?r.resolve(null):r.reject(new no(to.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),a=Tp(e.t0,"Failed to get document '".concat(n," from cache")),r.reject(a);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,n,r){return e.apply(this,arguments)}}(),r.next=3,Ay(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(n,e._key).then((function(n){return new Jm(t,r,e._key,n,new Xm(null!==n&&n.hasLocalMutations,!0),e.converter)}))}function ag(e){e=ny(e,cy);var t=ny(e.firestore,By),n=qy(t),r=new rg(t);return function(e,t){var n=new ro;return e.asyncQueue.enqueueAndForget(se(oe().mark((function r(){return oe().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=function(){var e=se(oe().mark((function e(t,n,r){var i,a,o,u,s;return oe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,od(t,n,!0);case 3:i=e.sent,a=new Hp(n,i.Hi),o=a.Wu(i.documents),u=a.applyChanges(o,!1),r.resolve(u.snapshot),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),s=Tp(e.t0,"Failed to execute query '".concat(n," against cache")),r.reject(s);case 14:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t,n,r){return e.apply(this,arguments)}}(),r.next=3,Ay(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(n,e._query).then((function(n){return new eg(t,r,e,n)}))}function og(e,t,n){e=ny(e,sy);var r=ny(e.firestore,By),i=Ym(e.converter,t,n);return lg(r,[um(om(r),"setDoc",e._key,i,null!==e.converter,n).toMutation(e._key,rc.none())])}function ug(e,t,n){e=ny(e,sy);for(var r=ny(e.firestore,By),i=om(r),a=arguments.length,o=new Array(a>3?a-3:0),u=3;u<a;u++)o[u-3]=arguments[u];return lg(r,[("string"==typeof(t=ae(t))||t instanceof Xy?vm(i,"updateDoc",e._key,t,n,o):pm(i,"updateDoc",e._key,t)).toMutation(e._key,rc.exists(!0))])}function sg(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i,a,o;e=ae(e);var u={includeMetadataChanges:!1},s=0;"object"!=typeof n[s]||Vy(n[s])||(u=n[s],s++);var c,l,f,h={includeMetadataChanges:u.includeMetadataChanges};if(Vy(n[s])){var d=n[s];n[s]=null===(i=d.next)||void 0===i?void 0:i.bind(d),n[s+1]=null===(a=d.error)||void 0===a?void 0:a.bind(d),n[s+2]=null===(o=d.complete)||void 0===o?void 0:o.bind(d)}if(e instanceof sy)l=ny(e.firestore,By),f=Is(e._key.path),c={next:function(t){n[s]&&n[s](fg(l,e,t))},error:n[s+1],complete:n[s+2]};else{var p=ny(e,cy);l=ny(p.firestore,By),f=p._query;var v=new rg(l);c={next:function(e){n[s]&&n[s](new eg(l,v,p,e))},error:n[s+1],complete:n[s+2]},Nm(e._query)}return function(e,t,n,r){var i=new yy(r),a=new jp(t,i,n);return e.asyncQueue.enqueueAndForget(se(oe().mark((function t(){return oe().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=Pp,t.next=3,Oy(e);case 3:return t.t1=t.sent,t.t2=a,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)})))),function(){i.bc(),e.asyncQueue.enqueueAndForget(se(oe().mark((function t(){return oe().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=Lp,t.next=3,Oy(e);case 3:return t.t1=t.sent,t.t2=a,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)}))))}}(qy(l),f,h,c)}function cg(e,t){return function(e,t){var n=new yy(t);return e.asyncQueue.enqueueAndForget(se(oe().mark((function t(){return oe().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=function(e,t){eo(e).Ru.add(t),t.next()},t.next=3,Oy(e);case 3:return t.t1=t.sent,t.t2=n,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)})))),function(){n.bc(),e.asyncQueue.enqueueAndForget(se(oe().mark((function t(){return oe().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=function(e,t){eo(e).Ru.delete(t)},t.next=3,Oy(e);case 3:return t.t1=t.sent,t.t2=n,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)}))))}}(qy(e=ny(e,By)),Vy(t)?t:{next:t})}function lg(e,t){return function(e,t){var n=new ro;return e.asyncQueue.enqueueAndForget(se(oe().mark((function r(){return oe().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=rv,r.next=3,Ry(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(qy(e),t)}function fg(e,t,n){var r=n.docs.get(t._key),i=new rg(e);return new Jm(e,i,t._key,r,new Xm(n.hasPendingWrites,n.fromCache),t.converter)}var hg={maxAttempts:5},dg=function(){function e(t,n){y(this,e),this._firestore=t,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=om(t)}return g(e,[{key:"set",value:function(e,t,n){this._verifyNotCommitted();var r=pg(e,this._firestore),i=Ym(r.converter,t,n),a=um(this._dataReader,"WriteBatch.set",r._key,i,null!==r.converter,n);return this._mutations.push(a.toMutation(r._key,rc.none())),this}},{key:"update",value:function(e,t,n){this._verifyNotCommitted();for(var r,i=pg(e,this._firestore),a=arguments.length,o=new Array(a>3?a-3:0),u=3;u<a;u++)o[u-3]=arguments[u];return r="string"==typeof(t=ae(t))||t instanceof Xy?vm(this._dataReader,"WriteBatch.update",i._key,t,n,o):pm(this._dataReader,"WriteBatch.update",i._key,t),this._mutations.push(r.toMutation(i._key,rc.exists(!0))),this}},{key:"delete",value:function(e){this._verifyNotCommitted();var t=pg(e,this._firestore);return this._mutations=this._mutations.concat(new gc(t._key,rc.none())),this}},{key:"commit",value:function(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}},{key:"_verifyNotCommitted",value:function(){if(this._committed)throw new no(to.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}]),e}();function pg(e,t){if((e=ae(e)).firestore!==t)throw new no(to.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}var vg=function(e){x(n,e);var t=T(n);function n(e,r){var i;return y(this,n),(i=t.call(this,e,r))._firestore=e,i}return g(n,[{key:"get",value:function(e){var t=this,r=pg(e,this._firestore),i=new rg(this._firestore);return Ft(_(n.prototype),"get",this).call(this,e).then((function(e){return new Jm(t._firestore,i,r._key,e._document,new Xm(!1,!1),r.converter)}))}}]),n}(function(){function e(t,n){y(this,e),this._firestore=t,this._transaction=n,this._dataReader=om(t)}return g(e,[{key:"get",value:function(e){var t=this,n=pg(e,this._firestore),r=new $m(this._firestore);return this._transaction.lookup([n._key]).then((function(e){if(!e||1!==e.length)return Ja();var i=e[0];if(i.isFoundDocument())return new Em(t._firestore,r,i.key,i,n.converter);if(i.isNoDocument())return new Em(t._firestore,r,n._key,null,n.converter);throw Ja()}))}},{key:"set",value:function(e,t,n){var r=pg(e,this._firestore),i=Ym(r.converter,t,n),a=um(this._dataReader,"Transaction.set",r._key,i,null!==r.converter,n);return this._transaction.set(r._key,a),this}},{key:"update",value:function(e,t,n){for(var r,i=pg(e,this._firestore),a=arguments.length,o=new Array(a>3?a-3:0),u=3;u<a;u++)o[u-3]=arguments[u];return r="string"==typeof(t=ae(t))||t instanceof Xy?vm(this._dataReader,"Transaction.update",i._key,t,n,o):pm(this._dataReader,"Transaction.update",i._key,t),this._transaction.update(i._key,r),this}},{key:"delete",value:function(e){var t=pg(e,this._firestore);return this._transaction.delete(t._key),this}}]),e}());function yg(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new fm("arrayUnion",t)}function mg(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new hm("arrayRemove",t)}!function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(e){Ga=e}(it),Xe(new ce("firestore",(function(e,n){var r=n.instanceIdentifier,i=n.options,a=e.getProvider("app").getImmediate(),o=new By(new uo(e.getProvider("auth-internal")),new fo(e.getProvider("app-check-internal")),function(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new no(to.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Jo(e.options.projectId,t)}(a,r),a);return i=Object.assign({useFetchStreams:t},i),o._setSettings(i),o}),"PUBLIC").setMultipleInstances(!0)),lt(za,"3.8.3",e),lt(za,"3.8.3","esm2017")}();function gg(e,t){if(void 0===t)return{merge:!1};if(void 0!==t.mergeFields&&void 0!==t.merge)throw new no("invalid-argument","Invalid options passed to function ".concat(e,"(): You cannot ")+'specify both "merge" and "mergeFields".');return t}function kg(){if("undefined"===typeof Uint8Array)throw new no("unimplemented","Uint8Arrays are not available in this environment.")}function bg(){if("undefined"==typeof atob)throw new no("unimplemented","Blobs are unavailable in Firestore in this environment.")}var wg=function(){function e(t){y(this,e),this._delegate=t}return g(e,[{key:"toBase64",value:function(){return bg(),this._delegate.toBase64()}},{key:"toUint8Array",value:function(){return kg(),this._delegate.toUint8Array()}},{key:"isEqual",value:function(e){return this._delegate.isEqual(e._delegate)}},{key:"toString",value:function(){return"Blob(base64: "+this.toBase64()+")"}}],[{key:"fromBase64String",value:function(t){return bg(),new e($y.fromBase64String(t))}},{key:"fromUint8Array",value:function(t){return kg(),new e($y.fromUint8Array(t))}}]),e}();function xg(e){return function(e,t){if("object"!==typeof e||null===e)return!1;var n,r=e,i=k(t);try{for(i.s();!(n=i.n()).done;){var a=n.value;if(a in r&&"function"===typeof r[a])return!0}}catch(o){i.e(o)}finally{i.f()}return!1}(e,["next","error","complete"])}var _g=function(){function e(){y(this,e)}return g(e,[{key:"enableIndexedDbPersistence",value:function(e,t){return function(e,t){Yy(e=ny(e,By));var n=qy(e),r=e._freezeSettings(),i=new $v;return Ky(n,i,new Qv(i,r.cacheSizeBytes,null==t?void 0:t.forceOwnership))}(e._delegate,{forceOwnership:t})}},{key:"enableMultiTabIndexedDbPersistence",value:function(e){return function(e){Yy(e=ny(e,By));var t=qy(e),n=e._freezeSettings(),r=new $v;return Ky(t,r,new Yv(r,n.cacheSizeBytes))}(e._delegate)}},{key:"clearIndexedDbPersistence",value:function(e){return function(e){if(e._initialized&&!e._terminated)throw new no(to.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");var t=new ro;return e._queue.enqueueAndForgetEvenWhileRestricted(se(oe().mark((function n(){return oe().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,function(){var e=se(oe().mark((function e(t){var n;return oe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(jo.C()){e.next=2;break}return e.abrupt("return",Promise.resolve());case 2:return n=t+"main",e.next=5,jo.delete(n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(Gh(e._databaseId,e._persistenceKey));case 3:t.resolve(),n.next=9;break;case 6:n.prev=6,n.t0=n.catch(0),t.reject(n.t0);case 9:case"end":return n.stop()}}),n,null,[[0,6]])})))),t.promise}(e._delegate)}}]),e}(),Ig=function(){function e(t,n,r){var i=this;y(this,e),this._delegate=n,this._persistenceProvider=r,this.INTERNAL={delete:function(){return i.terminate()}},t instanceof Jo||(this._appCompat=t)}return g(e,[{key:"_databaseId",get:function(){return this._delegate._databaseId}},{key:"settings",value:function(e){var t=this._delegate._getSettings();e.merge||t.host===e.host||$a("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}},{key:"useEmulator",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};uy(this._delegate,e,t,n)}},{key:"enableNetwork",value:function(){return Gy(this._delegate)}},{key:"disableNetwork",value:function(){return Wy(this._delegate)}},{key:"enablePersistence",value:function(e){var t=!1,n=!1;return e&&Jv("synchronizeTabs",t=!!e.synchronizeTabs,"experimentalForceOwningTab",n=!!e.experimentalForceOwningTab),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,n)}},{key:"clearPersistence",value:function(){return this._persistenceProvider.clearIndexedDbPersistence(this)}},{key:"terminate",value:function(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}},{key:"waitForPendingWrites",value:function(){return function(e){return function(e){var t=new ro;return e.asyncQueue.enqueueAndForget(se(oe().mark((function n(){return oe().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.t0=pv,n.next=3,Ry(e);case 3:return n.t1=n.sent,n.t2=t,n.abrupt("return",(0,n.t0)(n.t1,n.t2));case 6:case"end":return n.stop()}}),n)})))),t.promise}(qy(e=ny(e,By)))}(this._delegate)}},{key:"onSnapshotsInSync",value:function(e){return cg(this._delegate,e)}},{key:"app",get:function(){if(!this._appCompat)throw new no("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}},{key:"collection",value:function(e){try{return new Ug(this,fy(this._delegate,e))}catch(t){throw Ag(t,"collection()","Firestore.collection()")}}},{key:"doc",value:function(e){try{return new Ng(this,hy(this._delegate,e))}catch(t){throw Ag(t,"doc()","Firestore.doc()")}}},{key:"collectionGroup",value:function(e){try{return new Lg(this,function(e,t){if(e=ny(e,oy),Xv("collectionGroup","collection id",t),t.indexOf("/")>=0)throw new no(to.INVALID_ARGUMENT,"Invalid collection ID '".concat(t,"' passed to function collectionGroup(). Collection IDs must not contain '/'."));return new cy(e,null,function(e){return new xs(wo.emptyPath(),e)}(t))}(this._delegate,e))}catch(t){throw Ag(t,"collectionGroup()","Firestore.collectionGroup()")}}},{key:"runTransaction",value:function(e){var t=this;return function(e,t,n){e=ny(e,By);var r=Object.assign(Object.assign({},hg),n);return function(e){if(e.maxAttempts<1)throw new no(to.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(e,t,n){var r=new ro;return e.asyncQueue.enqueueAndForget(se(oe().mark((function i(){var a;return oe().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,Py(e);case 2:a=i.sent,new ky(e.asyncQueue,a,n,t,r).run();case 4:case"end":return i.stop()}}),i)})))),r.promise}(qy(e),(function(n){return t(new vg(e,n))}),r)}(this._delegate,(function(n){return e(new Eg(t,n))}))}},{key:"batch",value:function(){var e=this;return qy(this._delegate),new Tg(new dg(this._delegate,(function(t){return lg(e._delegate,t)})))}},{key:"loadBundle",value:function(e){return Hy(this._delegate,e)}},{key:"namedQuery",value:function(e){var t=this;return Qy(this._delegate,e).then((function(e){return e?new Lg(t,e):null}))}}]),e}(),Sg=function(e){x(n,e);var t=T(n);function n(e){var r;return y(this,n),(r=t.call(this)).firestore=e,r}return g(n,[{key:"convertBytes",value:function(e){return new wg(new $y(e))}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return Ng.forKey(t,this.firestore,null)}}]),n}(Qm);var Eg=function(){function e(t,n){y(this,e),this._firestore=t,this._delegate=n,this._userDataWriter=new Sg(t)}return g(e,[{key:"get",value:function(e){var t=this,n=Vg(e);return this._delegate.get(n).then((function(e){return new Pg(t._firestore,new Jm(t._firestore._delegate,t._userDataWriter,e._key,e._document,e.metadata,n.converter))}))}},{key:"set",value:function(e,t,n){var r=Vg(e);return n?(gg("Transaction.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}},{key:"update",value:function(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),a=3;a<r;a++)i[a-3]=arguments[a];var o,u=Vg(e);2===arguments.length?this._delegate.update(u,t):(o=this._delegate).update.apply(o,[u,t,n].concat(i));return this}},{key:"delete",value:function(e){var t=Vg(e);return this._delegate.delete(t),this}}]),e}(),Tg=function(){function e(t){y(this,e),this._delegate=t}return g(e,[{key:"set",value:function(e,t,n){var r=Vg(e);return n?(gg("WriteBatch.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}},{key:"update",value:function(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),a=3;a<r;a++)i[a-3]=arguments[a];var o,u=Vg(e);2===arguments.length?this._delegate.update(u,t):(o=this._delegate).update.apply(o,[u,t,n].concat(i));return this}},{key:"delete",value:function(e){var t=Vg(e);return this._delegate.delete(t),this}},{key:"commit",value:function(){return this._delegate.commit()}}]),e}(),Cg=function(){function e(t,n,r){y(this,e),this._firestore=t,this._userDataWriter=n,this._delegate=r}return g(e,[{key:"fromFirestore",value:function(e,t){var n=new Zm(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new Og(this._firestore,n),null!==t&&void 0!==t?t:{})}},{key:"toFirestore",value:function(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}}],[{key:"getInstance",value:function(t,n){var r=e.INSTANCES,i=r.get(t);i||(i=new WeakMap,r.set(t,i));var a=i.get(n);return a||(a=new e(t,new Sg(t),n),i.set(n,a)),a}}]),e}();Cg.INSTANCES=new WeakMap;var Ng=function(){function e(t,n){y(this,e),this.firestore=t,this._delegate=n,this._userDataWriter=new Sg(t)}return g(e,[{key:"id",get:function(){return this._delegate.id}},{key:"parent",get:function(){return new Ug(this.firestore,this._delegate.parent)}},{key:"path",get:function(){return this._delegate.path}},{key:"collection",value:function(e){try{return new Ug(this.firestore,fy(this._delegate,e))}catch(t){throw Ag(t,"collection()","DocumentReference.collection()")}}},{key:"isEqual",value:function(e){return(e=ae(e))instanceof sy&&dy(this._delegate,e)}},{key:"set",value:function(e,t){t=gg("DocumentReference.set",t);try{return t?og(this._delegate,e,t):og(this._delegate,e)}catch(n){throw Ag(n,"setDoc()","DocumentReference.set()")}}},{key:"update",value:function(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];try{return 1===arguments.length?ug(this._delegate,e):ug.apply(void 0,[this._delegate,e,t].concat(r))}catch(a){throw Ag(a,"updateDoc()","DocumentReference.update()")}}},{key:"delete",value:function(){return function(e){return lg(ny(e.firestore,By),[new gc(e._key,rc.none())])}(this._delegate)}},{key:"onSnapshot",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=Dg(n),a=Rg(n,(function(t){return new Pg(e.firestore,new Jm(e.firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,e._delegate.converter))}));return sg(this._delegate,i,a)}},{key:"get",value:function(e){var t,n=this;return t="cache"===(null===e||void 0===e?void 0:e.source)?ig(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?function(e){e=ny(e,sy);var t=ny(e.firestore,By);return My(qy(t),e._key,{source:"server"}).then((function(n){return fg(t,e,n)}))}(this._delegate):function(e){e=ny(e,sy);var t=ny(e.firestore,By);return My(qy(t),e._key).then((function(n){return fg(t,e,n)}))}(this._delegate),t.then((function(e){return new Pg(n.firestore,new Jm(n.firestore._delegate,n._userDataWriter,e._key,e._document,e.metadata,n._delegate.converter))}))}},{key:"withConverter",value:function(t){return new e(this.firestore,t?this._delegate.withConverter(Cg.getInstance(this.firestore,t)):this._delegate.withConverter(null))}}],[{key:"forPath",value:function(t,n,r){if(t.length%2!==0)throw new no("invalid-argument","Invalid document reference. Document references must have an even number of segments, but "+"".concat(t.canonicalString()," has ").concat(t.length));return new e(n,new sy(n._delegate,r,new Io(t)))}},{key:"forKey",value:function(t,n,r){return new e(n,new sy(n._delegate,r,t))}}]),e}();function Ag(e,t,n){return e.message=e.message.replace(t,n),e}function Dg(e){var t,n=k(e);try{for(n.s();!(t=n.n()).done;){var r=t.value;if("object"===typeof r&&!xg(r))return r}}catch(i){n.e(i)}finally{n.f()}return{}}function Rg(e,t){var n,r,i;return{next:function(e){i.next&&i.next(t(e))},error:null===(n=(i=xg(e[0])?e[0]:xg(e[1])?e[1]:"function"===typeof e[0]?{next:e[0],error:e[1],complete:e[2]}:{next:e[1],error:e[2],complete:e[3]}).error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}var Pg=function(){function e(t,n){y(this,e),this._firestore=t,this._delegate=n}return g(e,[{key:"ref",get:function(){return new Ng(this._firestore,this._delegate.ref)}},{key:"id",get:function(){return this._delegate.id}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"exists",get:function(){return this._delegate.exists()}},{key:"data",value:function(e){return this._delegate.data(e)}},{key:"get",value:function(e,t){return this._delegate.get(e,t)}},{key:"isEqual",value:function(e){return ng(this._delegate,e._delegate)}}]),e}(),Og=function(e){x(n,e);var t=T(n);function n(){return y(this,n),t.apply(this,arguments)}return g(n,[{key:"data",value:function(e){var t=this._delegate.data(e);return function(e,t){e||Ja()}(void 0!==t),t}}]),n}(Pg),Lg=function(){function e(t,n){y(this,e),this.firestore=t,this._delegate=n,this._userDataWriter=new Sg(t)}return g(e,[{key:"where",value:function(t,n,r){try{return new e(this.firestore,Rm(this._delegate,function(e,t,n){var r=t,i=Cm("where",e);return Pm._create(i,r,n)}(t,n,r)))}catch(i){throw Ag(i,/(orderBy|where)\(\)/,"Query.$1()")}}},{key:"orderBy",value:function(t,n){try{return new e(this.firestore,Rm(this._delegate,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc",n=Cm("orderBy",e);return Lm._create(n,t)}(t,n)))}catch(r){throw Ag(r,/(orderBy|where)\(\)/,"Query.$1()")}}},{key:"limit",value:function(t){try{return new e(this.firestore,Rm(this._delegate,function(e){return ry("limit",e),Mm._create("limit",e,"F")}(t)))}catch(n){throw Ag(n,"limit()","Query.limit()")}}},{key:"limitToLast",value:function(t){try{return new e(this.firestore,Rm(this._delegate,function(e){return ry("limitToLast",e),Mm._create("limitToLast",e,"L")}(t)))}catch(n){throw Ag(n,"limitToLast()","Query.limitToLast()")}}},{key:"startAt",value:function(){try{return new e(this.firestore,Rm(this._delegate,Um.apply(void 0,arguments)))}catch(t){throw Ag(t,"startAt()","Query.startAt()")}}},{key:"startAfter",value:function(){try{return new e(this.firestore,Rm(this._delegate,Vm.apply(void 0,arguments)))}catch(t){throw Ag(t,"startAfter()","Query.startAfter()")}}},{key:"endBefore",value:function(){try{return new e(this.firestore,Rm(this._delegate,Bm.apply(void 0,arguments)))}catch(t){throw Ag(t,"endBefore()","Query.endBefore()")}}},{key:"endAt",value:function(){try{return new e(this.firestore,Rm(this._delegate,qm.apply(void 0,arguments)))}catch(t){throw Ag(t,"endAt()","Query.endAt()")}}},{key:"isEqual",value:function(e){return py(this._delegate,e._delegate)}},{key:"get",value:function(e){var t,n=this;return t="cache"===(null===e||void 0===e?void 0:e.source)?ag(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?function(e){e=ny(e,cy);var t=ny(e.firestore,By),n=qy(t),r=new rg(t);return Fy(n,e._query,{source:"server"}).then((function(n){return new eg(t,r,e,n)}))}(this._delegate):function(e){e=ny(e,cy);var t=ny(e.firestore,By),n=qy(t),r=new rg(t);return Nm(e._query),Fy(n,e._query).then((function(n){return new eg(t,r,e,n)}))}(this._delegate),t.then((function(e){return new Fg(n.firestore,new eg(n.firestore._delegate,n._userDataWriter,n._delegate,e._snapshot))}))}},{key:"onSnapshot",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=Dg(n),a=Rg(n,(function(t){return new Fg(e.firestore,new eg(e.firestore._delegate,e._userDataWriter,e._delegate,t._snapshot))}));return sg(this._delegate,i,a)}},{key:"withConverter",value:function(t){return new e(this.firestore,t?this._delegate.withConverter(Cg.getInstance(this.firestore,t)):this._delegate.withConverter(null))}}]),e}(),Mg=function(){function e(t,n){y(this,e),this._firestore=t,this._delegate=n}return g(e,[{key:"type",get:function(){return this._delegate.type}},{key:"doc",get:function(){return new Og(this._firestore,this._delegate.doc)}},{key:"oldIndex",get:function(){return this._delegate.oldIndex}},{key:"newIndex",get:function(){return this._delegate.newIndex}}]),e}(),Fg=function(){function e(t,n){y(this,e),this._firestore=t,this._delegate=n}return g(e,[{key:"query",get:function(){return new Lg(this._firestore,this._delegate.query)}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"size",get:function(){return this._delegate.size}},{key:"empty",get:function(){return this._delegate.empty}},{key:"docs",get:function(){var e=this;return this._delegate.docs.map((function(t){return new Og(e._firestore,t)}))}},{key:"docChanges",value:function(e){var t=this;return this._delegate.docChanges(e).map((function(e){return new Mg(t._firestore,e)}))}},{key:"forEach",value:function(e,t){var n=this;this._delegate.forEach((function(r){e.call(t,new Og(n._firestore,r))}))}},{key:"isEqual",value:function(e){return ng(this._delegate,e._delegate)}}]),e}(),Ug=function(e){x(n,e);var t=T(n);function n(e,r){var i;return y(this,n),(i=t.call(this,e,r)).firestore=e,i._delegate=r,i}return g(n,[{key:"id",get:function(){return this._delegate.id}},{key:"path",get:function(){return this._delegate.path}},{key:"parent",get:function(){var e=this._delegate.parent;return e?new Ng(this.firestore,e):null}},{key:"doc",value:function(e){try{return new Ng(this.firestore,void 0===e?hy(this._delegate):hy(this._delegate,e))}catch(t){throw Ag(t,"doc()","CollectionReference.doc()")}}},{key:"add",value:function(e){var t=this;return function(e,t){var n=ny(e.firestore,By),r=hy(e),i=Ym(e.converter,t);return lg(n,[um(om(e.firestore),"addDoc",r._key,i,null!==e.converter,{}).toMutation(r._key,rc.exists(!1))]).then((function(){return r}))}(this._delegate,e).then((function(e){return new Ng(t.firestore,e)}))}},{key:"isEqual",value:function(e){return dy(this._delegate,e._delegate)}},{key:"withConverter",value:function(e){return new n(this.firestore,e?this._delegate.withConverter(Cg.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}]),n}(Lg);function Vg(e){return ny(e,sy)}var jg,Bg=function(){function e(){y(this,e);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];this._delegate=C(Xy,n)}return g(e,[{key:"isEqual",value:function(e){return(e=ae(e))instanceof Xy&&this._delegate._internalPath.isEqual(e._internalPath)}}],[{key:"documentId",value:function(){return new e(_o.keyField().canonicalString())}}]),e}(),qg=function(){function e(t){y(this,e),this._delegate=t}return g(e,[{key:"isEqual",value:function(e){return this._delegate.isEqual(e._delegate)}}],[{key:"serverTimestamp",value:function(){var t=new lm("serverTimestamp");return t._methodName="FieldValue.serverTimestamp",new e(t)}},{key:"delete",value:function(){var t=new sm("deleteField");return t._methodName="FieldValue.delete",new e(t)}},{key:"arrayUnion",value:function(){var t=yg.apply(void 0,arguments);return t._methodName="FieldValue.arrayUnion",new e(t)}},{key:"arrayRemove",value:function(){var t=mg.apply(void 0,arguments);return t._methodName="FieldValue.arrayRemove",new e(t)}},{key:"increment",value:function(t){var n=function(e){return new dm("increment",e)}(t);return n._methodName="FieldValue.increment",new e(n)}}]),e}(),zg={Firestore:Ig,GeoPoint:Zy,Timestamp:go,Blob:wg,Transaction:Eg,WriteBatch:Tg,DocumentReference:Ng,DocumentSnapshot:Pg,Query:Lg,QueryDocumentSnapshot:Og,QuerySnapshot:Fg,CollectionReference:Ug,FieldPath:Bg,FieldValue:qg,setLogLevel:function(e){!function(e){Wa.setLogLevel(e)}(e)},CACHE_SIZE_UNLIMITED:-1};(function(e,t){e.INTERNAL.registerComponent(new ce("firestore-compat",(function(e){var n=e.getProvider("app-compat").getImmediate(),r=e.getProvider("firestore").getImmediate();return t(n,r)}),"PUBLIC").setServiceProps(Object.assign({},zg)))})(jg=Ot,(function(e,t){return new Ig(e,t,new _g)})),jg.registerVersion("@firebase/firestore-compat","0.3.3");function Kg(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}Object.create;var Gg;Object.create;var Wg="facebook.com",Hg="github.com",Qg="google.com",Yg="password",$g="twitter.com",Xg="EMAIL_SIGNIN",Jg="PASSWORD_RESET",Zg="RECOVER_EMAIL",ek="REVERT_SECOND_FACTOR_ADDITION",tk="VERIFY_AND_CHANGE_EMAIL",nk="VERIFY_EMAIL";function rk(){return v({},"dependent-sdk-initialized-before-auth","Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.")}var ik=function(){var e;return v(e={},"admin-restricted-operation","This operation is restricted to administrators only."),v(e,"argument-error",""),v(e,"app-not-authorized","This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console."),v(e,"app-not-installed","The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device."),v(e,"captcha-check-failed","The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains."),v(e,"code-expired","The SMS code has expired. Please re-send the verification code to try again."),v(e,"cordova-not-ready","Cordova framework is not ready."),v(e,"cors-unsupported","This browser is not supported."),v(e,"credential-already-in-use","This credential is already associated with a different user account."),v(e,"custom-token-mismatch","The custom token corresponds to a different audience."),v(e,"requires-recent-login","This operation is sensitive and requires recent authentication. Log in again before retrying this request."),v(e,"dependent-sdk-initialized-before-auth","Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."),v(e,"dynamic-link-not-activated","Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions."),v(e,"email-change-needs-verification","Multi-factor users must always have a verified email."),v(e,"email-already-in-use","The email address is already in use by another account."),v(e,"emulator-config-failed",'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.'),v(e,"expired-action-code","The action code has expired."),v(e,"cancelled-popup-request","This operation has been cancelled due to another conflicting popup being opened."),v(e,"internal-error","An internal AuthError has occurred."),v(e,"invalid-app-credential","The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired."),v(e,"invalid-app-id","The mobile app identifier is not registed for the current project."),v(e,"invalid-user-token","This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key."),v(e,"invalid-auth-event","An internal AuthError has occurred."),v(e,"invalid-verification-code","The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user."),v(e,"invalid-continue-uri","The continue URL provided in the request is invalid."),v(e,"invalid-cordova-configuration","The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme."),v(e,"invalid-custom-token","The custom token format is incorrect. Please check the documentation."),v(e,"invalid-dynamic-link-domain","The provided dynamic link domain is not configured or authorized for the current project."),v(e,"invalid-email","The email address is badly formatted."),v(e,"invalid-emulator-scheme","Emulator URL must start with a valid scheme (http:// or https://)."),v(e,"invalid-api-key","Your API key is invalid, please check you have copied it correctly."),v(e,"invalid-cert-hash","The SHA-1 certificate hash provided is invalid."),v(e,"invalid-credential","The supplied auth credential is malformed or has expired."),v(e,"invalid-message-payload","The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console."),v(e,"invalid-multi-factor-session","The request does not contain a valid proof of first factor successful sign-in."),v(e,"invalid-oauth-provider","EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers."),v(e,"invalid-oauth-client-id","The OAuth client ID provided is either invalid or does not match the specified API key."),v(e,"unauthorized-domain","This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console."),v(e,"invalid-action-code","The action code is invalid. This can happen if the code is malformed, expired, or has already been used."),v(e,"wrong-password","The password is invalid or the user does not have a password."),v(e,"invalid-persistence-type","The specified persistence type is invalid. It can only be local, session or none."),v(e,"invalid-phone-number","The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code]."),v(e,"invalid-provider-id","The specified provider ID is invalid."),v(e,"invalid-recipient-email","The email corresponding to this action failed to send as the provided recipient email address is invalid."),v(e,"invalid-sender","The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console."),v(e,"invalid-verification-id","The verification ID used to create the phone auth credential is invalid."),v(e,"invalid-tenant-id","The Auth instance's tenant ID is invalid."),v(e,"login-blocked","Login blocked by user-provided method: {$originalMessage}"),v(e,"missing-android-pkg-name","An Android Package Name must be provided if the Android App is required to be installed."),v(e,"auth-domain-config-required","Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console."),v(e,"missing-app-credential","The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided."),v(e,"missing-verification-code","The phone auth credential was created with an empty SMS verification code."),v(e,"missing-continue-uri","A continue URL must be provided in the request."),v(e,"missing-iframe-start","An internal AuthError has occurred."),v(e,"missing-ios-bundle-id","An iOS Bundle ID must be provided if an App Store ID is provided."),v(e,"missing-or-invalid-nonce","The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload."),v(e,"missing-multi-factor-info","No second factor identifier is provided."),v(e,"missing-multi-factor-session","The request is missing proof of first factor successful sign-in."),v(e,"missing-phone-number","To send verification codes, provide a phone number for the recipient."),v(e,"missing-verification-id","The phone auth credential was created with an empty verification ID."),v(e,"app-deleted","This instance of FirebaseApp has been deleted."),v(e,"multi-factor-info-not-found","The user does not have a second factor matching the identifier provided."),v(e,"multi-factor-auth-required","Proof of ownership of a second factor is required to complete sign-in."),v(e,"account-exists-with-different-credential","An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address."),v(e,"network-request-failed","A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred."),v(e,"no-auth-event","An internal AuthError has occurred."),v(e,"no-such-provider","User was not linked to an account with the given provider."),v(e,"null-user","A null user object was provided as the argument for an operation which requires a non-null user object."),v(e,"operation-not-allowed","The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section."),v(e,"operation-not-supported-in-this-environment",'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.'),v(e,"popup-blocked","Unable to establish a connection with the popup. It may have been blocked by the browser."),v(e,"popup-closed-by-user","The popup has been closed by the user before finalizing the operation."),v(e,"provider-already-linked","User can only be linked to one identity for the given provider."),v(e,"quota-exceeded","The project's quota for this operation has been exceeded."),v(e,"redirect-cancelled-by-user","The redirect operation has been cancelled by the user before finalizing."),v(e,"redirect-operation-pending","A redirect sign-in operation is already pending."),v(e,"rejected-credential","The request contains malformed or mismatching credentials."),v(e,"second-factor-already-in-use","The second factor is already enrolled on this account."),v(e,"maximum-second-factor-count-exceeded","The maximum allowed number of second factors on a user has been exceeded."),v(e,"tenant-id-mismatch","The provided tenant ID does not match the Auth instance's tenant ID"),v(e,"timeout","The operation has timed out."),v(e,"user-token-expired","The user's credential is no longer valid. The user must sign in again."),v(e,"too-many-requests","We have blocked all requests from this device due to unusual activity. Try again later."),v(e,"unauthorized-continue-uri","The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console."),v(e,"unsupported-first-factor","Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor."),v(e,"unsupported-persistence-type","The current environment does not support the specified persistence type."),v(e,"unsupported-tenant-operation","This operation is not supported in a multi-tenant context."),v(e,"unverified-email","The operation requires a verified email."),v(e,"user-cancelled","The user did not grant your application the permissions it requested."),v(e,"user-not-found","There is no user record corresponding to this identifier. The user may have been deleted."),v(e,"user-disabled","The user account has been disabled by an administrator."),v(e,"user-mismatch","The supplied credentials do not correspond to the previously signed in user."),v(e,"user-signed-out",""),v(e,"weak-password","The password must be 6 characters long or more."),v(e,"web-storage-unsupported","This browser is not supported or 3rd party cookies and data may be disabled."),v(e,"already-initialized","initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."),e},ak=rk,ok=new H("auth","Firebase",rk()),uk=new be("@firebase/auth");function sk(e){if(uk.logLevel<=de.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];uk.error.apply(uk,["Auth (".concat(it,"): ").concat(e)].concat(n))}}function ck(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw dk.apply(void 0,[e].concat(n))}function lk(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return dk.apply(void 0,[e].concat(n))}function fk(e,t,n){var r=Object.assign(Object.assign({},ak()),v({},t,n));return new H("auth","Firebase",r).create(t,{appName:e.name})}function hk(e,t,n){if(!(t instanceof n))throw n.name!==t.constructor.name&&ck(e,"argument-error"),fk(e,"argument-error","Type of ".concat(t.constructor.name," does not match expected instance.")+"Did you pass a reference from a different Auth SDK?")}function dk(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if("string"!==typeof e){var i,a=n[0],o=p(n.slice(1));return o[0]&&(o[0].appName=e.name),(i=e._errorFactory).create.apply(i,[a].concat(p(o)))}return ok.create.apply(ok,[e].concat(n))}function pk(e,t){if(!e){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];throw dk.apply(void 0,[t].concat(r))}}function vk(e){var t="INTERNAL ASSERTION FAILED: "+e;throw sk(t),new Error(t)}function yk(e,t){e||vk(t)}var mk=new Map;function gk(e){yk(e instanceof Function,"Expected a class definition");var t=mk.get(e);return t?(yk(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,mk.set(e,t),t)}function kk(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function bk(){return"http:"===wk()||"https:"===wk()}function wk(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}var xk=function(){function e(t,n){y(this,e),this.shortDelay=t,this.longDelay=n,yk(n>t,"Short delay should be less than long delay!"),this.isMobile="undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(j())||z()}return g(e,[{key:"get",value:function(){return"undefined"!==typeof navigator&&navigator&&"onLine"in navigator&&"boolean"===typeof navigator.onLine&&(bk()||q()||"connection"in navigator)&&!navigator.onLine?Math.min(5e3,this.shortDelay):this.isMobile?this.longDelay:this.shortDelay}}]),e}();function _k(e,t){yk(e.emulator,"Emulator should always be set here");var n=e.emulator.url;return t?"".concat(n).concat(t.startsWith("/")?t.slice(1):t):n}var Ik=function(){function e(){y(this,e)}return g(e,null,[{key:"initialize",value:function(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}},{key:"fetch",value:function(){return this.fetchImpl?this.fetchImpl:"undefined"!==typeof self&&"fetch"in self?self.fetch:void vk("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}},{key:"headers",value:function(){return this.headersImpl?this.headersImpl:"undefined"!==typeof self&&"Headers"in self?self.Headers:void vk("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}},{key:"response",value:function(){return this.responseImpl?this.responseImpl:"undefined"!==typeof self&&"Response"in self?self.Response:void vk("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}]),e}(),Sk=(v(Gg={},"CREDENTIAL_MISMATCH","custom-token-mismatch"),v(Gg,"MISSING_CUSTOM_TOKEN","internal-error"),v(Gg,"INVALID_IDENTIFIER","invalid-email"),v(Gg,"MISSING_CONTINUE_URI","internal-error"),v(Gg,"INVALID_PASSWORD","wrong-password"),v(Gg,"MISSING_PASSWORD","internal-error"),v(Gg,"EMAIL_EXISTS","email-already-in-use"),v(Gg,"PASSWORD_LOGIN_DISABLED","operation-not-allowed"),v(Gg,"INVALID_IDP_RESPONSE","invalid-credential"),v(Gg,"INVALID_PENDING_TOKEN","invalid-credential"),v(Gg,"FEDERATED_USER_ID_ALREADY_LINKED","credential-already-in-use"),v(Gg,"MISSING_REQ_TYPE","internal-error"),v(Gg,"EMAIL_NOT_FOUND","user-not-found"),v(Gg,"RESET_PASSWORD_EXCEED_LIMIT","too-many-requests"),v(Gg,"EXPIRED_OOB_CODE","expired-action-code"),v(Gg,"INVALID_OOB_CODE","invalid-action-code"),v(Gg,"MISSING_OOB_CODE","internal-error"),v(Gg,"CREDENTIAL_TOO_OLD_LOGIN_AGAIN","requires-recent-login"),v(Gg,"INVALID_ID_TOKEN","invalid-user-token"),v(Gg,"TOKEN_EXPIRED","user-token-expired"),v(Gg,"USER_NOT_FOUND","user-token-expired"),v(Gg,"TOO_MANY_ATTEMPTS_TRY_LATER","too-many-requests"),v(Gg,"INVALID_CODE","invalid-verification-code"),v(Gg,"INVALID_SESSION_INFO","invalid-verification-id"),v(Gg,"INVALID_TEMPORARY_PROOF","invalid-credential"),v(Gg,"MISSING_SESSION_INFO","missing-verification-id"),v(Gg,"SESSION_EXPIRED","code-expired"),v(Gg,"MISSING_ANDROID_PACKAGE_NAME","missing-android-pkg-name"),v(Gg,"UNAUTHORIZED_DOMAIN","unauthorized-continue-uri"),v(Gg,"INVALID_OAUTH_CLIENT_ID","invalid-oauth-client-id"),v(Gg,"ADMIN_ONLY_OPERATION","admin-restricted-operation"),v(Gg,"INVALID_MFA_PENDING_CREDENTIAL","invalid-multi-factor-session"),v(Gg,"MFA_ENROLLMENT_NOT_FOUND","multi-factor-info-not-found"),v(Gg,"MISSING_MFA_ENROLLMENT_ID","missing-multi-factor-info"),v(Gg,"MISSING_MFA_PENDING_CREDENTIAL","missing-multi-factor-session"),v(Gg,"SECOND_FACTOR_EXISTS","second-factor-already-in-use"),v(Gg,"SECOND_FACTOR_LIMIT_EXCEEDED","maximum-second-factor-count-exceeded"),v(Gg,"BLOCKING_FUNCTION_ERROR_RESPONSE","internal-error"),Gg),Ek=new xk(3e4,6e4);function Tk(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}function Ck(e,t,n,r){return Nk.apply(this,arguments)}function Nk(){return Nk=se(oe().mark((function e(t,n,r,i){var a,o=arguments;return oe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=o.length>4&&void 0!==o[4]?o[4]:{},e.abrupt("return",Ak(t,a,se(oe().mark((function e(){var a,o,u,s;return oe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={},o={},i&&("GET"===n?o=i:a={body:JSON.stringify(i)}),u=Z(Object.assign({key:t.config.apiKey},o)).slice(1),e.next=6,t._getAdditionalHeaders();case 6:return(s=e.sent)["Content-Type"]="application/json",t.languageCode&&(s["X-Firebase-Locale"]=t.languageCode),e.abrupt("return",Ik.fetch()(Ok(t,t.config.apiHost,r,u),Object.assign({method:n,headers:s,referrerPolicy:"no-referrer"},a)));case 10:case"end":return e.stop()}}),e)})))));case 2:case"end":return e.stop()}}),e)}))),Nk.apply(this,arguments)}function Ak(e,t,n){return Dk.apply(this,arguments)}function Dk(){return(Dk=se(oe().mark((function e(t,n,r){var i,a,o,u,c,l,f,h,d,p;return oe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t._canInitEmulator=!1,i=Object.assign(Object.assign({},Sk),n),e.prev=2,a=new Lk(t),e.next=6,Promise.race([r(),a.promise]);case 6:return o=e.sent,a.clearNetworkTimeout(),e.next=10,o.json();case 10:if(!("needConfirmation"in(u=e.sent))){e.next=13;break}throw Mk(t,"account-exists-with-different-credential",u);case 13:if(!o.ok||"errorMessage"in u){e.next=17;break}return e.abrupt("return",u);case 17:if(c=o.ok?u.errorMessage:u.error.message,l=c.split(" : "),f=s(l,2),h=f[0],d=f[1],"FEDERATED_USER_ID_ALREADY_LINKED"!==h){e.next=23;break}throw Mk(t,"credential-already-in-use",u);case 23:if("EMAIL_EXISTS"!==h){e.next=27;break}throw Mk(t,"email-already-in-use",u);case 27:if("USER_DISABLED"!==h){e.next=29;break}throw Mk(t,"user-disabled",u);case 29:if(p=i[h]||h.toLowerCase().replace(/[_\s]+/g,"-"),!d){e.next=34;break}throw fk(t,p,d);case 34:ck(t,p);case 35:e.next=42;break;case 37:if(e.prev=37,e.t0=e.catch(2),!(e.t0 instanceof W)){e.next=41;break}throw e.t0;case 41:ck(t,"network-request-failed");case 42:case"end":return e.stop()}}),e,null,[[2,37]])})))).apply(this,arguments)}function Rk(e,t,n,r){return Pk.apply(this,arguments)}function Pk(){return Pk=se(oe().mark((function e(t,n,r,i){var a,o,u=arguments;return oe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=u.length>4&&void 0!==u[4]?u[4]:{},e.next=3,Ck(t,n,r,i,a);case 3:return"mfaPendingCredential"in(o=e.sent)&&ck(t,"multi-factor-auth-required",{_serverResponse:o}),e.abrupt("return",o);case 6:case"end":return e.stop()}}),e)}))),Pk.apply(this,arguments)}function Ok(e,t,n,r){var i="".concat(t).concat(n,"?").concat(r);return e.config.emulator?_k(e.config,i):"".concat(e.config.apiScheme,"://").concat(i)}var Lk=function(){function e(t){var n=this;y(this,e),this.auth=t,this.timer=null,this.promise=new Promise((function(e,t){n.timer=setTimeout((function(){return t(lk(n.auth,"network-request-failed"))}),Ek.get())}))}return g(e,[{key:"clearNetworkTimeout",value:function(){clearTimeout(this.timer)}}]),e}();function Mk(e,t,n){var r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);var i=lk(e,t,r);return i.customData._tokenResponse=n,i}function Fk(e,t){return Uk.apply(this,arguments)}function Uk(){return(Uk=se(oe().mark((function e(t,n){return oe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ck(t,"POST","/v1/accounts:delete",n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Vk(e,t){return jk.apply(this,arguments)}function jk(){return(jk=se(oe().mark((function e(t,n){return oe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ck(t,"POST","/v1/accounts:update",n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Bk(e,t){return qk.apply(this,arguments)}function qk(){return(qk=se(oe().mark((function e(t,n){return oe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ck(t,"POST","/v1/accounts:lookup",n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function zk(e){if(e)try{var t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(n){}}function Kk(){return Kk=se(oe().mark((function e(t){var n,r,i,a,o,u,s=arguments;return oe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=s.length>1&&void 0!==s[1]&&s[1],r=ae(t),e.next=4,r.getIdToken(n);case 4:return i=e.sent,pk((a=Wk(i))&&a.exp&&a.auth_time&&a.iat,r.auth,"internal-error"),o="object"===typeof a.firebase?a.firebase:void 0,u=null===o||void 0===o?void 0:o.sign_in_provider,e.abrupt("return",{claims:a,token:i,authTime:zk(Gk(a.auth_time)),issuedAtTime:zk(Gk(a.iat)),expirationTime:zk(Gk(a.exp)),signInProvider:u||null,signInSecondFactor:(null===o||void 0===o?void 0:o.sign_in_second_factor)||null});case 10:case"end":return e.stop()}}),e)}))),Kk.apply(this,arguments)}function Gk(e){return 1e3*Number(e)}function Wk(e){var t=s(e.split("."),3),n=t[0],r=t[1],i=t[2];if(void 0===n||void 0===r||void 0===i)return sk("JWT malformed, contained fewer than 3 sections"),null;try{var a=P(r);return a?JSON.parse(a):(sk("Failed to decode base64 JWT payload"),null)}catch(o){return sk("Caught error parsing JWT payload as JSON",null===o||void 0===o?void 0:o.toString()),null}}function Hk(e,t){return Qk.apply(this,arguments)}function Qk(){return Qk=se(oe().mark((function e(t,n){var r=arguments;return oe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r.length>2&&void 0!==r[2]&&r[2])){e.next=3;break}return e.abrupt("return",n);case 3:return e.prev=3,e.next=6,n;case 6:return e.abrupt("return",e.sent);case 9:if(e.prev=9,e.t0=e.catch(3),!(e.t0 instanceof W&&Yk(e.t0))){e.next=15;break}if(t.auth.currentUser!==t){e.next=15;break}return e.next=15,t.auth.signOut();case 15:throw e.t0;case 16:case"end":return e.stop()}}),e,null,[[3,9]])}))),Qk.apply(this,arguments)}function Yk(e){var t=e.code;return t==="auth/".concat("user-disabled")||t==="auth/".concat("user-token-expired")}var $k=function(){function e(t){y(this,e),this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}return g(e,[{key:"_start",value:function(){this.isRunning||(this.isRunning=!0,this.schedule())}},{key:"_stop",value:function(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}},{key:"getInterval",value:function(e){var t;if(e){var n=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),n}this.errorBackoff=3e4;var r=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,r)}},{key:"schedule",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.isRunning){var n=this.getInterval(t);this.timerId=setTimeout(se(oe().mark((function t(){return oe().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.iteration();case 2:case"end":return t.stop()}}),t)}))),n)}}},{key:"iteration",value:function(){var e=se(oe().mark((function e(){return oe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.user.getIdToken(!0);case 3:e.next=9;break;case 5:return e.prev=5,e.t0=e.catch(0),(null===e.t0||void 0===e.t0?void 0:e.t0.code)==="auth/".concat("network-request-failed")&&this.schedule(!0),e.abrupt("return");case 9:this.schedule();case 10:case"end":return e.stop()}}),e,this,[[0,5]])})));return function(){return e.apply(this,arguments)}}()}]),e}(),Xk=function(){function e(t,n){y(this,e),this.createdAt=t,this.lastLoginAt=n,this._initializeTime()}return g(e,[{key:"_initializeTime",value:function(){this.lastSignInTime=zk(this.lastLoginAt),this.creationTime=zk(this.createdAt)}},{key:"_copy",value:function(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}},{key:"toJSON",value:function(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}]),e}();function Jk(e){return Zk.apply(this,arguments)}function Zk(){return Zk=se(oe().mark((function e(t){var n,r,i,a,o,u,s,c,l,f,h;return oe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.auth,e.next=3,t.getIdToken();case 3:return i=e.sent,e.next=6,Hk(t,Bk(r,{idToken:i}));case 6:pk(null===(a=e.sent)||void 0===a?void 0:a.users.length,r,"internal-error"),o=a.users[0],t._notifyReloadListener(o),u=(null===(n=o.providerUserInfo)||void 0===n?void 0:n.length)?nb(o.providerUserInfo):[],s=tb(t.providerData,u),c=t.isAnonymous,l=!(t.email&&o.passwordHash)&&!(null===s||void 0===s?void 0:s.length),f=!!c&&l,h={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:s,metadata:new Xk(o.createdAt,o.lastLoginAt),isAnonymous:f},Object.assign(t,h);case 17:case"end":return e.stop()}}),e)}))),Zk.apply(this,arguments)}function eb(){return(eb=se(oe().mark((function e(t){var n;return oe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=ae(t),e.next=3,Jk(n);case 3:return e.next=5,n.auth._persistUserIfCurrent(n);case 5:n.auth._notifyListenersIfCurrent(n);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function tb(e,t){var n=e.filter((function(e){return!t.some((function(t){return t.providerId===e.providerId}))}));return[].concat(p(n),p(t))}function nb(e){return e.map((function(e){var t=e.providerId,n=Kg(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}}))}function rb(e,t){return ib.apply(this,arguments)}function ib(){return(ib=se(oe().mark((function e(t,n){var r;return oe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ak(t,{},se(oe().mark((function e(){var r,i,a,o,u,s;return oe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Z({grant_type:"refresh_token",refresh_token:n}).slice(1),i=t.config,a=i.tokenApiHost,o=i.apiKey,u=Ok(t,a,"/v1/token","key=".concat(o)),e.next=5,t._getAdditionalHeaders();case 5:return(s=e.sent)["Content-Type"]="application/x-www-form-urlencoded",e.abrupt("return",Ik.fetch()(u,{method:"POST",headers:s,body:r}));case 8:case"end":return e.stop()}}),e)}))));case 2:return r=e.sent,e.abrupt("return",{accessToken:r.access_token,expiresIn:r.expires_in,refreshToken:r.refresh_token});case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var ab=function(){function e(){y(this,e),this.refreshToken=null,this.accessToken=null,this.expirationTime=null}return g(e,[{key:"isExpired",get:function(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}},{key:"updateFromServerResponse",value:function(e){pk(e.idToken,"internal-error"),pk("undefined"!==typeof e.idToken,"internal-error"),pk("undefined"!==typeof e.refreshToken,"internal-error");var t="expiresIn"in e&&"undefined"!==typeof e.expiresIn?Number(e.expiresIn):function(e){var t=Wk(e);return pk(t,"internal-error"),pk("undefined"!==typeof t.exp,"internal-error"),pk("undefined"!==typeof t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}},{key:"getToken",value:function(){var e=se(oe().mark((function e(t){var n,r=arguments;return oe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=r.length>1&&void 0!==r[1]&&r[1],pk(!this.accessToken||this.refreshToken,t,"user-token-expired"),n||!this.accessToken||this.isExpired){e.next=4;break}return e.abrupt("return",this.accessToken);case 4:if(!this.refreshToken){e.next=8;break}return e.next=7,this.refresh(t,this.refreshToken);case 7:return e.abrupt("return",this.accessToken);case 8:return e.abrupt("return",null);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"clearRefreshToken",value:function(){this.refreshToken=null}},{key:"refresh",value:function(){var e=se(oe().mark((function e(t,n){var r,i,a,o;return oe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,rb(t,n);case 2:r=e.sent,i=r.accessToken,a=r.refreshToken,o=r.expiresIn,this.updateTokensAndExpiration(i,a,Number(o));case 7:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"updateTokensAndExpiration",value:function(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}},{key:"toJSON",value:function(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}},{key:"_assign",value:function(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}},{key:"_clone",value:function(){return Object.assign(new e,this.toJSON())}},{key:"_performRefresh",value:function(){return vk("not implemented")}}],[{key:"fromJSON",value:function(t,n){var r=n.refreshToken,i=n.accessToken,a=n.expirationTime,o=new e;return r&&(pk("string"===typeof r,"internal-error",{appName:t}),o.refreshToken=r),i&&(pk("string"===typeof i,"internal-error",{appName:t}),o.accessToken=i),a&&(pk("number"===typeof a,"internal-error",{appName:t}),o.expirationTime=a),o}}]),e}();function ob(e,t){pk("string"===typeof e||"undefined"===typeof e,"internal-error",{appName:t})}var ub=function(){function e(t){y(this,e);var n=t.uid,r=t.auth,i=t.stsTokenManager,a=Kg(t,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new $k(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?p(a.providerData):[],this.metadata=new Xk(a.createdAt||void 0,a.lastLoginAt||void 0)}return g(e,[{key:"getIdToken",value:function(){var e=se(oe().mark((function e(t){var n;return oe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Hk(this,this.stsTokenManager.getToken(this.auth,t));case 2:if(pk(n=e.sent,this.auth,"internal-error"),this.accessToken===n){e.next=9;break}return this.accessToken=n,e.next=8,this.auth._persistUserIfCurrent(this);case 8:this.auth._notifyListenersIfCurrent(this);case 9:return e.abrupt("return",n);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getIdTokenResult",value:function(e){return function(e){return Kk.apply(this,arguments)}(this,e)}},{key:"reload",value:function(){return function(e){return eb.apply(this,arguments)}(this)}},{key:"_assign",value:function(e){this!==e&&(pk(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map((function(e){return Object.assign({},e)})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}},{key:"_clone",value:function(t){return new e(Object.assign(Object.assign({},this),{auth:t,stsTokenManager:this.stsTokenManager._clone()}))}},{key:"_onReload",value:function(e){pk(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}},{key:"_notifyReloadListener",value:function(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}},{key:"_startProactiveRefresh",value:function(){this.proactiveRefresh._start()}},{key:"_stopProactiveRefresh",value:function(){this.proactiveRefresh._stop()}},{key:"_updateTokensIfNecessary",value:function(){var e=se(oe().mark((function e(t){var n,r,i=arguments;return oe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=i.length>1&&void 0!==i[1]&&i[1],r=!1,t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),r=!0),!n){e.next=6;break}return e.next=6,Jk(this);case 6:return e.next=8,this.auth._persistUserIfCurrent(this);case 8:r&&this.auth._notifyListenersIfCurrent(this);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"delete",value:function(){var e=se(oe().mark((function e(){var t;return oe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getIdToken();case 2:return t=e.sent,e.next=5,Hk(this,Fk(this.auth,{idToken:t}));case 5:return this.stsTokenManager.clearRefreshToken(),e.abrupt("return",this.auth.signOut());case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"toJSON",value:function(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map((function(e){return Object.assign({},e)})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}},{key:"refreshToken",get:function(){return this.stsTokenManager.refreshToken||""}}],[{key:"_fromJSON",value:function(t,n){var r,i,a,o,u,s,c,l,f=null!==(r=n.displayName)&&void 0!==r?r:void 0,h=null!==(i=n.email)&&void 0!==i?i:void 0,d=null!==(a=n.phoneNumber)&&void 0!==a?a:void 0,p=null!==(o=n.photoURL)&&void 0!==o?o:void 0,v=null!==(u=n.tenantId)&&void 0!==u?u:void 0,y=null!==(s=n._redirectEventId)&&void 0!==s?s:void 0,m=null!==(c=n.createdAt)&&void 0!==c?c:void 0,g=null!==(l=n.lastLoginAt)&&void 0!==l?l:void 0,k=n.uid,b=n.emailVerified,w=n.isAnonymous,x=n.providerData,_=n.stsTokenManager;pk(k&&_,t,"internal-error");var I=ab.fromJSON(this.name,_);pk("string"===typeof k,t,"internal-error"),ob(f,t.name),ob(h,t.name),pk("boolean"===typeof b,t,"internal-error"),pk("boolean"===typeof w,t,"internal-error"),ob(d,t.name),ob(p,t.name),ob(v,t.name),ob(y,t.name),ob(m,t.name),ob(g,t.name);var S=new e({uid:k,auth:t,email:h,emailVerified:b,displayName:f,isAnonymous:w,photoURL:p,phoneNumber:d,tenantId:v,stsTokenManager:I,createdAt:m,lastLoginAt:g});return x&&Array.isArray(x)&&(S.providerData=x.map((function(e){return Object.assign({},e)}))),y&&(S._redirectEventId=y),S}},{key:"_fromIdTokenResponse",value:function(){var t=se(oe().mark((function t(n,r){var i,a,o,u=arguments;return oe().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=u.length>2&&void 0!==u[2]&&u[2],(a=new ab).updateFromServerResponse(r),o=new e({uid:r.localId,auth:n,stsTokenManager:a,isAnonymous:i}),t.next=6,Jk(o);case 6:return t.abrupt("return",o);case 7:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}]),e}(),sb=function(){function e(){y(this,e),this.type="NONE",this.storage={}}return g(e,[{key:"_isAvailable",value:function(){var e=se(oe().mark((function e(){return oe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",!0);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"_set",value:function(){var e=se(oe().mark((function e(t,n){return oe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.storage[t]=n;case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=se(oe().mark((function e(t){var n;return oe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.storage[t],e.abrupt("return",void 0===n?null:n);case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=se(oe().mark((function e(t){return oe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:delete this.storage[t];case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_addListener",value:function(e,t){}},{key:"_removeListener",value:function(e,t){}}]),e}();sb.type="NONE";var cb=sb;function lb(e,t,n){return"firebase".concat(":",e,":").concat(t,":").concat(n)}var fb=function(){function e(t,n,r){y(this,e),this.persistence=t,this.auth=n,this.userKey=r;var i=this.auth,a=i.config,o=i.name;this.fullUserKey=lb(this.userKey,a.apiKey,o),this.fullPersistenceKey=lb("persistence",a.apiKey,o),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}return g(e,[{key:"setCurrentUser",value:function(e){return this.persistence._set(this.fullUserKey,e.toJSON())}},{key:"getCurrentUser",value:function(){var e=se(oe().mark((function e(){var t;return oe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.persistence._get(this.fullUserKey);case 2:return t=e.sent,e.abrupt("return",t?ub._fromJSON(this.auth,t):null);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"removeCurrentUser",value:function(){return this.persistence._remove(this.fullUserKey)}},{key:"savePersistenceForRedirect",value:function(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}},{key:"setPersistence",value:function(){var e=se(oe().mark((function e(t){var n;return oe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.persistence!==t){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.getCurrentUser();case 4:return n=e.sent,e.next=7,this.removeCurrentUser();case 7:if(this.persistence=t,!n){e.next=10;break}return e.abrupt("return",this.setCurrentUser(n));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"delete",value:function(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}}],[{key:"create",value:function(){var t=se(oe().mark((function t(n,r){var i,a,o,u,s,c,l,f,h,d,p,v=arguments;return oe().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i=v.length>2&&void 0!==v[2]?v[2]:"authUser",r.length){t.next=3;break}return t.abrupt("return",new e(gk(cb),n,i));case 3:return t.next=5,Promise.all(r.map(function(){var e=se(oe().mark((function e(t){return oe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._isAvailable();case 2:if(!e.sent){e.next=4;break}return e.abrupt("return",t);case 4:return e.abrupt("return",void 0);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 5:a=t.sent.filter((function(e){return e})),o=a[0]||gk(cb),u=lb(i,n.config.apiKey,n.name),s=null,c=k(r),t.prev=10,c.s();case 12:if((l=c.n()).done){t.next=29;break}return f=l.value,t.prev=14,t.next=17,f._get(u);case 17:if(!(h=t.sent)){t.next=23;break}return d=ub._fromJSON(n,h),f!==o&&(s=d),o=f,t.abrupt("break",29);case 23:t.next=27;break;case 25:t.prev=25,t.t0=t.catch(14);case 27:t.next=12;break;case 29:t.next=34;break;case 31:t.prev=31,t.t1=t.catch(10),c.e(t.t1);case 34:return t.prev=34,c.f(),t.finish(34);case 37:if(p=a.filter((function(e){return e._shouldAllowMigration})),o._shouldAllowMigration&&p.length){t.next=40;break}return t.abrupt("return",new e(o,n,i));case 40:if(o=p[0],!s){t.next=44;break}return t.next=44,o._set(u,s.toJSON());case 44:return t.next=46,Promise.all(r.map(function(){var e=se(oe().mark((function e(t){return oe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t===o){e.next=8;break}return e.prev=1,e.next=4,t._remove(u);case 4:e.next=8;break;case 6:e.prev=6,e.t0=e.catch(1);case 8:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t){return e.apply(this,arguments)}}()));case 46:return t.abrupt("return",new e(o,n,i));case 47:case"end":return t.stop()}}),t,null,[[10,31,34,37],[14,25]])})));return function(e,n){return t.apply(this,arguments)}}()}]),e}();function hb(e){var t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(yb(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(db(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(gb(t))return"Blackberry";if(kb(t))return"Webos";if(pb(t))return"Safari";if((t.includes("chrome/")||vb(t))&&!t.includes("edge/"))return"Chrome";if(mb(t))return"Android";var n=e.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);return 2===(null===n||void 0===n?void 0:n.length)?n[1]:"Other"}function db(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:j();return/firefox\//i.test(e)}function pb(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:j(),t=e.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function vb(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:j();return/crios\//i.test(e)}function yb(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:j();return/iemobile/i.test(e)}function mb(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:j();return/android/i.test(e)}function gb(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:j();return/blackberry/i.test(e)}function kb(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:j();return/webos/i.test(e)}function bb(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:j();return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function wb(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:j();return bb(t)&&!!(null===(e=window.navigator)||void 0===e?void 0:e.standalone)}function xb(){return K()&&10===document.documentMode}function _b(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:j();return bb(e)||mb(e)||kb(e)||gb(e)||/windows phone/i.test(e)||yb(e)}function Ib(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];switch(e){case"Browser":t=hb(j());break;case"Worker":t="".concat(hb(j()),"-").concat(e);break;default:t=e}var r=n.length?n.join(","):"FirebaseCore-web";return"".concat(t,"/","JsCore","/").concat(it,"/").concat(r)}var Sb=function(){function e(t){y(this,e),this.auth=t,this.queue=[]}return g(e,[{key:"pushCallback",value:function(e,t){var n=this,r=function(t){return new Promise((function(n,r){try{n(e(t))}catch(i){r(i)}}))};r.onAbort=t,this.queue.push(r);var i=this.queue.length-1;return function(){n.queue[i]=function(){return Promise.resolve()}}}},{key:"runMiddleware",value:function(){var e=se(oe().mark((function e(t){var n,r,i,a,o,u,s;return oe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.auth.currentUser!==t){e.next=2;break}return e.abrupt("return");case 2:n=[],e.prev=3,r=k(this.queue),e.prev=5,r.s();case 7:if((i=r.n()).done){e.next=14;break}return a=i.value,e.next=11,a(t);case 11:a.onAbort&&n.push(a.onAbort);case 12:e.next=7;break;case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(5),r.e(e.t0);case 19:return e.prev=19,r.f(),e.finish(19);case 22:e.next=30;break;case 24:e.prev=24,e.t1=e.catch(3),n.reverse(),o=k(n);try{for(o.s();!(u=o.n()).done;){s=u.value;try{s()}catch(c){}}}catch(l){o.e(l)}finally{o.f()}throw this.auth._errorFactory.create("login-blocked",{originalMessage:null===e.t1||void 0===e.t1?void 0:e.t1.message});case 30:case"end":return e.stop()}}),e,this,[[3,24],[5,16,19,22]])})));return function(t){return e.apply(this,arguments)}}()}]),e}(),Eb=function(){function e(t,n,r){y(this,e),this.app=t,this.heartbeatServiceProvider=n,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Cb(this),this.idTokenSubscription=new Cb(this),this.beforeStateQueue=new Sb(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=ok,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=r.sdkClientVersion}return g(e,[{key:"_initializeWithPersistence",value:function(e,t){var n=this;return t&&(this._popupRedirectResolver=gk(t)),this._initializationPromise=this.queue(se(oe().mark((function r(){var i,a;return oe().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!n._deleted){r.next=2;break}return r.abrupt("return");case 2:return r.next=4,fb.create(n,e);case 4:if(n.persistenceManager=r.sent,!n._deleted){r.next=7;break}return r.abrupt("return");case 7:if(!(null===(i=n._popupRedirectResolver)||void 0===i?void 0:i._shouldInitProactively)){r.next=15;break}return r.prev=8,r.next=11,n._popupRedirectResolver._initialize(n);case 11:r.next=15;break;case 13:r.prev=13,r.t0=r.catch(8);case 15:return r.next=17,n.initializeCurrentUser(t);case 17:if(n.lastNotifiedUid=(null===(a=n.currentUser)||void 0===a?void 0:a.uid)||null,!n._deleted){r.next=20;break}return r.abrupt("return");case 20:n._isInitialized=!0;case 21:case"end":return r.stop()}}),r,null,[[8,13]])})))),this._initializationPromise}},{key:"_onStorageEvent",value:function(){var e=se(oe().mark((function e(){var t;return oe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._deleted){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.assertedPersistence.getCurrentUser();case 4:if(t=e.sent,this.currentUser||t){e.next=7;break}return e.abrupt("return");case 7:if(!this.currentUser||!t||this.currentUser.uid!==t.uid){e.next=12;break}return this._currentUser._assign(t),e.next=11,this.currentUser.getIdToken();case 11:return e.abrupt("return");case 12:return e.next=14,this._updateCurrentUser(t,!0);case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initializeCurrentUser",value:function(){var e=se(oe().mark((function e(t){var n,r,i,a,o,u,s;return oe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.assertedPersistence.getCurrentUser();case 2:if(r=e.sent,i=r,a=!1,!t||!this.config.authDomain){e.next=14;break}return e.next=8,this.getOrInitRedirectPersistenceManager();case 8:return o=null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId,u=null===i||void 0===i?void 0:i._redirectEventId,e.next=12,this.tryRedirectSignIn(t);case 12:s=e.sent,o&&o!==u||!(null===s||void 0===s?void 0:s.user)||(i=s.user,a=!0);case 14:if(i){e.next=16;break}return e.abrupt("return",this.directlySetCurrentUser(null));case 16:if(i._redirectEventId){e.next=32;break}if(!a){e.next=27;break}return e.prev=18,e.next=21,this.beforeStateQueue.runMiddleware(i);case 21:e.next=27;break;case 23:e.prev=23,e.t0=e.catch(18),i=r,this._popupRedirectResolver._overrideRedirectResult(this,(function(){return Promise.reject(e.t0)}));case 27:if(!i){e.next=31;break}return e.abrupt("return",this.reloadAndSetCurrentUserOrClear(i));case 31:return e.abrupt("return",this.directlySetCurrentUser(null));case 32:return pk(this._popupRedirectResolver,this,"argument-error"),e.next=35,this.getOrInitRedirectPersistenceManager();case 35:if(!this.redirectUser||this.redirectUser._redirectEventId!==i._redirectEventId){e.next=37;break}return e.abrupt("return",this.directlySetCurrentUser(i));case 37:return e.abrupt("return",this.reloadAndSetCurrentUserOrClear(i));case 38:case"end":return e.stop()}}),e,this,[[18,23]])})));return function(t){return e.apply(this,arguments)}}()},{key:"tryRedirectSignIn",value:function(){var e=se(oe().mark((function e(t){var n;return oe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=null,e.prev=1,e.next=4,this._popupRedirectResolver._completeRedirectFn(this,t,!0);case 4:n=e.sent,e.next=11;break;case 7:return e.prev=7,e.t0=e.catch(1),e.next=11,this._setRedirectUser(null);case 11:return e.abrupt("return",n);case 12:case"end":return e.stop()}}),e,this,[[1,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"reloadAndSetCurrentUserOrClear",value:function(){var e=se(oe().mark((function e(t){return oe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Jk(t);case 3:e.next=9;break;case 5:if(e.prev=5,e.t0=e.catch(0),(null===e.t0||void 0===e.t0?void 0:e.t0.code)==="auth/".concat("network-request-failed")){e.next=9;break}return e.abrupt("return",this.directlySetCurrentUser(null));case 9:return e.abrupt("return",this.directlySetCurrentUser(t));case 10:case"end":return e.stop()}}),e,this,[[0,5]])})));return function(t){return e.apply(this,arguments)}}()},{key:"useDeviceLanguage",value:function(){this.languageCode=function(){if("undefined"===typeof navigator)return null;var e=navigator;return e.languages&&e.languages[0]||e.language||null}()}},{key:"_delete",value:function(){var e=se(oe().mark((function e(){return oe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this._deleted=!0;case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"updateCurrentUser",value:function(){var e=se(oe().mark((function e(t){var n;return oe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=t?ae(t):null)&&pk(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),e.abrupt("return",this._updateCurrentUser(n&&n._clone(this)));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_updateCurrentUser",value:function(){var e=se(oe().mark((function e(t){var n,r=this,i=arguments;return oe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=i.length>1&&void 0!==i[1]&&i[1],!this._deleted){e.next=3;break}return e.abrupt("return");case 3:if(t&&pk(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),n){e.next=7;break}return e.next=7,this.beforeStateQueue.runMiddleware(t);case 7:return e.abrupt("return",this.queue(se(oe().mark((function e(){return oe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.directlySetCurrentUser(t);case 2:r.notifyAuthListeners();case 3:case"end":return e.stop()}}),e)})))));case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"signOut",value:function(){var e=se(oe().mark((function e(){return oe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.beforeStateQueue.runMiddleware(null);case 2:if(!this.redirectPersistenceManager&&!this._popupRedirectResolver){e.next=5;break}return e.next=5,this._setRedirectUser(null);case 5:return e.abrupt("return",this._updateCurrentUser(null,!0));case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setPersistence",value:function(e){var t=this;return this.queue(se(oe().mark((function n(){return oe().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.assertedPersistence.setPersistence(gk(e));case 2:case"end":return n.stop()}}),n)}))))}},{key:"_getPersistence",value:function(){return this.assertedPersistence.persistence.type}},{key:"_updateErrorMap",value:function(e){this._errorFactory=new H("auth","Firebase",e())}},{key:"onAuthStateChanged",value:function(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}},{key:"beforeAuthStateChanged",value:function(e,t){return this.beforeStateQueue.pushCallback(e,t)}},{key:"onIdTokenChanged",value:function(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}},{key:"toJSON",value:function(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}},{key:"_setRedirectUser",value:function(){var e=se(oe().mark((function e(t,n){var r;return oe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getOrInitRedirectPersistenceManager(n);case 2:return r=e.sent,e.abrupt("return",null===t?r.removeCurrentUser():r.setCurrentUser(t));case 4:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getOrInitRedirectPersistenceManager",value:function(){var e=se(oe().mark((function e(t){var n;return oe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.redirectPersistenceManager){e.next=9;break}return pk(n=t&&gk(t)||this._popupRedirectResolver,this,"argument-error"),e.next=5,fb.create(this,[gk(n._redirectPersistence)],"redirectUser");case 5:return this.redirectPersistenceManager=e.sent,e.next=8,this.redirectPersistenceManager.getCurrentUser();case 8:this.redirectUser=e.sent;case 9:return e.abrupt("return",this.redirectPersistenceManager);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_redirectUserForId",value:function(){var e=se(oe().mark((function e(t){var n,r;return oe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._isInitialized){e.next=3;break}return e.next=3,this.queue(se(oe().mark((function e(){return oe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)}))));case 3:if((null===(n=this._currentUser)||void 0===n?void 0:n._redirectEventId)!==t){e.next=5;break}return e.abrupt("return",this._currentUser);case 5:if((null===(r=this.redirectUser)||void 0===r?void 0:r._redirectEventId)!==t){e.next=7;break}return e.abrupt("return",this.redirectUser);case 7:return e.abrupt("return",null);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_persistUserIfCurrent",value:function(){var e=se(oe().mark((function e(t){var n=this;return oe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t!==this.currentUser){e.next=2;break}return e.abrupt("return",this.queue(se(oe().mark((function e(){return oe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",n.directlySetCurrentUser(t));case 1:case"end":return e.stop()}}),e)})))));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_notifyListenersIfCurrent",value:function(e){e===this.currentUser&&this.notifyAuthListeners()}},{key:"_key",value:function(){return"".concat(this.config.authDomain,":").concat(this.config.apiKey,":").concat(this.name)}},{key:"_startProactiveRefresh",value:function(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}},{key:"_stopProactiveRefresh",value:function(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}},{key:"_currentUser",get:function(){return this.currentUser}},{key:"notifyAuthListeners",value:function(){var e,t;if(this._isInitialized){this.idTokenSubscription.next(this.currentUser);var n=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}}},{key:"registerStateListener",value:function(e,t,n,r){var i=this;if(this._deleted)return function(){};var a="function"===typeof t?t:t.next.bind(t),o=this._isInitialized?Promise.resolve():this._initializationPromise;return pk(o,this,"internal-error"),o.then((function(){return a(i.currentUser)})),"function"===typeof t?e.addObserver(t,n,r):e.addObserver(t)}},{key:"directlySetCurrentUser",value:function(){var e=se(oe().mark((function e(t){return oe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,!t){e.next=8;break}return e.next=6,this.assertedPersistence.setCurrentUser(t);case 6:e.next=10;break;case 8:return e.next=10,this.assertedPersistence.removeCurrentUser();case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"queue",value:function(e){return this.operations=this.operations.then(e,e),this.operations}},{key:"assertedPersistence",get:function(){return pk(this.persistenceManager,this,"internal-error"),this.persistenceManager}},{key:"_logFramework",value:function(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Ib(this.config.clientPlatform,this._getFrameworks()))}},{key:"_getFrameworks",value:function(){return this.frameworks}},{key:"_getAdditionalHeaders",value:function(){var e=se(oe().mark((function e(){var t,n,r;return oe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=v({},"X-Client-Version",this.clientVersion),this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId),e.next=4,null===(t=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===t?void 0:t.getHeartbeatsHeader();case 4:return(r=e.sent)&&(n["X-Firebase-Client"]=r),e.abrupt("return",n);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function Tb(e){return ae(e)}var Cb=function(){function e(t){var n=this;y(this,e),this.auth=t,this.observer=null,this.addObserver=ne((function(e){return n.observer=e}))}return g(e,[{key:"next",get:function(){return pk(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}]),e}();function Nb(e,t,n){var r=Tb(e);pk(r._canInitEmulator,r,"emulator-config-failed"),pk(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");var i=!!(null===n||void 0===n?void 0:n.disableWarnings),a=Ab(t),o=function(e){var t=Ab(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};var r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){var a=i[1];return{host:a,port:Db(r.substr(a.length+1))}}var o=s(r.split(":"),2);return{host:o[0],port:Db(o[1])}}(t),u=o.host,c=o.port,l=null===c?"":":".concat(c);r.config.emulator={url:"".concat(a,"//").concat(u).concat(l,"/")},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:u,port:c,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||function(){function e(){var e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!==typeof console&&"function"===typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials.");"undefined"!==typeof window&&"undefined"!==typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}function Ab(e){var t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function Db(e){if(!e)return null;var t=Number(e);return isNaN(t)?null:t}var Rb=function(){function e(t,n){y(this,e),this.providerId=t,this.signInMethod=n}return g(e,[{key:"toJSON",value:function(){return vk("not implemented")}},{key:"_getIdTokenResponse",value:function(e){return vk("not implemented")}},{key:"_linkToIdToken",value:function(e,t){return vk("not implemented")}},{key:"_getReauthenticationResolver",value:function(e){return vk("not implemented")}}]),e}();function Pb(e,t){return Ob.apply(this,arguments)}function Ob(){return(Ob=se(oe().mark((function e(t,n){return oe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ck(t,"POST","/v1/accounts:resetPassword",Tk(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Lb(e,t){return Mb.apply(this,arguments)}function Mb(){return(Mb=se(oe().mark((function e(t,n){return oe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ck(t,"POST","/v1/accounts:update",n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Fb(e,t){return Ub.apply(this,arguments)}function Ub(){return(Ub=se(oe().mark((function e(t,n){return oe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ck(t,"POST","/v1/accounts:update",Tk(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Vb(e,t){return jb.apply(this,arguments)}function jb(){return(jb=se(oe().mark((function e(t,n){return oe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Rk(t,"POST","/v1/accounts:signInWithPassword",Tk(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Bb(e,t){return qb.apply(this,arguments)}function qb(){return(qb=se(oe().mark((function e(t,n){return oe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ck(t,"POST","/v1/accounts:sendOobCode",Tk(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function zb(e,t){return Kb.apply(this,arguments)}function Kb(){return(Kb=se(oe().mark((function e(t,n){return oe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Bb(t,n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Gb(e,t){return Wb.apply(this,arguments)}function Wb(){return(Wb=se(oe().mark((function e(t,n){return oe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Bb(t,n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Hb(e,t){return Qb.apply(this,arguments)}function Qb(){return(Qb=se(oe().mark((function e(t,n){return oe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Bb(t,n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Yb(e,t){return $b.apply(this,arguments)}function $b(){return($b=se(oe().mark((function e(t,n){return oe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Bb(t,n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Xb(e,t){return Jb.apply(this,arguments)}function Jb(){return(Jb=se(oe().mark((function e(t,n){return oe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Rk(t,"POST","/v1/accounts:signInWithEmailLink",Tk(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Zb(e,t){return ew.apply(this,arguments)}function ew(){return(ew=se(oe().mark((function e(t,n){return oe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Rk(t,"POST","/v1/accounts:signInWithEmailLink",Tk(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var tw=function(e){x(n,e);var t=T(n);function n(e,r,i){var a,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return y(this,n),(a=t.call(this,"password",i))._email=e,a._password=r,a._tenantId=o,a}return g(n,[{key:"toJSON",value:function(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}},{key:"_getIdTokenResponse",value:function(){var e=se(oe().mark((function e(t){return oe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=this.signInMethod,e.next="password"===e.t0?3:"emailLink"===e.t0?4:5;break;case 3:return e.abrupt("return",Vb(t,{returnSecureToken:!0,email:this._email,password:this._password}));case 4:return e.abrupt("return",Xb(t,{email:this._email,oobCode:this._password}));case 5:ck(t,"internal-error");case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_linkToIdToken",value:function(){var e=se(oe().mark((function e(t,n){return oe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=this.signInMethod,e.next="password"===e.t0?3:"emailLink"===e.t0?4:5;break;case 3:return e.abrupt("return",Lb(t,{idToken:n,returnSecureToken:!0,email:this._email,password:this._password}));case 4:return e.abrupt("return",Zb(t,{idToken:n,email:this._email,oobCode:this._password}));case 5:ck(t,"internal-error");case 6:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_getReauthenticationResolver",value:function(e){return this._getIdTokenResponse(e)}}],[{key:"_fromEmailAndPassword",value:function(e,t){return new n(e,t,"password")}},{key:"_fromEmailAndCode",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return new n(e,t,"emailLink",r)}},{key:"fromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e;if((null===t||void 0===t?void 0:t.email)&&(null===t||void 0===t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}}]),n}(Rb);function nw(e,t){return rw.apply(this,arguments)}function rw(){return(rw=se(oe().mark((function e(t,n){return oe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Rk(t,"POST","/v1/accounts:signInWithIdp",Tk(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var iw=function(e){x(n,e);var t=T(n);function n(){var e;return y(this,n),(e=t.apply(this,arguments)).pendingToken=null,e}return g(n,[{key:"toJSON",value:function(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}},{key:"_getIdTokenResponse",value:function(e){return nw(e,this.buildRequest())}},{key:"_linkToIdToken",value:function(e,t){var n=this.buildRequest();return n.idToken=t,nw(e,n)}},{key:"_getReauthenticationResolver",value:function(e){var t=this.buildRequest();return t.autoCreate=!1,nw(e,t)}},{key:"buildRequest",value:function(){var e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{var t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Z(t)}return e}}],[{key:"_fromParams",value:function(e){var t=new n(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):ck("argument-error"),t}},{key:"fromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e,r=t.providerId,i=t.signInMethod,a=Kg(t,["providerId","signInMethod"]);if(!r||!i)return null;var o=new n(r,i);return o.idToken=a.idToken||void 0,o.accessToken=a.accessToken||void 0,o.secret=a.secret,o.nonce=a.nonce,o.pendingToken=a.pendingToken||null,o}}]),n}(Rb);function aw(e,t){return ow.apply(this,arguments)}function ow(){return(ow=se(oe().mark((function e(t,n){return oe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ck(t,"POST","/v1/accounts:sendVerificationCode",Tk(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function uw(){return(uw=se(oe().mark((function e(t,n){return oe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Rk(t,"POST","/v1/accounts:signInWithPhoneNumber",Tk(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function sw(){return(sw=se(oe().mark((function e(t,n){var r;return oe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Rk(t,"POST","/v1/accounts:signInWithPhoneNumber",Tk(t,n));case 2:if(!(r=e.sent).temporaryProof){e.next=5;break}throw Mk(t,"account-exists-with-different-credential",r);case 5:return e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var cw=v({},"USER_NOT_FOUND","user-not-found");function lw(){return(lw=se(oe().mark((function e(t,n){var r;return oe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Object.assign(Object.assign({},n),{operation:"REAUTH"}),e.abrupt("return",Rk(t,"POST","/v1/accounts:signInWithPhoneNumber",Tk(t,r),cw));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var fw=function(e){x(n,e);var t=T(n);function n(e){var r;return y(this,n),(r=t.call(this,"phone","phone")).params=e,r}return g(n,[{key:"_getIdTokenResponse",value:function(e){return function(e,t){return uw.apply(this,arguments)}(e,this._makeVerificationRequest())}},{key:"_linkToIdToken",value:function(e,t){return function(e,t){return sw.apply(this,arguments)}(e,Object.assign({idToken:t},this._makeVerificationRequest()))}},{key:"_getReauthenticationResolver",value:function(e){return function(e,t){return lw.apply(this,arguments)}(e,this._makeVerificationRequest())}},{key:"_makeVerificationRequest",value:function(){var e=this.params,t=e.temporaryProof,n=e.phoneNumber,r=e.verificationId,i=e.verificationCode;return t&&n?{temporaryProof:t,phoneNumber:n}:{sessionInfo:r,code:i}}},{key:"toJSON",value:function(){var e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}}],[{key:"_fromVerification",value:function(e,t){return new n({verificationId:e,verificationCode:t})}},{key:"_fromTokenResponse",value:function(e,t){return new n({phoneNumber:e,temporaryProof:t})}},{key:"fromJSON",value:function(e){"string"===typeof e&&(e=JSON.parse(e));var t=e,r=t.verificationId,i=t.verificationCode,a=t.phoneNumber,o=t.temporaryProof;return i||r||a||o?new n({verificationId:r,verificationCode:i,phoneNumber:a,temporaryProof:o}):null}}]),n}(Rb);var hw=function(){function e(t){var n,r,i,a,o,u;y(this,e);var s=ee(te(t)),c=null!==(n=s.apiKey)&&void 0!==n?n:null,l=null!==(r=s.oobCode)&&void 0!==r?r:null,f=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(i=s.mode)&&void 0!==i?i:null);pk(c&&l&&f,"argument-error"),this.apiKey=c,this.operation=f,this.code=l,this.continueUrl=null!==(a=s.continueUrl)&&void 0!==a?a:null,this.languageCode=null!==(o=s.languageCode)&&void 0!==o?o:null,this.tenantId=null!==(u=s.tenantId)&&void 0!==u?u:null}return g(e,null,[{key:"parseLink",value:function(t){var n=function(e){var t=ee(te(e)).link,n=t?ee(te(t)).deep_link_id:null,r=ee(te(e)).deep_link_id;return(r?ee(te(r)).link:null)||r||n||t||e}(t);try{return new e(n)}catch(iy){return null}}}]),e}();var dw=function(){function e(){y(this,e),this.providerId=e.PROVIDER_ID}return g(e,null,[{key:"credential",value:function(e,t){return tw._fromEmailAndPassword(e,t)}},{key:"credentialWithLink",value:function(e,t){var n=hw.parseLink(t);return pk(n,"argument-error"),tw._fromEmailAndCode(e,n.code,n.tenantId)}}]),e}();dw.PROVIDER_ID="password",dw.EMAIL_PASSWORD_SIGN_IN_METHOD="password",dw.EMAIL_LINK_SIGN_IN_METHOD="emailLink";var pw=function(){function e(t){y(this,e),this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}return g(e,[{key:"setDefaultLanguage",value:function(e){this.defaultLanguageCode=e}},{key:"setCustomParameters",value:function(e){return this.customParameters=e,this}},{key:"getCustomParameters",value:function(){return this.customParameters}}]),e}(),vw=function(e){x(n,e);var t=T(n);function n(){var e;return y(this,n),(e=t.apply(this,arguments)).scopes=[],e}return g(n,[{key:"addScope",value:function(e){return this.scopes.includes(e)||this.scopes.push(e),this}},{key:"getScopes",value:function(){return p(this.scopes)}}]),n}(pw),yw=function(e){x(n,e);var t=T(n);function n(){return y(this,n),t.apply(this,arguments)}return g(n,[{key:"credential",value:function(e){return this._credential(Object.assign(Object.assign({},e),{nonce:e.rawNonce}))}},{key:"_credential",value:function(e){return pk(e.idToken||e.accessToken,"argument-error"),iw._fromParams(Object.assign(Object.assign({},e),{providerId:this.providerId,signInMethod:this.providerId}))}}],[{key:"credentialFromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e;return pk("providerId"in t&&"signInMethod"in t,"argument-error"),iw._fromParams(t)}},{key:"credentialFromResult",value:function(e){return n.oauthCredentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.oauthCredentialFromTaggedObject(e.customData||{})}},{key:"oauthCredentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthIdToken,i=t.oauthAccessToken,a=t.oauthTokenSecret,o=t.pendingToken,u=t.nonce,s=t.providerId;if(!i&&!a&&!r&&!o)return null;if(!s)return null;try{return new n(s)._credential({idToken:r,accessToken:i,nonce:u,pendingToken:o})}catch(c){return null}}}]),n}(vw),mw=function(e){x(n,e);var t=T(n);function n(){return y(this,n),t.call(this,"facebook.com")}return g(n,null,[{key:"credential",value:function(e){return iw._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return n.credential(t.oauthAccessToken)}catch(iy){return null}}}]),n}(vw);mw.FACEBOOK_SIGN_IN_METHOD="facebook.com",mw.PROVIDER_ID="facebook.com";var gw=function(e){x(n,e);var t=T(n);function n(){var e;return y(this,n),(e=t.call(this,"google.com")).addScope("profile"),e}return g(n,null,[{key:"credential",value:function(e,t){return iw._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthIdToken,i=t.oauthAccessToken;if(!r&&!i)return null;try{return n.credential(r,i)}catch(iy){return null}}}]),n}(vw);gw.GOOGLE_SIGN_IN_METHOD="google.com",gw.PROVIDER_ID="google.com";var kw=function(e){x(n,e);var t=T(n);function n(){return y(this,n),t.call(this,"github.com")}return g(n,null,[{key:"credential",value:function(e){return iw._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.GITHUB_SIGN_IN_METHOD,accessToken:e})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return n.credential(t.oauthAccessToken)}catch(iy){return null}}}]),n}(vw);kw.GITHUB_SIGN_IN_METHOD="github.com",kw.PROVIDER_ID="github.com";var bw=function(e){x(n,e);var t=T(n);function n(e,r){var i;return y(this,n),(i=t.call(this,e,e)).pendingToken=r,i}return g(n,[{key:"_getIdTokenResponse",value:function(e){return nw(e,this.buildRequest())}},{key:"_linkToIdToken",value:function(e,t){var n=this.buildRequest();return n.idToken=t,nw(e,n)}},{key:"_getReauthenticationResolver",value:function(e){var t=this.buildRequest();return t.autoCreate=!1,nw(e,t)}},{key:"toJSON",value:function(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}},{key:"buildRequest",value:function(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}],[{key:"fromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e,r=t.providerId,i=t.signInMethod,a=t.pendingToken;return r&&i&&a&&r===i?new n(r,a):null}},{key:"_create",value:function(e,t){return new n(e,t)}}]),n}(Rb),ww=function(e){x(n,e);var t=T(n);function n(e){return y(this,n),pk(e.startsWith("saml."),"argument-error"),t.call(this,e)}return g(n,null,[{key:"credentialFromResult",value:function(e){return n.samlCredentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.samlCredentialFromTaggedObject(e.customData||{})}},{key:"credentialFromJSON",value:function(e){var t=bw.fromJSON(e);return pk(t,"argument-error"),t}},{key:"samlCredentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var n=t.pendingToken,r=t.providerId;if(!n||!r)return null;try{return bw._create(r,n)}catch(i){return null}}}]),n}(pw),xw=function(e){x(n,e);var t=T(n);function n(){return y(this,n),t.call(this,"twitter.com")}return g(n,null,[{key:"credential",value:function(e,t){return iw._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthAccessToken,i=t.oauthTokenSecret;if(!r||!i)return null;try{return n.credential(r,i)}catch(iy){return null}}}]),n}(vw);function _w(e,t){return Iw.apply(this,arguments)}function Iw(){return(Iw=se(oe().mark((function e(t,n){return oe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Rk(t,"POST","/v1/accounts:signUp",Tk(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}xw.TWITTER_SIGN_IN_METHOD="twitter.com",xw.PROVIDER_ID="twitter.com";var Sw=function(){function e(t){y(this,e),this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}return g(e,null,[{key:"_fromIdTokenResponse",value:function(){var t=se(oe().mark((function t(n,r,i){var a,o,u,s,c=arguments;return oe().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=c.length>3&&void 0!==c[3]&&c[3],t.next=3,ub._fromIdTokenResponse(n,i,a);case 3:return o=t.sent,u=Ew(i),s=new e({user:o,providerId:u,_tokenResponse:i,operationType:r}),t.abrupt("return",s);case 7:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}()},{key:"_forOperation",value:function(){var t=se(oe().mark((function t(n,r,i){var a;return oe().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n._updateTokensIfNecessary(i,!0);case 2:return a=Ew(i),t.abrupt("return",new e({user:n,providerId:a,_tokenResponse:i,operationType:r}));case 4:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}()}]),e}();function Ew(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}function Tw(){return Tw=se(oe().mark((function e(t){var n,r,i,a;return oe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Tb(t),e.next=3,r._initializationPromise;case 3:if(!(null===(n=r.currentUser)||void 0===n?void 0:n.isAnonymous)){e.next=5;break}return e.abrupt("return",new Sw({user:r.currentUser,providerId:null,operationType:"signIn"}));case 5:return e.next=7,_w(r,{returnSecureToken:!0});case 7:return i=e.sent,e.next=10,Sw._fromIdTokenResponse(r,"signIn",i,!0);case 10:return a=e.sent,e.next=13,r._updateCurrentUser(a.user);case 13:return e.abrupt("return",a);case 14:case"end":return e.stop()}}),e)}))),Tw.apply(this,arguments)}var Cw=function(e){x(n,e);var t=T(n);function n(e,r,i,a){var o,u;return y(this,n),(o=t.call(this,r.code,r.message)).operationType=i,o.user=a,Object.setPrototypeOf(b(o),n.prototype),o.customData={appName:e.name,tenantId:null!==(u=e.tenantId)&&void 0!==u?u:void 0,_serverResponse:r.customData._serverResponse,operationType:i},o}return g(n,null,[{key:"_fromErrorAndOperation",value:function(e,t,r,i){return new n(e,t,r,i)}}]),n}(W);function Nw(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch((function(n){if(n.code==="auth/".concat("multi-factor-auth-required"))throw Cw._fromErrorAndOperation(e,n,t,r);throw n}))}function Aw(e){return new Set(e.map((function(e){return e.providerId})).filter((function(e){return!!e})))}function Dw(e,t){return Rw.apply(this,arguments)}function Rw(){return Rw=se(oe().mark((function e(t,n){var r,i,a,o;return oe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=ae(t),e.next=3,Lw(!0,r,n);case 3:return e.t0=Vk,e.t1=r.auth,e.next=7,r.getIdToken();case 7:return e.t2=e.sent,e.t3=[n],e.t4={idToken:e.t2,deleteProvider:e.t3},e.next=12,(0,e.t0)(e.t1,e.t4);case 12:return i=e.sent,a=i.providerUserInfo,o=Aw(a||[]),r.providerData=r.providerData.filter((function(e){return o.has(e.providerId)})),o.has("phone")||(r.phoneNumber=null),e.next=19,r.auth._persistUserIfCurrent(r);case 19:return e.abrupt("return",r);case 20:case"end":return e.stop()}}),e)}))),Rw.apply(this,arguments)}function Pw(e,t){return Ow.apply(this,arguments)}function Ow(){return Ow=se(oe().mark((function e(t,n){var r,i,a=arguments;return oe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.length>2&&void 0!==a[2]&&a[2],e.t0=Hk,e.t1=t,e.t2=n,e.t3=t.auth,e.next=7,t.getIdToken();case 7:return e.t4=e.sent,e.t5=e.t2._linkToIdToken.call(e.t2,e.t3,e.t4),e.t6=r,e.next=12,(0,e.t0)(e.t1,e.t5,e.t6);case 12:return i=e.sent,e.abrupt("return",Sw._forOperation(t,"link",i));case 14:case"end":return e.stop()}}),e)}))),Ow.apply(this,arguments)}function Lw(e,t,n){return Mw.apply(this,arguments)}function Mw(){return(Mw=se(oe().mark((function e(t,n,r){var i,a;return oe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Jk(n);case 2:i=Aw(n.providerData),a=!1===t?"provider-already-linked":"no-such-provider",pk(i.has(r)===t,n.auth,a);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Fw(e,t){return Uw.apply(this,arguments)}function Uw(){return Uw=se(oe().mark((function e(t,n){var r,i,a,o,u,s,c=arguments;return oe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>2&&void 0!==c[2]&&c[2],i=t.auth,a="reauthenticate",e.prev=3,e.next=6,Hk(t,Nw(i,a,n,t),r);case 6:return pk((o=e.sent).idToken,i,"internal-error"),pk(u=Wk(o.idToken),i,"internal-error"),s=u.sub,pk(t.uid===s,i,"user-mismatch"),e.abrupt("return",Sw._forOperation(t,a,o));case 15:throw e.prev=15,e.t0=e.catch(3),(null===e.t0||void 0===e.t0?void 0:e.t0.code)==="auth/".concat("user-not-found")&&ck(i,"user-mismatch"),e.t0;case 19:case"end":return e.stop()}}),e,null,[[3,15]])}))),Uw.apply(this,arguments)}function Vw(e,t){return jw.apply(this,arguments)}function jw(){return jw=se(oe().mark((function e(t,n){var r,i,a,o,u=arguments;return oe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>2&&void 0!==u[2]&&u[2],i="signIn",e.next=4,Nw(t,i,n);case 4:return a=e.sent,e.next=7,Sw._fromIdTokenResponse(t,i,a);case 7:if(o=e.sent,r){e.next=11;break}return e.next=11,t._updateCurrentUser(o.user);case 11:return e.abrupt("return",o);case 12:case"end":return e.stop()}}),e)}))),jw.apply(this,arguments)}function Bw(e,t){return qw.apply(this,arguments)}function qw(){return(qw=se(oe().mark((function e(t,n){return oe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Vw(Tb(t),n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function zw(e,t){return Kw.apply(this,arguments)}function Kw(){return(Kw=se(oe().mark((function e(t,n){var r;return oe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=ae(t),e.next=3,Lw(!1,r,n.providerId);case 3:return e.abrupt("return",Pw(r,n));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Gw(e,t){return Ww.apply(this,arguments)}function Ww(){return(Ww=se(oe().mark((function e(t,n){return oe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Fw(ae(t),n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Hw(e,t){return Qw.apply(this,arguments)}function Qw(){return(Qw=se(oe().mark((function e(t,n){return oe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Rk(t,"POST","/v1/accounts:signInWithCustomToken",Tk(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Yw(){return(Yw=se(oe().mark((function e(t,n){var r,i,a;return oe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Tb(t),e.next=3,Hw(r,{token:n,returnSecureToken:!0});case 3:return i=e.sent,e.next=6,Sw._fromIdTokenResponse(r,"signIn",i);case 6:return a=e.sent,e.next=9,r._updateCurrentUser(a.user);case 9:return e.abrupt("return",a);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var $w=function(){function e(t,n){y(this,e),this.factorId=t,this.uid=n.mfaEnrollmentId,this.enrollmentTime=new Date(n.enrolledAt).toUTCString(),this.displayName=n.displayName}return g(e,null,[{key:"_fromServerResponse",value:function(e,t){return"phoneInfo"in t?Xw._fromServerResponse(e,t):ck(e,"internal-error")}}]),e}(),Xw=function(e){x(n,e);var t=T(n);function n(e){var r;return y(this,n),(r=t.call(this,"phone",e)).phoneNumber=e.phoneInfo,r}return g(n,null,[{key:"_fromServerResponse",value:function(e,t){return new n(t)}}]),n}($w);function Jw(e,t,n){var r;pk((null===(r=n.url)||void 0===r?void 0:r.length)>0,e,"invalid-continue-uri"),pk("undefined"===typeof n.dynamicLinkDomain||n.dynamicLinkDomain.length>0,e,"invalid-dynamic-link-domain"),t.continueUrl=n.url,t.dynamicLinkDomain=n.dynamicLinkDomain,t.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(pk(n.iOS.bundleId.length>0,e,"missing-ios-bundle-id"),t.iOSBundleId=n.iOS.bundleId),n.android&&(pk(n.android.packageName.length>0,e,"missing-android-pkg-name"),t.androidInstallApp=n.android.installApp,t.androidMinimumVersionCode=n.android.minimumVersion,t.androidPackageName=n.android.packageName)}function Zw(){return(Zw=se(oe().mark((function e(t,n,r){var i,a;return oe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=ae(t),a={requestType:"PASSWORD_RESET",email:n},r&&Jw(i,a,r),e.next=5,Gb(i,a);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ex(){return(ex=se(oe().mark((function e(t,n,r){return oe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Pb(ae(t),{oobCode:n,newPassword:r});case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function tx(){return(tx=se(oe().mark((function e(t,n){return oe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Fb(ae(t),{oobCode:n});case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function nx(e,t){return rx.apply(this,arguments)}function rx(){return(rx=se(oe().mark((function e(t,n){var r,i,a,o;return oe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=ae(t),e.next=3,Pb(r,{oobCode:n});case 3:i=e.sent,pk(a=i.requestType,r,"internal-error"),e.t0=a,e.next="EMAIL_SIGNIN"===e.t0?9:"VERIFY_AND_CHANGE_EMAIL"===e.t0?10:"REVERT_SECOND_FACTOR_ADDITION"===e.t0?12:13;break;case 9:return e.abrupt("break",14);case 10:return pk(i.newEmail,r,"internal-error"),e.abrupt("break",14);case 12:pk(i.mfaInfo,r,"internal-error");case 13:pk(i.email,r,"internal-error");case 14:return o=null,i.mfaInfo&&(o=$w._fromServerResponse(Tb(r),i.mfaInfo)),e.abrupt("return",{data:{email:("VERIFY_AND_CHANGE_EMAIL"===i.requestType?i.newEmail:i.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===i.requestType?i.email:i.newEmail)||null,multiFactorInfo:o},operation:a});case 17:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ix(){return(ix=se(oe().mark((function e(t,n){var r,i;return oe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,nx(ae(t),n);case 2:return r=e.sent,i=r.data,e.abrupt("return",i.email);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ax(e,t,n){return ox.apply(this,arguments)}function ox(){return(ox=se(oe().mark((function e(t,n,r){var i,a,o;return oe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Tb(t),e.next=3,_w(i,{returnSecureToken:!0,email:n,password:r});case 3:return a=e.sent,e.next=6,Sw._fromIdTokenResponse(i,"signIn",a);case 6:return o=e.sent,e.next=9,i._updateCurrentUser(o.user);case 9:return e.abrupt("return",o);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ux(){return(ux=se(oe().mark((function e(t,n,r){var i,a;return oe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=ae(t),a={requestType:"EMAIL_SIGNIN",email:n},pk(r.handleCodeInApp,i,"argument-error"),r&&Jw(i,a,r),e.next=6,Hb(i,a);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function sx(){return(sx=se(oe().mark((function e(t,n,r){var i,a;return oe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=ae(t),pk((a=dw.credentialWithLink(n,r||kk()))._tenantId===(i.tenantId||null),i,"tenant-id-mismatch"),e.abrupt("return",Bw(i,a));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function cx(e,t){return lx.apply(this,arguments)}function lx(){return(lx=se(oe().mark((function e(t,n){return oe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ck(t,"POST","/v1/accounts:createAuthUri",Tk(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function fx(){return(fx=se(oe().mark((function e(t,n){var r,i,a,o;return oe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=bk()?kk():"http://localhost",i={identifier:n,continueUri:r},e.next=4,cx(ae(t),i);case 4:return a=e.sent,o=a.signinMethods,e.abrupt("return",o||[]);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function hx(){return(hx=se(oe().mark((function e(t,n){var r,i,a,o;return oe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=ae(t),e.next=3,t.getIdToken();case 3:return i=e.sent,a={requestType:"VERIFY_EMAIL",idToken:i},n&&Jw(r.auth,a,n),e.next=8,zb(r.auth,a);case 8:if(o=e.sent,o.email===t.email){e.next=13;break}return e.next=13,t.reload();case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function dx(){return(dx=se(oe().mark((function e(t,n,r){var i,a,o,u;return oe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=ae(t),e.next=3,t.getIdToken();case 3:return a=e.sent,o={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:a,newEmail:n},r&&Jw(i.auth,o,r),e.next=8,Yb(i.auth,o);case 8:if(u=e.sent,u.email===t.email){e.next=13;break}return e.next=13,t.reload();case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function px(e,t){return vx.apply(this,arguments)}function vx(){return(vx=se(oe().mark((function e(t,n){return oe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ck(t,"POST","/v1/accounts:update",n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function yx(){return(yx=se(oe().mark((function e(t,n){var r,i,a,o,u,s,c;return oe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.displayName,i=n.photoURL,void 0!==r||void 0!==i){e.next=3;break}return e.abrupt("return");case 3:return a=ae(t),e.next=6,a.getIdToken();case 6:return o=e.sent,u={idToken:o,displayName:r,photoUrl:i,returnSecureToken:!0},e.next=10,Hk(a,px(a.auth,u));case 10:return s=e.sent,a.displayName=s.displayName||null,a.photoURL=s.photoUrl||null,(c=a.providerData.find((function(e){return"password"===e.providerId})))&&(c.displayName=a.displayName,c.photoURL=a.photoURL),e.next=17,a._updateTokensIfNecessary(s);case 17:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function mx(e,t,n){return gx.apply(this,arguments)}function gx(){return(gx=se(oe().mark((function e(t,n,r){var i,a,o,u;return oe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.auth,e.next=3,t.getIdToken();case 3:return a=e.sent,o={idToken:a,returnSecureToken:!0},n&&(o.email=n),r&&(o.password=r),e.next=9,Hk(t,Lb(i,o));case 9:return u=e.sent,e.next=12,t._updateTokensIfNecessary(u,!0);case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var kx=g((function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};y(this,e),this.isNewUser=t,this.providerId=n,this.profile=r})),bx=function(e){x(n,e);var t=T(n);function n(e,r,i,a){var o;return y(this,n),(o=t.call(this,e,r,i)).username=a,o}return g(n)}(kx),wx=function(e){x(n,e);var t=T(n);function n(e,r){return y(this,n),t.call(this,e,"facebook.com",r)}return g(n)}(kx),xx=function(e){x(n,e);var t=T(n);function n(e,r){return y(this,n),t.call(this,e,"github.com",r,"string"===typeof(null===r||void 0===r?void 0:r.login)?null===r||void 0===r?void 0:r.login:null)}return g(n)}(bx),_x=function(e){x(n,e);var t=T(n);function n(e,r){return y(this,n),t.call(this,e,"google.com",r)}return g(n)}(kx),Ix=function(e){x(n,e);var t=T(n);function n(e,r,i){return y(this,n),t.call(this,e,"twitter.com",r,i)}return g(n)}(bx);function Sx(e){var t=e.user,n=e._tokenResponse;return t.isAnonymous&&!n?{providerId:null,isNewUser:!1,profile:null}:function(e){var t,n;if(!e)return null;var r=e.providerId,i=e.rawUserInfo?JSON.parse(e.rawUserInfo):{},a=e.isNewUser||"identitytoolkit#SignupNewUserResponse"===e.kind;if(!r&&(null===e||void 0===e?void 0:e.idToken)){var o=null===(n=null===(t=Wk(e.idToken))||void 0===t?void 0:t.firebase)||void 0===n?void 0:n.sign_in_provider;if(o)return new kx(a,"anonymous"!==o&&"custom"!==o?o:null)}if(!r)return null;switch(r){case"facebook.com":return new wx(a,i);case"github.com":return new xx(a,i);case"google.com":return new _x(a,i);case"twitter.com":return new Ix(a,i,e.screenName||null);case"custom":case"anonymous":return new kx(a,null);default:return new kx(a,r,i)}}(n)}var Ex=function(){function e(t,n,r){y(this,e),this.type=t,this.credential=n,this.auth=r}return g(e,[{key:"toJSON",value:function(){return{multiFactorSession:v({},"enroll"===this.type?"idToken":"pendingCredential",this.credential)}}}],[{key:"_fromIdtoken",value:function(t,n){return new e("enroll",t,n)}},{key:"_fromMfaPendingCredential",value:function(t){return new e("signin",t)}},{key:"fromJSON",value:function(t){var n,r;if(null===t||void 0===t?void 0:t.multiFactorSession){if(null===(n=t.multiFactorSession)||void 0===n?void 0:n.pendingCredential)return e._fromMfaPendingCredential(t.multiFactorSession.pendingCredential);if(null===(r=t.multiFactorSession)||void 0===r?void 0:r.idToken)return e._fromIdtoken(t.multiFactorSession.idToken)}return null}}]),e}(),Tx=function(){function e(t,n,r){y(this,e),this.session=t,this.hints=n,this.signInResolver=r}return g(e,[{key:"resolveSignIn",value:function(){var e=se(oe().mark((function e(t){var n;return oe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t,e.abrupt("return",this.signInResolver(n));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}],[{key:"_fromError",value:function(t,n){var r=Tb(t),i=n.customData._serverResponse,a=(i.mfaInfo||[]).map((function(e){return $w._fromServerResponse(r,e)}));pk(i.mfaPendingCredential,r,"internal-error");var o=Ex._fromMfaPendingCredential(i.mfaPendingCredential);return new e(o,a,function(){var e=se(oe().mark((function e(t){var a,u,s;return oe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._process(r,o);case 2:a=e.sent,delete i.mfaInfo,delete i.mfaPendingCredential,u=Object.assign(Object.assign({},i),{idToken:a.idToken,refreshToken:a.refreshToken}),e.t0=n.operationType,e.next="signIn"===e.t0?9:"reauthenticate"===e.t0?15:17;break;case 9:return e.next=11,Sw._fromIdTokenResponse(r,n.operationType,u);case 11:return s=e.sent,e.next=14,r._updateCurrentUser(s.user);case 14:return e.abrupt("return",s);case 15:return pk(n.user,r,"internal-error"),e.abrupt("return",Sw._forOperation(n.user,n.operationType,u));case 17:ck(r,"internal-error");case 18:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}}]),e}();function Cx(e,t){return Ck(e,"POST","/v2/accounts/mfaEnrollment:start",Tk(e,t))}var Nx=function(){function e(t){var n=this;y(this,e),this.user=t,this.enrolledFactors=[],t._onReload((function(e){e.mfaInfo&&(n.enrolledFactors=e.mfaInfo.map((function(e){return $w._fromServerResponse(t.auth,e)})))}))}return g(e,[{key:"getSession",value:function(){var e=se(oe().mark((function e(){return oe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=Ex,e.next=3,this.user.getIdToken();case 3:return e.t1=e.sent,e.t2=this.user.auth,e.abrupt("return",e.t0._fromIdtoken.call(e.t0,e.t1,e.t2));case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"enroll",value:function(){var e=se(oe().mark((function e(t,n){var r,i,a;return oe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t,e.next=3,this.getSession();case 3:return i=e.sent,e.next=6,Hk(this.user,r._process(this.user.auth,i,n));case 6:return a=e.sent,e.next=9,this.user._updateTokensIfNecessary(a);case 9:return e.abrupt("return",this.user.reload());case 10:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"unenroll",value:function(){var e=se(oe().mark((function e(t){var n,r,i;return oe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="string"===typeof t?t:t.uid,e.next=3,this.user.getIdToken();case 3:return r=e.sent,e.prev=4,e.next=7,Hk(this.user,Ck(a=this.user.auth,"POST","/v2/accounts/mfaEnrollment:withdraw",Tk(a,{idToken:r,mfaEnrollmentId:n})));case 7:return i=e.sent,this.enrolledFactors=this.enrolledFactors.filter((function(e){return e.uid!==n})),e.next=11,this.user._updateTokensIfNecessary(i);case 11:return e.next=13,this.user.reload();case 13:e.next=18;break;case 15:throw e.prev=15,e.t0=e.catch(4),e.t0;case 18:case"end":return e.stop()}var a}),e,this,[[4,15]])})));return function(t){return e.apply(this,arguments)}}()}],[{key:"_fromUser",value:function(t){return new e(t)}}]),e}(),Ax=new WeakMap;var Dx="__sak",Rx=function(){function e(t,n){y(this,e),this.storageRetriever=t,this.type=n}return g(e,[{key:"_isAvailable",value:function(){try{return this.storage?(this.storage.setItem(Dx,"1"),this.storage.removeItem(Dx),Promise.resolve(!0)):Promise.resolve(!1)}catch(iy){return Promise.resolve(!1)}}},{key:"_set",value:function(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}},{key:"_get",value:function(e){var t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}},{key:"_remove",value:function(e){return this.storage.removeItem(e),Promise.resolve()}},{key:"storage",get:function(){return this.storageRetriever()}}]),e}();var Px=function(e){x(n,e);var t=T(n);function n(){var e;return y(this,n),(e=t.call(this,(function(){return window.localStorage}),"LOCAL")).boundEventHandler=function(t,n){return e.onStorageEvent(t,n)},e.listeners={},e.localCache={},e.pollTimer=null,e.safariLocalStorageNotSynced=function(){var e=j();return pb(e)||bb(e)}()&&function(){try{return!(!window||window===window.top)}catch(e){return!1}}(),e.fallbackToPolling=_b(),e._shouldAllowMigration=!0,e}return g(n,[{key:"forAllChangedKeys",value:function(e){for(var t=0,n=Object.keys(this.listeners);t<n.length;t++){var r=n[t],i=this.storage.getItem(r),a=this.localCache[r];i!==a&&e(r,a,i)}}},{key:"onStorageEvent",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e.key){var r=e.key;if(n?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){var i=this.storage.getItem(r);if(e.newValue!==i)null!==e.newValue?this.storage.setItem(r,e.newValue):this.storage.removeItem(r);else if(this.localCache[r]===e.newValue&&!n)return}var a=function(){var e=t.storage.getItem(r);(n||t.localCache[r]!==e)&&t.notifyListeners(r,e)},o=this.storage.getItem(r);xb()&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(a,10):a()}else this.forAllChangedKeys((function(e,n,r){t.notifyListeners(e,r)}))}},{key:"notifyListeners",value:function(e,t){this.localCache[e]=t;var n=this.listeners[e];if(n)for(var r=0,i=Array.from(n);r<i.length;r++){(0,i[r])(t?JSON.parse(t):t)}}},{key:"startPolling",value:function(){var e=this;this.stopPolling(),this.pollTimer=setInterval((function(){e.forAllChangedKeys((function(t,n,r){e.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:n,newValue:r}),!0)}))}),1e3)}},{key:"stopPolling",value:function(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}},{key:"attachListener",value:function(){window.addEventListener("storage",this.boundEventHandler)}},{key:"detachListener",value:function(){window.removeEventListener("storage",this.boundEventHandler)}},{key:"_addListener",value:function(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}},{key:"_removeListener",value:function(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}},{key:"_set",value:function(){var e=se(oe().mark((function e(t,r){return oe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ft(_(n.prototype),"_set",this).call(this,t,r);case 2:this.localCache[t]=JSON.stringify(r);case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=se(oe().mark((function e(t){var r;return oe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ft(_(n.prototype),"_get",this).call(this,t);case 2:return r=e.sent,this.localCache[t]=JSON.stringify(r),e.abrupt("return",r);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=se(oe().mark((function e(t){return oe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ft(_(n.prototype),"_remove",this).call(this,t);case 2:delete this.localCache[t];case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),n}(Rx);Px.type="LOCAL";var Ox=Px,Lx=function(e){x(n,e);var t=T(n);function n(){return y(this,n),t.call(this,(function(){return window.sessionStorage}),"SESSION")}return g(n,[{key:"_addListener",value:function(e,t){}},{key:"_removeListener",value:function(e,t){}}]),n}(Rx);Lx.type="SESSION";var Mx=Lx;function Fx(e){return Promise.all(e.map(function(){var e=se(oe().mark((function e(t){var n;return oe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t;case 3:return n=e.sent,e.abrupt("return",{fulfilled:!0,value:n});case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",{fulfilled:!1,reason:e.t0});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()))}var Ux=function(){function e(t){y(this,e),this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}return g(e,[{key:"isListeningto",value:function(e){return this.eventTarget===e}},{key:"handleEvent",value:function(){var e=se(oe().mark((function e(t){var n,r,i,a,o,u,s,c;return oe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=(n=t).data,i=r.eventId,a=r.eventType,o=r.data,null===(u=this.handlersMap[a])||void 0===u?void 0:u.size){e.next=5;break}return e.abrupt("return");case 5:return n.ports[0].postMessage({status:"ack",eventId:i,eventType:a}),s=Array.from(u).map(function(){var e=se(oe().mark((function e(t){return oe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t(n.origin,o));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.next=9,Fx(s);case 9:c=e.sent,n.ports[0].postMessage({status:"done",eventId:i,eventType:a,response:c});case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_subscribe",value:function(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}},{key:"_unsubscribe",value:function(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}],[{key:"_getInstance",value:function(t){var n=this.receivers.find((function(e){return e.isListeningto(t)}));if(n)return n;var r=new e(t);return this.receivers.push(r),r}}]),e}();function Vx(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n="",r=0;r<t;r++)n+=Math.floor(10*Math.random());return e+n}Ux.receivers=[];var jx=function(){function e(t){y(this,e),this.target=t,this.handlers=new Set}return g(e,[{key:"removeMessageHandler",value:function(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}},{key:"_send",value:function(){var e=se(oe().mark((function e(t,n){var r,i,a,o,u=this,s=arguments;return oe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=s.length>2&&void 0!==s[2]?s[2]:50,i="undefined"!==typeof MessageChannel?new MessageChannel:null){e.next=4;break}throw new Error("connection_unavailable");case 4:return e.abrupt("return",new Promise((function(e,s){var c=Vx("",20);i.port1.start();var l=setTimeout((function(){s(new Error("unsupported_event"))}),r);o={messageChannel:i,onMessage:function(t){var n=t;if(n.data.eventId===c)switch(n.data.status){case"ack":clearTimeout(l),a=setTimeout((function(){s(new Error("timeout"))}),3e3);break;case"done":clearTimeout(a),e(n.data.response);break;default:clearTimeout(l),clearTimeout(a),s(new Error("invalid_response"))}}},u.handlers.add(o),i.port1.addEventListener("message",o.onMessage),u.target.postMessage({eventType:t,eventId:c,data:n},[i.port2])})).finally((function(){o&&u.removeMessageHandler(o)})));case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()}]),e}();function Bx(){return window}function qx(){return"undefined"!==typeof Bx().WorkerGlobalScope&&"function"===typeof Bx().importScripts}function zx(){return Kx.apply(this,arguments)}function Kx(){return(Kx=se(oe().mark((function e(){var t;return oe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===navigator||void 0===navigator?void 0:navigator.serviceWorker){e.next=2;break}return e.abrupt("return",null);case 2:return e.prev=2,e.next=5,navigator.serviceWorker.ready;case 5:return t=e.sent,e.abrupt("return",t.active);case 9:return e.prev=9,e.t0=e.catch(2),e.abrupt("return",null);case 12:case"end":return e.stop()}}),e,null,[[2,9]])})))).apply(this,arguments)}function Gx(){var e;return(null===(e=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===e?void 0:e.controller)||null}var Wx="firebaseLocalStorageDb",Hx="firebaseLocalStorage",Qx="fbase_key",Yx=function(){function e(t){y(this,e),this.request=t}return g(e,[{key:"toPromise",value:function(){var e=this;return new Promise((function(t,n){e.request.addEventListener("success",(function(){t(e.request.result)})),e.request.addEventListener("error",(function(){n(e.request.error)}))}))}}]),e}();function $x(e,t){return e.transaction([Hx],t?"readwrite":"readonly").objectStore(Hx)}function Xx(){var e=indexedDB.deleteDatabase(Wx);return new Yx(e).toPromise()}function Jx(){var e=indexedDB.open(Wx,1);return new Promise((function(t,n){e.addEventListener("error",(function(){n(e.error)})),e.addEventListener("upgradeneeded",(function(){var t=e.result;try{t.createObjectStore(Hx,{keyPath:Qx})}catch(r){n(r)}})),e.addEventListener("success",se(oe().mark((function n(){var r;return oe().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if((r=e.result).objectStoreNames.contains(Hx)){n.next=12;break}return r.close(),n.next=5,Xx();case 5:return n.t0=t,n.next=8,Jx();case 8:n.t1=n.sent,(0,n.t0)(n.t1),n.next=13;break;case 12:t(r);case 13:case"end":return n.stop()}}),n)}))))}))}function Zx(e,t,n){return e_.apply(this,arguments)}function e_(){return e_=se(oe().mark((function e(t,n,r){var i,a;return oe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=$x(t,!0).put((v(i={},Qx,n),v(i,"value",r),i)),e.abrupt("return",new Yx(a).toPromise());case 2:case"end":return e.stop()}}),e)}))),e_.apply(this,arguments)}function t_(e,t){return n_.apply(this,arguments)}function n_(){return n_=se(oe().mark((function e(t,n){var r,i;return oe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=$x(t,!1).get(n),e.next=3,new Yx(r).toPromise();case 3:return i=e.sent,e.abrupt("return",void 0===i?null:i.value);case 5:case"end":return e.stop()}}),e)}))),n_.apply(this,arguments)}function r_(e,t){var n=$x(e,!0).delete(t);return new Yx(n).toPromise()}var i_=function(){function e(){y(this,e),this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then((function(){}),(function(){}))}return g(e,[{key:"_openDb",value:function(){var e=se(oe().mark((function e(){return oe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.db){e.next=2;break}return e.abrupt("return",this.db);case 2:return e.next=4,Jx();case 4:return this.db=e.sent,e.abrupt("return",this.db);case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_withRetries",value:function(){var e=se(oe().mark((function e(t){var n,r;return oe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=0;case 1:return e.prev=2,e.next=5,this._openDb();case 5:return r=e.sent,e.next=8,t(r);case 8:return e.abrupt("return",e.sent);case 11:if(e.prev=11,e.t0=e.catch(2),!(n++>3)){e.next=15;break}throw e.t0;case 15:this.db&&(this.db.close(),this.db=void 0);case 16:e.next=1;break;case 18:case"end":return e.stop()}}),e,this,[[2,11]])})));return function(t){return e.apply(this,arguments)}}()},{key:"initializeServiceWorkerMessaging",value:function(){var e=se(oe().mark((function e(){return oe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",qx()?this.initializeReceiver():this.initializeSender());case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initializeReceiver",value:function(){var e=se(oe().mark((function e(){var t=this;return oe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.receiver=Ux._getInstance(qx()?self:null),this.receiver._subscribe("keyChanged",function(){var e=se(oe().mark((function e(n,r){var i;return oe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._poll();case 2:return i=e.sent,e.abrupt("return",{keyProcessed:i.includes(r.key)});case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),this.receiver._subscribe("ping",function(){var e=se(oe().mark((function e(t,n){return oe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",["keyChanged"]);case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}());case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initializeSender",value:function(){var e=se(oe().mark((function e(){var t,n,r;return oe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,zx();case 2:if(this.activeServiceWorker=e.sent,this.activeServiceWorker){e.next=5;break}return e.abrupt("return");case 5:return this.sender=new jx(this.activeServiceWorker),e.next=8,this.sender._send("ping",{},800);case 8:if(r=e.sent){e.next=11;break}return e.abrupt("return");case 11:(null===(t=r[0])||void 0===t?void 0:t.fulfilled)&&(null===(n=r[0])||void 0===n?void 0:n.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0);case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"notifyServiceWorker",value:function(){var e=se(oe().mark((function e(t){return oe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.sender&&this.activeServiceWorker&&Gx()===this.activeServiceWorker){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50);case 5:e.next=9;break;case 7:e.prev=7,e.t0=e.catch(2);case 9:case"end":return e.stop()}}),e,this,[[2,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"_isAvailable",value:function(){var e=se(oe().mark((function e(){var t;return oe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,indexedDB){e.next=3;break}return e.abrupt("return",!1);case 3:return e.next=5,Jx();case 5:return t=e.sent,e.next=8,Zx(t,Dx,"1");case 8:return e.next=10,r_(t,Dx);case 10:return e.abrupt("return",!0);case 13:e.prev=13,e.t0=e.catch(0);case 15:return e.abrupt("return",!1);case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(){return e.apply(this,arguments)}}()},{key:"_withPendingWrite",value:function(){var e=se(oe().mark((function e(t){return oe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.pendingWrites++,e.prev=1,e.next=4,t();case 4:return e.prev=4,this.pendingWrites--,e.finish(4);case 7:case"end":return e.stop()}}),e,this,[[1,,4,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"_set",value:function(){var e=se(oe().mark((function e(t,n){var r=this;return oe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._withPendingWrite(se(oe().mark((function e(){return oe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r._withRetries((function(e){return Zx(e,t,n)}));case 2:return r.localCache[t]=n,e.abrupt("return",r.notifyServiceWorker(t));case 4:case"end":return e.stop()}}),e)})))));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=se(oe().mark((function e(t){var n;return oe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._withRetries((function(e){return t_(e,t)}));case 2:return n=e.sent,this.localCache[t]=n,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=se(oe().mark((function e(t){var n=this;return oe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._withPendingWrite(se(oe().mark((function e(){return oe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n._withRetries((function(e){return r_(e,t)}));case 2:return delete n.localCache[t],e.abrupt("return",n.notifyServiceWorker(t));case 4:case"end":return e.stop()}}),e)})))));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_poll",value:function(){var e=se(oe().mark((function e(){var t,n,r,i,a,o,u,s,c,l,f;return oe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._withRetries((function(e){var t=$x(e,!1).getAll();return new Yx(t).toPromise()}));case 2:if(t=e.sent){e.next=5;break}return e.abrupt("return",[]);case 5:if(0===this.pendingWrites){e.next=7;break}return e.abrupt("return",[]);case 7:n=[],r=new Set,i=k(t);try{for(i.s();!(a=i.n()).done;)o=a.value,u=o.fbase_key,s=o.value,r.add(u),JSON.stringify(this.localCache[u])!==JSON.stringify(s)&&(this.notifyListeners(u,s),n.push(u))}catch(h){i.e(h)}finally{i.f()}for(c=0,l=Object.keys(this.localCache);c<l.length;c++)f=l[c],this.localCache[f]&&!r.has(f)&&(this.notifyListeners(f,null),n.push(f));return e.abrupt("return",n);case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"notifyListeners",value:function(e,t){this.localCache[e]=t;var n=this.listeners[e];if(n)for(var r=0,i=Array.from(n);r<i.length;r++){(0,i[r])(t)}}},{key:"startPolling",value:function(){var e=this;this.stopPolling(),this.pollTimer=setInterval(se(oe().mark((function t(){return oe().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e._poll());case 1:case"end":return t.stop()}}),t)}))),800)}},{key:"stopPolling",value:function(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}},{key:"_addListener",value:function(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}},{key:"_removeListener",value:function(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}]),e}();i_.type="LOCAL";var a_=i_;function o_(e,t){return Ck(e,"POST","/v2/accounts/mfaSignIn:start",Tk(e,t))}function u_(e){return s_.apply(this,arguments)}function s_(){return(s_=se(oe().mark((function e(t){return oe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ck(t,"GET","/v1/recaptchaParams");case 2:if(e.t0=e.sent.recaptchaSiteKey,e.t0){e.next=5;break}e.t0="";case 5:return e.abrupt("return",e.t0);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function c_(e){return new Promise((function(t,n){var r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=function(e){var t=lk("internal-error");t.customData=e,n(t)},r.type="text/javascript",r.charset="UTF-8",function(){var e,t;return null!==(t=null===(e=document.getElementsByTagName("head"))||void 0===e?void 0:e[0])&&void 0!==t?t:document}().appendChild(r)}))}function l_(e){return"__".concat(e).concat(Math.floor(1e6*Math.random()))}var f_=1e12,h_=function(){function e(t){y(this,e),this.auth=t,this.counter=f_,this._widgets=new Map}return g(e,[{key:"render",value:function(e,t){var n=this.counter;return this._widgets.set(n,new d_(e,this.auth.name,t||{})),this.counter++,n}},{key:"reset",value:function(e){var t,n=e||f_;null===(t=this._widgets.get(n))||void 0===t||t.delete(),this._widgets.delete(n)}},{key:"getResponse",value:function(e){var t,n=e||f_;return(null===(t=this._widgets.get(n))||void 0===t?void 0:t.getResponse())||""}},{key:"execute",value:function(){var e=se(oe().mark((function e(t){var n,r;return oe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t||f_,null===(n=this._widgets.get(r))||void 0===n||n.execute(),e.abrupt("return","");case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}(),d_=function(){function e(t,n,r){var i=this;y(this,e),this.params=r,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=function(){i.execute()};var a="string"===typeof t?document.getElementById(t):t;pk(a,"argument-error",{appName:n}),this.container=a,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}return g(e,[{key:"getResponse",value:function(){return this.checkIfDeleted(),this.responseToken}},{key:"delete",value:function(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}},{key:"execute",value:function(){var e=this;this.checkIfDeleted(),this.timerId||(this.timerId=window.setTimeout((function(){e.responseToken=function(e){for(var t=[],n="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",r=0;r<e;r++)t.push(n.charAt(Math.floor(Math.random()*n.length)));return t.join("")}(50);var t=e.params,n=t.callback,r=t["expired-callback"];if(n)try{n(e.responseToken)}catch(i){}e.timerId=window.setTimeout((function(){if(e.timerId=null,e.responseToken=null,r)try{r()}catch(i){}e.isVisible&&e.execute()}),6e4)}),500))}},{key:"checkIfDeleted",value:function(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}]),e}();var p_=l_("rcb"),v_=new xk(3e4,6e4),y_="https://www.google.com/recaptcha/api.js?",m_=function(){function e(){var t;y(this,e),this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!(null===(t=Bx().grecaptcha)||void 0===t?void 0:t.render)}return g(e,[{key:"load",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return pk(g_(n),e,"argument-error"),this.shouldResolveImmediately(n)?Promise.resolve(Bx().grecaptcha):new Promise((function(r,i){var a=Bx().setTimeout((function(){i(lk(e,"network-request-failed"))}),v_.get());Bx()[p_]=function(){Bx().clearTimeout(a),delete Bx()[p_];var o=Bx().grecaptcha;if(o){var u=o.render;o.render=function(e,n){var r=u(e,n);return t.counter++,r},t.hostLanguage=n,r(o)}else i(lk(e,"internal-error"))},c_("".concat(y_,"?").concat(Z({onload:p_,render:"explicit",hl:n}))).catch((function(){clearTimeout(a),i(lk(e,"internal-error"))}))}))}},{key:"clearedOneInstance",value:function(){this.counter--}},{key:"shouldResolveImmediately",value:function(e){var t;return!!(null===(t=Bx().grecaptcha)||void 0===t?void 0:t.render)&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}]),e}();function g_(e){return e.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(e)}var k_=function(){function e(){y(this,e)}return g(e,[{key:"load",value:function(){var e=se(oe().mark((function e(t){return oe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new h_(t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"clearedOneInstance",value:function(){}}]),e}(),b_="recaptcha",w_={theme:"light",type:"image"},x_=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Object.assign({},w_),r=arguments.length>2?arguments[2]:void 0;y(this,e),this.parameters=n,this.type=b_,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Tb(r),this.isInvisible="invisible"===this.parameters.size,pk("undefined"!==typeof document,this.auth,"operation-not-supported-in-this-environment");var i="string"===typeof t?document.getElementById(t):t;pk(i,this.auth,"argument-error"),this.container=i,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new k_:new m_,this.validateStartingState()}return g(e,[{key:"verify",value:function(){var e=se(oe().mark((function e(){var t,n,r,i=this;return oe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.assertNotDestroyed(),e.next=3,this.render();case 3:if(t=e.sent,n=this.getAssertedRecaptcha(),!(r=n.getResponse(t))){e.next=8;break}return e.abrupt("return",r);case 8:return e.abrupt("return",new Promise((function(e){i.tokenChangeListeners.add((function t(n){n&&(i.tokenChangeListeners.delete(t),e(n))})),i.isInvisible&&n.execute(t)})));case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;try{this.assertNotDestroyed()}catch(t){return Promise.reject(t)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch((function(t){throw e.renderPromise=null,t}))),this.renderPromise}},{key:"_reset",value:function(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}},{key:"clear",value:function(){var e=this;this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach((function(t){e.container.removeChild(t)}))}},{key:"validateStartingState",value:function(){pk(!this.parameters.sitekey,this.auth,"argument-error"),pk(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),pk("undefined"!==typeof document,this.auth,"operation-not-supported-in-this-environment")}},{key:"makeTokenCallback",value:function(e){var t=this;return function(n){if(t.tokenChangeListeners.forEach((function(e){return e(n)})),"function"===typeof e)e(n);else if("string"===typeof e){var r=Bx()[e];"function"===typeof r&&r(n)}}}},{key:"assertNotDestroyed",value:function(){pk(!this.destroyed,this.auth,"internal-error")}},{key:"makeRenderPromise",value:function(){var e=se(oe().mark((function e(){var t,n;return oe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.init();case 2:return this.widgetId||(t=this.container,this.isInvisible||(n=document.createElement("div"),t.appendChild(n),t=n),this.widgetId=this.getAssertedRecaptcha().render(t,this.parameters)),e.abrupt("return",this.widgetId);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"init",value:function(){var e=se(oe().mark((function e(){var t;return oe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return pk(bk()&&!qx(),this.auth,"internal-error"),e.next=3,__();case 3:return e.next=5,this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);case 5:return this.recaptcha=e.sent,e.next=8,u_(this.auth);case 8:pk(t=e.sent,this.auth,"internal-error"),this.parameters.sitekey=t;case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getAssertedRecaptcha",value:function(){return pk(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}]),e}();function __(){var e=null;return new Promise((function(t){"complete"!==document.readyState?(e=function(){return t()},window.addEventListener("load",e)):t()})).catch((function(t){throw e&&window.removeEventListener("load",e),t}))}var I_=function(){function e(t,n){y(this,e),this.verificationId=t,this.onConfirmation=n}return g(e,[{key:"confirm",value:function(e){var t=fw._fromVerification(this.verificationId,e);return this.onConfirmation(t)}}]),e}();function S_(){return(S_=se(oe().mark((function e(t,n,r){var i,a;return oe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Tb(t),e.next=3,N_(i,n,ae(r));case 3:return a=e.sent,e.abrupt("return",new I_(a,(function(e){return Bw(i,e)})));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function E_(e,t,n){return T_.apply(this,arguments)}function T_(){return(T_=se(oe().mark((function e(t,n,r){var i,a;return oe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=ae(t),e.next=3,Lw(!1,i,"phone");case 3:return e.next=5,N_(i.auth,n,ae(r));case 5:return a=e.sent,e.abrupt("return",new I_(a,(function(e){return zw(i,e)})));case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function C_(){return(C_=se(oe().mark((function e(t,n,r){var i,a;return oe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=ae(t),e.next=3,N_(i.auth,n,ae(r));case 3:return a=e.sent,e.abrupt("return",new I_(a,(function(e){return Gw(i,e)})));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function N_(e,t,n){return A_.apply(this,arguments)}function A_(){return A_=se(oe().mark((function e(t,n,r){var i,a,o,u,s,c,l,f,h;return oe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.verify();case 2:if(a=e.sent,e.prev=3,pk("string"===typeof a,t,"argument-error"),pk(r.type===b_,t,"argument-error"),!("session"in(o="string"===typeof n?{phoneNumber:n}:n))){e.next=26;break}if(u=o.session,!("phoneNumber"in o)){e.next=17;break}return pk("enroll"===u.type,t,"internal-error"),e.next=13,Cx(t,{idToken:u.credential,phoneEnrollmentInfo:{phoneNumber:o.phoneNumber,recaptchaToken:a}});case 13:return s=e.sent,e.abrupt("return",s.phoneSessionInfo.sessionInfo);case 17:return pk("signin"===u.type,t,"internal-error"),pk(c=(null===(i=o.multiFactorHint)||void 0===i?void 0:i.uid)||o.multiFactorUid,t,"missing-multi-factor-info"),e.next=22,o_(t,{mfaPendingCredential:u.credential,mfaEnrollmentId:c,phoneSignInInfo:{recaptchaToken:a}});case 22:return l=e.sent,e.abrupt("return",l.phoneResponseInfo.sessionInfo);case 24:e.next=31;break;case 26:return e.next=28,aw(t,{phoneNumber:o.phoneNumber,recaptchaToken:a});case 28:return f=e.sent,h=f.sessionInfo,e.abrupt("return",h);case 31:return e.prev=31,r._reset(),e.finish(31);case 34:case"end":return e.stop()}}),e,null,[[3,,31,34]])}))),A_.apply(this,arguments)}function D_(){return(D_=se(oe().mark((function e(t,n){return oe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Pw(ae(t),n);case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var R_=function(){function e(t){y(this,e),this.providerId=e.PROVIDER_ID,this.auth=Tb(t)}return g(e,[{key:"verifyPhoneNumber",value:function(e,t){return N_(this.auth,e,ae(t))}}],[{key:"credential",value:function(e,t){return fw._fromVerification(e,t)}},{key:"credentialFromResult",value:function(t){var n=t;return e.credentialFromTaggedObject(n)}},{key:"credentialFromError",value:function(t){return e.credentialFromTaggedObject(t.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var n=t.phoneNumber,r=t.temporaryProof;return n&&r?fw._fromTokenResponse(n,r):null}}]),e}();function P_(e,t){return t?gk(t):(pk(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}R_.PROVIDER_ID="phone",R_.PHONE_SIGN_IN_METHOD="phone";var O_=function(e){x(n,e);var t=T(n);function n(e){var r;return y(this,n),(r=t.call(this,"custom","custom")).params=e,r}return g(n,[{key:"_getIdTokenResponse",value:function(e){return nw(e,this._buildIdpRequest())}},{key:"_linkToIdToken",value:function(e,t){return nw(e,this._buildIdpRequest(t))}},{key:"_getReauthenticationResolver",value:function(e){return nw(e,this._buildIdpRequest())}},{key:"_buildIdpRequest",value:function(e){var t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}]),n}(Rb);function L_(e){return Vw(e.auth,new O_(e),e.bypassAuthState)}function M_(e){var t=e.auth,n=e.user;return pk(n,t,"internal-error"),Fw(n,new O_(e),e.bypassAuthState)}function F_(e){return U_.apply(this,arguments)}function U_(){return(U_=se(oe().mark((function e(t){var n,r;return oe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.auth,pk(r=t.user,n,"internal-error"),e.abrupt("return",Pw(r,new O_(t),t.bypassAuthState));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var V_=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]&&arguments[4];y(this,e),this.auth=t,this.resolver=r,this.user=i,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}return g(e,[{key:"execute",value:function(){var e=this;return new Promise(function(){var t=se(oe().mark((function t(n,r){return oe().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.pendingPromise={resolve:n,reject:r},t.prev=1,t.next=4,e.resolver._initialize(e.auth);case 4:return e.eventManager=t.sent,t.next=7,e.onExecution();case 7:e.eventManager.registerConsumer(e),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(1),e.reject(t.t0);case 13:case"end":return t.stop()}}),t,null,[[1,10]])})));return function(e,n){return t.apply(this,arguments)}}())}},{key:"onAuthEvent",value:function(){var e=se(oe().mark((function e(t){var n,r,i,a,o,u,s;return oe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.urlResponse,r=t.sessionId,i=t.postBody,a=t.tenantId,o=t.error,u=t.type,!o){e.next=4;break}return this.reject(o),e.abrupt("return");case 4:return s={auth:this.auth,requestUri:n,sessionId:r,tenantId:a||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState},e.prev=5,e.t0=this,e.next=9,this.getIdpTask(u)(s);case 9:e.t1=e.sent,e.t0.resolve.call(e.t0,e.t1),e.next=16;break;case 13:e.prev=13,e.t2=e.catch(5),this.reject(e.t2);case 16:case"end":return e.stop()}}),e,this,[[5,13]])})));return function(t){return e.apply(this,arguments)}}()},{key:"onError",value:function(e){this.reject(e)}},{key:"getIdpTask",value:function(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return L_;case"linkViaPopup":case"linkViaRedirect":return F_;case"reauthViaPopup":case"reauthViaRedirect":return M_;default:ck(this.auth,"internal-error")}}},{key:"resolve",value:function(e){yk(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}},{key:"reject",value:function(e){yk(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}},{key:"unregisterAndCleanUp",value:function(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}]),e}(),j_=new xk(2e3,1e4);function B_(e,t,n){return q_.apply(this,arguments)}function q_(){return(q_=se(oe().mark((function e(t,n,r){var i,a,o;return oe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Tb(t),hk(t,n,pw),a=P_(i,r),o=new W_(i,"signInViaPopup",n,a),e.abrupt("return",o.executeNotNull());case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function z_(){return(z_=se(oe().mark((function e(t,n,r){var i,a,o;return oe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return hk((i=ae(t)).auth,n,pw),a=P_(i.auth,r),o=new W_(i.auth,"reauthViaPopup",n,a,i),e.abrupt("return",o.executeNotNull());case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function K_(e,t,n){return G_.apply(this,arguments)}function G_(){return(G_=se(oe().mark((function e(t,n,r){var i,a,o;return oe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return hk((i=ae(t)).auth,n,pw),a=P_(i.auth,r),o=new W_(i.auth,"linkViaPopup",n,a,i),e.abrupt("return",o.executeNotNull());case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var W_=function(e){x(n,e);var t=T(n);function n(e,r,i,a,o){var u;return y(this,n),(u=t.call(this,e,r,a,o)).provider=i,u.authWindow=null,u.pollId=null,n.currentPopupAction&&n.currentPopupAction.cancel(),n.currentPopupAction=b(u),u}return g(n,[{key:"executeNotNull",value:function(){var e=se(oe().mark((function e(){var t;return oe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.execute();case 2:return pk(t=e.sent,this.auth,"internal-error"),e.abrupt("return",t);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"onExecution",value:function(){var e=se(oe().mark((function e(){var t,n=this;return oe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return yk(1===this.filter.length,"Popup operations only handle one event"),t=Vx(),e.next=4,this.resolver._openPopup(this.auth,this.provider,this.filter[0],t);case 4:this.authWindow=e.sent,this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch((function(e){n.reject(e)})),this.resolver._isIframeWebStorageSupported(this.auth,(function(e){e||n.reject(lk(n.auth,"web-storage-unsupported"))})),this.pollUserCancellation();case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"eventId",get:function(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}},{key:"cancel",value:function(){this.reject(lk(this.auth,"cancelled-popup-request"))}},{key:"cleanUp",value:function(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,n.currentPopupAction=null}},{key:"pollUserCancellation",value:function(){var e=this;!function t(){var n,r;(null===(r=null===(n=e.authWindow)||void 0===n?void 0:n.window)||void 0===r?void 0:r.closed)?e.pollId=window.setTimeout((function(){e.pollId=null,e.reject(lk(e.auth,"popup-closed-by-user"))}),2e3):e.pollId=window.setTimeout(t,j_.get())}()}}]),n}(V_);W_.currentPopupAction=null;var H_=new Map,Q_=function(e){x(n,e);var t=T(n);function n(e,r){var i,a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return y(this,n),(i=t.call(this,e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],r,void 0,a)).eventId=null,i}return g(n,[{key:"execute",value:function(){var e=se(oe().mark((function e(){var t,r;return oe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=H_.get(this.auth._key())){e.next=21;break}return e.prev=2,e.next=5,Y_(this.resolver,this.auth);case 5:if(!e.sent){e.next=12;break}return e.next=9,Ft(_(n.prototype),"execute",this).call(this);case 9:e.t0=e.sent,e.next=13;break;case 12:e.t0=null;case 13:r=e.t0,t=function(){return Promise.resolve(r)},e.next=20;break;case 17:e.prev=17,e.t1=e.catch(2),t=function(){return Promise.reject(e.t1)};case 20:H_.set(this.auth._key(),t);case 21:return this.bypassAuthState||H_.set(this.auth._key(),(function(){return Promise.resolve(null)})),e.abrupt("return",t());case 23:case"end":return e.stop()}}),e,this,[[2,17]])})));return function(){return e.apply(this,arguments)}}()},{key:"onAuthEvent",value:function(){var e=se(oe().mark((function e(t){var r;return oe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("signInViaRedirect"!==t.type){e.next=4;break}return e.abrupt("return",Ft(_(n.prototype),"onAuthEvent",this).call(this,t));case 4:if("unknown"!==t.type){e.next=7;break}return this.resolve(null),e.abrupt("return");case 7:if(!t.eventId){e.next=17;break}return e.next=10,this.auth._redirectUserForId(t.eventId);case 10:if(!(r=e.sent)){e.next=16;break}return this.user=r,e.abrupt("return",Ft(_(n.prototype),"onAuthEvent",this).call(this,t));case 16:this.resolve(null);case 17:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"onExecution",value:function(){var e=se(oe().mark((function e(){return oe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"cleanUp",value:function(){}}]),n}(V_);function Y_(e,t){return $_.apply(this,arguments)}function $_(){return($_=se(oe().mark((function e(t,n){var r,i,a;return oe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=tI(n),i=eI(t),e.next=4,i._isAvailable();case 4:if(e.sent){e.next=6;break}return e.abrupt("return",!1);case 6:return e.next=8,i._get(r);case 8:return e.t0=e.sent,a="true"===e.t0,e.next=12,i._remove(r);case 12:return e.abrupt("return",a);case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function X_(e,t){return J_.apply(this,arguments)}function J_(){return(J_=se(oe().mark((function e(t,n){return oe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",eI(t)._set(tI(n),"true"));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Z_(e,t){H_.set(e._key(),t)}function eI(e){return gk(e._redirectPersistence)}function tI(e){return lb("pendingRedirect",e.config.apiKey,e.name)}function nI(e,t,n){return function(e,t,n){return rI.apply(this,arguments)}(e,t,n)}function rI(){return(rI=se(oe().mark((function e(t,n,r){var i,a;return oe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Tb(t),hk(t,n,pw),e.next=4,i._initializationPromise;case 4:return a=P_(i,r),e.next=7,X_(a,i);case 7:return e.abrupt("return",a._openRedirect(i,n,"signInViaRedirect"));case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function iI(e,t,n){return function(e,t,n){return aI.apply(this,arguments)}(e,t,n)}function aI(){return(aI=se(oe().mark((function e(t,n,r){var i,a,o;return oe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return hk((i=ae(t)).auth,n,pw),e.next=4,i.auth._initializationPromise;case 4:return a=P_(i.auth,r),e.next=7,X_(a,i.auth);case 7:return e.next=9,hI(i);case 9:return o=e.sent,e.abrupt("return",a._openRedirect(i.auth,n,"reauthViaRedirect",o));case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function oI(e,t,n){return function(e,t,n){return uI.apply(this,arguments)}(e,t,n)}function uI(){return(uI=se(oe().mark((function e(t,n,r){var i,a,o;return oe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return hk((i=ae(t)).auth,n,pw),e.next=4,i.auth._initializationPromise;case 4:return a=P_(i.auth,r),e.next=7,Lw(!1,i,n.providerId);case 7:return e.next=9,X_(a,i.auth);case 9:return e.next=11,hI(i);case 11:return o=e.sent,e.abrupt("return",a._openRedirect(i.auth,n,"linkViaRedirect",o));case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function sI(e,t){return cI.apply(this,arguments)}function cI(){return(cI=se(oe().mark((function e(t,n){return oe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Tb(t)._initializationPromise;case 2:return e.abrupt("return",lI(t,n,!1));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function lI(e,t){return fI.apply(this,arguments)}function fI(){return fI=se(oe().mark((function e(t,n){var r,i,a,o,u,s=arguments;return oe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=s.length>2&&void 0!==s[2]&&s[2],i=Tb(t),a=P_(i,n),o=new Q_(i,a,r),e.next=6,o.execute();case 6:if(!(u=e.sent)||r){e.next=13;break}return delete u.user._redirectEventId,e.next=11,i._persistUserIfCurrent(u.user);case 11:return e.next=13,i._setRedirectUser(null,n);case 13:return e.abrupt("return",u);case 14:case"end":return e.stop()}}),e)}))),fI.apply(this,arguments)}function hI(e){return dI.apply(this,arguments)}function dI(){return(dI=se(oe().mark((function e(t){var n;return oe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Vx("".concat(t.uid,":::")),t._redirectEventId=n,e.next=4,t.auth._setRedirectUser(t);case 4:return e.next=6,t.auth._persistUserIfCurrent(t);case 6:return e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var pI=function(){function e(t){y(this,e),this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}return g(e,[{key:"registerConsumer",value:function(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}},{key:"unregisterConsumer",value:function(e){this.consumers.delete(e)}},{key:"onEvent",value:function(e){var t=this;if(this.hasEventBeenHandled(e))return!1;var n=!1;return this.consumers.forEach((function(r){t.isEventForConsumer(e,r)&&(n=!0,t.sendToConsumer(e,r),t.saveEventToCache(e))})),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return yI(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}},{key:"sendToConsumer",value:function(e,t){var n;if(e.error&&!yI(e)){var r=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(lk(this.auth,r))}else t.onAuthEvent(e)}},{key:"isEventForConsumer",value:function(e,t){var n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}},{key:"hasEventBeenHandled",value:function(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(vI(e))}},{key:"saveEventToCache",value:function(e){this.cachedEventUids.add(vI(e)),this.lastProcessedEventTime=Date.now()}}]),e}();function vI(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter((function(e){return e})).join("-")}function yI(e){var t=e.type,n=e.error;return"unknown"===t&&(null===n||void 0===n?void 0:n.code)==="auth/".concat("no-auth-event")}function mI(e){return gI.apply(this,arguments)}function gI(){return gI=se(oe().mark((function e(t){var n,r=arguments;return oe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.length>1&&void 0!==r[1]?r[1]:{},e.abrupt("return",Ck(t,"GET","/v1/projects",n));case 2:case"end":return e.stop()}}),e)}))),gI.apply(this,arguments)}var kI=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,bI=/^https?/;function wI(){return(wI=se(oe().mark((function e(t){var n,r,i,a,o;return oe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.config.emulator){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,mI(t);case 4:n=e.sent,r=n.authorizedDomains,i=k(r),e.prev=7,i.s();case 9:if((a=i.n()).done){e.next=20;break}if(o=a.value,e.prev=11,!xI(o)){e.next=14;break}return e.abrupt("return");case 14:e.next=18;break;case 16:e.prev=16,e.t0=e.catch(11);case 18:e.next=9;break;case 20:e.next=25;break;case 22:e.prev=22,e.t1=e.catch(7),i.e(e.t1);case 25:return e.prev=25,i.f(),e.finish(25);case 28:ck(t,"unauthorized-domain");case 29:case"end":return e.stop()}}),e,null,[[7,22,25,28],[11,16]])})))).apply(this,arguments)}function xI(e){var t=kk(),n=new URL(t),r=n.protocol,i=n.hostname;if(e.startsWith("chrome-extension://")){var a=new URL(e);return""===a.hostname&&""===i?"chrome-extension:"===r&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===r&&a.hostname===i}if(!bI.test(r))return!1;if(kI.test(e))return i===e;var o=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(i)}var _I=new xk(3e4,6e4);function II(){var e=Bx().___jsl;if(null===e||void 0===e?void 0:e.H)for(var t=0,n=Object.keys(e.H);t<n.length;t++){var r=n[t];if(e.H[r].r=e.H[r].r||[],e.H[r].L=e.H[r].L||[],e.H[r].r=p(e.H[r].L),e.CP)for(var i=0;i<e.CP.length;i++)e.CP[i]=null}}var SI=null;function EI(e){return SI=SI||function(e){return new Promise((function(t,n){var r,i,a;function o(){II(),gapi.load("gapi.iframes",{callback:function(){t(gapi.iframes.getContext())},ontimeout:function(){II(),n(lk(e,"network-request-failed"))},timeout:_I.get()})}if(null===(i=null===(r=Bx().gapi)||void 0===r?void 0:r.iframes)||void 0===i?void 0:i.Iframe)t(gapi.iframes.getContext());else{if(!(null===(a=Bx().gapi)||void 0===a?void 0:a.load)){var u=l_("iframefcb");return Bx()[u]=function(){gapi.load?o():n(lk(e,"network-request-failed"))},c_("https://apis.google.com/js/api.js?onload=".concat(u)).catch((function(e){return n(e)}))}o()}})).catch((function(e){throw SI=null,e}))}(e),SI}var TI=new xk(5e3,15e3),CI={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},NI=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function AI(e){var t=e.config;pk(t.authDomain,e,"auth-domain-config-required");var n=t.emulator?_k(t,"emulator/auth/iframe"):"https://".concat(e.config.authDomain,"/").concat("__/auth/iframe"),r={apiKey:t.apiKey,appName:e.name,v:it},i=NI.get(e.config.apiHost);i&&(r.eid=i);var a=e._getFrameworks();return a.length&&(r.fw=a.join(",")),"".concat(n,"?").concat(Z(r).slice(1))}function DI(e){return RI.apply(this,arguments)}function RI(){return RI=se(oe().mark((function e(t){var n,r;return oe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,EI(t);case 2:return n=e.sent,pk(r=Bx().gapi,t,"internal-error"),e.abrupt("return",n.open({where:document.body,url:AI(t),messageHandlersFilter:r.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:CI,dontclear:!0},(function(e){return new Promise(function(){var n=se(oe().mark((function n(r,i){var a,o,u;return oe().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return u=function(){Bx().clearTimeout(o),r(e)},n.next=3,e.restyle({setHideOnLeave:!1});case 3:a=lk(t,"network-request-failed"),o=Bx().setTimeout((function(){i(a)}),TI.get()),e.ping(u).then(u,(function(){i(a)}));case 6:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}())})));case 6:case"end":return e.stop()}}),e)}))),RI.apply(this,arguments)}var PI={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},OI="_blank",LI="http://localhost",MI=function(){function e(t){y(this,e),this.window=t,this.associatedEvent=null}return g(e,[{key:"close",value:function(){if(this.window)try{this.window.close()}catch(e){}}}]),e}();function FI(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:500,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:600,a=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString(),u="",c=Object.assign(Object.assign({},PI),{width:r.toString(),height:i.toString(),top:a,left:o}),l=j().toLowerCase();n&&(u=vb(l)?OI:n),db(l)&&(t=t||LI,c.scrollbars="yes");var f=Object.entries(c).reduce((function(e,t){var n=s(t,2),r=n[0],i=n[1];return"".concat(e).concat(r,"=").concat(i,",")}),"");if(wb(l)&&"_self"!==u)return UI(t||"",u),new MI(null);var h=window.open(t||"",u,f);pk(h,e,"popup-blocked");try{h.focus()}catch(d){}return new MI(h)}function UI(e,t){var n=document.createElement("a");n.href=e,n.target=t;var r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}var VI="__/auth/handler",jI="emulator/auth/handler";function BI(e,t,n,r,i,a){pk(e.config.authDomain,e,"auth-domain-config-required"),pk(e.config.apiKey,e,"invalid-api-key");var o={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:it,eventId:i};if(t instanceof pw){t.setDefaultLanguage(e.languageCode),o.providerId=t.providerId||"",function(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}(t.getCustomParameters())||(o.customParameters=JSON.stringify(t.getCustomParameters()));for(var u=0,c=Object.entries(a||{});u<c.length;u++){var l=s(c[u],2),f=l[0],h=l[1];o[f]=h}}if(t instanceof vw){var d=t.getScopes().filter((function(e){return""!==e}));d.length>0&&(o.scopes=d.join(","))}e.tenantId&&(o.tid=e.tenantId);for(var p=o,v=0,y=Object.keys(p);v<y.length;v++){var m=y[v];void 0===p[m]&&delete p[m]}return"".concat(function(e){var t=e.config;if(!t.emulator)return"https://".concat(t.authDomain,"/").concat(VI);return _k(t,jI)}(e),"?").concat(Z(p).slice(1))}var qI="webStorageSupport",zI=function(){function e(){y(this,e),this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Mx,this._completeRedirectFn=lI,this._overrideRedirectResult=Z_}return g(e,[{key:"_openPopup",value:function(){var e=se(oe().mark((function e(t,n,r,i){var a,o;return oe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return yk(null===(a=this.eventManagers[t._key()])||void 0===a?void 0:a.manager,"_initialize() not called before _openPopup()"),o=BI(t,n,r,kk(),i),e.abrupt("return",FI(t,o,Vx()));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_openRedirect",value:function(){var e=se(oe().mark((function e(t,n,r,i){return oe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._originValidation(t);case 2:return a=BI(t,n,r,kk(),i),Bx().location.href=a,e.abrupt("return",new Promise((function(){})));case 4:case"end":return e.stop()}var a}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_initialize",value:function(e){var t=this,n=e._key();if(this.eventManagers[n]){var r=this.eventManagers[n],i=r.manager,a=r.promise;return i?Promise.resolve(i):(yk(a,"If manager is not set, promise should be"),a)}var o=this.initAndGetManager(e);return this.eventManagers[n]={promise:o},o.catch((function(){delete t.eventManagers[n]})),o}},{key:"initAndGetManager",value:function(){var e=se(oe().mark((function e(t){var n,r;return oe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,DI(t);case 2:return n=e.sent,r=new pI(t),n.register("authEvent",(function(e){return pk(null===e||void 0===e?void 0:e.authEvent,t,"invalid-auth-event"),{status:r.onEvent(e.authEvent)?"ACK":"ERROR"}}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:r},this.iframes[t._key()]=n,e.abrupt("return",r);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_isIframeWebStorageSupported",value:function(e,t){this.iframes[e._key()].send(qI,{type:qI},(function(n){var r,i=null===(r=null===n||void 0===n?void 0:n[0])||void 0===r?void 0:r.webStorageSupport;void 0!==i&&t(!!i),ck(e,"internal-error")}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}},{key:"_originValidation",value:function(e){var t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=function(e){return wI.apply(this,arguments)}(e)),this.originValidationPromises[t]}},{key:"_shouldInitProactively",get:function(){return _b()||pb()||bb()}}]),e}(),KI=zI,GI=function(e){x(n,e);var t=T(n);function n(e){var r;return y(this,n),(r=t.call(this,"phone")).credential=e,r}return g(n,[{key:"_finalizeEnroll",value:function(e,t,n){return function(e,t){return Ck(e,"POST","/v2/accounts/mfaEnrollment:finalize",Tk(e,t))}(e,{idToken:t,displayName:n,phoneVerificationInfo:this.credential._makeVerificationRequest()})}},{key:"_finalizeSignIn",value:function(e,t){return function(e,t){return Ck(e,"POST","/v2/accounts/mfaSignIn:finalize",Tk(e,t))}(e,{mfaPendingCredential:t,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}],[{key:"_fromCredential",value:function(e){return new n(e)}}]),n}(function(){function e(t){y(this,e),this.factorId=t}return g(e,[{key:"_process",value:function(e,t,n){switch(t.type){case"enroll":return this._finalizeEnroll(e,t.credential,n);case"signin":return this._finalizeSignIn(e,t.credential);default:return vk("unexpected MultiFactorSessionType")}}}]),e}()),WI=function(){function e(){y(this,e)}return g(e,null,[{key:"assertion",value:function(e){return GI._fromCredential(e)}}]),e}();WI.FACTOR_ID="phone";var HI="@firebase/auth",QI="0.21.3",YI=function(){function e(t){y(this,e),this.auth=t,this.internalListeners=new Map}return g(e,[{key:"getUid",value:function(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}},{key:"getToken",value:function(){var e=se(oe().mark((function e(t){var n;return oe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.assertAuthConfigured(),e.next=3,this.auth._initializationPromise;case 3:if(this.auth.currentUser){e.next=5;break}return e.abrupt("return",null);case 5:return e.next=7,this.auth.currentUser.getIdToken(t);case 7:return n=e.sent,e.abrupt("return",{accessToken:n});case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"addAuthTokenListener",value:function(e){if(this.assertAuthConfigured(),!this.internalListeners.has(e)){var t=this.auth.onIdTokenChanged((function(t){e((null===t||void 0===t?void 0:t.stsTokenManager.accessToken)||null)}));this.internalListeners.set(e,t),this.updateProactiveRefresh()}}},{key:"removeAuthTokenListener",value:function(e){this.assertAuthConfigured();var t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}},{key:"assertAuthConfigured",value:function(){pk(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}},{key:"updateProactiveRefresh",value:function(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}]),e}();var $I;!function(e){var t;null===(t=M())||void 0===t||t["_".concat(e)]}("authIdTokenMaxAge");function XI(){return window}$I="Browser",Xe(new ce("auth",(function(e,t){var n=t.options,r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),a=r.options,o=a.apiKey,u=a.authDomain;return function(e,t){pk(o&&!o.includes(":"),"invalid-api-key",{appName:e.name}),pk(!(null===u||void 0===u?void 0:u.includes(":")),"argument-error",{appName:e.name});var r={apiKey:o,authDomain:u,clientPlatform:$I,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Ib($I)},i=new Eb(e,t,r);return function(e,t){var n=(null===t||void 0===t?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(gk);(null===t||void 0===t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,null===t||void 0===t?void 0:t.popupRedirectResolver)}(i,n),i}(r,i)}),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((function(e,t,n){e.getProvider("auth-internal").initialize()}))),Xe(new ce("auth-internal",(function(e){return function(e){return new YI(e)}(Tb(e.getProvider("auth").getImmediate()))}),"PRIVATE").setInstantiationMode("EXPLICIT")),lt(HI,QI,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}($I)),lt(HI,QI,"esm2017");function JI(e,t,n){return ZI.apply(this,arguments)}function ZI(){return ZI=se(oe().mark((function e(t,n,r){var i,a,o,u,s;return oe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=XI(),o=a.BuildInfo,yk(n.sessionId,"AuthEvent did not contain a session ID"),e.next=4,aS(n.sessionId);case 4:return u=e.sent,s={},bb()?s.ibi=o.packageName:mb()?s.apn=o.packageName:ck(t,"operation-not-supported-in-this-environment"),o.displayName&&(s.appDisplayName=o.displayName),s.sessionId=u,e.abrupt("return",BI(t,r,n.type,void 0,null!==(i=n.eventId)&&void 0!==i?i:void 0,s));case 10:case"end":return e.stop()}}),e)}))),ZI.apply(this,arguments)}function eS(){return(eS=se(oe().mark((function e(t){var n,r,i;return oe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=XI(),r=n.BuildInfo,i={},bb()?i.iosBundleId=r.packageName:mb()?i.androidPackageName=r.packageName:ck(t,"operation-not-supported-in-this-environment"),e.next=5,mI(t,i);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function tS(e){var t=XI().cordova;return new Promise((function(n){t.plugins.browsertab.isAvailable((function(r){var i=null;r?t.plugins.browsertab.openUrl(e):i=t.InAppBrowser.open(e,function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:j();return/(iPad|iPhone|iPod).*OS 7_\d/i.test(e)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(e)}()?"_blank":"_system","location=yes"),n(i)}))}))}function nS(e,t,n){return rS.apply(this,arguments)}function rS(){return rS=se(oe().mark((function e(t,n,r){var i,a,o;return oe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=XI(),a=i.cordova,o=function(){},e.prev=2,e.next=5,new Promise((function(e,i){var u=null;function s(){var t;e();var n=null===(t=a.plugins.browsertab)||void 0===t?void 0:t.close;"function"===typeof n&&n(),"function"===typeof(null===r||void 0===r?void 0:r.close)&&r.close()}function c(){u||(u=window.setTimeout((function(){i(lk(t,"redirect-cancelled-by-user"))}),2e3))}function l(){"visible"===(null===document||void 0===document?void 0:document.visibilityState)&&c()}n.addPassiveListener(s),document.addEventListener("resume",c,!1),mb()&&document.addEventListener("visibilitychange",l,!1),o=function(){n.removePassiveListener(s),document.removeEventListener("resume",c,!1),document.removeEventListener("visibilitychange",l,!1),u&&window.clearTimeout(u)}}));case 5:return e.prev=5,o(),e.finish(5);case 8:case"end":return e.stop()}}),e,null,[[2,,5,8]])}))),rS.apply(this,arguments)}function iS(e){var t,n,r,i,a,o,u,s,c,l,f=XI();pk("function"===typeof(null===(t=null===f||void 0===f?void 0:f.universalLinks)||void 0===t?void 0:t.subscribe),e,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),pk("undefined"!==typeof(null===(n=null===f||void 0===f?void 0:f.BuildInfo)||void 0===n?void 0:n.packageName),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),pk("function"===typeof(null===(a=null===(i=null===(r=null===f||void 0===f?void 0:f.cordova)||void 0===r?void 0:r.plugins)||void 0===i?void 0:i.browsertab)||void 0===a?void 0:a.openUrl),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),pk("function"===typeof(null===(s=null===(u=null===(o=null===f||void 0===f?void 0:f.cordova)||void 0===o?void 0:o.plugins)||void 0===u?void 0:u.browsertab)||void 0===s?void 0:s.isAvailable),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),pk("function"===typeof(null===(l=null===(c=null===f||void 0===f?void 0:f.cordova)||void 0===c?void 0:c.InAppBrowser)||void 0===l?void 0:l.open),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}function aS(e){return oS.apply(this,arguments)}function oS(){return(oS=se(oe().mark((function e(t){var n,r,i;return oe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=uS(t),e.next=3,crypto.subtle.digest("SHA-256",n);case 3:return r=e.sent,i=Array.from(new Uint8Array(r)),e.abrupt("return",i.map((function(e){return e.toString(16).padStart(2,"0")})).join(""));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function uS(e){if(yk(/[0-9a-zA-Z]+/.test(e),"Can only convert alpha-numeric strings"),"undefined"!==typeof TextEncoder)return(new TextEncoder).encode(e);for(var t=new ArrayBuffer(e.length),n=new Uint8Array(t),r=0;r<e.length;r++)n[r]=e.charCodeAt(r);return n}var sS=function(e){x(n,e);var t=T(n);function n(){var e;return y(this,n),(e=t.apply(this,arguments)).passiveListeners=new Set,e.initPromise=new Promise((function(t){e.resolveInialized=t})),e}return g(n,[{key:"addPassiveListener",value:function(e){this.passiveListeners.add(e)}},{key:"removePassiveListener",value:function(e){this.passiveListeners.delete(e)}},{key:"resetRedirect",value:function(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}},{key:"onEvent",value:function(e){return this.resolveInialized(),this.passiveListeners.forEach((function(t){return t(e)})),Ft(_(n.prototype),"onEvent",this).call(this,e)}},{key:"initialized",value:function(){var e=se(oe().mark((function e(){return oe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.initPromise;case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(pI);function cS(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return{type:t,eventId:n,urlResponse:null,sessionId:pS(),postBody:null,tenantId:e.tenantId,error:lk(e,"no-auth-event")}}function lS(e,t){return vS()._set(yS(e),t)}function fS(e){return hS.apply(this,arguments)}function hS(){return(hS=se(oe().mark((function e(t){var n;return oe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,vS()._get(yS(t));case 2:if(!(n=e.sent)){e.next=6;break}return e.next=6,vS()._remove(yS(t));case 6:return e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function dS(e,t){var n,r,i=function(e){var t=mS(e),n=t.link?decodeURIComponent(t.link):void 0,r=mS(n).link,i=t.deep_link_id?decodeURIComponent(t.deep_link_id):void 0;return mS(i).link||i||r||n||e}(t);if(i.includes("/__/auth/callback")){var a=mS(i),o=a.firebaseError?function(e){try{return JSON.parse(e)}catch(t){return null}}(decodeURIComponent(a.firebaseError)):null,u=null===(r=null===(n=null===o||void 0===o?void 0:o.code)||void 0===n?void 0:n.split("auth/"))||void 0===r?void 0:r[1],s=u?lk(u):null;return s?{type:e.type,eventId:e.eventId,tenantId:e.tenantId,error:s,urlResponse:null,sessionId:null,postBody:null}:{type:e.type,eventId:e.eventId,tenantId:e.tenantId,sessionId:e.sessionId,urlResponse:i,postBody:null}}return null}function pS(){for(var e=[],t="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",n=0;n<20;n++){var r=Math.floor(Math.random()*t.length);e.push(t.charAt(r))}return e.join("")}function vS(){return gk(Ox)}function yS(e){return lb("authEvent",e.config.apiKey,e.name)}function mS(e){if(!(null===e||void 0===e?void 0:e.includes("?")))return{};var t,n=e.split("?"),r=i(t=n)||d(t)||o(t)||u();r[0];return ee(r.slice(1).join("?"))}var gS=function(){function e(){y(this,e),this._redirectPersistence=Mx,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=lI,this._overrideRedirectResult=Z_}return g(e,[{key:"_initialize",value:function(){var e=se(oe().mark((function e(t){var n,r;return oe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t._key(),(r=this.eventManagers.get(n))||(r=new sS(t),this.eventManagers.set(n,r),this.attachCallbackListeners(t,r)),e.abrupt("return",r);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_openPopup",value:function(e){ck(e,"operation-not-supported-in-this-environment")}},{key:"_openRedirect",value:function(){var e=se(oe().mark((function e(t,n,r,i){var a,o,u,s;return oe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return iS(t),e.next=3,this._initialize(t);case 3:return a=e.sent,e.next=6,a.initialized();case 6:return a.resetRedirect(),H_.clear(),e.next=10,this._originValidation(t);case 10:return o=cS(t,r,i),e.next=13,lS(t,o);case 13:return e.next=15,JI(t,o,n);case 15:return u=e.sent,e.next=18,tS(u);case 18:return s=e.sent,e.abrupt("return",nS(t,a,s));case 20:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_isIframeWebStorageSupported",value:function(e,t){throw new Error("Method not implemented.")}},{key:"_originValidation",value:function(e){var t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=function(e){return eS.apply(this,arguments)}(e)),this.originValidationPromises[t]}},{key:"attachCallbackListeners",value:function(e,t){var n=XI(),r=n.universalLinks,i=n.handleOpenURL,a=n.BuildInfo,o=setTimeout(se(oe().mark((function n(){return oe().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,fS(e);case 2:t.onEvent(bS());case 3:case"end":return n.stop()}}),n)}))),500),u=function(){var n=se(oe().mark((function n(r){var i,a;return oe().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return clearTimeout(o),n.next=3,fS(e);case 3:i=n.sent,a=null,i&&(null===r||void 0===r?void 0:r.url)&&(a=dS(i,r.url)),t.onEvent(a||bS());case 7:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}();"undefined"!==typeof r&&"function"===typeof r.subscribe&&r.subscribe(null,u);var s=i,c="".concat(a.packageName.toLowerCase(),"://");XI().handleOpenURL=function(){var e=se(oe().mark((function e(t){return oe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.toLowerCase().startsWith(c)&&u({url:t}),"function"===typeof s)try{s(t)}catch(n){console.error(n)}case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}}]),e}(),kS=gS;function bS(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:lk("no-auth-event")}}function wS(){var e;return(null===(e=null===self||void 0===self?void 0:self.location)||void 0===e?void 0:e.protocol)||null}function xS(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:j();return!("file:"!==wS()&&"ionic:"!==wS()&&"capacitor:"!==wS()||!e.toLowerCase().match(/iphone|ipad|ipod|android/))}function _S(){return K()&&11===(null===document||void 0===document?void 0:document.documentMode)}function IS(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:j();return/Edge\/\d+/.test(e)}function SS(){try{var e=self.localStorage,t=Vx();if(e)return e.setItem(t,"1"),e.removeItem(t),!function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:j();return _S()||IS(e)}()||G()}catch(n){return ES()&&G()}return!1}function ES(){return"undefined"!==typeof n.g&&"WorkerGlobalScope"in n.g&&"importScripts"in n.g}function TS(){return("http:"===wS()||"https:"===wS()||q()||xS())&&!(z()||B())&&SS()&&!ES()}function CS(){return xS()&&"undefined"!==typeof document}function NS(){return AS.apply(this,arguments)}function AS(){return(AS=se(oe().mark((function e(){return oe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(CS()){e.next=2;break}return e.abrupt("return",!1);case 2:return e.abrupt("return",new Promise((function(e){var t=setTimeout((function(){e(!1)}),1e3);document.addEventListener("deviceready",(function(){clearTimeout(t),e(!0)}))})));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var DS={LOCAL:"local",NONE:"none",SESSION:"session"},RS=pk,PS="persistence";function OS(e,t){RS(Object.values(DS).includes(t),e,"invalid-persistence-type"),z()?RS(t!==DS.SESSION,e,"unsupported-persistence-type"):B()?RS(t===DS.NONE,e,"unsupported-persistence-type"):ES()?RS(t===DS.NONE||t===DS.LOCAL&&G(),e,"unsupported-persistence-type"):RS(t===DS.NONE||SS(),e,"unsupported-persistence-type")}function LS(e){return MS.apply(this,arguments)}function MS(){return(MS=se(oe().mark((function e(t){var n,r;return oe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._initializationPromise;case 2:n=FS(),r=lb(PS,t.config.apiKey,t.name),n&&n.setItem(r,t._getPersistence());case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function FS(){var e;try{return(null===(e="undefined"!==typeof window?window:null)||void 0===e?void 0:e.sessionStorage)||null}catch(t){return null}}var US=pk,VS=function(){function e(){y(this,e),this.browserResolver=gk(KI),this.cordovaResolver=gk(kS),this.underlyingResolver=null,this._redirectPersistence=Mx,this._completeRedirectFn=lI,this._overrideRedirectResult=Z_}return g(e,[{key:"_initialize",value:function(){var e=se(oe().mark((function e(t){return oe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.selectUnderlyingResolver();case 2:return e.abrupt("return",this.assertedUnderlyingResolver._initialize(t));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_openPopup",value:function(){var e=se(oe().mark((function e(t,n,r,i){return oe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.selectUnderlyingResolver();case 2:return e.abrupt("return",this.assertedUnderlyingResolver._openPopup(t,n,r,i));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_openRedirect",value:function(){var e=se(oe().mark((function e(t,n,r,i){return oe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.selectUnderlyingResolver();case 2:return e.abrupt("return",this.assertedUnderlyingResolver._openRedirect(t,n,r,i));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_isIframeWebStorageSupported",value:function(e,t){this.assertedUnderlyingResolver._isIframeWebStorageSupported(e,t)}},{key:"_originValidation",value:function(e){return this.assertedUnderlyingResolver._originValidation(e)}},{key:"_shouldInitProactively",get:function(){return CS()||this.browserResolver._shouldInitProactively}},{key:"assertedUnderlyingResolver",get:function(){return US(this.underlyingResolver,"internal-error"),this.underlyingResolver}},{key:"selectUnderlyingResolver",value:function(){var e=se(oe().mark((function e(){var t;return oe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.underlyingResolver){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,NS();case 4:t=e.sent,this.underlyingResolver=t?this.cordovaResolver:this.browserResolver;case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function jS(e){return e.unwrap()}function BS(e,t){var n,r=null===(n=t.customData)||void 0===n?void 0:n._tokenResponse;if("auth/multi-factor-auth-required"===(null===t||void 0===t?void 0:t.code))t.resolver=new WS(e,function(e,t){var n,r=ae(e),i=t;return pk(t.customData.operationType,r,"argument-error"),pk(null===(n=i.customData._serverResponse)||void 0===n?void 0:n.mfaPendingCredential,r,"argument-error"),Tx._fromError(r,i)}(e,t));else if(r){var i=qS(t),a=t;i&&(a.credential=i,a.tenantId=r.tenantId||void 0,a.email=r.email||void 0,a.phoneNumber=r.phoneNumber||void 0)}}function qS(e){var t=(e instanceof W?e.customData:e)._tokenResponse;if(!t)return null;if(!(e instanceof W)&&"temporaryProof"in t&&"phoneNumber"in t)return R_.credentialFromResult(e);var n,r=t.providerId;if(!r||r===Yg)return null;switch(r){case Qg:n=gw;break;case Wg:n=mw;break;case Hg:n=kw;break;case $g:n=xw;break;default:var i=t.oauthIdToken,a=t.oauthAccessToken,o=t.oauthTokenSecret,u=t.pendingToken,s=t.nonce;return a||o||i||u?u?r.startsWith("saml.")?bw._create(r,u):iw._fromParams({providerId:r,signInMethod:r,pendingToken:u,idToken:i,accessToken:a}):new yw(r).credential({idToken:i,accessToken:a,rawNonce:s}):null}return e instanceof W?n.credentialFromError(e):n.credentialFromResult(e)}function zS(e,t){return t.catch((function(t){throw t instanceof W&&BS(e,t),t})).then((function(e){var t,n=e.operationType,r=e.user;return{operationType:n,credential:(t=e,qS(t)),additionalUserInfo:Sx(e),user:HS.getOrCreate(r)}}))}function KS(e,t){return GS.apply(this,arguments)}function GS(){return(GS=se(oe().mark((function e(t,n){var r;return oe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n;case 2:return r=e.sent,e.abrupt("return",{verificationId:r.verificationId,confirm:function(e){return zS(t,r.confirm(e))}});case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var WS=function(){function e(t,n){y(this,e),this.resolver=n,this.auth=t.wrapped()}return g(e,[{key:"session",get:function(){return this.resolver.session}},{key:"hints",get:function(){return this.resolver.hints}},{key:"resolveSignIn",value:function(e){return zS(jS(this.auth),this.resolver.resolveSignIn(e))}}]),e}(),HS=function(){function e(t){y(this,e),this._delegate=t,this.multiFactor=function(e){var t=ae(e);return Ax.has(t)||Ax.set(t,Nx._fromUser(t)),Ax.get(t)}(t)}return g(e,[{key:"delete",value:function(){return this._delegate.delete()}},{key:"reload",value:function(){return this._delegate.reload()}},{key:"toJSON",value:function(){return this._delegate.toJSON()}},{key:"getIdTokenResult",value:function(e){return this._delegate.getIdTokenResult(e)}},{key:"getIdToken",value:function(e){return this._delegate.getIdToken(e)}},{key:"linkAndRetrieveDataWithCredential",value:function(e){return this.linkWithCredential(e)}},{key:"linkWithCredential",value:function(){var e=se(oe().mark((function e(t){return oe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",zS(this.auth,zw(this._delegate,t)));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"linkWithPhoneNumber",value:function(){var e=se(oe().mark((function e(t,n){return oe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",KS(this.auth,E_(this._delegate,t,n)));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"linkWithPopup",value:function(){var e=se(oe().mark((function e(t){return oe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",zS(this.auth,K_(this._delegate,t,VS)));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"linkWithRedirect",value:function(){var e=se(oe().mark((function e(t){return oe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,LS(Tb(this.auth));case 2:return e.abrupt("return",oI(this._delegate,t,VS));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"reauthenticateAndRetrieveDataWithCredential",value:function(e){return this.reauthenticateWithCredential(e)}},{key:"reauthenticateWithCredential",value:function(){var e=se(oe().mark((function e(t){return oe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",zS(this.auth,Gw(this._delegate,t)));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"reauthenticateWithPhoneNumber",value:function(e,t){return KS(this.auth,function(e,t,n){return C_.apply(this,arguments)}(this._delegate,e,t))}},{key:"reauthenticateWithPopup",value:function(e){return zS(this.auth,function(e,t,n){return z_.apply(this,arguments)}(this._delegate,e,VS))}},{key:"reauthenticateWithRedirect",value:function(){var e=se(oe().mark((function e(t){return oe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,LS(Tb(this.auth));case 2:return e.abrupt("return",iI(this._delegate,t,VS));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"sendEmailVerification",value:function(e){return function(e,t){return hx.apply(this,arguments)}(this._delegate,e)}},{key:"unlink",value:function(){var e=se(oe().mark((function e(t){return oe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Dw(this._delegate,t);case 2:return e.abrupt("return",this);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"updateEmail",value:function(e){return function(e,t){return mx(ae(e),t,null)}(this._delegate,e)}},{key:"updatePassword",value:function(e){return function(e,t){return mx(ae(e),null,t)}(this._delegate,e)}},{key:"updatePhoneNumber",value:function(e){return function(e,t){return D_.apply(this,arguments)}(this._delegate,e)}},{key:"updateProfile",value:function(e){return function(e,t){return yx.apply(this,arguments)}(this._delegate,e)}},{key:"verifyBeforeUpdateEmail",value:function(e,t){return function(e,t,n){return dx.apply(this,arguments)}(this._delegate,e,t)}},{key:"emailVerified",get:function(){return this._delegate.emailVerified}},{key:"isAnonymous",get:function(){return this._delegate.isAnonymous}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"phoneNumber",get:function(){return this._delegate.phoneNumber}},{key:"providerData",get:function(){return this._delegate.providerData}},{key:"refreshToken",get:function(){return this._delegate.refreshToken}},{key:"tenantId",get:function(){return this._delegate.tenantId}},{key:"displayName",get:function(){return this._delegate.displayName}},{key:"email",get:function(){return this._delegate.email}},{key:"photoURL",get:function(){return this._delegate.photoURL}},{key:"providerId",get:function(){return this._delegate.providerId}},{key:"uid",get:function(){return this._delegate.uid}},{key:"auth",get:function(){return this._delegate.auth}}],[{key:"getOrCreate",value:function(t){return e.USER_MAP.has(t)||e.USER_MAP.set(t,new e(t)),e.USER_MAP.get(t)}}]),e}();HS.USER_MAP=new WeakMap;var QS=pk,YS=function(){function e(t,n){if(y(this,e),this.app=t,n.isInitialized())return this._delegate=n.getImmediate(),void this.linkUnderlyingAuth();var r=t.options.apiKey;QS(r,"invalid-api-key",{appName:t.name}),QS(r,"invalid-api-key",{appName:t.name});var i="undefined"!==typeof window?VS:void 0;this._delegate=n.initialize({options:{persistence:XS(r,t.name),popupRedirectResolver:i}}),this._delegate._updateErrorMap(ik),this.linkUnderlyingAuth()}return g(e,[{key:"emulatorConfig",get:function(){return this._delegate.emulatorConfig}},{key:"currentUser",get:function(){return this._delegate.currentUser?HS.getOrCreate(this._delegate.currentUser):null}},{key:"languageCode",get:function(){return this._delegate.languageCode},set:function(e){this._delegate.languageCode=e}},{key:"settings",get:function(){return this._delegate.settings}},{key:"tenantId",get:function(){return this._delegate.tenantId},set:function(e){this._delegate.tenantId=e}},{key:"useDeviceLanguage",value:function(){this._delegate.useDeviceLanguage()}},{key:"signOut",value:function(){return this._delegate.signOut()}},{key:"useEmulator",value:function(e,t){Nb(this._delegate,e,t)}},{key:"applyActionCode",value:function(e){return function(e,t){return tx.apply(this,arguments)}(this._delegate,e)}},{key:"checkActionCode",value:function(e){return nx(this._delegate,e)}},{key:"confirmPasswordReset",value:function(e,t){return function(e,t,n){return ex.apply(this,arguments)}(this._delegate,e,t)}},{key:"createUserWithEmailAndPassword",value:function(){var e=se(oe().mark((function e(t,n){return oe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",zS(this._delegate,ax(this._delegate,t,n)));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"fetchProvidersForEmail",value:function(e){return this.fetchSignInMethodsForEmail(e)}},{key:"fetchSignInMethodsForEmail",value:function(e){return function(e,t){return fx.apply(this,arguments)}(this._delegate,e)}},{key:"isSignInWithEmailLink",value:function(e){return function(e,t){var n=hw.parseLink(t);return"EMAIL_SIGNIN"===(null===n||void 0===n?void 0:n.operation)}(this._delegate,e)}},{key:"getRedirectResult",value:function(){var e=se(oe().mark((function e(){var t;return oe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return QS(TS(),this._delegate,"operation-not-supported-in-this-environment"),e.next=3,sI(this._delegate,VS);case 3:if(t=e.sent){e.next=6;break}return e.abrupt("return",{credential:null,user:null});case 6:return e.abrupt("return",zS(this._delegate,Promise.resolve(t)));case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"addFrameworkForLogging",value:function(e){!function(e,t){Tb(e)._logFramework(t)}(this._delegate,e)}},{key:"onAuthStateChanged",value:function(e,t,n){var r=$S(e,t,n),i=r.next,a=r.error,o=r.complete;return this._delegate.onAuthStateChanged(i,a,o)}},{key:"onIdTokenChanged",value:function(e,t,n){var r=$S(e,t,n),i=r.next,a=r.error,o=r.complete;return this._delegate.onIdTokenChanged(i,a,o)}},{key:"sendSignInLinkToEmail",value:function(e,t){return function(e,t,n){return ux.apply(this,arguments)}(this._delegate,e,t)}},{key:"sendPasswordResetEmail",value:function(e,t){return function(e,t,n){return Zw.apply(this,arguments)}(this._delegate,e,t||void 0)}},{key:"setPersistence",value:function(){var e=se(oe().mark((function e(t){var n,r;return oe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:OS(this._delegate,t),e.t0=t,e.next=e.t0===DS.SESSION?4:e.t0===DS.LOCAL?6:e.t0===DS.NONE?11:13;break;case 4:return n=Mx,e.abrupt("break",14);case 6:return e.next=8,gk(a_)._isAvailable();case 8:return r=e.sent,n=r?a_:Ox,e.abrupt("break",14);case 11:return n=cb,e.abrupt("break",14);case 13:return e.abrupt("return",ck("argument-error",{appName:this._delegate.name}));case 14:return e.abrupt("return",this._delegate.setPersistence(n));case 15:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"signInAndRetrieveDataWithCredential",value:function(e){return this.signInWithCredential(e)}},{key:"signInAnonymously",value:function(){return zS(this._delegate,function(e){return Tw.apply(this,arguments)}(this._delegate))}},{key:"signInWithCredential",value:function(e){return zS(this._delegate,Bw(this._delegate,e))}},{key:"signInWithCustomToken",value:function(e){return zS(this._delegate,function(e,t){return Yw.apply(this,arguments)}(this._delegate,e))}},{key:"signInWithEmailAndPassword",value:function(e,t){return zS(this._delegate,function(e,t,n){return Bw(ae(e),dw.credential(t,n))}(this._delegate,e,t))}},{key:"signInWithEmailLink",value:function(e,t){return zS(this._delegate,function(e,t,n){return sx.apply(this,arguments)}(this._delegate,e,t))}},{key:"signInWithPhoneNumber",value:function(e,t){return KS(this._delegate,function(e,t,n){return S_.apply(this,arguments)}(this._delegate,e,t))}},{key:"signInWithPopup",value:function(){var e=se(oe().mark((function e(t){return oe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return QS(TS(),this._delegate,"operation-not-supported-in-this-environment"),e.abrupt("return",zS(this._delegate,B_(this._delegate,t,VS)));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"signInWithRedirect",value:function(){var e=se(oe().mark((function e(t){return oe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return QS(TS(),this._delegate,"operation-not-supported-in-this-environment"),e.next=3,LS(this._delegate);case 3:return e.abrupt("return",nI(this._delegate,t,VS));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"updateCurrentUser",value:function(e){return this._delegate.updateCurrentUser(e)}},{key:"verifyPasswordResetCode",value:function(e){return function(e,t){return ix.apply(this,arguments)}(this._delegate,e)}},{key:"unwrap",value:function(){return this._delegate}},{key:"_delete",value:function(){return this._delegate._delete()}},{key:"linkUnderlyingAuth",value:function(){var e=this;this._delegate.wrapped=function(){return e}}}]),e}();function $S(e,t,n){var r=e;"function"!==typeof e&&(r=e.next,t=e.error,n=e.complete);var i=r;return{next:function(e){return i(e&&HS.getOrCreate(e))},error:t,complete:n}}function XS(e,t){var n=function(e,t){var n=FS();if(!n)return[];var r=lb(PS,e,t);switch(n.getItem(r)){case DS.NONE:return[cb];case DS.LOCAL:return[a_,Mx];case DS.SESSION:return[Mx];default:return[]}}(e,t);if("undefined"===typeof self||n.includes(a_)||n.push(a_),"undefined"!==typeof window)for(var r=0,i=[Ox,Mx];r<i.length;r++){var a=i[r];n.includes(a)||n.push(a)}return n.includes(cb)||n.push(cb),n}YS.Persistence=DS;var JS=function(){function e(){y(this,e),this.providerId="phone",this._delegate=new R_(jS(Ot.auth()))}return g(e,[{key:"verifyPhoneNumber",value:function(e,t){return this._delegate.verifyPhoneNumber(e,t)}},{key:"unwrap",value:function(){return this._delegate}}],[{key:"credential",value:function(e,t){return R_.credential(e,t)}}]),e}();JS.PHONE_SIGN_IN_METHOD=R_.PHONE_SIGN_IN_METHOD,JS.PROVIDER_ID=R_.PROVIDER_ID;var ZS=pk,eE=function(){function e(t,n){var r,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Ot.app();y(this,e),ZS(null===(r=i.options)||void 0===r?void 0:r.apiKey,"invalid-api-key",{appName:i.name}),this._delegate=new x_(t,n,i.auth()),this.type=this._delegate.type}return g(e,[{key:"clear",value:function(){this._delegate.clear()}},{key:"render",value:function(){return this._delegate.render()}},{key:"verify",value:function(){return this._delegate.verify()}}]),e}();!function(e){e.INTERNAL.registerComponent(new ce("auth-compat",(function(e){var t=e.getProvider("app-compat").getImmediate(),n=e.getProvider("auth");return new YS(t,n)}),"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:Xg,PASSWORD_RESET:Jg,RECOVER_EMAIL:Zg,REVERT_SECOND_FACTOR_ADDITION:ek,VERIFY_AND_CHANGE_EMAIL:tk,VERIFY_EMAIL:nk}},EmailAuthProvider:dw,FacebookAuthProvider:mw,GithubAuthProvider:kw,GoogleAuthProvider:gw,OAuthProvider:yw,SAMLAuthProvider:ww,PhoneAuthProvider:JS,PhoneMultiFactorGenerator:WI,RecaptchaVerifier:eE,TwitterAuthProvider:xw,Auth:YS,AuthCredential:Rb,Error:W}).setInstantiationMode("LAZY").setMultipleInstances(!1)),e.registerVersion("@firebase/auth-compat","0.3.3")}(Ot);var tE,nE=(new Date).getDay();switch(null==localStorage.getItem("theme")?(tE="true",localStorage.setItem("theme",tE)):"true"===localStorage.getItem("theme")?(document.body.classList.remove("light"),document.body.classList.add("light"),tE=localStorage.getItem("theme")):(document.body.classList.remove("light"),tE=localStorage.getItem("theme")),nE){case 1:nE="Monday";break;case 2:nE="Tuesday";break;case 3:nE="Wednesday";break;case 4:nE="Thursday";break;case 5:nE="Friday";break;case 6:nE="Saturday";break;case 0:nE="Sunday";break;default:nE="Your Day"}function rE(){return(new Date).toLocaleString()}var iE=function(){(0,t.useEffect)((function(){localStorage.getItem("user")||Lt.firestore().collection("users").doc().set({time:rE()}).then((function(){return localStorage.setItem("user",rE())})),Ot.auth().signInAnonymously().then((function(){console.log("signedIn")}))}),[]);var e=(0,t.useContext)(l),n=e.toDos,r=e.setToDos,i=s((0,t.useState)(""),2),a=i[0],o=i[1],u=function(e){e.preventDefault();var t=[].concat(p(n),[{id:Date.now(),time:rE(),text:a,status:!1}]);""!==a&&(r(t),o(""),localStorage.setItem("toDos",JSON.stringify(t)))};return(0,c.jsxs)("div",{className:"app",children:[(0,c.jsxs)("div",{className:"mainHeading",children:[(0,c.jsx)("div",{children:(0,c.jsx)("i",{className:"bx bxs-check-circle",style:{color:"#946c1d"}})}),(0,c.jsxs)("h1",{children:["ToDo List ",(0,c.jsxs)("span",{style:{fontSize:"15px"},children:["Made by ",(0,c.jsx)("label",{style:{color:"#946C1D"},children:" MUHAMMED IRFAN "})]})]}),(0,c.jsx)("i",{className:"bx bx-moon ",onClick:function(){"true"===tE?(tE="false",document.body.classList.remove("light")):(tE="true",document.body.classList.add("light")),localStorage.setItem("theme",tE)}})]}),(0,c.jsx)("div",{className:"subHeading",children:(0,c.jsxs)("h2",{children:["Whoop, it's ",(0,c.jsx)("span",{children:nE})," \ud83c\udf1d \u2615 "]})}),(0,c.jsx)("div",{className:"input",children:(0,c.jsxs)("form",{className:"form",onSubmit:u,action:"",children:[(0,c.jsx)("input",{id:"mainInput",value:a,onChange:function(e){return o(e.target.value)},type:"text",placeholder:"Add item..."}),(0,c.jsx)("i",{onClick:u,className:"fas fa-plus"})]})})]})};var aE=function(){return(0,c.jsx)("div",{children:(0,c.jsxs)(f,{children:[(0,c.jsx)(iE,{}),(0,c.jsx)(h,{})]})})};r.createRoot(document.getElementById("root")).render((0,c.jsx)(t.StrictMode,{children:(0,c.jsx)(aE,{})}))}()}();
//# sourceMappingURL=main.80fee0a6.js.map